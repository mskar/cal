<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Martin Laptev">
<title>Decalendar and Declock</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="dec_tabset_files/libs/clipboard/clipboard.min.js"></script>
<script src="dec_tabset_files/libs/quarto-html/quarto.js"></script>
<script src="dec_tabset_files/libs/quarto-html/popper.min.js"></script>
<script src="dec_tabset_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="dec_tabset_files/libs/quarto-html/anchor.min.js"></script>
<link href="dec_tabset_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="dec_tabset_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="dec_tabset_files/libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="dec_tabset_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="dec_tabset_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="dec_tabset_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="dec_tabset_files/libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script type="module" src="dec_tabset_files/libs/quarto-ojs/quarto-ojs-runtime.js"></script><link href="dec_tabset_files/libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
</head>
<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li>
<a href="#sec-intro" id="toc-sec-intro" class="nav-link active" data-scroll-target="#sec-intro"><span class="header-section-number">1</span> Introduction</a>
  <ul class="collapse">
<li><a href="#sec-intro-doty" id="toc-sec-intro-doty" class="nav-link" data-scroll-target="#sec-intro-doty"><span class="header-section-number">1.1</span> Day-of-the-year</a></li>
  <li><a href="#sec-intro-year" id="toc-sec-intro-year" class="nav-link" data-scroll-target="#sec-intro-year"><span class="header-section-number">1.2</span> Year</a></li>
  <li><a href="#sec-intro-dek" id="toc-sec-intro-dek" class="nav-link" data-scroll-target="#sec-intro-dek"><span class="header-section-number">1.3</span> Dek</a></li>
  </ul>
</li>
  <li>
<a href="#sec-basics" id="toc-sec-basics" class="nav-link" data-scroll-target="#sec-basics"><span class="header-section-number">2</span> Basic concepts</a>
  <ul class="collapse">
<li><a href="#sec-frac" id="toc-sec-frac" class="nav-link" data-scroll-target="#sec-frac"><span class="header-section-number">2.1</span> Fractions analogy</a></li>
  <li><a href="#sec-imp" id="toc-sec-imp" class="nav-link" data-scroll-target="#sec-imp"><span class="header-section-number">2.2</span> Implied tolerance and duration</a></li>
  <li><a href="#sec-context" id="toc-sec-context" class="nav-link" data-scroll-target="#sec-context"><span class="header-section-number">2.3</span> Context clues</a></li>
  <li><a href="#sec-stamp" id="toc-sec-stamp" class="nav-link" data-scroll-target="#sec-stamp"><span class="header-section-number">2.4</span> <code>Stamps</code></a></li>
  <li><a href="#sec-specific" id="toc-sec-specific" class="nav-link" data-scroll-target="#sec-specific"><span class="header-section-number">2.5</span> Specific dates and times</a></li>
  <li><a href="#sec-neg" id="toc-sec-neg" class="nav-link" data-scroll-target="#sec-neg"><span class="header-section-number">2.6</span> Negative numbers</a></li>
  <li><a href="#sec-unit" id="toc-sec-unit" class="nav-link" data-scroll-target="#sec-unit"><span class="header-section-number">2.7</span> Units</a></li>
  </ul>
</li>
  <li><a href="#sec-zone" id="toc-sec-zone" class="nav-link" data-scroll-target="#sec-zone"><span class="header-section-number">3</span> Time zones</a></li>
  <li>
<a href="#sec-related" id="toc-sec-related" class="nav-link" data-scroll-target="#sec-related"><span class="header-section-number">4</span> Related systems</a>
  <ul class="collapse">
<li>
<a href="#sec-frc" id="toc-sec-frc" class="nav-link" data-scroll-target="#sec-frc"><span class="header-section-number">4.1</span> French Republican calendar</a>
  <ul class="collapse">
<li><a href="#sec-frcd" id="toc-sec-frcd" class="nav-link" data-scroll-target="#sec-frcd"><span class="header-section-number">4.1.1</span> French Republican calendar <em>d√©cades</em></a></li>
  <li><a href="#sec-frct" id="toc-sec-frct" class="nav-link" data-scroll-target="#sec-frct"><span class="header-section-number">4.1.2</span> French Republican calendar time</a></li>
  </ul>
</li>
  <li><a href="#sec-sit" id="toc-sec-sit" class="nav-link" data-scroll-target="#sec-sit"><span class="header-section-number">4.2</span> Swatch Internet Time</a></li>
  <li>
<a href="#sec-greg" id="toc-sec-greg" class="nav-link" data-scroll-target="#sec-greg"><span class="header-section-number">4.3</span> Gregorian calendar</a>
  <ul class="collapse">
<li><a href="#sec-coor" id="toc-sec-coor" class="nav-link" data-scroll-target="#sec-coor"><span class="header-section-number">4.3.1</span> Coordinate analogy</a></li>
  <li><a href="#sec-conv" id="toc-sec-conv" class="nav-link" data-scroll-target="#sec-conv"><span class="header-section-number">4.3.2</span> Gregorian calendar date conversion</a></li>
  <li><a href="#sec-gregm" id="toc-sec-gregm" class="nav-link" data-scroll-target="#sec-gregm"><span class="header-section-number">4.3.3</span> Gregorian calendar months and years</a></li>
  <li><a href="#sec-gregl" id="toc-sec-gregl" class="nav-link" data-scroll-target="#sec-gregl"><span class="header-section-number">4.3.4</span> Leap years</a></li>
  </ul>
</li>
  <li>
<a href="#sec-iso" id="toc-sec-iso" class="nav-link" data-scroll-target="#sec-iso"><span class="header-section-number">4.4</span> ISO 8601</a>
  <ul class="collapse">
<li><a href="#sec-isoy" id="toc-sec-isoy" class="nav-link" data-scroll-target="#sec-isoy"><span class="header-section-number">4.4.1</span> Years</a></li>
  <li><a href="#sec-isoo" id="toc-sec-isoo" class="nav-link" data-scroll-target="#sec-isoo"><span class="header-section-number">4.4.2</span> Ordinal dates</a></li>
  <li><a href="#sec-isoc" id="toc-sec-isoc" class="nav-link" data-scroll-target="#sec-isoc"><span class="header-section-number">4.4.3</span> Calendar dates</a></li>
  <li><a href="#sec-isoz" id="toc-sec-isoz" class="nav-link" data-scroll-target="#sec-isoz"><span class="header-section-number">4.4.4</span> Time zones</a></li>
  <li><a href="#sec-isot" id="toc-sec-isot" class="nav-link" data-scroll-target="#sec-isot"><span class="header-section-number">4.4.5</span> Times</a></li>
  <li><a href="#sec-isos" id="toc-sec-isos" class="nav-link" data-scroll-target="#sec-isos"><span class="header-section-number">4.4.6</span> Timestamps</a></li>
  <li><a href="#sec-isoi" id="toc-sec-isoi" class="nav-link" data-scroll-target="#sec-isoi"><span class="header-section-number">4.4.7</span> Time intervals</a></li>
  <li><a href="#sec-isor" id="toc-sec-isor" class="nav-link" data-scroll-target="#sec-isor"><span class="header-section-number">4.4.8</span> Repeating time intervals</a></li>
  </ul>
</li>
  <li><a href="#sec-jd" id="toc-sec-jd" class="nav-link" data-scroll-target="#sec-jd"><span class="header-section-number">4.5</span> Julian dates</a></li>
  <li>
<a href="#sec-unix" id="toc-sec-unix" class="nav-link" data-scroll-target="#sec-unix"><span class="header-section-number">4.6</span> UNIX time</a>
  <ul class="collapse">
<li><a href="#sec-unixj" id="toc-sec-unixj" class="nav-link" data-scroll-target="#sec-unixj"><span class="header-section-number">4.6.1</span> Julian time conversion to UNIX time</a></li>
  <li><a href="#sec-unixd" id="toc-sec-unixd" class="nav-link" data-scroll-target="#sec-unixd"><span class="header-section-number">4.6.2</span> UNIX time conversion to <code>deco</code> date</a></li>
  <li><a href="#sec-unixt" id="toc-sec-unixt" class="nav-link" data-scroll-target="#sec-unixt"><span class="header-section-number">4.6.3</span> UNIX time conversion to <code>Decalendar</code> timestamp</a></li>
  <li><a href="#sec-unixb" id="toc-sec-unixb" class="nav-link" data-scroll-target="#sec-unixb"><span class="header-section-number">4.6.4</span> Building timestamps</a></li>
  <li><a href="#sec-unixp" id="toc-sec-unixp" class="nav-link" data-scroll-target="#sec-unixp"><span class="header-section-number">4.6.5</span> Parsing timestamps</a></li>
  </ul>
</li>
  </ul>
</li>
  <li>
<a href="#sec-format" id="toc-sec-format" class="nav-link" data-scroll-target="#sec-format"><span class="header-section-number">5</span> Dot formats</a>
  <ul class="collapse">
<li><a href="#sec-dotm" id="toc-sec-dotm" class="nav-link" data-scroll-target="#sec-dotm"><span class="header-section-number">5.1</span> The <code>.m</code> format</a></li>
  <li><a href="#sec-dotw" id="toc-sec-dotw" class="nav-link" data-scroll-target="#sec-dotw"><span class="header-section-number">5.2</span> The <code>decw</code> format</a></li>
  <li><a href="#sec-dotex" id="toc-sec-dotex" class="nav-link" data-scroll-target="#sec-dotex"><span class="header-section-number">5.3</span> Dot format examples</a></li>
  <li>
<a href="#sec-dek" id="toc-sec-dek" class="nav-link" data-scroll-target="#sec-dek"><span class="header-section-number">5.4</span> <code>Deks</code></a>
  <ul class="collapse">
<li><a href="#sec-dotd" id="toc-sec-dotd" class="nav-link" data-scroll-target="#sec-dotd"><span class="header-section-number">5.4.1</span> Days of the <code>dek</code></a></li>
  <li><a href="#sec-work" id="toc-sec-work" class="nav-link" data-scroll-target="#sec-work"><span class="header-section-number">5.4.2</span> Workdays</a></li>
  <li><a href="#sec-sched" id="toc-sec-sched" class="nav-link" data-scroll-target="#sec-sched"><span class="header-section-number">5.4.3</span> Schedules</a></li>
  </ul>
</li>
  <li>
<a href="#sec-subyear" id="toc-sec-subyear" class="nav-link" data-scroll-target="#sec-subyear"><span class="header-section-number">5.5</span> Subyear units</a>
  <ul class="collapse">
<li><a href="#sec-season" id="toc-sec-season" class="nav-link" data-scroll-target="#sec-season"><span class="header-section-number">5.5.1</span> Seasons</a></li>
  <li><a href="#sec-qdew" id="toc-sec-qdew" class="nav-link" data-scroll-target="#sec-qdew"><span class="header-section-number">5.5.2</span> <code>Qops</code>, <code>Delts</code>, <code>Eps</code> and <code>Waus</code></a></li>
  </ul>
</li>
  </ul>
</li>
  <li>
<a href="#sec-series" id="toc-sec-series" class="nav-link" data-scroll-target="#sec-series"><span class="header-section-number">6</span> Series</a>
  <ul class="collapse">
<li><a href="#sec-slice" id="toc-sec-slice" class="nav-link" data-scroll-target="#sec-slice"><span class="header-section-number">6.1</span> Slices</a></li>
  <li><a href="#sec-step" id="toc-sec-step" class="nav-link" data-scroll-target="#sec-step"><span class="header-section-number">6.2</span> Steps</a></li>
  <li><a href="#sec-spread" id="toc-sec-spread" class="nav-link" data-scroll-target="#sec-spread"><span class="header-section-number">6.3</span> Spreads</a></li>
  <li><a href="#sec-split" id="toc-sec-split" class="nav-link" data-scroll-target="#sec-split"><span class="header-section-number">6.4</span> Splits</a></li>
  <li><a href="#sec-space" id="toc-sec-space" class="nav-link" data-scroll-target="#sec-space"><span class="header-section-number">6.5</span> Spaces</a></li>
  <li><a href="#sec-seq" id="toc-sec-seq" class="nav-link" data-scroll-target="#sec-seq"><span class="header-section-number">6.6</span> Sequential spreads and slices</a></li>
  <li>
<a href="#sec-pom" id="toc-sec-pom" class="nav-link" data-scroll-target="#sec-pom"><span class="header-section-number">6.7</span> Pomodoro</a>
  <ul class="collapse">
<li><a href="#sec-rep" id="toc-sec-rep" class="nav-link" data-scroll-target="#sec-rep"><span class="header-section-number">6.7.1</span> Replication operator</a></li>
  <li><a href="#sec-per" id="toc-sec-per" class="nav-link" data-scroll-target="#sec-per"><span class="header-section-number">6.7.2</span> Percent, permil, and permyr operators</a></li>
  <li><a href="#sec-3s" id="toc-sec-3s" class="nav-link" data-scroll-target="#sec-3s"><span class="header-section-number">6.7.3</span> Pently schedules as seq spreads, splices, and sleds</a></li>
  </ul>
</li>
  <li>
<a href="#sec-trans" id="toc-sec-trans" class="nav-link" data-scroll-target="#sec-trans"><span class="header-section-number">6.8</span> Yearly transition</a>
  <ul class="collapse">
<li><a href="#sec-transc" id="toc-sec-transc" class="nav-link" data-scroll-target="#sec-transc"><span class="header-section-number">6.8.1</span> Common years</a></li>
  <li><a href="#sec-transl" id="toc-sec-transl" class="nav-link" data-scroll-target="#sec-transl"><span class="header-section-number">6.8.2</span> Leap years</a></li>
  </ul>
</li>
  <li><a href="#sec-holiday" id="toc-sec-holiday" class="nav-link" data-scroll-target="#sec-holiday"><span class="header-section-number">6.9</span> Holidays</a></li>
  </ul>
</li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references"><span class="header-section-number">7</span> References</a></li>
  <li><a href="#appendix" id="toc-appendix" class="nav-link" data-scroll-target="#appendix"><span class="header-section-number">8</span> Appendix</a></li>
  </ul><div class="quarto-alternate-notebooks"><h2>Notebooks</h2><ul><li><a href="schedules.ipynb.html"><i class="bi bi-journal-code"></i>schedules.ipynb</a></li><li><a href="dec_javascript.ipynb.html"><i class="bi bi-journal-code"></i>dec_javascript.ipynb</a></li><li><a href="dec_julia.ipynb.html"><i class="bi bi-journal-code"></i>dec_julia.ipynb</a></li><li><a href="dec_python.ipynb.html"><i class="bi bi-journal-code"></i>dec_python.ipynb</a></li><li><a href="dec_r.ipynb.html"><i class="bi bi-journal-code"></i>dec_r.ipynb</a></li></ul></div></nav>
</div>
<main class="content page-columns page-full" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Decalendar and Declock</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p><a href="https://maptv.github.io">Martin Laptev</a> </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">2023+248</p>
    </div>
  </div>
  
    
  </div>
  

</header><section id="sec-intro" class="level1 page-columns page-full" data-number="1"><h1 data-number="1">
<span class="header-section-number">1</span> Introduction</h1>
<section id="sec-intro-doty" class="level2 page-columns page-full" data-number="1.1"><h2 data-number="1.1" class="anchored" data-anchor-id="sec-intro-doty">
<span class="header-section-number">1.1</span> Day-of-the-year</h2>
<p><code>Decalendar</code><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> is a <a href="https://en.wikipedia.org/wiki/Decimal">decimal</a> calendarüóìÔ∏èsystem and <code>Declock</code><a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> is a decimal timekeeping‚è≥system. Instead of months, weeks, hours, minutes, and seconds, <code>Decalendar</code> and <code>Declock</code> use a number called the day-of-the-year (<code>doty</code>)<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>. <a href="#fig-bar-doty">Figure&nbsp;1</a> displays the current <code>doty</code> <span>(<span id="ojs-element-id-1"></span>)</span> as a bar chart. The <a href="https://en.wikipedia.org/wiki/Decimal#:~:text=The%20integer%20part%20or%20integral%20part%20of%20a%20decimal%20numeral%20is%20the%20integer%20written%20to%20the%20left%20of%20the%20decimal%20separator">integer part</a> of the <code>doty</code> is the <code>Decalendar</code> date<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> <span>(<span id="ojs-element-id-15"></span>)</span> and the <a href="https://en.wikipedia.org/wiki/Decimal#:~:text=The%20part%20from%20the%20decimal%20separator%20to%20the%20right%20is%20the%20fractional%20part%2C%20which%20equals%20the%20difference%20between%20the%20numeral%20and%20its%20integer%20part.">fractional part</a> is the <code>Declock</code> time<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> <span>(<span id="ojs-element-id-16"></span>).</span></p>
<p>The top two bars in <a href="#fig-bar-doty">Figure&nbsp;1</a> (Êó¨ and Êó•) show the two components of the <code>Decalendar</code> date <span>(<span id="ojs-element-id-17"></span>):</span> the <code>dek</code><a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a> <span>(<span id="ojs-element-id-2"></span>)</span> and the day-of-the-<code>dek</code><a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a> <span>(<span id="ojs-element-id-3"></span>).</span> A <code>dek</code> is a group of 10 days that fulfills the role of months and weeks in <code>Decalendar</code>. Therefore, the <code>dek</code> and the day-of-the-<code>dek</code> (<code>dotd</code>) in <code>Decalendar</code> dates are analogous to the month and day-of-the-month (<code>dotm</code>) in <a href="https://en.wikipedia.org/wiki/ISO_8601#Calendar_dates">calendar dates</a> (<code>mm-dd</code>) and the week and day-of-the-week (<code>dotw</code>) in <a href="https://en.wikipedia.org/wiki/ISO_8601#Week_dates">week dates</a> (<code>Www-d</code>).</p>
<p>The bottom three bars in <a href="#fig-bar-doty">Figure&nbsp;1</a> (%, ‚Ä∞, and ‚ô´) show components of the <code>Declock</code> time <span>(<span id="ojs-element-id-18"></span>):</span> <code>cents</code><a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a> <span>(<span id="ojs-element-id-4"></span>),</span> <code>mils</code><a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a> <span>(<span id="ojs-element-id-5"></span>),</span> and <code>beats</code><a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a> <span>(<span id="ojs-element-id-6"></span>).</span> A <code>cent</code> is 1% of the day, which is a little less than a quarter hour. A <code>mil</code> (<code>‚Ä∞</code>) is a tenth of a <code>cent</code>, which is close to a minute and a half. A <code>beat</code> is 1% of a <code>mil</code>, which is almost as long as a second, and can be thought of as a heart‚ù§Ô∏èbeat or musicalüéµ<a href="https://en.wikipedia.org/wiki/Beat_(music)#:~:text=the%20beat%20is%20the%20basic%20unit%20of%20time">beat</a> with a constant <a href="https://en.wikipedia.org/wiki/Heart_rate#:~:text=The%20American%20Heart%20Association%20states%20the%20normal%20resting%20adult%20human%20heart%20rate%20is%2060%2D100%20bpm.">rate</a> or <a href="https://en.wikipedia.org/wiki/Tempo#Basic_tempo_markings:~:text=Adagietto%20%E2%80%93%20slower%20than,56%E2%80%93108%C2%A0bpm">tempo</a> of 69.4ÃÖ beats per minute. In addition to displaying time on clocksüï∞Ô∏èand‚åöÔ∏èwatches, <code>beats</code> can be used to measure durations, such as the time since this webpage was loaded: <span><span id="ojs-element-id-7"></span>.</span></p>
<div class="cell page-columns page-full" data-layout-align="center">
<details class="hidden"><summary>Code</summary><div class="sourceCode cell-code hidden" id="cb1" data-startfrom="41" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 40;"><span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/@fheyen/barchart-clock</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> W <span class="op">=</span> width <span class="op">&gt;</span> <span class="dv">1250</span> <span class="op">?</span> width <span class="op">*</span> <span class="dv">2</span> <span class="op">/</span> <span class="dv">3</span> <span class="op">:</span> width <span class="op">&gt;</span> <span class="dv">1150</span> <span class="op">?</span> width <span class="op">*</span> <span class="dv">3</span> <span class="op">/</span> <span class="dv">4</span> <span class="op">:</span> width <span class="op">&gt;</span> <span class="dv">1050</span> <span class="op">?</span> width <span class="op">*</span> <span class="dv">4</span> <span class="op">/</span> <span class="dv">5</span> <span class="op">:</span> width <span class="op">&gt;</span> <span class="dv">950</span> <span class="op">?</span> width <span class="op">*</span> <span class="dv">5</span> <span class="op">/</span> <span class="dv">6</span> <span class="op">:</span> width <span class="op">&gt;</span> <span class="dv">850</span> <span class="op">?</span> width <span class="op">:</span> width <span class="op">&gt;</span> <span class="dv">750</span> <span class="op">?</span> width <span class="op">*</span> <span class="fl">1.02</span> <span class="op">:</span> width <span class="op">&gt;</span> <span class="dv">650</span> <span class="op">?</span> width <span class="op">*</span> <span class="fl">1.06</span> <span class="op">:</span> width <span class="op">&gt;</span> <span class="dv">550</span> <span class="op">?</span> width <span class="op">*</span> <span class="fl">1.1</span> <span class="op">:</span> width <span class="op">&gt;</span> <span class="dv">450</span> <span class="op">?</span> width <span class="op">*</span> <span class="fl">1.14</span> <span class="op">:</span> width <span class="op">*</span> <span class="fl">1.18</span><span class="op">;</span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> H <span class="op">=</span> <span class="dv">156</span><span class="op">;</span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> barX <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> firstBarY <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> svg <span class="op">=</span> d3</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">create</span>(<span class="st">"svg"</span>)</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"width"</span><span class="op">,</span> W)</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"viewBox"</span><span class="op">,</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> W<span class="op">,</span> H])<span class="op">;</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> xRange <span class="op">=</span> [<span class="dv">0</span><span class="op">,</span> W <span class="op">-</span> <span class="dv">100</span>]<span class="op">;</span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> scaleM <span class="op">=</span> d3<span class="op">.</span><span class="fu">scaleLinear</span>()</span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">domain</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">10</span>])</span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">range</span>(xRange)<span class="op">;</span></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> scaleCandB <span class="op">=</span> d3<span class="op">.</span><span class="fu">scaleLinear</span>()</span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">domain</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">100</span>])</span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">range</span>(xRange)<span class="op">;</span></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> scaleDek <span class="op">=</span> d3<span class="op">.</span><span class="fu">scaleLinear</span>()</span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">domain</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">37</span>])</span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">range</span>(xRange)<span class="op">;</span></span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Background bars to show where 100% lies</span></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">'.background'</span>)</span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">data</span>([<span class="st">'dek'</span><span class="op">,</span> <span class="st">'dotd'</span><span class="op">,</span> <span class="st">'cents'</span><span class="op">,</span> <span class="st">"mils"</span><span class="op">,</span> <span class="st">'beats'</span>])</span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">enter</span>()</span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'rect'</span>)</span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'background timeBar'</span>)</span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'width'</span><span class="op">,</span> W<span class="op">-</span><span class="dv">100</span>)</span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> (d<span class="op">,</span>i)<span class="kw">=&gt;</span>i<span class="op">*</span><span class="dv">30</span><span class="op">+</span>firstBarY)</span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Dek/Dotd</span></span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>  svg</span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'rect'</span>)</span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'timeBar'</span>)</span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY)</span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'width'</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">scaleDek</span>(<span class="bu">Number</span>(dotyDek)<span class="op">+</span><span class="bu">Number</span>(dotyDotd)<span class="op">/</span><span class="dv">10</span><span class="op">+</span><span class="bu">Number</span>(barCents)<span class="op">/</span><span class="dv">1000</span>))</span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a>  svg</span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'rect'</span>)</span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'timeBarFull'</span>)</span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY)</span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'width'</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">scaleDek</span>(dotyDek))</span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a>  svg</span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'rect'</span>)</span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'timeBar'</span>)</span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY<span class="op">+</span><span class="dv">30</span>)</span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'width'</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">scaleM</span>(<span class="bu">Number</span>(dotyDotd)<span class="op">+</span><span class="bu">Number</span>(barCents)<span class="op">/</span><span class="dv">100</span><span class="op">+</span><span class="bu">Number</span>(barMils)<span class="op">/</span><span class="dv">1000</span>))</span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a>  svg</span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'rect'</span>)</span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'timeBarFull'</span>)</span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY<span class="op">+</span><span class="dv">30</span>)</span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'width'</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">scaleM</span>(dotyDotd))</span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">'.tickDek'</span>)</span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">data</span>(d3<span class="op">.</span><span class="fu">range</span>(width <span class="op">&gt;</span> <span class="dv">500</span> <span class="op">?</span> <span class="dv">4</span><span class="op">:</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">37</span>))</span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">enter</span>()</span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'rect'</span>)</span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'tickDek'</span>)</span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'x'</span><span class="op">,</span> d<span class="kw">=&gt;</span><span class="fu">scaleDek</span>(d)<span class="op">+</span>barX)</span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY)</span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'height'</span><span class="op">,</span> d<span class="kw">=&gt;</span>d<span class="op">%</span>(width <span class="op">&gt;</span> <span class="dv">500</span> <span class="op">?</span> <span class="dv">2</span> <span class="op">:</span> <span class="dv">3</span>)<span class="op">===</span><span class="dv">0</span><span class="op">?</span> <span class="dv">6</span><span class="op">:</span><span class="dv">4</span>)</span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Cent ticks</span></span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">'.tickDotd'</span>)</span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">data</span>(d3<span class="op">.</span><span class="fu">range</span>(width <span class="op">&gt;</span> <span class="dv">500</span> <span class="op">?</span> <span class="dv">1</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">10</span>))</span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">enter</span>()</span>
<span id="cb1-102"><a href="#cb1-102" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'rect'</span>)</span>
<span id="cb1-103"><a href="#cb1-103" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'tickDotd'</span>)</span>
<span id="cb1-104"><a href="#cb1-104" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'x'</span><span class="op">,</span> d<span class="kw">=&gt;</span><span class="fu">scaleM</span>(d)<span class="op">+</span>barX)</span>
<span id="cb1-105"><a href="#cb1-105" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY<span class="op">+</span><span class="dv">49</span>)</span>
<span id="cb1-106"><a href="#cb1-106" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'height'</span><span class="op">,</span> <span class="dv">6</span>)</span>
<span id="cb1-107"><a href="#cb1-107" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">'.tickLabel'</span>)</span>
<span id="cb1-108"><a href="#cb1-108" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">data</span>(d3<span class="op">.</span><span class="fu">range</span>(width <span class="op">&gt;</span> <span class="dv">500</span> <span class="op">?</span> <span class="dv">4</span><span class="op">:</span> <span class="dv">6</span><span class="op">,</span> width <span class="op">&gt;</span> <span class="dv">500</span> <span class="op">?</span> <span class="dv">37</span><span class="op">:</span> <span class="dv">35</span><span class="op">,</span> width <span class="op">&gt;</span> <span class="dv">500</span> <span class="op">?</span> <span class="dv">2</span><span class="op">:</span> <span class="dv">3</span>))</span>
<span id="cb1-109"><a href="#cb1-109" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">enter</span>()</span>
<span id="cb1-110"><a href="#cb1-110" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'text'</span>)</span>
<span id="cb1-111"><a href="#cb1-111" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'tickLabel'</span>)</span>
<span id="cb1-112"><a href="#cb1-112" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'x'</span><span class="op">,</span> d<span class="kw">=&gt;</span><span class="fu">scaleDek</span>(d)<span class="op">+</span>barX<span class="op">+.</span><span class="dv">5</span>)</span>
<span id="cb1-113"><a href="#cb1-113" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY<span class="op">+</span><span class="dv">22</span>)</span>
<span id="cb1-114"><a href="#cb1-114" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">text</span>(d<span class="kw">=&gt;</span>d)</span>
<span id="cb1-115"><a href="#cb1-115" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Cents/Mils</span></span>
<span id="cb1-116"><a href="#cb1-116" aria-hidden="true" tabindex="-1"></a>  svg</span>
<span id="cb1-117"><a href="#cb1-117" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'rect'</span>)</span>
<span id="cb1-118"><a href="#cb1-118" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'timeBar'</span>)</span>
<span id="cb1-119"><a href="#cb1-119" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY<span class="op">+</span><span class="dv">60</span>)</span>
<span id="cb1-120"><a href="#cb1-120" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'width'</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">scaleCandB</span>(<span class="bu">Number</span>(barCents)<span class="op">+</span><span class="bu">Number</span>(barMils)<span class="op">/</span><span class="dv">10</span><span class="op">+</span><span class="bu">Number</span>(barBeats)<span class="op">/</span><span class="dv">1000</span>))</span>
<span id="cb1-121"><a href="#cb1-121" aria-hidden="true" tabindex="-1"></a>  svg</span>
<span id="cb1-122"><a href="#cb1-122" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'rect'</span>)</span>
<span id="cb1-123"><a href="#cb1-123" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'timeBarFull'</span>)</span>
<span id="cb1-124"><a href="#cb1-124" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY<span class="op">+</span><span class="dv">60</span>)</span>
<span id="cb1-125"><a href="#cb1-125" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'width'</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">scaleCandB</span>(barCents))</span>
<span id="cb1-126"><a href="#cb1-126" aria-hidden="true" tabindex="-1"></a>  svg</span>
<span id="cb1-127"><a href="#cb1-127" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'rect'</span>)</span>
<span id="cb1-128"><a href="#cb1-128" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'timeBar'</span>)</span>
<span id="cb1-129"><a href="#cb1-129" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY<span class="op">+</span><span class="dv">90</span>)</span>
<span id="cb1-130"><a href="#cb1-130" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'width'</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">scaleM</span>(<span class="bu">Number</span>(barMils)<span class="op">+</span><span class="bu">Number</span>(barBeats)<span class="op">/</span><span class="dv">100</span><span class="op">+</span><span class="bu">Number</span>(barMb)<span class="op">/</span><span class="dv">100000</span>))</span>
<span id="cb1-131"><a href="#cb1-131" aria-hidden="true" tabindex="-1"></a>  svg</span>
<span id="cb1-132"><a href="#cb1-132" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'rect'</span>)</span>
<span id="cb1-133"><a href="#cb1-133" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'timeBarFull'</span>)</span>
<span id="cb1-134"><a href="#cb1-134" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY<span class="op">+</span><span class="dv">90</span>)</span>
<span id="cb1-135"><a href="#cb1-135" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'width'</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">scaleM</span>(barMils))</span>
<span id="cb1-136"><a href="#cb1-136" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Cent ticks</span></span>
<span id="cb1-137"><a href="#cb1-137" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">'.tickC'</span>)</span>
<span id="cb1-138"><a href="#cb1-138" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">data</span>(d3<span class="op">.</span><span class="fu">range</span>(width <span class="op">&gt;</span> <span class="dv">500</span> <span class="op">?</span> <span class="dv">10</span> <span class="op">:</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">100</span>))</span>
<span id="cb1-139"><a href="#cb1-139" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">enter</span>()</span>
<span id="cb1-140"><a href="#cb1-140" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'rect'</span>)</span>
<span id="cb1-141"><a href="#cb1-141" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'tickC'</span>)</span>
<span id="cb1-142"><a href="#cb1-142" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'x'</span><span class="op">,</span> d<span class="kw">=&gt;</span><span class="fu">scaleM</span>(d<span class="op">/</span><span class="dv">10</span>)<span class="op">+</span>barX)</span>
<span id="cb1-143"><a href="#cb1-143" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY<span class="op">+</span><span class="dv">60</span>)</span>
<span id="cb1-144"><a href="#cb1-144" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'height'</span><span class="op">,</span> d<span class="kw">=&gt;</span>d<span class="op">%</span><span class="dv">2</span><span class="op">===</span><span class="dv">0</span><span class="op">?</span> <span class="dv">8</span><span class="op">:</span><span class="dv">5</span>)</span>
<span id="cb1-145"><a href="#cb1-145" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">'.tickC1'</span>)</span>
<span id="cb1-146"><a href="#cb1-146" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">data</span>(d3<span class="op">.</span><span class="fu">range</span>(width <span class="op">&gt;</span> <span class="dv">500</span> <span class="op">?</span> <span class="dv">10</span> <span class="op">:</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">100</span>))</span>
<span id="cb1-147"><a href="#cb1-147" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">enter</span>()</span>
<span id="cb1-148"><a href="#cb1-148" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'rect'</span>)</span>
<span id="cb1-149"><a href="#cb1-149" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'tickC1'</span>)</span>
<span id="cb1-150"><a href="#cb1-150" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'x'</span><span class="op">,</span> d<span class="kw">=&gt;</span><span class="fu">scaleM</span>(d<span class="op">/</span><span class="dv">10</span>)<span class="op">+</span>barX)</span>
<span id="cb1-151"><a href="#cb1-151" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> d<span class="kw">=&gt;</span>d<span class="op">%</span><span class="dv">2</span><span class="op">===</span><span class="dv">0</span><span class="op">?</span> firstBarY<span class="op">+</span><span class="dv">77</span><span class="op">:</span>firstBarY<span class="op">+</span><span class="dv">80</span>)</span>
<span id="cb1-152"><a href="#cb1-152" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'height'</span><span class="op">,</span> d<span class="kw">=&gt;</span>d<span class="op">%</span><span class="dv">2</span><span class="op">===</span><span class="dv">0</span><span class="op">?</span> <span class="dv">8</span><span class="op">:</span><span class="dv">5</span>)</span>
<span id="cb1-153"><a href="#cb1-153" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Mil ticks</span></span>
<span id="cb1-154"><a href="#cb1-154" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">'.tickM'</span>)</span>
<span id="cb1-155"><a href="#cb1-155" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">data</span>(d3<span class="op">.</span><span class="fu">range</span>(width <span class="op">&gt;</span> <span class="dv">500</span> <span class="op">?</span> <span class="dv">1</span> <span class="op">:</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">10</span>))</span>
<span id="cb1-156"><a href="#cb1-156" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">enter</span>()</span>
<span id="cb1-157"><a href="#cb1-157" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'rect'</span>)</span>
<span id="cb1-158"><a href="#cb1-158" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'tickM'</span>)</span>
<span id="cb1-159"><a href="#cb1-159" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'x'</span><span class="op">,</span> d<span class="kw">=&gt;</span><span class="fu">scaleM</span>(d)<span class="op">+</span>barX)</span>
<span id="cb1-160"><a href="#cb1-160" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY<span class="op">+</span><span class="dv">90</span>)</span>
<span id="cb1-161"><a href="#cb1-161" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'height'</span><span class="op">,</span> <span class="dv">6</span>)</span>
<span id="cb1-162"><a href="#cb1-162" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">'.tickM1'</span>)</span>
<span id="cb1-163"><a href="#cb1-163" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">data</span>(d3<span class="op">.</span><span class="fu">range</span>(width <span class="op">&gt;</span> <span class="dv">500</span> <span class="op">?</span> <span class="dv">1</span> <span class="op">:</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">10</span>))</span>
<span id="cb1-164"><a href="#cb1-164" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">enter</span>()</span>
<span id="cb1-165"><a href="#cb1-165" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'rect'</span>)</span>
<span id="cb1-166"><a href="#cb1-166" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'tickM1'</span>)</span>
<span id="cb1-167"><a href="#cb1-167" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'x'</span><span class="op">,</span> d<span class="kw">=&gt;</span><span class="fu">scaleM</span>(d)<span class="op">+</span>barX)</span>
<span id="cb1-168"><a href="#cb1-168" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY<span class="op">+</span><span class="fl">92.5</span>)</span>
<span id="cb1-169"><a href="#cb1-169" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'height'</span><span class="op">,</span> <span class="fl">2.5</span>)</span>
<span id="cb1-170"><a href="#cb1-170" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">'.tickLabel1'</span>)</span>
<span id="cb1-171"><a href="#cb1-171" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">data</span>(d3<span class="op">.</span><span class="fu">range</span>(width <span class="op">&gt;</span> <span class="dv">500</span> <span class="op">?</span> <span class="dv">1</span> <span class="op">:</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">10</span>))</span>
<span id="cb1-172"><a href="#cb1-172" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">enter</span>()</span>
<span id="cb1-173"><a href="#cb1-173" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'text'</span>)</span>
<span id="cb1-174"><a href="#cb1-174" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'tickLabel1'</span>)</span>
<span id="cb1-175"><a href="#cb1-175" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'x'</span><span class="op">,</span> d<span class="kw">=&gt;</span><span class="fu">scaleM</span>(d)<span class="op">+</span>barX<span class="op">+.</span><span class="dv">5</span>)</span>
<span id="cb1-176"><a href="#cb1-176" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY<span class="op">+</span><span class="dv">47</span>)</span>
<span id="cb1-177"><a href="#cb1-177" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">text</span>(d<span class="kw">=&gt;</span>d)</span>
<span id="cb1-178"><a href="#cb1-178" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">'.tickLabel2'</span>)</span>
<span id="cb1-179"><a href="#cb1-179" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">data</span>(d3<span class="op">.</span><span class="fu">range</span>(width <span class="op">&gt;</span> <span class="dv">500</span> <span class="op">?</span> <span class="dv">1</span> <span class="op">:</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">10</span>))</span>
<span id="cb1-180"><a href="#cb1-180" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">enter</span>()</span>
<span id="cb1-181"><a href="#cb1-181" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'text'</span>)</span>
<span id="cb1-182"><a href="#cb1-182" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'tickLabel2'</span>)</span>
<span id="cb1-183"><a href="#cb1-183" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'x'</span><span class="op">,</span> d<span class="kw">=&gt;</span><span class="fu">scaleM</span>(d)<span class="op">+</span>barX<span class="op">+.</span><span class="dv">5</span>)</span>
<span id="cb1-184"><a href="#cb1-184" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY<span class="op">+</span><span class="dv">112</span>)</span>
<span id="cb1-185"><a href="#cb1-185" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">text</span>(d<span class="kw">=&gt;</span>d)</span>
<span id="cb1-186"><a href="#cb1-186" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Beats</span></span>
<span id="cb1-187"><a href="#cb1-187" aria-hidden="true" tabindex="-1"></a>  svg</span>
<span id="cb1-188"><a href="#cb1-188" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'rect'</span>)</span>
<span id="cb1-189"><a href="#cb1-189" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'timeBar'</span>)</span>
<span id="cb1-190"><a href="#cb1-190" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY<span class="op">+</span><span class="dv">120</span>)</span>
<span id="cb1-191"><a href="#cb1-191" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'width'</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">scaleCandB</span>(<span class="bu">Number</span>(barBeats)<span class="op">+</span><span class="bu">Number</span>(barMb)<span class="op">/</span><span class="dv">1000</span>))</span>
<span id="cb1-192"><a href="#cb1-192" aria-hidden="true" tabindex="-1"></a>  svg</span>
<span id="cb1-193"><a href="#cb1-193" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'rect'</span>)</span>
<span id="cb1-194"><a href="#cb1-194" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'timeBarFull'</span>)</span>
<span id="cb1-195"><a href="#cb1-195" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY<span class="op">+</span><span class="dv">120</span>)</span>
<span id="cb1-196"><a href="#cb1-196" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'width'</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">scaleCandB</span>(barBeats))</span>
<span id="cb1-197"><a href="#cb1-197" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Beat ticks</span></span>
<span id="cb1-198"><a href="#cb1-198" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">'.tickB'</span>)</span>
<span id="cb1-199"><a href="#cb1-199" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">data</span>(d3<span class="op">.</span><span class="fu">range</span>(width <span class="op">&gt;</span> <span class="dv">500</span> <span class="op">?</span> <span class="dv">10</span> <span class="op">:</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">100</span>))</span>
<span id="cb1-200"><a href="#cb1-200" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">enter</span>()</span>
<span id="cb1-201"><a href="#cb1-201" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'rect'</span>)</span>
<span id="cb1-202"><a href="#cb1-202" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'tickB'</span>)</span>
<span id="cb1-203"><a href="#cb1-203" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'x'</span><span class="op">,</span> d<span class="kw">=&gt;</span><span class="fu">scaleM</span>(d<span class="op">/</span><span class="dv">10</span>)<span class="op">+</span>barX)</span>
<span id="cb1-204"><a href="#cb1-204" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY<span class="op">+</span><span class="dv">120</span>)</span>
<span id="cb1-205"><a href="#cb1-205" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'height'</span><span class="op">,</span> d<span class="kw">=&gt;</span>d<span class="op">%</span><span class="dv">2</span><span class="op">===</span><span class="dv">0</span><span class="op">?</span> <span class="dv">9</span><span class="op">:</span><span class="dv">6</span>)</span>
<span id="cb1-206"><a href="#cb1-206" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Labels</span></span>
<span id="cb1-207"><a href="#cb1-207" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">'.timeLabel'</span>)</span>
<span id="cb1-208"><a href="#cb1-208" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">data</span>([<span class="vs">`</span><span class="sc">${</span>dotyDek<span class="sc">}</span><span class="vs">Êó¨`</span><span class="op">,</span> <span class="vs">`</span><span class="sc">${</span>dotyDotd<span class="sc">}</span><span class="vs">Êó•`</span><span class="op">,</span> <span class="vs">`</span><span class="sc">${</span>barCents<span class="sc">}</span><span class="vs">%`</span><span class="op">,</span> <span class="vs">`</span><span class="sc">${</span>barMils<span class="sc">}</span><span class="vs">‚Ä∞`</span><span class="op">,</span> <span class="vs">`</span><span class="sc">${</span>barBeats<span class="sc">}</span><span class="vs">‚ô´`</span>])</span>
<span id="cb1-209"><a href="#cb1-209" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">enter</span>()</span>
<span id="cb1-210"><a href="#cb1-210" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'text'</span>)</span>
<span id="cb1-211"><a href="#cb1-211" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'timeLabel'</span>)</span>
<span id="cb1-212"><a href="#cb1-212" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'x'</span><span class="op">,</span> barX<span class="op">+</span><span class="dv">2</span>)</span>
<span id="cb1-213"><a href="#cb1-213" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> (d<span class="op">,</span>i)<span class="kw">=&gt;</span>i<span class="op">*</span><span class="dv">30</span><span class="op">+</span>firstBarY<span class="op">+</span><span class="dv">20</span>)</span>
<span id="cb1-214"><a href="#cb1-214" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">text</span>(d<span class="kw">=&gt;</span>d)</span>
<span id="cb1-215"><a href="#cb1-215" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> svg<span class="op">.</span><span class="fu">node</span>()<span class="op">;</span></span>
<span id="cb1-216"><a href="#cb1-216" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div id="fig-bar-doty" class="quarto-figure quarto-figure-center column-body anchored">
<figure class="figure"><div id="ojs-cell-1" data-nodetype="expression">

</div>
<figcaption class="figure-caption">Figure&nbsp;1: Doty bar chart</figcaption></figure>
</div>
</div>
<div class="cell">
<details class="hidden"><summary>Code</summary><div class="sourceCode cell-code hidden" id="cb2" data-startfrom="221" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 220;"><span id="cb2-221"><a href="#cb2-221" aria-hidden="true" tabindex="-1"></a><span class="fu">html</span><span class="vs">`&lt;style&gt;</span></span>
<span id="cb2-222"><a href="#cb2-222" aria-hidden="true" tabindex="-1"></a><span class="vs">  text {</span></span>
<span id="cb2-223"><a href="#cb2-223" aria-hidden="true" tabindex="-1"></a><span class="vs">    fill: #000;</span></span>
<span id="cb2-224"><a href="#cb2-224" aria-hidden="true" tabindex="-1"></a><span class="vs">    font-family: sans-serif;</span></span>
<span id="cb2-225"><a href="#cb2-225" aria-hidden="true" tabindex="-1"></a><span class="vs">    font-size: 20px;</span></span>
<span id="cb2-226"><a href="#cb2-226" aria-hidden="true" tabindex="-1"></a><span class="vs">    text-anchor: middle;</span></span>
<span id="cb2-227"><a href="#cb2-227" aria-hidden="true" tabindex="-1"></a><span class="vs">  }</span></span>
<span id="cb2-228"><a href="#cb2-228" aria-hidden="true" tabindex="-1"></a><span class="vs">  .timeLabel {</span></span>
<span id="cb2-229"><a href="#cb2-229" aria-hidden="true" tabindex="-1"></a><span class="vs">    text-anchor: start;</span></span>
<span id="cb2-230"><a href="#cb2-230" aria-hidden="true" tabindex="-1"></a><span class="vs">  }</span></span>
<span id="cb2-231"><a href="#cb2-231" aria-hidden="true" tabindex="-1"></a><span class="vs">  .timeBar, .timeBarFull {</span></span>
<span id="cb2-232"><a href="#cb2-232" aria-hidden="true" tabindex="-1"></a><span class="vs">    x: 1px;</span></span>
<span id="cb2-233"><a href="#cb2-233" aria-hidden="true" tabindex="-1"></a><span class="vs">    height: 25px;</span></span>
<span id="cb2-234"><a href="#cb2-234" aria-hidden="true" tabindex="-1"></a><span class="vs">    rx: 5px;</span></span>
<span id="cb2-235"><a href="#cb2-235" aria-hidden="true" tabindex="-1"></a><span class="vs">    stroke: #aaa;</span></span>
<span id="cb2-236"><a href="#cb2-236" aria-hidden="true" tabindex="-1"></a><span class="vs">  }</span></span>
<span id="cb2-237"><a href="#cb2-237" aria-hidden="true" tabindex="-1"></a><span class="vs">  .timeBar {</span></span>
<span id="cb2-238"><a href="#cb2-238" aria-hidden="true" tabindex="-1"></a><span class="vs">    fill: #e8e8e8;</span></span>
<span id="cb2-239"><a href="#cb2-239" aria-hidden="true" tabindex="-1"></a><span class="vs">  }</span></span>
<span id="cb2-240"><a href="#cb2-240" aria-hidden="true" tabindex="-1"></a><span class="vs">  .timeBarFull {</span></span>
<span id="cb2-241"><a href="#cb2-241" aria-hidden="true" tabindex="-1"></a><span class="vs">    fill: #ccffff;</span></span>
<span id="cb2-242"><a href="#cb2-242" aria-hidden="true" tabindex="-1"></a><span class="vs">  }</span></span>
<span id="cb2-243"><a href="#cb2-243" aria-hidden="true" tabindex="-1"></a><span class="vs">  .background {</span></span>
<span id="cb2-244"><a href="#cb2-244" aria-hidden="true" tabindex="-1"></a><span class="vs">    fill: white;</span></span>
<span id="cb2-245"><a href="#cb2-245" aria-hidden="true" tabindex="-1"></a><span class="vs">  }</span></span>
<span id="cb2-246"><a href="#cb2-246" aria-hidden="true" tabindex="-1"></a><span class="vs">  .tickDek, .tickDotd, .tickDotd1, .tickC, .tickC1, .tickM, .tickM1, .tickB {</span></span>
<span id="cb2-247"><a href="#cb2-247" aria-hidden="true" tabindex="-1"></a><span class="vs">    stroke: none;</span></span>
<span id="cb2-248"><a href="#cb2-248" aria-hidden="true" tabindex="-1"></a><span class="vs">    fill: #666;</span></span>
<span id="cb2-249"><a href="#cb2-249" aria-hidden="true" tabindex="-1"></a><span class="vs">    width: 1px;</span></span>
<span id="cb2-250"><a href="#cb2-250" aria-hidden="true" tabindex="-1"></a><span class="vs">  }</span></span>
<span id="cb2-251"><a href="#cb2-251" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/style&gt;`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<div id="ojs-cell-2" data-nodetype="expression">

</div>
</div>
</div>
<p>As an alternative to <code>doty</code> dates, <code>Decalendar</code> can express dates in fractional years, which are similar to the <a href="https://en.wikipedia.org/wiki/Decimal_time#Fractional_days">fractional days</a> used in <code>doty</code> times. Fractional year dates<a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a> can be combined with years into one number and are useful for marking periods of 73 days in the <code>Decalendar</code> year. Every 73 days, the <code>Decalendar</code> fractional year date increases by .2 (‚Öï). The current <code>Decalendar</code> fractional year date is <span><span id="ojs-element-id-19"></span>.</span></p>
<p>Now it‚Äôs your turn! Move the slidersüéöÔ∏èin <a href="#exm-intro-doty">Example&nbsp;1</a> to adjust the <code>doty</code>, fractional year, month, and <code>dotm</code> values and see the corresponding 1) Northern Hemisphere season, 2) Southern Hemisphere season, and 3) Zodiac sign in <a href="#lst-intro-doty">List&nbsp;1</a>. Try selecting a special date, like your birthdayüéÇ! You can also press the Play‚ñ∂Ô∏èbutton and then sit back and watch the sliders cycleüîÑback and forth from the start to the end of the <code>Decalendar</code> year. The sliders cycle through an entire year in 36.5 <code>beats</code>, a million times fasterüèéÔ∏èthan the actual speed of time!</p>
<div id="exm-intro-doty" class="theorem example">
<p><span class="theorem-title"><strong>Example 1 </strong></span>&nbsp;</p>
</div>
<div class="grid">
<div class="g-col-6">
<div class="cell">
<details class="hidden"><summary>Code</summary><div class="sourceCode cell-code hidden" id="cb3" data-startfrom="269" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 268;"><span id="cb3-269"><a href="#cb3-269" aria-hidden="true" tabindex="-1"></a>viewof inputDoty <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">365</span>]<span class="op">,</span> {<span class="dt">value</span><span class="op">:</span> <span class="dv">306</span><span class="op">,</span> <span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"doty"</span>})<span class="op">;</span></span>
<span id="cb3-270"><a href="#cb3-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-271"><a href="#cb3-271" aria-hidden="true" tabindex="-1"></a>viewof year <span class="op">=</span> <span class="fu">transformInput</span>(</span>
<span id="cb3-272"><a href="#cb3-272" aria-hidden="true" tabindex="-1"></a>    Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="op">.</span><span class="dv">999</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="op">.</span><span class="bn">001</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"year"</span>})<span class="op">,</span></span>
<span id="cb3-273"><a href="#cb3-273" aria-hidden="true" tabindex="-1"></a>    {<span class="dt">bind</span><span class="op">:</span> viewof inputDoty<span class="op">,</span> <span class="dt">transform</span><span class="op">:</span> (x <span class="kw">=&gt;</span> x <span class="op">/</span> <span class="dv">365</span>)<span class="op">,</span> <span class="dt">invert</span><span class="op">:</span> (x <span class="kw">=&gt;</span> x <span class="op">*</span> <span class="dv">365</span>)}</span>
<span id="cb3-274"><a href="#cb3-274" aria-hidden="true" tabindex="-1"></a>)<span class="op">;</span></span>
<span id="cb3-275"><a href="#cb3-275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-276"><a href="#cb3-276" aria-hidden="true" tabindex="-1"></a>viewof monthInput <span class="op">=</span> <span class="fu">transformInput</span>(</span>
<span id="cb3-277"><a href="#cb3-277" aria-hidden="true" tabindex="-1"></a>    Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">1</span><span class="op">,</span> <span class="dv">12</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"month"</span>})<span class="op">,</span></span>
<span id="cb3-278"><a href="#cb3-278" aria-hidden="true" tabindex="-1"></a>    {<span class="dt">bind</span><span class="op">:</span> viewof inputDoty<span class="op">,</span> <span class="dt">transform</span><span class="op">:</span> doty2month<span class="op">,</span> <span class="dt">invert</span><span class="op">:</span> month2doty}</span>
<span id="cb3-279"><a href="#cb3-279" aria-hidden="true" tabindex="-1"></a>)<span class="op">;</span></span>
<span id="cb3-280"><a href="#cb3-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-281"><a href="#cb3-281" aria-hidden="true" tabindex="-1"></a>viewof dotmInput <span class="op">=</span> <span class="fu">transformInput</span>(</span>
<span id="cb3-282"><a href="#cb3-282" aria-hidden="true" tabindex="-1"></a>    Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">1</span><span class="op">,</span> <span class="dv">31</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"dotm"</span>})<span class="op">,</span></span>
<span id="cb3-283"><a href="#cb3-283" aria-hidden="true" tabindex="-1"></a>    {<span class="dt">bind</span><span class="op">:</span> viewof inputDoty<span class="op">,</span> <span class="dt">transform</span><span class="op">:</span> doty2dotm<span class="op">,</span> <span class="dt">invert</span><span class="op">:</span> (x <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(( <span class="dv">153</span> <span class="op">*</span> (</span>
<span id="cb3-284"><a href="#cb3-284" aria-hidden="true" tabindex="-1"></a>        viewof monthInput<span class="op">.</span><span class="at">value</span> <span class="op">&gt;</span> <span class="dv">2</span></span>
<span id="cb3-285"><a href="#cb3-285" aria-hidden="true" tabindex="-1"></a>        <span class="op">?</span> viewof monthInput<span class="op">.</span><span class="at">value</span> <span class="op">-</span> <span class="dv">3</span></span>
<span id="cb3-286"><a href="#cb3-286" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> viewof monthInput<span class="op">.</span><span class="at">value</span> <span class="op">+</span> <span class="dv">9</span>) <span class="op">+</span> <span class="dv">2</span></span>
<span id="cb3-287"><a href="#cb3-287" aria-hidden="true" tabindex="-1"></a>    ) <span class="op">/</span> <span class="dv">5</span> <span class="op">+</span> x <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb3-288"><a href="#cb3-288" aria-hidden="true" tabindex="-1"></a>))})<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-3-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-3-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-3-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-3-4" data-nodetype="declaration">

</div>
</div>
</div>
</div>
</div>
<div class="g-col-6">
<ol type="1">
<li><span><span id="ojs-element-id-8"></span></span></li>
<li><span><span id="ojs-element-id-9"></span></span></li>
<li><span><span id="ojs-element-id-10"></span></span></li>
</ol>
<div class="cell">
<details class="hidden"><summary>Code</summary><div class="sourceCode cell-code hidden" id="cb4" data-startfrom="299" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 298;"><span id="cb4-299"><a href="#cb4-299" aria-hidden="true" tabindex="-1"></a>viewof scrubberDoty <span class="op">=</span> <span class="fu">Scrubber</span>(numbers<span class="op">,</span> {<span class="dt">autoplay</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span> <span class="dt">alternate</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">delay</span><span class="op">:</span> <span class="fl">86.4</span><span class="op">,</span> <span class="dt">loopDelay</span><span class="op">:</span> <span class="dv">864</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<div id="ojs-cell-4" data-nodetype="declaration">

</div>
</div>
</div>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<div id="lst-intro-doty" class="listing">
<p>List&nbsp;1: Date to season conversion</p>
<pre id="lst-intro-doty" data-lst-cap="Date to season conversion"><code></code></pre>
</div>
</div></div></section><section id="sec-intro-year" class="level2 page-columns page-full" data-number="1.2"><h2 data-number="1.2" class="anchored" data-anchor-id="sec-intro-year">
<span class="header-section-number">1.2</span> Year</h2>
<p><code>Doty</code> dates (<code>day</code>) and <a href="https://en.wikipedia.org/wiki/Timestamp#:~:text=A%20timestamp%20is%20a%20sequence%20of%20characters%20or%20encoded%20information%20identifying%20when%20a%20certain%20event%20occurred%2C%20usually%20giving%20date%20and%20time%20of%20day%2C%20sometimes%20accurate%20to%20a%20small%20fraction%20of%20a%20second.">timestamps</a> (<code>day.stamp</code>) do not include years and thus can be reused from year to year. When a <code>doty</code> is combined with a year, it forms a <code>Decalendar</code> <code>ordinal</code><a href="#fn12" class="footnote-ref" id="fnref12" role="doc-noteref"><sup>12</sup></a> (<code>deco</code>) and represents a specific date (<code>year+day</code>) or time (<code>year+day.stamp</code>) in a specific year, instead of than a date (<code>day</code>) or time (<code>day.stamp</code>) that occurs every year or every leap year. Using the <a href="https://observablehq.com/about">Observable</a> <a href="https://observablehq.com/@observablehq/input-date#cell-111">datetime input</a> in <a href="#exm-intro-date">Example&nbsp;2</a>, you can select a year, month, <code>dotm</code>, hour, and minute to see the equivalent 1) <code>deco</code> timestamp (<code>year+day.clock</code>) and 2) year date (<code>year.yyy</code>) in <a href="#lst-intro-date">List&nbsp;2</a>.</p>
<div id="exm-intro-date" class="theorem example">
<p><span class="theorem-title"><strong>Example 2 </strong></span>&nbsp;</p>
</div>
<div class="grid">
<div class="g-col-6">
<div class="cell">
<details class="hidden"><summary>Code</summary><div class="sourceCode cell-code hidden" id="cb11" data-startfrom="631" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 630;"><span id="cb11-631"><a href="#cb11-631" aria-hidden="true" tabindex="-1"></a>viewof inputDatetime <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">datetime</span>({<span class="dt">label</span><span class="op">:</span> <span class="st">"Datetime"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"1970-01-01T00:00"</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<div id="ojs-cell-10" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="g-col-6">
<ol type="1">
<li><span><span id="ojs-element-id-11"></span></span></li>
<li><span><span id="ojs-element-id-12"></span></span></li>
</ol>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<div id="lst-intro-date" class="listing">
<p>List&nbsp;2: Date and time conversion</p>
<pre id="lst-intro-date" data-lst-cap="Date and time conversion" data-cap-location="margin"><code></code></pre>
</div>
</div></div><p>In <a href="#exm-intro-deco">Example&nbsp;3</a>, you can enter numeric year and <code>doty</code> values or type in a free-form <code>deco</code> to see the resulting 1) <a href="https://en.wikipedia.org/wiki/ISO_8601#Combined_date_and_time_representations">ISO 8601 timestamp</a> (<code>year-mm-ddThh:mm:ss</code>) and 2) year date in <a href="#lst-intro-deco">List&nbsp;3</a>. <a href="#exm-intro-deco">Example&nbsp;3</a> also has a Play‚ñ∂Ô∏èbutton in that cycles from <code>Day</code> <code>0</code> to <code>Day</code> <code>365</code> of <code>Year</code> <code>1969</code>. The cycle goes up to <code>Day</code> <code>0</code> of <code>Year</code> <code>1970</code>, because <code>Year</code> <code>1969</code> is a common year and does not have a <code>Day</code> <code>365</code>.</p>
<p>Interacting with the <a href="https://observablehq.com/@observablehq/input-range#m">number</a> inputs in <a href="#exm-intro-deco">Example&nbsp;3</a>, standardizes the <code>deco</code> in the <a href="https://observablehq.com/@observablehq/input-text">text</a> input to ensure years are integers and <code>doty</code> values are positive numbers below 366. Nevertheless, all of the inputs in <a href="#exm-intro-deco">Example&nbsp;3</a> support negative and fractional year and <code>doty</code> values. Negative <code>doty</code> values <a href="https://en.wikipedia.org/wiki/Shift_operator">shift</a> dates backward in time from the start of a given year into a previous year. Similarly, negative years shift dates backward starting from <code>Year</code> <code>0</code>, which is 1 BCE (Before the <a href="https://en.wikipedia.org/wiki/Common_Era">Common Era</a>).</p>
<div id="exm-intro-deco" class="theorem example">
<p><span class="theorem-title"><strong>Example 3 </strong></span>&nbsp;</p>
</div>
<div class="grid">
<div class="g-col-6">
<div class="cell">
<details class="hidden"><summary>Code</summary><div class="sourceCode cell-code hidden" id="cb12" data-startfrom="660" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 659;"><span id="cb12-660"><a href="#cb12-660" aria-hidden="true" tabindex="-1"></a>viewof yd <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">form</span>([</span>
<span id="cb12-661"><a href="#cb12-661" aria-hidden="true" tabindex="-1"></a>  Inputs<span class="op">.</span><span class="fu">number</span>({<span class="dt">label</span><span class="op">:</span> <span class="st">"year"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"1969"</span>})<span class="op">,</span></span>
<span id="cb12-662"><a href="#cb12-662" aria-hidden="true" tabindex="-1"></a>  Inputs<span class="op">.</span><span class="fu">number</span>({<span class="dt">label</span><span class="op">:</span> <span class="st">"doty"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"306"</span>})</span>
<span id="cb12-663"><a href="#cb12-663" aria-hidden="true" tabindex="-1"></a>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<div id="ojs-cell-11" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="hidden"><summary>Code</summary><div class="sourceCode cell-code hidden" id="cb13" data-startfrom="668" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 667;"><span id="cb13-668"><a href="#cb13-668" aria-hidden="true" tabindex="-1"></a>viewof decoOutput <span class="op">=</span> <span class="fu">transformInput</span>(</span>
<span id="cb13-669"><a href="#cb13-669" aria-hidden="true" tabindex="-1"></a>  Inputs<span class="op">.</span><span class="fu">text</span>({<span class="dt">label</span><span class="op">:</span> <span class="st">"deco"</span><span class="op">,</span> <span class="dt">placeholder</span><span class="op">:</span> <span class="st">"year+day.ddd"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"1969+306"</span>})<span class="op">,</span></span>
<span id="cb13-670"><a href="#cb13-670" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">bind</span><span class="op">:</span> viewof yd<span class="op">,</span> <span class="dt">transform</span><span class="op">:</span> doty2deco<span class="op">,</span> <span class="dt">invert</span><span class="op">:</span> deco2doty})<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<div id="ojs-cell-12" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="g-col-6">
<ol type="1">
<li><span><span id="ojs-element-id-13"></span></span></li>
<li><span><span id="ojs-element-id-14"></span></span></li>
</ol>
<div class="cell">
<details class="hidden"><summary>Code</summary><div class="sourceCode cell-code hidden" id="cb14" data-startfrom="681" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 680;"><span id="cb14-681"><a href="#cb14-681" aria-hidden="true" tabindex="-1"></a>viewof scrubberDeco <span class="op">=</span> <span class="fu">Scrubber</span>(numbers<span class="op">,</span> {<span class="dt">autoplay</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span> <span class="dt">alternate</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">delay</span><span class="op">:</span> <span class="fl">86.4</span><span class="op">,</span> <span class="dt">loopDelay</span><span class="op">:</span> <span class="dv">864</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<div id="ojs-cell-13" data-nodetype="declaration">

</div>
</div>
</div>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<div id="lst-intro-deco" class="listing">
<p>List&nbsp;3: Deco timestamp conversion</p>
<pre id="lst-intro-deco" data-lst-cap="Deco timestamp conversion" data-cap-location="margin"><code></code></pre>
</div>
</div></div></section><section id="sec-intro-dek" class="level2 page-columns page-full" data-number="1.3"><h2 data-number="1.3" class="anchored" data-anchor-id="sec-intro-dek">
<span class="header-section-number">1.3</span> Dek</h2>
<p>As mentioned in <a href="#sec-intro-doty">Section&nbsp;1.1</a>, <code>deks</code> function as both months and weeks in <code>Decalendar</code>. A <code>dek</code> consists of 2 groups of 5 days called <code>pents</code><a href="#fn13" class="footnote-ref" id="fnref13" role="doc-noteref"><sup>13</sup></a>. Each <code>pent</code> can follow a sequence of workdays and restdays called a <code>pently</code> schedule<a href="#fn14" class="footnote-ref" id="fnref14" role="doc-noteref"><sup>14</sup></a>. <a href="#fig-schedules">Figure&nbsp;2</a> compares the typical weekly schedule and the <code>Schedule</code> <code>3</code> <code>pently</code> schedule. Like other <code>pently</code> schedules, <code>Schedule</code> <code>3</code> is named after the number of workdays it contains. The 3 workdays in <code>Schedule</code> <code>3</code> are followed by a 2-day <code>pentend</code>, the <code>Decalender</code> equivalent of a weekend.</p>
<p>Unlike <code>Schedule</code> <code>3</code> and the other <code>pently</code> schedules, the weekly schedule is asymmetric and divides up workdays into proportions that are easier to express as fractions: 3/8 (.375), 1/3 (.3ÃÖ), and 7/24 (0.2916ÃÖ). In contrast, <code>pently</code> schedules divides each workday into simple, symmetrical proportions that are never <a href="https://en.wikipedia.org/wiki/Repeating_decimal">repeating decimal</a> numbers. The <code>Schedule</code> <code>3</code> workday is longer the typical 9-to-5, but the longer workday is compensated by more frequent restdays.</p>
<div class="quarto-embed-nb-cell page-columns page-full">
<div id="fig-schedules" class="cell quarto-layout-panel page-columns page-full" data-execution="{&quot;iopub.execute_input&quot;:&quot;2023-11-04T18:31:44.113101Z&quot;,&quot;iopub.status.busy&quot;:&quot;2023-11-04T18:31:44.112990Z&quot;,&quot;iopub.status.idle&quot;:&quot;2023-11-04T18:31:44.545133Z&quot;,&quot;shell.execute_reply&quot;:&quot;2023-11-04T18:31:44.544847Z&quot;}" data-tags="[&quot;fig-schedules&quot;]" data-execution_count="2">
<figure class="figure page-columns page-full"><div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-schedules-1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="dec_tabset_files/figure-html/fig-schedules-output-1.png" class="img-fluid figure-img" alt="Bar chart showing work in red and rest in blue across 7 days" data-ref-parent="fig-schedules"></p>
<figcaption class="figure-caption">(a) Proportion of the day spent working and resting every day of the week</figcaption></figure>
</div>
</div>
<div class="cell-output cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-schedules-2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="dec_tabset_files/figure-html/fig-schedules-output-2.png" class="img-fluid figure-img" alt="Bar chart showing work in red and rest in blue across 5 days" data-ref-parent="fig-schedules"></p>
<figcaption class="figure-caption">(b) Proportion of the day spent working and resting every day of the pent</figcaption></figure>
</div>
</div>
</div>
<p></p><figcaption class="figure-caption margin-caption">Figure&nbsp;2: Weekly schedule and Schedule 3 comparison</figcaption><p></p>
</figure>
</div>
<a class="quarto-notebook-link" id="nblink-1" href="schedules.ipynb.html#fig-schedules">Source: schedules.ipynb</a></div>
<p><a href="#exm-intro-pent">Example&nbsp;4</a> provides the opportunity to explore all four of the <code>pently</code> schedules. <code>Schedule</code> <code>3</code> is the default <code>pently</code> schedule, and should be followed unless there is a compelling reason to do otherwise. Despite having different numbers of workdays, all <code>pently</code> schedules keep the amount of spent at work constant at 1.2 days (120 <code>cents</code>) per <code>pent</code>. Every <code>pently</code> schedule also splits up workdays symmetrically so that the time before work is equal to the time after work. You can select which schedule to view in <a href="#exm-intro-pent">Example&nbsp;4</a> using the <a href="https://observablehq.com/about">Observable</a> <a href="https://observablehq.com/@observablehq/input-radio">radio inputs</a>. <a href="#sec-sched">Section&nbsp;5.4.3</a> provides more information on <code>Schedule</code> <code>3</code> and the other <code>pently</code> schedules.</p>
<p>You can also use the <a href="https://observablehq.com/@mootari/range-slider">interval sliders</a> to create a custom schedule and the Download‚¨áÔ∏èbutton to obtain the schedule data. Each interval is summarized by a <code>Declock</code> <code>slice</code> shown next to its slider. <code>Decalendar</code> and <code>Declock</code> <code>slices</code> are inspired by <a href="https://en.wikipedia.org/wiki/Array_slicing#:~:text=In%20computer%20programming%2C%20array%20slicing%20is%20an%20operation%20that%20extracts%20a%20subset%20of%20elements%20from%20an%20array%20and%20packages%20them%20as%20another%20array">array slicing</a> in computer programming and are used to represent date and time intervals. The <code>slice</code> that summarizes the <code>Schedule</code> <code>3</code> workday is <code>.3:.7</code>, where .3 (7.2 hours) is the <code>start</code> and .7 (16.8 hours) is the <code>stop</code>. Additional details regarding <code>slices</code> and other ways to express intervals are available in <a href="#sec-slice">Section&nbsp;6.1</a>.</p>
<div id="exm-intro-pent" class="theorem example">
<p><span class="theorem-title"><strong>Example 4 </strong></span>&nbsp;</p>
</div>
<div class="grid">
<div class="g-col-6">
<div class="cell">
<details class="hidden"><summary>Code</summary><div class="sourceCode cell-code hidden" id="cb18" data-startfrom="800" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 799;"><span id="cb18-800"><a href="#cb18-800" aria-hidden="true" tabindex="-1"></a>viewof intervals <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">form</span>([</span>
<span id="cb18-801"><a href="#cb18-801" aria-hidden="true" tabindex="-1"></a>  <span class="fu">interval</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="op">.</span><span class="bn">01</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> [<span class="op">.</span><span class="dv">3</span><span class="op">,</span> <span class="op">.</span><span class="dv">7</span>]<span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">'0 or 5'</span><span class="op">,</span> <span class="dt">width</span><span class="op">:</span> <span class="dv">195</span><span class="op">,</span> <span class="dt">format</span><span class="op">:</span> ([start<span class="op">,</span> end]) <span class="kw">=&gt;</span> start <span class="op">===</span> end <span class="op">?</span> <span class="st">""</span> <span class="op">:</span> <span class="vs">`</span><span class="sc">${</span><span class="fu">formatDecimal</span>(start)<span class="sc">}</span><span class="vs">:</span><span class="sc">${</span><span class="fu">formatDecimal</span>(end)<span class="sc">}</span><span class="vs">`</span>})<span class="op">,</span></span>
<span id="cb18-802"><a href="#cb18-802" aria-hidden="true" tabindex="-1"></a>  <span class="fu">interval</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="op">.</span><span class="bn">01</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> [<span class="op">.</span><span class="dv">3</span><span class="op">,</span> <span class="op">.</span><span class="dv">7</span>]<span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">'1 or 6'</span><span class="op">,</span> <span class="dt">width</span><span class="op">:</span> <span class="dv">195</span><span class="op">,</span> <span class="dt">format</span><span class="op">:</span> ([start<span class="op">,</span> end]) <span class="kw">=&gt;</span> start <span class="op">===</span> end <span class="op">?</span> <span class="st">""</span> <span class="op">:</span> <span class="vs">`</span><span class="sc">${</span><span class="fu">formatDecimal</span>(start)<span class="sc">}</span><span class="vs">:</span><span class="sc">${</span><span class="fu">formatDecimal</span>(end)<span class="sc">}</span><span class="vs">`</span>})<span class="op">,</span></span>
<span id="cb18-803"><a href="#cb18-803" aria-hidden="true" tabindex="-1"></a>  <span class="fu">interval</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="op">.</span><span class="bn">01</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> [<span class="op">.</span><span class="dv">3</span><span class="op">,</span> <span class="op">.</span><span class="dv">7</span>]<span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">'2 or 7'</span><span class="op">,</span> <span class="dt">width</span><span class="op">:</span> <span class="dv">195</span><span class="op">,</span> <span class="dt">format</span><span class="op">:</span> ([start<span class="op">,</span> end]) <span class="kw">=&gt;</span> start <span class="op">===</span> end <span class="op">?</span> <span class="st">""</span> <span class="op">:</span> <span class="vs">`</span><span class="sc">${</span><span class="fu">formatDecimal</span>(start)<span class="sc">}</span><span class="vs">:</span><span class="sc">${</span><span class="fu">formatDecimal</span>(end)<span class="sc">}</span><span class="vs">`</span>})<span class="op">,</span></span>
<span id="cb18-804"><a href="#cb18-804" aria-hidden="true" tabindex="-1"></a>  <span class="fu">interval</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="op">.</span><span class="bn">01</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span>]<span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">'3 or 8'</span><span class="op">,</span> <span class="dt">width</span><span class="op">:</span> <span class="dv">195</span><span class="op">,</span> <span class="dt">format</span><span class="op">:</span> ([start<span class="op">,</span> end]) <span class="kw">=&gt;</span> start <span class="op">===</span> end <span class="op">?</span> <span class="st">""</span> <span class="op">:</span> <span class="vs">`</span><span class="sc">${</span><span class="fu">formatDecimal</span>(start)<span class="sc">}</span><span class="vs">:</span><span class="sc">${</span><span class="fu">formatDecimal</span>(end)<span class="sc">}</span><span class="vs">`</span>})<span class="op">,</span></span>
<span id="cb18-805"><a href="#cb18-805" aria-hidden="true" tabindex="-1"></a>  <span class="fu">interval</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="op">.</span><span class="bn">01</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span>]<span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">'4 or 9'</span><span class="op">,</span> <span class="dt">width</span><span class="op">:</span> <span class="dv">195</span><span class="op">,</span> <span class="dt">format</span><span class="op">:</span> ([start<span class="op">,</span> end]) <span class="kw">=&gt;</span> start <span class="op">===</span> end <span class="op">?</span> <span class="st">""</span> <span class="op">:</span> <span class="vs">`</span><span class="sc">${</span><span class="fu">formatDecimal</span>(start)<span class="sc">}</span><span class="vs">:</span><span class="sc">${</span><span class="fu">formatDecimal</span>(end)<span class="sc">}</span><span class="vs">`</span>})<span class="op">,</span></span>
<span id="cb18-806"><a href="#cb18-806" aria-hidden="true" tabindex="-1"></a>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<div id="ojs-cell-17" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="g-col-6">
<div class="cell">
<details class="hidden"><summary>Code</summary><div class="sourceCode cell-code hidden" id="cb19" data-startfrom="814" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 813;"><span id="cb19-814"><a href="#cb19-814" aria-hidden="true" tabindex="-1"></a>viewof schedule <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">radio</span>([<span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span>]<span class="op">,</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Schedule"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">3</span>})</span>
<span id="cb19-815"><a href="#cb19-815" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-816"><a href="#cb19-816" aria-hidden="true" tabindex="-1"></a>viewof filename <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">text</span>({<span class="dt">label</span><span class="op">:</span> <span class="st">"Filename"</span><span class="op">,</span> <span class="dt">placeholder</span><span class="op">:</span> <span class="st">"Enter the filename"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="vs">`schedule</span><span class="sc">${</span>schedule<span class="sc">}</span><span class="vs">.csv`</span>})</span>
<span id="cb19-817"><a href="#cb19-817" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-818"><a href="#cb19-818" aria-hidden="true" tabindex="-1"></a><span class="fu">button</span>(durations<span class="op">,</span> filename)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-18-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-18-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-18-3" data-nodetype="expression">

</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center">
<details class="hidden"><summary>Code</summary><div class="sourceCode cell-code hidden" id="cb20" data-startfrom="830" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 829;"><span id="cb20-830"><a href="#cb20-830" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/@dec/pent</span></span>
<span id="cb20-831"><a href="#cb20-831" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb20-832"><a href="#cb20-832" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="kw">null</span>}<span class="op">,</span></span>
<span id="cb20-833"><a href="#cb20-833" aria-hidden="true" tabindex="-1"></a>  <span class="dt">color</span><span class="op">:</span> {<span class="dt">scheme</span><span class="op">:</span> <span class="st">"Set1"</span><span class="op">,</span> <span class="dt">legend</span><span class="op">:</span> <span class="st">"swatches"</span><span class="op">,</span> <span class="dt">reverse</span><span class="op">:</span> <span class="kw">true</span>}<span class="op">,</span></span>
<span id="cb20-834"><a href="#cb20-834" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span> <span class="dt">domain</span><span class="op">:</span> [<span class="dv">1</span><span class="op">,</span> <span class="dv">0</span>]<span class="op">,</span> <span class="dt">tickPadding</span><span class="op">:</span> <span class="dv">18</span>}<span class="op">,</span></span>
<span id="cb20-835"><a href="#cb20-835" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb20-836"><a href="#cb20-836" aria-hidden="true" tabindex="-1"></a>  Plot<span class="op">.</span><span class="fu">barY</span>(durations<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"label"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"duration"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"group"</span>})<span class="op">,</span></span>
<span id="cb20-837"><a href="#cb20-837" aria-hidden="true" tabindex="-1"></a>  Plot<span class="op">.</span><span class="fu">textY</span>(</span>
<span id="cb20-838"><a href="#cb20-838" aria-hidden="true" tabindex="-1"></a>      durations<span class="op">,</span></span>
<span id="cb20-839"><a href="#cb20-839" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">stackY</span>(</span>
<span id="cb20-840"><a href="#cb20-840" aria-hidden="true" tabindex="-1"></a>        Plot<span class="op">.</span><span class="fu">groupX</span>(</span>
<span id="cb20-841"><a href="#cb20-841" aria-hidden="true" tabindex="-1"></a>          { <span class="dt">y</span><span class="op">:</span> <span class="st">"first"</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"first"</span> }<span class="op">,</span></span>
<span id="cb20-842"><a href="#cb20-842" aria-hidden="true" tabindex="-1"></a>          {</span>
<span id="cb20-843"><a href="#cb20-843" aria-hidden="true" tabindex="-1"></a>            <span class="dt">x</span><span class="op">:</span> <span class="st">"label"</span><span class="op">,</span></span>
<span id="cb20-844"><a href="#cb20-844" aria-hidden="true" tabindex="-1"></a>            <span class="dt">z</span><span class="op">:</span> <span class="st">"group"</span><span class="op">,</span></span>
<span id="cb20-845"><a href="#cb20-845" aria-hidden="true" tabindex="-1"></a>            <span class="dt">y</span><span class="op">:</span> <span class="st">"duration"</span><span class="op">,</span></span>
<span id="cb20-846"><a href="#cb20-846" aria-hidden="true" tabindex="-1"></a>            <span class="dt">text</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> (d<span class="op">.</span><span class="at">duration</span> <span class="op">&lt;</span> <span class="op">.</span><span class="bn">0001</span> <span class="op">?</span> <span class="kw">null</span> <span class="op">:</span> <span class="fu">formatDecimal</span>(d<span class="op">.</span><span class="at">duration</span>))<span class="op">,</span></span>
<span id="cb20-847"><a href="#cb20-847" aria-hidden="true" tabindex="-1"></a>            <span class="dt">fill</span><span class="op">:</span> <span class="st">"white"</span><span class="op">,</span></span>
<span id="cb20-848"><a href="#cb20-848" aria-hidden="true" tabindex="-1"></a>            <span class="dt">stroke</span><span class="op">:</span> <span class="st">"white"</span><span class="op">,</span></span>
<span id="cb20-849"><a href="#cb20-849" aria-hidden="true" tabindex="-1"></a>            <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">32</span><span class="op">,</span></span>
<span id="cb20-850"><a href="#cb20-850" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb20-851"><a href="#cb20-851" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb20-852"><a href="#cb20-852" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb20-853"><a href="#cb20-853" aria-hidden="true" tabindex="-1"></a>    )<span class="op">,</span></span>
<span id="cb20-854"><a href="#cb20-854" aria-hidden="true" tabindex="-1"></a>  ]})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div id="fig-intro-dek" class="quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="figure page-columns page-full"><div id="ojs-cell-19" data-nodetype="expression">

</div>
<figcaption class="figure-caption margin-caption">Figure&nbsp;3: Pently schedule explorer</figcaption></figure>
</div>
</div>
<p><code>Slices</code> can be used to select <code>Declock</code> time intervals, as in <a href="#exm-intro-pent">Example&nbsp;4</a> above, or <code>Decalendar</code> date intervals, as in <a href="#exm-intro-dotd">Example&nbsp;5</a> below. <code>Decalendar</code> date intervals can represent events take place over multiple days. In addition to <code>slices</code>, <code>Decalendar</code> and <code>Declock</code> intervals can also be chosen using <code>spreads</code>. Use the <a href="https://observablehq.com/about">Observable</a> <a href="https://observablehq.com/@observablehq/input-button">button</a> and <a href="https://observablehq.com/@observablehq/input-checkbox">checkbox</a> inputs in <a href="#exm-intro-dotd">Example&nbsp;5</a> to display different <code>dotd</code> combinations in <a href="#fig-intro-dotd">Figure&nbsp;4</a>. <a href="#fig-intro-dotd">Figure&nbsp;4</a> shows dates selected by a <code>slice</code> in <span class="blue">blue</span>, dates selected by a <code>spread</code> in <span class="orange">orange</span>, dates selected by both in <span class="green">green</span>, and dates selected by neither in <span class="gray">gray</span>. <a href="#sec-slice">Section&nbsp;6.1</a> and <a href="#sec-spread">Section&nbsp;6.3</a> build on the practical introduction to <code>slices</code> and <code>spreads</code> provided by <a href="#exm-intro-dotd">Example&nbsp;5</a>.</p>
<p>The <a href="#exm-intro-dotd">Example&nbsp;5</a> button and checkbox inputs will modify the associated <code>slice</code> and <code>spread</code> text and numeric inputs as needed to select the desired days-of-the-<code>dek</code>. The numeric inputs for <code>slices</code> are the <code>start</code>üé¨index, the <code>stop</code>üõëindex, and the <code>step</code>üë£size, which are separated by colons (<code>start:stop:step</code>) when combined into a <code>slice</code>. Similarly, the numeric inputs for <code>spreads</code> are the <code>start</code>üé¨orüõë<code>stop</code> index, the <code>span</code>ü™Ωsize, the <code>split</code> size, and the <code>space</code> size, which are typically delimited by greater-than signs (<code>start&gt;span&gt;split&gt;space</code>) or a mix of greater-than and less-than signs (<code>stop&lt;span&gt;split&gt;space</code>).</p>
<p>The numeric inputs in <a href="#exm-intro-dotd">Example&nbsp;5</a> cannot capture the full power of <code>spreads</code> and <code>slices</code>, because <code>slices</code> can have any number of <code>steps</code> and, likewise, <code>spreads</code> can have any number of alternating <code>split</code> and <code>space</code> sizes. We can select all even or odd days-of-the-<code>dek</code> using a <code>slice</code> with a single <code>step</code> (<code>::2</code> or <code>1::2</code>) or a <code>spread</code> with one <code>split</code>-<code>space</code> pair (<code>&gt;&gt;&gt;1</code> or <code>1&gt;&gt;&gt;1</code>). More complex patterns, such as prime or composite days-of-the-<code>dek</code>, require multiple <code>step</code> sizes for <code>slices</code> (<code>2:::2:2:5</code> or <code>4::2:2::5</code>) or multiple <code>split</code>-<code>space</code> pairs (<code>2&gt;&gt;2&gt;1&gt;&gt;1&gt;&gt;4</code> or <code>4&gt;&gt;&gt;1&gt;&gt;1&gt;2&gt;4</code>).</p>
<div id="exm-intro-dotd" class="theorem example">
<p><span class="theorem-title"><strong>Example 5 </strong></span>&nbsp;</p>
</div>
<div class="cell">
<details class="hidden"><summary>Code</summary><div class="sourceCode cell-code hidden" id="cb21" data-startfrom="869" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 868;"><span id="cb21-869"><a href="#cb21-869" aria-hidden="true" tabindex="-1"></a>viewof sliceDotd <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">checkbox</span>([<span class="op">...</span><span class="bu">Array</span>(<span class="dv">10</span>)<span class="op">.</span><span class="fu">keys</span>()]<span class="op">,</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"slice dotd"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> [<span class="dv">1</span><span class="op">,</span> <span class="dv">6</span>]})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<div id="ojs-cell-20" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="hidden"><summary>Code</summary><div class="sourceCode cell-code hidden" id="cb22" data-startfrom="874" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 873;"><span id="cb22-874"><a href="#cb22-874" aria-hidden="true" tabindex="-1"></a>viewof spreadDotd <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">checkbox</span>([<span class="op">...</span><span class="bu">Array</span>(<span class="dv">10</span>)<span class="op">.</span><span class="fu">keys</span>()]<span class="op">,</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"spread dotd"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> [<span class="dv">1</span><span class="op">,</span> <span class="dv">6</span>]})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<div id="ojs-cell-21" data-nodetype="declaration">

</div>
</div>
</div>
<div class="grid">
<div class="g-col-6">
<div class="cell">
<details class="hidden"><summary>Code</summary><div class="sourceCode cell-code hidden" id="cb23" data-startfrom="883" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 882;"><span id="cb23-883"><a href="#cb23-883" aria-hidden="true" tabindex="-1"></a>viewof sliceString <span class="op">=</span> <span class="fu">transformInput</span>(</span>
<span id="cb23-884"><a href="#cb23-884" aria-hidden="true" tabindex="-1"></a>  Inputs<span class="op">.</span><span class="fu">text</span>({<span class="dt">label</span><span class="op">:</span> <span class="st">"slice string"</span><span class="op">,</span> <span class="dt">placeholder</span><span class="op">:</span> <span class="st">"Enter slice string"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"0:366"</span>})<span class="op">,</span></span>
<span id="cb23-885"><a href="#cb23-885" aria-hidden="true" tabindex="-1"></a>{<span class="dt">bind</span><span class="op">:</span> viewof sliceInputs<span class="op">,</span> <span class="dt">transform</span><span class="op">:</span> encodeSlice<span class="op">,</span> <span class="dt">invert</span><span class="op">:</span> decodeSlice})<span class="op">;</span></span>
<span id="cb23-886"><a href="#cb23-886" aria-hidden="true" tabindex="-1"></a>viewof sliceInputs <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">form</span>([</span>
<span id="cb23-887"><a href="#cb23-887" aria-hidden="true" tabindex="-1"></a>    Inputs<span class="op">.</span><span class="fu">number</span>([<span class="op">-</span><span class="dv">366</span><span class="op">,</span> <span class="dv">366</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"start"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">placeholder</span><span class="op">:</span> <span class="st">"Enter start index"</span>})<span class="op">,</span></span>
<span id="cb23-888"><a href="#cb23-888" aria-hidden="true" tabindex="-1"></a>    Inputs<span class="op">.</span><span class="fu">number</span>([<span class="op">-</span><span class="dv">366</span><span class="op">,</span> <span class="dv">366</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"stop"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">366</span><span class="op">,</span> <span class="dt">placeholder</span><span class="op">:</span> <span class="st">"Enter stop index"</span>})<span class="op">,</span></span>
<span id="cb23-889"><a href="#cb23-889" aria-hidden="true" tabindex="-1"></a>    Inputs<span class="op">.</span><span class="fu">number</span>([<span class="op">-</span><span class="dv">366</span><span class="op">,</span> <span class="dv">366</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"step"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span> <span class="dt">placeholder</span><span class="op">:</span> <span class="st">"Enter step size"</span>})<span class="op">,</span></span>
<span id="cb23-890"><a href="#cb23-890" aria-hidden="true" tabindex="-1"></a>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-22-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-22-2" data-nodetype="declaration">

</div>
</div>
</div>
</div>
</div>
<div class="g-col-6">
<div class="cell">
<details class="hidden"><summary>Code</summary><div class="sourceCode cell-code hidden" id="cb24" data-startfrom="897" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 896;"><span id="cb24-897"><a href="#cb24-897" aria-hidden="true" tabindex="-1"></a>viewof spreadString <span class="op">=</span> <span class="fu">transformInput</span>(</span>
<span id="cb24-898"><a href="#cb24-898" aria-hidden="true" tabindex="-1"></a>  Inputs<span class="op">.</span><span class="fu">text</span>({<span class="dt">label</span><span class="op">:</span> <span class="st">"spread string"</span><span class="op">,</span> <span class="dt">placeholder</span><span class="op">:</span> <span class="st">"Enter spread string"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"0&gt;366&gt;3&gt;2"</span>})<span class="op">,</span></span>
<span id="cb24-899"><a href="#cb24-899" aria-hidden="true" tabindex="-1"></a>{<span class="dt">bind</span><span class="op">:</span> viewof spreadInputs<span class="op">,</span> <span class="dt">transform</span><span class="op">:</span> encodeSpread<span class="op">,</span> <span class="dt">invert</span><span class="op">:</span> decodeSpread})<span class="op">;</span></span>
<span id="cb24-900"><a href="#cb24-900" aria-hidden="true" tabindex="-1"></a>viewof spreadInputs <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">form</span>([</span>
<span id="cb24-901"><a href="#cb24-901" aria-hidden="true" tabindex="-1"></a>    Inputs<span class="op">.</span><span class="fu">number</span>([<span class="op">-</span><span class="dv">366</span><span class="op">,</span> <span class="dv">366</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"start"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">placeholder</span><span class="op">:</span> <span class="st">"Enter start index"</span>})<span class="op">,</span></span>
<span id="cb24-902"><a href="#cb24-902" aria-hidden="true" tabindex="-1"></a>    Inputs<span class="op">.</span><span class="fu">number</span>([<span class="op">-</span><span class="dv">366</span><span class="op">,</span> <span class="dv">366</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"span"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">366</span><span class="op">,</span> <span class="dt">placeholder</span><span class="op">:</span> <span class="st">"Enter span size"</span>})<span class="op">,</span></span>
<span id="cb24-903"><a href="#cb24-903" aria-hidden="true" tabindex="-1"></a>    Inputs<span class="op">.</span><span class="fu">number</span>([<span class="op">-</span><span class="dv">366</span><span class="op">,</span> <span class="dv">366</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"split"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">3</span><span class="op">,</span> <span class="dt">placeholder</span><span class="op">:</span> <span class="st">"Enter split size"</span>})<span class="op">,</span></span>
<span id="cb24-904"><a href="#cb24-904" aria-hidden="true" tabindex="-1"></a>    Inputs<span class="op">.</span><span class="fu">number</span>([<span class="op">-</span><span class="dv">366</span><span class="op">,</span> <span class="dv">366</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"space"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span> <span class="dt">placeholder</span><span class="op">:</span> <span class="st">"Enter space size"</span>})<span class="op">,</span></span>
<span id="cb24-905"><a href="#cb24-905" aria-hidden="true" tabindex="-1"></a>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-23-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-23-2" data-nodetype="declaration">

</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell">
<details class="hidden"><summary>Code</summary><div class="sourceCode cell-code hidden" id="cb25" data-startfrom="912" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 911;"><span id="cb25-912"><a href="#cb25-912" aria-hidden="true" tabindex="-1"></a>viewof togglePlot <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">button</span>([</span>
<span id="cb25-913"><a href="#cb25-913" aria-hidden="true" tabindex="-1"></a>  [invertDotd <span class="op">?</span> <span class="st">"None"</span> <span class="op">:</span> <span class="st">"All"</span><span class="op">,</span> value <span class="kw">=&gt;</span> [<span class="op">...</span><span class="bu">Array</span>(<span class="dv">10</span>)<span class="op">.</span><span class="fu">keys</span>()]]<span class="op">,</span></span>
<span id="cb25-914"><a href="#cb25-914" aria-hidden="true" tabindex="-1"></a>  [invertDotd <span class="op">?</span> <span class="st">"Even"</span> <span class="op">:</span> <span class="st">"Odd"</span><span class="op">,</span> value <span class="kw">=&gt;</span> [<span class="dv">1</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">9</span>]]<span class="op">,</span></span>
<span id="cb25-915"><a href="#cb25-915" aria-hidden="true" tabindex="-1"></a>  [invertDotd <span class="op">?</span> <span class="fu">html</span><span class="vs">`&lt;s&gt;Prime&lt;/s&gt;`</span> <span class="op">:</span> <span class="st">"Prime"</span><span class="op">,</span> value <span class="kw">=&gt;</span> [<span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">7</span>]]<span class="op">,</span></span>
<span id="cb25-916"><a href="#cb25-916" aria-hidden="true" tabindex="-1"></a>  [invertDotd <span class="op">?</span> <span class="fu">html</span><span class="vs">`&lt;s&gt;Composite&lt;/s&gt;`</span> <span class="op">:</span> <span class="st">"Composite"</span><span class="op">,</span> value <span class="kw">=&gt;</span> [<span class="dv">4</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">9</span>]]<span class="op">,</span></span>
<span id="cb25-917"><a href="#cb25-917" aria-hidden="true" tabindex="-1"></a>  [invertDotd <span class="op">?</span> <span class="fu">html</span><span class="vs">`&lt;s&gt;Schedule2&lt;/s&gt;`</span> <span class="op">:</span> <span class="st">"Schedule2"</span><span class="op">,</span> value <span class="kw">=&gt;</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span>]]<span class="op">,</span></span>
<span id="cb25-918"><a href="#cb25-918" aria-hidden="true" tabindex="-1"></a>  [invertDotd <span class="op">?</span> <span class="fu">html</span><span class="vs">`&lt;s&gt;Schedule3&lt;/s&gt;`</span> <span class="op">:</span> <span class="st">"Schedule3"</span><span class="op">,</span> value <span class="kw">=&gt;</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">7</span>]]<span class="op">,</span></span>
<span id="cb25-919"><a href="#cb25-919" aria-hidden="true" tabindex="-1"></a>  [invertDotd <span class="op">?</span> <span class="fu">html</span><span class="vs">`&lt;s&gt;Schedule4&lt;/s&gt;`</span> <span class="op">:</span> <span class="st">"Schedule4"</span><span class="op">,</span> value <span class="kw">=&gt;</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">8</span>]]<span class="op">,</span></span>
<span id="cb25-920"><a href="#cb25-920" aria-hidden="true" tabindex="-1"></a>]<span class="op">,</span> {<span class="dt">value</span><span class="op">:</span> []<span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"select dotd"</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<div id="ojs-cell-24" data-nodetype="declaration">

</div>
</div>
</div>
<div class="grid">
<div class="g-col-6">
<div class="cell">
<details class="hidden"><summary>Code</summary><div class="sourceCode cell-code hidden" id="cb26" data-startfrom="928" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 927;"><span id="cb26-928"><a href="#cb26-928" aria-hidden="true" tabindex="-1"></a>viewof invertDotd <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">toggle</span>({<span class="dt">label</span><span class="op">:</span> <span class="st">"invert buttons"</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<div id="ojs-cell-25" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="g-col-6">
<div class="cell">
<details class="hidden"><summary>Code</summary><div class="sourceCode cell-code hidden" id="cb27" data-startfrom="935" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 934;"><span id="cb27-935"><a href="#cb27-935" aria-hidden="true" tabindex="-1"></a>viewof sliceOrSpread <span class="op">=</span> <span class="fu">toggleSwitch</span>({<span class="dt">textOn</span><span class="op">:</span> invertDotd <span class="op">?</span> <span class="st">"Spread"</span> <span class="op">:</span> <span class="st">'Slice'</span> <span class="op">,</span> <span class="dt">textOff</span><span class="op">:</span> invertDotd <span class="op">?</span> <span class="st">"Slice"</span> <span class="op">:</span> <span class="st">'Spread'</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<div id="ojs-cell-26" data-nodetype="declaration">

</div>
</div>
</div>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center">
<details class="hidden"><summary>Code</summary><div class="sourceCode cell-code hidden" id="cb28" data-startfrom="948" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 947;"><span id="cb28-948"><a href="#cb28-948" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/@dec/dotd</span></span>
<span id="cb28-949"><a href="#cb28-949" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb28-950"><a href="#cb28-950" aria-hidden="true" tabindex="-1"></a>  <span class="dt">padding</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb28-951"><a href="#cb28-951" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> {<span class="dt">axis</span><span class="op">:</span> <span class="st">"top"</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="kw">null</span>}<span class="op">,</span></span>
<span id="cb28-952"><a href="#cb28-952" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span> <span class="dt">tickPadding</span><span class="op">:</span> <span class="dv">12</span>}<span class="op">,</span></span>
<span id="cb28-953"><a href="#cb28-953" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb28-954"><a href="#cb28-954" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">cell</span>(dates<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> d <span class="kw">=&gt;</span> d[<span class="dv">2</span>]<span class="op">,</span> <span class="dt">y</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> d <span class="kw">=&gt;</span></span>
<span id="cb28-955"><a href="#cb28-955" aria-hidden="true" tabindex="-1"></a>      sliceArray<span class="op">.</span><span class="fu">includes</span>(d) <span class="op">&amp;&amp;</span> spreadArray<span class="op">.</span><span class="fu">includes</span>(d) <span class="op">?</span> <span class="st">"green"</span> <span class="op">:</span></span>
<span id="cb28-956"><a href="#cb28-956" aria-hidden="true" tabindex="-1"></a>      sliceArray<span class="op">.</span><span class="fu">includes</span>(d) <span class="op">&amp;&amp;</span> <span class="op">!</span>spreadArray<span class="op">.</span><span class="fu">includes</span>(d) <span class="op">?</span> <span class="st">"blue"</span> <span class="op">:</span></span>
<span id="cb28-957"><a href="#cb28-957" aria-hidden="true" tabindex="-1"></a>      <span class="op">!</span>sliceArray<span class="op">.</span><span class="fu">includes</span>(d) <span class="op">&amp;&amp;</span> spreadArray<span class="op">.</span><span class="fu">includes</span>(d) <span class="op">?</span> <span class="st">"orange"</span> <span class="op">:</span> <span class="st">"grey"</span><span class="op">,</span> <span class="dt">inset</span><span class="op">:</span> <span class="fl">0.5</span>})<span class="op">,</span></span>
<span id="cb28-958"><a href="#cb28-958" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">text</span>(dates<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> d <span class="kw">=&gt;</span> d[<span class="dv">2</span>]<span class="op">,</span> <span class="dt">y</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"white"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"white"</span><span class="op">,</span> <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">20</span>})</span>
<span id="cb28-959"><a href="#cb28-959" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb28-960"><a href="#cb28-960" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div id="fig-intro-dotd" class="quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="figure page-columns page-full"><div id="ojs-cell-27" data-nodetype="expression">

</div>
<figcaption class="figure-caption margin-caption">Figure&nbsp;4: Decalendar date selector</figcaption></figure>
</div>
</div>
</section></section><section id="sec-basics" class="level1 page-columns page-full" data-number="2"><h1 data-number="2">
<span class="header-section-number">2</span> Basic concepts</h1>
<section id="sec-frac" class="level2" data-number="2.1"><h2 data-number="2.1" class="anchored" data-anchor-id="sec-frac">
<span class="header-section-number">2.1</span> Fractions analogy</h2>
<p>In the simplest terms, <code>Decalendar</code> counts fractions of a year, while <code>Declock</code> counts fractions of a day. The denominator for <code>Decalendar</code> is the number of days in the year, and the <code>Declock</code> denominator is <span class="math inline">\(10^x\)</span>, where <span class="math inline">\(x\)</span> is the number of digits in the numerator. In both systems, only the numerator, not the denominator, is provided. In the context of <code>Decalendar</code>, the numerator is the days that have passed in the year, while in the context of <code>Declock</code>, the numerator is the parts of the day that have passed in the day.</p>
<p>To avoid any confusion between the two, we can say ‚ÄúDay 5‚Äù to mean the date when 5 days have passed this year or <code>Day</code> <code>0</code> to mean the first day-of-the-year (<code>doty</code>). This is like the use of the term ‚Äúday zero‚Äù in other contexts, such as epidemiology. The analogous term for times is <code>Dot</code>. The word <code>Dot</code> conveys that at its core <code>Declock</code> is a system built on <a href="https://en.wikipedia.org/wiki/Decimal_time#Fractional_days">fractional days</a> expressed as decimal numbers. The 5 in <code>Dot</code> <code>5</code> can be thought of as a number after a decimal (0.5) or a numerator (‚Åµ/‚ÇÅ‚ÇÄ), either way it means noon, the time when half the day has passed.</p>
</section><section id="sec-imp" class="level2" data-number="2.2"><h2 data-number="2.2" class="anchored" data-anchor-id="sec-imp">
<span class="header-section-number">2.2</span> Implied tolerance and duration</h2>
<p>The analogy to decimals or fractions is important, because it explains why adding a zero at the end of a time does not change the time, only the implied tolerance of time points or the implied duration of time intervals. If <code>Dot</code> <code>5</code> is a time point, it has an implied tolerance of 5% of the day (<span class="math inline">\(.5¬±.05\)</span>), because any time after <code>Dot</code> <code>45</code> and before <code>Dot</code> <code>55</code> (<span class="math inline">\([.45, .55)\)</span>) would round to <code>Dot</code> <code>5</code>. On the other hand, if <code>Dot</code> <code>5</code> is the start time for a time interval, that interval is implied to start at <code>Dot</code> <code>5</code> and end before <code>Dot</code> <code>6</code> (<span class="math inline">\([.5, .6)\)</span>) and thus have a duration of 10% of the day (<code>Dot</code> <code>6</code>-<code>Dot</code> <code>5</code>). Every additional digit we add decreases the implied tolerance and the implied duration 10-fold.</p>
<p>If we really want to insist on punctuality, we could include up to 5 digits in a time. Specifying times with more than 5 digits is possible, and may be useful for scientific or technical purposes, but it is analogous to providing <a href="https://xkcd.com/2170/">extremely long GPS coordinates</a>; at some point the level of precision stops having relevance to daily life. If we want to strive for the highest level of precision possible, we can add the word ‚Äúsharp‚Äù or the <code>#</code> symbol to the time. Saying ‚Äú5 Sharp‚Äù or writing <code>5#</code> means as close as possible to noon. Times that include <code>#</code> cannot have an implied duration. We can only add <code>#</code> to a time, so there is no need say ‚ÄúDot 5 Sharp‚Äù or write <code>.5#</code>.</p>
</section><section id="sec-context" class="level2" data-number="2.3"><h2 data-number="2.3" class="anchored" data-anchor-id="sec-context">
<span class="header-section-number">2.3</span> Context clues</h2>
<p>Not saying ‚ÄúDay‚Äù or ‚ÄúDot‚Äù in general is acceptable, because it is convenient and often the numbers make perfect sense in context. If someone says ‚Äúlet‚Äôs have lunch at 5‚Äù, it is clear that they are referring to noon (<code>Dot</code> <code>5</code>) and not the sixth <code>doty</code> (<code>Day</code> <code>5</code>). Also, the number itself may provide a clue. Numbers greater than 365 could still be a <code>doty</code>, but it would represent a day in an upcoming year, not the current year. The meaning of such dates depends on whether the current year is a common year (n=365) or a leap year (n=366). Saying ‚Äú500‚Äù could mean <code>Day</code> <code>134</code> (if n=366) or <code>Day</code> <code>135</code> (if n=365) of the subsequent year, but it would most likely mean noon (<code>Dot</code> <code>500</code>).</p>
</section><section id="sec-stamp" class="level2" data-number="2.4"><h2 data-number="2.4" class="anchored" data-anchor-id="sec-stamp">
<span class="header-section-number">2.4</span> <code>Stamps</code>
</h2>
<p>If a <code>Decalender</code> date and a <code>Declock</code> time are combined, they form a time <code>stamp</code>. The date always goes before the time in any <code>stamp</code>. When said together, the numbers ‚Äú0‚Äù and ‚Äú5‚Äù mean the first <code>doty</code> (<code>Day</code> <code>0</code>) at noon (<code>Dot</code> <code>5</code>). In written form, this would be <code>000.5</code>. This format is called <code>.y</code>, which is read the same way as <code>doty</code>, but emphasizes that the <code>.</code> is used in a floating point decimal <code>doty</code>. In other words, <code>doty</code> can be used instead of ‚Äúday of the year‚Äù in a sentence, whereas <code>.y</code> indicates a <code>stamp</code>, such as <code>000.5</code>. Ideally, a <code>stamp</code> will include all of the information needed to identify a singular point in time, and thus should include a year and time zone.</p>
</section><section id="sec-specific" class="level2" data-number="2.5"><h2 data-number="2.5" class="anchored" data-anchor-id="sec-specific">
<span class="header-section-number">2.5</span> Specific dates and times</h2>
<p>The <code>stamp</code> in <a href="#sec-stamp">Section&nbsp;2.4</a> assumes that the year and time zone are known. A date without a year is like a time without a time zone, both depend on the context. Most likely, we are talking about the current year and the local time zone, but it may be unclear. Including a year allows us to pinpoint a specific day, instead of a day that could happen any year. Similarly, a time with a time zone occurs once every day, rather than once in every time zone per day. The <code>Day</code> <code>306</code> of 1969, would be written <code>1969+306</code> and said ‚ÄúYear 1969 Day 306‚Äù or simply ‚Äú1969 306‚Äù, while midnight in <code>Zone</code> <code>0</code> would be written <code>.000+0</code> and said ‚ÄúDot 0 Zone 0‚Äù, ‚Äú0 Zone 0‚Äù, or ‚Äú0 0‚Äù. Combined together, this date and time form the <code>stamp</code> <code>1969+306.000+0</code>.</p>
</section><section id="sec-neg" class="level2 page-columns page-full" data-number="2.6"><h2 data-number="2.6" class="anchored" data-anchor-id="sec-neg">
<span class="header-section-number">2.6</span> Negative numbers</h2>
<p>Every component of <code>Decalender</code> dates and <code>Declock</code> times can be negative. A negative year is before 1 BCE (Before Common Era) and a negative time zone is West of <code>Zone</code> <code>0</code>. The year is usually provided without a sign, because most people rarely discuss years before 1 BCE, but numeric time zone offset must have a sign. Negative <code>doties</code> work like <a href="https://en.wikipedia.org/wiki/Zero-based_numbering">zero-based indexes</a> in <a href="https://en.wikipedia.org/wiki/Zero-based_numbering#Computer_programming">computer programming</a> in that they label the days of the year from <span class="math inline">\(-N\)</span> to <span class="math inline">\(-1\)</span>, where <span class="math inline">\(N\)</span> is the number of the days in the current year. The first <code>doty</code> is indexed by both <span class="math inline">\(0\)</span> and <span class="math inline">\(-N\)</span>, while the last <code>doty</code> is indexed by both <span class="math inline">\(-1\)</span> and <span class="math inline">\(N\)</span>.</p>
<p>In general, negative numbers show the number of parts that are left in the whole. A negative <code>doty</code> shows how many days remain in the year and a negative time <a href="https://en.wikipedia.org/wiki/Countdown">counts down</a> to the end of the day. To extend the fractions analogy in <a href="#sec-frac">Section&nbsp;2.1</a> to negative numbers, the negative number added to the whole gives us the numerator of the positive fraction (<span class="math inline">\(pos = N + neg\)</span>). Positive and negative numbers arrive at the same answer from opposite directions.</p>
<p>In certain contexts, the choice of using a negative number over a positive number may mean that we want to emphasize how much time is left instead of how much has passed. Even though <code>Dot</code> <code>-1</code> and <code>Dot</code> <code>9</code> are synonymous <code>Declock</code> times, the former could highlight that there is only 1 tenth (‚Öí or .1) of the day remaining before midnight. <code>Dot</code> <code>5</code> and <code>Dot</code> <code>-5</code> both mean noon, like saying that a glass is half-empty or half-full.</p>
<p>The negative equivalent of <code>1969+306</code>, the <code>deco</code> date in <a href="#tbl-2x2">Table&nbsp;1</a>, is <code>1970-059</code>. This negative <code>deco</code> date literally subtracts 59 days from the beginning of year 1970 to arrive at <code>Day</code> <code>306</code> of 1969. The year in negative <code>deco</code> dates is always 1 greater than the year in the equivalent positive <code>deco</code> date. Both <code>1969+306</code> and <code>1970-059</code> translate to January 1, 1970 in the Gregorian calendar. <code>Decalendar</code> years are shifted by two months in relation to the Gregorian calendar years because <code>Decalendar</code> years start on March 1.</p>
<p>This shift causes the Gregorian calendar year to be 1 greater than the year in the positive <code>deco</code> dates during January and February and 1 less than the year in negative <code>deco</code> dates during every other month. For example, the <code>Deco</code> dates <code>1969+000</code> and <code>1970-365</code> are March 1, 1969 in the Gregorian calendar. Immediately after midnight on this date, the negative <code>doty</code> will change from -365 to -364, while the positive <code>doty</code> will remain at 0 At noon, the positive <code>deco</code> date will be <code>1969+306.500</code> and the negative <code>deco</code> date will be <code>1970-058.500</code>.</p>
<section id="tbl-2x2" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="tbl-2x2"><a href="#tbl-2x2">Table&nbsp;1</a></h4>
<div class="callout callout-style-default callout-note no-icon callout-titled page-columns page-full" title="Click to toggle table expansion">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click to toggle table expansion
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse show page-columns page-full">
<div class="callout-body-container callout-body page-columns page-full">
<div id="tbl-2x2" class="anchored page-columns page-full">
<table class="table">

<thead><tr class="header">
<th></th>
<th>date</th>
<th>timestamp</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>doty</td>
<td>306</td>
<td>306.000+0</td>
</tr>
<tr class="even">
<td>deco</td>
<td>1969+306</td>
<td>1969+306.000+0</td>
</tr>
</tbody>
</table>
<div class="quarto-table-caption margin-caption">Table&nbsp;1: Comparison of <code>doty</code> and <code>deco</code> dates and timestamps</div></div>
</div>
</div>
</div>
</section></section><section id="sec-unit" class="level2 page-columns page-full" data-number="2.7"><h2 data-number="2.7" class="anchored" data-anchor-id="sec-unit">
<span class="header-section-number">2.7</span> Units</h2>
<p><code>Declock</code> times often have three digits because this is the best level of precision for displaying time on clocks and watches. While 3 digits are often best, <code>Declock</code> times can have any number of digits, depending on the desired precision level. <code>Declock</code> provides names for extremely precise time units, but the most relevant units are within a few orders of magnitude from a day, which is the base unit of both <code>Declock</code> and <code>Decalendar</code>. Listing the units of each, as in <a href="#tbl-unit">Table&nbsp;2</a>, highlights the relationship between the two:</p>
<section id="tbl-unit" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="tbl-unit"><a href="#tbl-unit">Table&nbsp;2</a></h4>
<div class="callout callout-style-default callout-note no-icon callout-titled page-columns page-full" title="Click to toggle table expansion">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click to toggle table expansion
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse page-columns page-full">
<div class="callout-body-container callout-body page-columns page-full">
<div id="tbl-unit" class="anchored page-columns page-full">
<table class="table">

<thead><tr class="header">
<th>Quantity</th>
<th>Name</th>
<th>Symbol</th>
<th>Formal Name</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(100\)</span></td>
<td><code>hekt</code></td>
<td><code>œÅ</code></td>
<td><code>hectoday</code></td>
</tr>
<tr class="even">
<td><span class="math inline">\(91\)</span></td>
<td><code>delt</code></td>
<td><code>Œ¥</code></td>
<td><code>deltakeraiayear</code></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(90\)</span></td>
<td><code>qop</code></td>
<td><code>œü</code></td>
<td><code>qoppaday</code></td>
</tr>
<tr class="even">
<td><span class="math inline">\(80\)</span></td>
<td><code>pi</code></td>
<td><code>œÄ</code></td>
<td><code>piday</code></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(73\)</span></td>
<td><code>ep</code></td>
<td><code>Œµ</code></td>
<td><code>epsilonkeraiayear</code></td>
</tr>
<tr class="even">
<td><span class="math inline">\(70\)</span></td>
<td><code>om</code></td>
<td><code>Œø</code></td>
<td><code>omicronday</code></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(61\)</span></td>
<td><code>wau</code></td>
<td><code>œõ</code></td>
<td><code>waukeraiayear</code></td>
</tr>
<tr class="even">
<td><span class="math inline">\(60\)</span></td>
<td><code>xi</code></td>
<td><code>Œæ</code></td>
<td><code>xiday</code></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(50\)</span></td>
<td><code>nu</code></td>
<td><code>ŒΩ</code></td>
<td><code>nuday</code></td>
</tr>
<tr class="even">
<td><span class="math inline">\(40\)</span></td>
<td><code>mu</code></td>
<td><code>Œú</code></td>
<td><code>muday</code></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(30\)</span></td>
<td><code>lam</code></td>
<td><code>Œª</code></td>
<td><code>lamdaday</code></td>
</tr>
<tr class="even">
<td><span class="math inline">\(20\)</span></td>
<td><code>kap</code></td>
<td><code>Œ∫</code></td>
<td><code>kappaday</code></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(10\)</span></td>
<td><code>dek</code></td>
<td>
<code>Œπ</code> Êó¨</td>
<td><code>decaday</code></td>
</tr>
<tr class="even">
<td><span class="math inline">\(1\)</span></td>
<td><code>day</code></td>
<td>
<code>d</code>, Êó•</td>
<td><code>day</code></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(10^{-1}\)</span></td>
<td><code>dime</code></td>
<td><code>‚Öí</code></td>
<td><code>deciday</code></td>
</tr>
<tr class="even">
<td><span class="math inline">\(10^{-2}\)</span></td>
<td><code>cent</code></td>
<td>
<code>¬¢</code>, <code>%</code>
</td>
<td><code>centiday</code></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(10^{-3}\)</span></td>
<td><code>mil</code></td>
<td>
<code>m</code>, <code>‚Ä∞</code>
</td>
<td><code>milliday</code></td>
</tr>
<tr class="even">
<td><span class="math inline">\(2 \times 10^{-4}\)</span></td>
<td><code>period</code></td>
<td><code>.</code></td>
<td><code>didecimilliday</code></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(10^{-4}\)</span></td>
<td><code>phrase</code></td>
<td>
<code>‚ó†</code>, <code>‚Ä±</code>
</td>
<td><code>decimilliday</code></td>
</tr>
<tr class="even">
<td><span class="math inline">\(2 \times 10^{-5}\)</span></td>
<td><code>bar</code></td>
<td><code>|</code></td>
<td><code>dicentimilliday</code></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(10^{-5}\)</span></td>
<td><code>beat</code></td>
<td><code>‚ô´</code></td>
<td><code>centimilliday</code></td>
</tr>
<tr class="even">
<td><span class="math inline">\(10^{-6}\)</span></td>
<td><code>mic</code></td>
<td><code>Œº</code></td>
<td><code>microday</code></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(10^{-7}\)</span></td>
<td><code>liph</code></td>
<td><code>mÃë</code></td>
<td><code>decimicroday</code></td>
</tr>
<tr class="even">
<td><span class="math inline">\(10^{-8}\)</span></td>
<td><code>lib</code></td>
<td><code>mÃà</code></td>
<td><code>centimicroday</code></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(10^{-9}\)</span></td>
<td><code>nan</code></td>
<td><code>n</code></td>
<td><code>nanoday</code></td>
</tr>
<tr class="even">
<td><span class="math inline">\(10^{-10}\)</span></td>
<td><code>roph</code></td>
<td><code>ŒºÃë</code></td>
<td><code>decinanoday</code></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(10^{-11}\)</span></td>
<td><code>rob</code></td>
<td><code>¬µÃà</code></td>
<td><code>centinanoday</code></td>
</tr>
<tr class="even">
<td><span class="math inline">\(10^{-12}\)</span></td>
<td><code>pic</code></td>
<td><code>p</code></td>
<td><code>picoday</code></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(10^{-13}\)</span></td>
<td><code>noph</code></td>
<td><code>nÃë</code></td>
<td><code>decipicoday</code></td>
</tr>
<tr class="even">
<td><span class="math inline">\(10^{-14}\)</span></td>
<td><code>nob</code></td>
<td><code>nÃà</code></td>
<td><code>centipicoday</code></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(10^{-15}\)</span></td>
<td><code>femt</code></td>
<td><code>f</code></td>
<td><code>femtoday</code></td>
</tr>
<tr class="even">
<td><span class="math inline">\(10^{-16}\)</span></td>
<td><code>coph</code></td>
<td><code>pÃë</code></td>
<td><code>decifemtoday</code></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(10^{-17}\)</span></td>
<td><code>cob</code></td>
<td><code>pÃà</code></td>
<td><code>centifemtoday</code></td>
</tr>
<tr class="even">
<td><span class="math inline">\(10^{-18}\)</span></td>
<td><code>att</code></td>
<td><code>a</code></td>
<td><code>attoday</code></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(10^{-19}\)</span></td>
<td><code>foph</code></td>
<td><code>fÃë</code></td>
<td><code>deciattoday</code></td>
</tr>
<tr class="even">
<td><span class="math inline">\(10^{-20}\)</span></td>
<td><code>fob</code></td>
<td><code>fÃà</code></td>
<td><code>centiattoday</code></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(10^{-21}\)</span></td>
<td><code>zept</code></td>
<td><code>z</code></td>
<td><code>zeptoday</code></td>
</tr>
<tr class="even">
<td><span class="math inline">\(10^{-22}\)</span></td>
<td><code>toph</code></td>
<td><code>aÃë</code></td>
<td><code>decizeptoday</code></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(10^{-23}\)</span></td>
<td><code>tob</code></td>
<td><code>aÃà</code></td>
<td><code>centizeptoday</code></td>
</tr>
<tr class="even">
<td><span class="math inline">\(10^{-24}\)</span></td>
<td><code>yokt</code></td>
<td><code>y</code></td>
<td><code>yoctoday</code></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(10^{-25}\)</span></td>
<td><code>zoph</code></td>
<td><code>zÃë</code></td>
<td><code>deciyoctoday</code></td>
</tr>
<tr class="even">
<td><span class="math inline">\(10^{-26}\)</span></td>
<td><code>zob</code></td>
<td><code>zÃà</code></td>
<td><code>centiyoctoday</code></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(10^{-27}\)</span></td>
<td><code>ront</code></td>
<td><code>r</code></td>
<td><code>rontoday</code></td>
</tr>
<tr class="even">
<td><span class="math inline">\(10^{-28}\)</span></td>
<td><code>yoph</code></td>
<td><code>yÃë</code></td>
<td><code>decirontoday</code></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(10^{-29}\)</span></td>
<td><code>yob</code></td>
<td><code>yÃà</code></td>
<td><code>centirontoday</code></td>
</tr>
<tr class="even">
<td><span class="math inline">\(10^{-30}\)</span></td>
<td><code>quek</code></td>
<td><code>q</code></td>
<td><code>quectoday</code></td>
</tr>
</tbody>
</table>
<div class="quarto-table-caption margin-caption">Table&nbsp;2: The units of <code>Decalendar</code> and <code>Declock</code>
</div></div>
</div>
</div>
</div>
<p>In <a href="#tbl-unit">Table&nbsp;2</a>, the units with positive exponents are used for <code>Decalendar</code>, while the ones with negative exponents are used for <code>Declock</code>. <code>Cents</code> (<code>¬¢</code>) can serve as a useful point of comparison to understand the scale of some of the units in <a href="#tbl-unit">Table&nbsp;2</a> above, because each <code>cent</code> is 1 percent of the day, which is about a quarter hour (1% = 14.4 minutes). In comparison to <code>cents</code>, <code>mils</code> are ten times smaller (.1% = 1.4 minutes), <code>dimes</code> (<code>‚Öí</code>) are ten times larger (10% = 144 minutes), and <code>deks</code> (<code>Œπ</code>) are 1000 times larger (1000% = 14400 minutes). To be clear, 1 <code>dek</code> contains 10 whole days while the other units are fractions of days.</p>
<p><code>Declock</code> units smaller than <code>mils</code> are not easy to think of as percents of a day. For <code>phrases</code> (<code>‚ó†</code>) and <code>beats</code> (<code>‚ô´</code>), music serves as a much more useful analogy. In fact, <code>phrases</code> and <code>beats</code> are musical terms. The duration of a musical beat depends on the tempo, but a <code>Declock</code> <code>beat</code> is always precisely 0.864 seconds long. This translates to a tempo of 69.4ÃÖ (69‚Å¥/‚Çâ or 625/9) beats per minute, which is coincidentally also within the normal range of a resting heart rate. <code>Declock</code> <code>beats</code> are organized into groups of 2 called <code>bars</code> or <code>measures</code>, groups of 10 called <code>phrases</code>, and groups of 20 called <code>periods</code>. A real example of music that follows this exact pattern is Haydn‚Äôs <a href="https://en.wikipedia.org/wiki/Period_(music)">Feldpartita</a>.</p>
<p><code>Declock</code> units smaller than <code>beats</code> are too small for typical daily use. For example, a <code>mic</code> (<code>microday</code>, <code>Œº</code>) is faster than a blink of an eye. Each frame in a video playing at 60 frames per second will be shown for about 1.93 <code>liphs</code> (<code>milliphrases</code>, <code>mÃë</code>). A <code>lib</code> (<code>millibeat</code>, <code>mÃà</code>) is not enough time for a neuron in a human brain to fire and return to rest. Sound can travel from a person‚Äôs ear to their other ear in about 7 <code>nans</code> (<code>nanodays</code>). Noticing that a sound reaches one ear before the other can help humans to localize the source of the sound, but a <code>roph</code> (<code>microphrase</code>, <code>ŒºÃë</code>) difference might be too fast to notice. In a <code>rob</code> (<code>microbeat</code>, <code>¬µÃà</code>), a USB 3.0 cable transferring 5 gigabytes per second can send 4.32 kilobytes, the equivalent of a text file with 4320 characters.</p>
</section></section></section><section id="sec-zone" class="level1" data-number="3"><h1 data-number="3">
<span class="header-section-number">3</span> Time zones</h1>
<p>Of the units discussed above, <code>dimes</code> are notable, because they are the units of <code>Declock</code> time zones. The times in <code>Zone</code> <code>1</code> are one <code>dime</code> earlier than <code>Zone</code> <code>0</code> and two <code>dimes</code> earlier than <code>Zone</code> <code>-1</code>. Time zones are important, because different time zones could have very different times and even different dates. Mexico City is in <code>Zone</code> <code>-3</code> and Tokyo is in <code>Zone</code> <code>4</code>, meaning for the majority of the day (<code>Dot</code> <code>7</code> to be exact) Tokyo is one day ahead of Mexico City. If it is noon on the last day of the year 1999 in Mexico City, it will be <code>Dot</code> <code>200</code> on the first day of the year 2000 in Tokyo. This date and time in Mexico City can be written <code>2000+000.200+4</code> or <code>2001-364.800+4</code>, while the equivalent date and time for Tokyo is <code>1999+365.500-3</code> or <code>2000-000.500-3</code>. If we removed the time zone from the end, we would not know that all of these <code>stamps</code> describe the same moment in time.</p>
<p><code>Declock</code> groups together the 26 <a href="https://en.wikipedia.org/wiki/List_of_UTC_offsets">Coordinated Universal Time (UTC) offsets</a> (-12:00 to +14:00) into 11 time zones (<code>Zone</code> <code>-5</code> to <code>Zone</code> <code>6</code>) by converting hours into <code>dimes</code> (<span class="math inline">\(dimes = hours \div 2.4\)</span>) and rounding to the nearest whole number (<span class="math inline">\(dimes = \lfloor hours \div 2.4 \rceil\)</span>). This time zone system is simple and facilitates conversion, but locations on the edges of the main time zones may experience a significant difference between <code>Dot</code> <code>5</code> and <a href="https://en.wikipedia.org/wiki/Noon#Solar_noon">solar noon</a>, the point when the sun reaches its highest position in the sky.</p>
<p>If we decide to prioritize the amount of sunlight at <code>Dot</code> <code>5</code> over simplicity and ease of conversion, we could convert degrees of longitude into <code>cents</code> or <code>mils</code>, instead of converting hours into <code>dimes</code>. For example, we could say that Mexico City is in <code>Zone</code> <code>-275</code> instead of <code>Zone</code> <code>-3</code>, because the longitude of Mexico City is 99 degrees West, which translates to an offset of -275 <code>mils</code> (<span class="math inline">\(mils = degrees \div .36\)</span>). Essentially, we could create as many additional <code>Declock</code> time zones are desired simply by adding digits to the end of each time zone. Adding one digit yields 110 double-digit <code>cent</code> time zones, adding two digits creates 1100 triple-digit <code>mil</code> time zones, and so on.</p>
</section><section id="sec-related" class="level1 page-columns page-full" data-number="4"><h1 data-number="4">
<span class="header-section-number">4</span> Related systems</h1>
<section id="sec-frc" class="level2 page-columns page-full" data-number="4.1"><h2 data-number="4.1" class="anchored" data-anchor-id="sec-frc">
<span class="header-section-number">4.1</span> French Republican calendar</h2>
<section id="sec-frcd" class="level3 page-columns page-full" data-number="4.1.1"><h3 data-number="4.1.1" class="anchored" data-anchor-id="sec-frcd">
<span class="header-section-number">4.1.1</span> French Republican calendar <em>d√©cades</em>
</h3>
<p>The <a href="https://en.wikipedia.org/wiki/French_Republican_calendar">French Republican calendar</a> and <code>Decalendar</code> both organize days in groups of 10. A group of 10 days in the French Republican calendar is called a <em>d√©cade</em>, while a group of 10 days in <code>Decalendar</code> is called a <code>dek</code>. The names of the days in a <code>dek</code> are derived from their <a href="https://en.wikipedia.org/wiki/Zero-based_numbering">zero-based</a> cardinal numbers (zero, one, two‚Ä¶), whereas the days of the <em>d√©cade</em> are named after their ordinal numbers (first, second, third‚Ä¶). In both cases, the names are based on Roman and Greek <a href="https://en.wikipedia.org/wiki/Numeral_prefix#Table_of_number_prefixes_in_English">numeral prefixes</a>. <a href="#tbl-dotd">Table&nbsp;3</a> provides the cardinal numbers, one-letter codes, names, and types of the days of the <code>dek</code> as well as the names of their French Republican calendar equivalents.</p>
<section id="tbl-dotd" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="tbl-dotd"><a href="#tbl-dotd">Table&nbsp;3</a></h4>
<div class="callout callout-style-default callout-note no-icon callout-titled page-columns page-full" title="Click to toggle table expansion">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click to toggle table expansion
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse page-columns page-full">
<div class="callout-body-container callout-body page-columns page-full">
<div id="tbl-dotd" class="anchored page-columns page-full">
<table class="table">

<thead><tr class="header">
<th>#</th>
<th>Code</th>
<th>Name</th>
<th>Type</th>
<th>French</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>N</td>
<td>Nulday</td>
<td>work</td>
<td><em>primidi</em></td>
</tr>
<tr class="even">
<td>1</td>
<td>U</td>
<td>Unoday</td>
<td>work</td>
<td><em>duodi</em></td>
</tr>
<tr class="odd">
<td>2</td>
<td>D</td>
<td>Duoday</td>
<td>work</td>
<td><em>tridi</em></td>
</tr>
<tr class="even">
<td>3</td>
<td>T</td>
<td>Triday</td>
<td>rest</td>
<td><em>quartidi</em></td>
</tr>
<tr class="odd">
<td>4</td>
<td>Q</td>
<td>Quaday</td>
<td>rest</td>
<td><em>quintidi</em></td>
</tr>
<tr class="even">
<td>5</td>
<td>P</td>
<td>Penday</td>
<td>work</td>
<td><em>sextidi</em></td>
</tr>
<tr class="odd">
<td>6</td>
<td>H</td>
<td>Hexday</td>
<td>work</td>
<td><em>septidi</em></td>
</tr>
<tr class="even">
<td>7</td>
<td>S</td>
<td>Sepday</td>
<td>work</td>
<td><em>octidi</em></td>
</tr>
<tr class="odd">
<td>8</td>
<td>O</td>
<td>Octday</td>
<td>rest</td>
<td><em>nonidi</em></td>
</tr>
<tr class="even">
<td>9</td>
<td>E</td>
<td>Ennday</td>
<td>rest</td>
<td><em>d√©cadi</em></td>
</tr>
</tbody>
</table>
<div class="quarto-table-caption margin-caption">Table&nbsp;3: The days of the <code>dek</code> and their French Republican calendar equivalents</div></div>
</div>
</div>
</div>
</section></section><section id="sec-frct" class="level3 page-columns page-full" data-number="4.1.2"><h3 data-number="4.1.2" class="anchored" data-anchor-id="sec-frct">
<span class="header-section-number">4.1.2</span> French Republican calendar time</h3>
<p>The French Republican calendar and <code>Declock</code> both break the day down into decimal portions. In <code>Declock</code>, a <code>dime</code> is a tenth (‚Öí) of a day, a <code>cent</code> is a hundredth (10‚Åª¬≤) of a day, a <code>mil</code> is a thousandth (10‚Åª¬≥) of a day, and a <code>beat</code> is a hundred thousandth (10‚Åª‚Åµ) of a day, whereas the French Republican calendar calls these units decimal hours, decimal minutes, <em>d√©cimes</em>, and decimal seconds, respectively. <a href="#tbl-dime">Table&nbsp;4</a> shows the start times of each <code>dime</code> (‚Öí) in a day and its equivalent in 24-hour and 12-hour standard time.</p>
<section id="tbl-dime" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="tbl-dime"><a href="#tbl-dime">Table&nbsp;4</a></h4>
<div class="callout callout-style-default callout-note no-icon callout-titled page-columns page-full" title="Click to toggle table expansion">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click to toggle table expansion
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse page-columns page-full">
<div class="callout-body-container callout-body page-columns page-full">
<div id="tbl-dime" class="anchored page-columns page-full">
<table class="table">

<thead><tr class="header">
<th>‚Öí</th>
<th>24-hour</th>
<th>12-hour</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>00:00</td>
<td>12:00AM</td>
</tr>
<tr class="even">
<td>1</td>
<td>02:24</td>
<td>2:24AM</td>
</tr>
<tr class="odd">
<td>2</td>
<td>04:48</td>
<td>4:48AM</td>
</tr>
<tr class="even">
<td>3</td>
<td>07:12</td>
<td>7:12AM</td>
</tr>
<tr class="odd">
<td>4</td>
<td>09:36</td>
<td>9:36AM</td>
</tr>
<tr class="even">
<td>5</td>
<td>12:00</td>
<td>12:00PM</td>
</tr>
<tr class="odd">
<td>6</td>
<td>14:24</td>
<td>2:24PM</td>
</tr>
<tr class="even">
<td>7</td>
<td>16:48</td>
<td>4:48PM</td>
</tr>
<tr class="odd">
<td>8</td>
<td>19:12</td>
<td>7:12PM</td>
</tr>
<tr class="even">
<td>9</td>
<td>21:36</td>
<td>9:36PM</td>
</tr>
</tbody>
</table>
<div class="quarto-table-caption margin-caption">Table&nbsp;4: The <code>dimes</code> in a day and their standard time equivalents</div></div>
</div>
</div>
</div>
</section></section></section><section id="sec-sit" class="level2" data-number="4.2"><h2 data-number="4.2" class="anchored" data-anchor-id="sec-sit">
<span class="header-section-number">4.2</span> Swatch Internet Time</h2>
<p><a href="https://en.wikipedia.org/wiki/Swatch_Internet_Time">Swatch Internet Time</a> uses the term ‚Äú.beats‚Äù to describe a thousandth of day (10‚Åª¬≥). In <code>Declock</code>, a <code>beat</code> is a hundred thousandth of a day (10‚Åª‚Åµ), because this is the approximate duration of a heartbeat or a beat of music. Another difference is that Swatch Internet Time has only 1 time zone, <a href="https://en.wikipedia.org/wiki/List_of_UTC_offsets#UTC+01:00,_A">UTC+1</a>, limiting its utility outside of Central Europe or West Africa. Swatch Internet Time is 41.6ÃÖ <code>mils</code> ahead of UTC and the <code>Declock</code> <code>Zone</code> <code>0</code> time zone.<code>Declock</code> has 11 main single-digit time zones, but can support as many time zones as needed by adding additional digits. More information on <code>Declock</code> time zones can be found in <a href="#sec-zone">Section&nbsp;3</a>.</p>
</section><section id="sec-greg" class="level2 page-columns page-full" data-number="4.3"><h2 data-number="4.3" class="anchored" data-anchor-id="sec-greg">
<span class="header-section-number">4.3</span> Gregorian calendar</h2>
<section id="sec-coor" class="level3 page-columns page-full" data-number="4.3.1"><h3 data-number="4.3.1" class="anchored" data-anchor-id="sec-coor">
<span class="header-section-number">4.3.1</span> Coordinate analogy</h3>
<p>In the Gregorian calendar, dates are like a set of coordinates, where the month and the day-of-the-month (<code>dotm</code>) are like longitude and latitude in the <a href="https://en.wikipedia.org/wiki/Geographic_coordinate_system">geographic coordinate system</a> or x and y in the <a href="https://en.wikipedia.org/wiki/Cartesian_coordinate_system">Cartesian coordinate system</a>. The <code>Decalendar</code> ordinal (<code>deco</code>) date format provides two coordinates in one number: the day-of-the-year (<code>doty</code>). <a href="#tbl-greg2doty">Table&nbsp;5</a> shows the <code>doty</code> number equivalents of all Gregorian calendar dates.</p>
<p>To locate a specific date in <a href="#tbl-greg2doty">Table&nbsp;5</a>, first find the month among the columns (think of the month as an x-axis value) and then move down through the rows to the <code>dotm</code> (which is like a y-axis value). To convert a <code>doty</code> number to a Gregorian calendar date, we first find the <code>dek</code> number (the first two digits of the <code>doty</code>) among the rows in <a href="#tbl-doty2greg">Table&nbsp;6</a> and then move to the right to the <code>dotd</code> (the last digit of the <code>doty</code>). The dates in <a href="#tbl-doty2greg">Table&nbsp;6</a> are shown in <code>mm-dd</code> format.</p>
<section id="tbl-greg2doty" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="tbl-greg2doty"><a href="#tbl-greg2doty">Table&nbsp;5</a></h4>
<div class="callout callout-style-default callout-note no-icon callout-titled page-columns page-full" title="Click to toggle table expansion">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click to toggle table expansion
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse page-columns page-full">
<div class="callout-body-container callout-body page-columns page-full">
<div id="tbl-greg2doty" class="anchored page-columns page-full">
<table class="table">

<colgroup>
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
</colgroup>
<thead><tr class="header">
<th>Day</th>
<th>Mar</th>
<th>Apr</th>
<th>May</th>
<th>Jun</th>
<th>Jul</th>
<th>Aug</th>
<th>Sep</th>
<th>Oct</th>
<th>Nov</th>
<th>Dec</th>
<th>Jan</th>
<th>Feb</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>0</td>
<td>31</td>
<td>61</td>
<td>92</td>
<td>122</td>
<td>153</td>
<td>184</td>
<td>214</td>
<td>245</td>
<td>275</td>
<td>306</td>
<td>337</td>
</tr>
<tr class="even">
<td>2</td>
<td>1</td>
<td>32</td>
<td>62</td>
<td>93</td>
<td>123</td>
<td>154</td>
<td>185</td>
<td>215</td>
<td>246</td>
<td>276</td>
<td>307</td>
<td>338</td>
</tr>
<tr class="odd">
<td>3</td>
<td>2</td>
<td>33</td>
<td>63</td>
<td>94</td>
<td>124</td>
<td>155</td>
<td>186</td>
<td>216</td>
<td>247</td>
<td>277</td>
<td>308</td>
<td>339</td>
</tr>
<tr class="even">
<td>4</td>
<td>3</td>
<td>34</td>
<td>64</td>
<td>95</td>
<td>125</td>
<td>156</td>
<td>187</td>
<td>217</td>
<td>248</td>
<td>278</td>
<td>309</td>
<td>340</td>
</tr>
<tr class="odd">
<td>5</td>
<td>4</td>
<td>35</td>
<td>65</td>
<td>96</td>
<td>126</td>
<td>157</td>
<td>188</td>
<td>218</td>
<td>249</td>
<td>279</td>
<td>310</td>
<td>341</td>
</tr>
<tr class="even">
<td>6</td>
<td>5</td>
<td>36</td>
<td>66</td>
<td>97</td>
<td>127</td>
<td>158</td>
<td>189</td>
<td>219</td>
<td>250</td>
<td>280</td>
<td>311</td>
<td>342</td>
</tr>
<tr class="odd">
<td>7</td>
<td>6</td>
<td>37</td>
<td>67</td>
<td>98</td>
<td>128</td>
<td>159</td>
<td>190</td>
<td>220</td>
<td>251</td>
<td>281</td>
<td>312</td>
<td>343</td>
</tr>
<tr class="even">
<td>8</td>
<td>7</td>
<td>38</td>
<td>68</td>
<td>99</td>
<td>129</td>
<td>160</td>
<td>191</td>
<td>221</td>
<td>252</td>
<td>282</td>
<td>313</td>
<td>344</td>
</tr>
<tr class="odd">
<td>9</td>
<td>8</td>
<td>39</td>
<td>69</td>
<td>100</td>
<td>130</td>
<td>161</td>
<td>192</td>
<td>222</td>
<td>253</td>
<td>283</td>
<td>314</td>
<td>345</td>
</tr>
<tr class="even">
<td>10</td>
<td>9</td>
<td>40</td>
<td>70</td>
<td>101</td>
<td>131</td>
<td>162</td>
<td>193</td>
<td>223</td>
<td>254</td>
<td>284</td>
<td>315</td>
<td>346</td>
</tr>
<tr class="odd">
<td>11</td>
<td>10</td>
<td>41</td>
<td>71</td>
<td>102</td>
<td>132</td>
<td>163</td>
<td>194</td>
<td>224</td>
<td>255</td>
<td>285</td>
<td>316</td>
<td>347</td>
</tr>
<tr class="even">
<td>12</td>
<td>11</td>
<td>42</td>
<td>72</td>
<td>103</td>
<td>133</td>
<td>164</td>
<td>195</td>
<td>225</td>
<td>256</td>
<td>286</td>
<td>317</td>
<td>348</td>
</tr>
<tr class="odd">
<td>13</td>
<td>12</td>
<td>43</td>
<td>73</td>
<td>104</td>
<td>134</td>
<td>165</td>
<td>196</td>
<td>226</td>
<td>257</td>
<td>287</td>
<td>318</td>
<td>349</td>
</tr>
<tr class="even">
<td>14</td>
<td>13</td>
<td>44</td>
<td>74</td>
<td>105</td>
<td>135</td>
<td>166</td>
<td>197</td>
<td>227</td>
<td>258</td>
<td>288</td>
<td>319</td>
<td>350</td>
</tr>
<tr class="odd">
<td>15</td>
<td>14</td>
<td>45</td>
<td>75</td>
<td>106</td>
<td>136</td>
<td>167</td>
<td>198</td>
<td>228</td>
<td>259</td>
<td>289</td>
<td>320</td>
<td>351</td>
</tr>
<tr class="even">
<td>16</td>
<td>15</td>
<td>46</td>
<td>76</td>
<td>107</td>
<td>137</td>
<td>168</td>
<td>199</td>
<td>229</td>
<td>260</td>
<td>290</td>
<td>321</td>
<td>352</td>
</tr>
<tr class="odd">
<td>17</td>
<td>16</td>
<td>47</td>
<td>77</td>
<td>108</td>
<td>138</td>
<td>169</td>
<td>200</td>
<td>230</td>
<td>261</td>
<td>291</td>
<td>322</td>
<td>353</td>
</tr>
<tr class="even">
<td>18</td>
<td>17</td>
<td>48</td>
<td>78</td>
<td>109</td>
<td>139</td>
<td>170</td>
<td>201</td>
<td>231</td>
<td>262</td>
<td>292</td>
<td>323</td>
<td>354</td>
</tr>
<tr class="odd">
<td>19</td>
<td>18</td>
<td>49</td>
<td>79</td>
<td>110</td>
<td>140</td>
<td>171</td>
<td>202</td>
<td>232</td>
<td>263</td>
<td>293</td>
<td>324</td>
<td>355</td>
</tr>
<tr class="even">
<td>20</td>
<td>19</td>
<td>50</td>
<td>80</td>
<td>111</td>
<td>141</td>
<td>172</td>
<td>203</td>
<td>233</td>
<td>264</td>
<td>294</td>
<td>325</td>
<td>356</td>
</tr>
<tr class="odd">
<td>21</td>
<td>20</td>
<td>51</td>
<td>81</td>
<td>112</td>
<td>142</td>
<td>173</td>
<td>204</td>
<td>234</td>
<td>265</td>
<td>295</td>
<td>326</td>
<td>357</td>
</tr>
<tr class="even">
<td>22</td>
<td>21</td>
<td>52</td>
<td>82</td>
<td>113</td>
<td>143</td>
<td>174</td>
<td>205</td>
<td>235</td>
<td>266</td>
<td>296</td>
<td>327</td>
<td>358</td>
</tr>
<tr class="odd">
<td>23</td>
<td>22</td>
<td>53</td>
<td>83</td>
<td>114</td>
<td>144</td>
<td>175</td>
<td>206</td>
<td>236</td>
<td>267</td>
<td>297</td>
<td>328</td>
<td>359</td>
</tr>
<tr class="even">
<td>24</td>
<td>23</td>
<td>54</td>
<td>84</td>
<td>115</td>
<td>145</td>
<td>176</td>
<td>207</td>
<td>237</td>
<td>268</td>
<td>298</td>
<td>329</td>
<td>360</td>
</tr>
<tr class="odd">
<td>25</td>
<td>24</td>
<td>55</td>
<td>85</td>
<td>116</td>
<td>146</td>
<td>177</td>
<td>208</td>
<td>238</td>
<td>269</td>
<td>299</td>
<td>330</td>
<td>361</td>
</tr>
<tr class="even">
<td>26</td>
<td>25</td>
<td>56</td>
<td>86</td>
<td>117</td>
<td>147</td>
<td>178</td>
<td>209</td>
<td>239</td>
<td>270</td>
<td>300</td>
<td>331</td>
<td>362</td>
</tr>
<tr class="odd">
<td>27</td>
<td>26</td>
<td>57</td>
<td>87</td>
<td>118</td>
<td>148</td>
<td>179</td>
<td>210</td>
<td>240</td>
<td>271</td>
<td>301</td>
<td>332</td>
<td>363</td>
</tr>
<tr class="even">
<td>28</td>
<td>27</td>
<td>58</td>
<td>88</td>
<td>119</td>
<td>149</td>
<td>180</td>
<td>211</td>
<td>241</td>
<td>272</td>
<td>302</td>
<td>333</td>
<td>364</td>
</tr>
<tr class="odd">
<td>29</td>
<td>28</td>
<td>59</td>
<td>89</td>
<td>120</td>
<td>150</td>
<td>181</td>
<td>212</td>
<td>242</td>
<td>273</td>
<td>303</td>
<td>334</td>
<td>365</td>
</tr>
<tr class="even">
<td>30</td>
<td>29</td>
<td>60</td>
<td>90</td>
<td>121</td>
<td>151</td>
<td>182</td>
<td>213</td>
<td>243</td>
<td>274</td>
<td>304</td>
<td>335</td>
<td></td>
</tr>
<tr class="odd">
<td>31</td>
<td>30</td>
<td></td>
<td>91</td>
<td></td>
<td>152</td>
<td>183</td>
<td></td>
<td>244</td>
<td></td>
<td>305</td>
<td>336</td>
<td></td>
</tr>
</tbody>
</table>
<div class="quarto-table-caption margin-caption">Table&nbsp;5: Gregorian calendar date to <code>doty</code> conversion</div></div>
</div>
</div>
</div>
</section><section id="tbl-doty2greg" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="tbl-doty2greg"><a href="#tbl-doty2greg">Table&nbsp;6</a></h4>
<div class="callout callout-style-default callout-note no-icon callout-titled page-columns page-full" title="Click to toggle table expansion">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click to toggle table expansion
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse page-columns page-full">
<div class="callout-body-container callout-body page-columns page-full">
<div id="tbl-doty2greg" class="anchored page-columns page-full">
<table class="table">

<colgroup>
<col style="width: 6%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
</colgroup>
<thead><tr class="header">
<th>Dek</th>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
<th>9</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>03-01</td>
<td>03-02</td>
<td>03-03</td>
<td>03-04</td>
<td>03-05</td>
<td>03-06</td>
<td>03-07</td>
<td>03-08</td>
<td>03-09</td>
<td>03-10</td>
</tr>
<tr class="even">
<td>1</td>
<td>03-11</td>
<td>03-12</td>
<td>03-13</td>
<td>03-14</td>
<td>03-15</td>
<td>03-16</td>
<td>03-17</td>
<td>03-18</td>
<td>03-19</td>
<td>03-20</td>
</tr>
<tr class="odd">
<td>2</td>
<td>03-21</td>
<td>03-22</td>
<td>03-23</td>
<td>03-24</td>
<td>03-25</td>
<td>03-26</td>
<td>03-27</td>
<td>03-28</td>
<td>03-29</td>
<td>03-30</td>
</tr>
<tr class="even">
<td>3</td>
<td>03-31</td>
<td>04-01</td>
<td>04-02</td>
<td>04-03</td>
<td>04-04</td>
<td>04-05</td>
<td>04-06</td>
<td>04-07</td>
<td>04-08</td>
<td>04-09</td>
</tr>
<tr class="odd">
<td>4</td>
<td>04-10</td>
<td>04-11</td>
<td>04-12</td>
<td>04-13</td>
<td>04-14</td>
<td>04-15</td>
<td>04-16</td>
<td>04-17</td>
<td>04-18</td>
<td>04-19</td>
</tr>
<tr class="even">
<td>5</td>
<td>04-20</td>
<td>04-21</td>
<td>04-22</td>
<td>04-23</td>
<td>04-24</td>
<td>04-25</td>
<td>04-26</td>
<td>04-27</td>
<td>04-28</td>
<td>04-29</td>
</tr>
<tr class="odd">
<td>6</td>
<td>04-30</td>
<td>05-01</td>
<td>05-02</td>
<td>05-03</td>
<td>05-04</td>
<td>05-05</td>
<td>05-06</td>
<td>05-07</td>
<td>05-08</td>
<td>05-09</td>
</tr>
<tr class="even">
<td>7</td>
<td>05-10</td>
<td>05-11</td>
<td>05-12</td>
<td>05-13</td>
<td>05-14</td>
<td>05-15</td>
<td>05-16</td>
<td>05-17</td>
<td>05-18</td>
<td>05-19</td>
</tr>
<tr class="odd">
<td>8</td>
<td>05-20</td>
<td>05-21</td>
<td>05-22</td>
<td>05-23</td>
<td>05-24</td>
<td>05-25</td>
<td>05-26</td>
<td>05-27</td>
<td>05-28</td>
<td>05-29</td>
</tr>
<tr class="even">
<td>9</td>
<td>05-30</td>
<td>05-31</td>
<td>06-01</td>
<td>06-02</td>
<td>06-03</td>
<td>06-04</td>
<td>06-05</td>
<td>06-06</td>
<td>06-07</td>
<td>06-08</td>
</tr>
<tr class="odd">
<td>10</td>
<td>06-09</td>
<td>06-10</td>
<td>06-11</td>
<td>06-12</td>
<td>06-13</td>
<td>06-14</td>
<td>06-15</td>
<td>06-16</td>
<td>06-17</td>
<td>06-18</td>
</tr>
<tr class="even">
<td>11</td>
<td>06-19</td>
<td>06-20</td>
<td>06-21</td>
<td>06-22</td>
<td>06-23</td>
<td>06-24</td>
<td>06-25</td>
<td>06-26</td>
<td>06-27</td>
<td>06-28</td>
</tr>
<tr class="odd">
<td>12</td>
<td>06-29</td>
<td>06-30</td>
<td>07-01</td>
<td>07-02</td>
<td>07-03</td>
<td>07-04</td>
<td>07-05</td>
<td>07-06</td>
<td>07-07</td>
<td>07-08</td>
</tr>
<tr class="even">
<td>13</td>
<td>07-09</td>
<td>07-10</td>
<td>07-11</td>
<td>07-12</td>
<td>07-13</td>
<td>07-14</td>
<td>07-15</td>
<td>07-16</td>
<td>07-17</td>
<td>07-18</td>
</tr>
<tr class="odd">
<td>14</td>
<td>07-19</td>
<td>07-20</td>
<td>07-21</td>
<td>07-22</td>
<td>07-23</td>
<td>07-24</td>
<td>07-25</td>
<td>07-26</td>
<td>07-27</td>
<td>07-28</td>
</tr>
<tr class="even">
<td>15</td>
<td>07-29</td>
<td>07-30</td>
<td>07-31</td>
<td>08-01</td>
<td>08-02</td>
<td>08-03</td>
<td>08-04</td>
<td>08-05</td>
<td>08-06</td>
<td>08-07</td>
</tr>
<tr class="odd">
<td>16</td>
<td>08-08</td>
<td>08-09</td>
<td>08-10</td>
<td>08-11</td>
<td>08-12</td>
<td>08-13</td>
<td>08-14</td>
<td>08-15</td>
<td>08-16</td>
<td>08-17</td>
</tr>
<tr class="even">
<td>17</td>
<td>08-18</td>
<td>08-19</td>
<td>08-20</td>
<td>08-21</td>
<td>08-22</td>
<td>08-23</td>
<td>08-24</td>
<td>08-25</td>
<td>08-26</td>
<td>08-27</td>
</tr>
<tr class="odd">
<td>18</td>
<td>08-28</td>
<td>08-29</td>
<td>08-30</td>
<td>08-31</td>
<td>09-01</td>
<td>09-02</td>
<td>09-03</td>
<td>09-04</td>
<td>09-05</td>
<td>09-06</td>
</tr>
<tr class="even">
<td>19</td>
<td>09-07</td>
<td>09-08</td>
<td>09-09</td>
<td>09-10</td>
<td>09-11</td>
<td>09-12</td>
<td>09-13</td>
<td>09-14</td>
<td>09-15</td>
<td>09-16</td>
</tr>
<tr class="odd">
<td>20</td>
<td>09-17</td>
<td>09-18</td>
<td>09-19</td>
<td>09-20</td>
<td>09-21</td>
<td>09-22</td>
<td>09-23</td>
<td>09-24</td>
<td>09-25</td>
<td>09-26</td>
</tr>
<tr class="even">
<td>21</td>
<td>09-27</td>
<td>09-28</td>
<td>09-29</td>
<td>09-30</td>
<td>10-01</td>
<td>10-02</td>
<td>10-03</td>
<td>10-04</td>
<td>10-05</td>
<td>10-06</td>
</tr>
<tr class="odd">
<td>22</td>
<td>10-07</td>
<td>10-08</td>
<td>10-09</td>
<td>10-10</td>
<td>10-11</td>
<td>10-12</td>
<td>10-13</td>
<td>10-14</td>
<td>10-15</td>
<td>10-16</td>
</tr>
<tr class="even">
<td>23</td>
<td>10-17</td>
<td>10-18</td>
<td>10-19</td>
<td>10-20</td>
<td>10-21</td>
<td>10-22</td>
<td>10-23</td>
<td>10-24</td>
<td>10-25</td>
<td>10-26</td>
</tr>
<tr class="odd">
<td>24</td>
<td>10-27</td>
<td>10-28</td>
<td>10-29</td>
<td>10-30</td>
<td>10-31</td>
<td>11-01</td>
<td>11-02</td>
<td>11-03</td>
<td>11-04</td>
<td>11-05</td>
</tr>
<tr class="even">
<td>25</td>
<td>11-06</td>
<td>11-07</td>
<td>11-08</td>
<td>11-09</td>
<td>11-10</td>
<td>11-11</td>
<td>11-12</td>
<td>11-13</td>
<td>11-14</td>
<td>11-15</td>
</tr>
<tr class="odd">
<td>26</td>
<td>11-16</td>
<td>11-17</td>
<td>11-18</td>
<td>11-19</td>
<td>11-20</td>
<td>11-21</td>
<td>11-22</td>
<td>11-23</td>
<td>11-24</td>
<td>11-25</td>
</tr>
<tr class="even">
<td>27</td>
<td>11-26</td>
<td>11-27</td>
<td>11-28</td>
<td>11-29</td>
<td>11-30</td>
<td>12-01</td>
<td>12-02</td>
<td>12-03</td>
<td>12-04</td>
<td>12-05</td>
</tr>
<tr class="odd">
<td>28</td>
<td>12-06</td>
<td>12-07</td>
<td>12-08</td>
<td>12-09</td>
<td>12-10</td>
<td>12-11</td>
<td>12-12</td>
<td>12-13</td>
<td>12-14</td>
<td>12-15</td>
</tr>
<tr class="even">
<td>29</td>
<td>12-16</td>
<td>12-17</td>
<td>12-18</td>
<td>12-19</td>
<td>12-20</td>
<td>12-21</td>
<td>12-22</td>
<td>12-23</td>
<td>12-24</td>
<td>12-25</td>
</tr>
<tr class="odd">
<td>30</td>
<td>12-26</td>
<td>12-27</td>
<td>12-28</td>
<td>12-29</td>
<td>12-30</td>
<td>12-31</td>
<td>01-01</td>
<td>01-02</td>
<td>01-03</td>
<td>01-04</td>
</tr>
<tr class="even">
<td>31</td>
<td>01-05</td>
<td>01-06</td>
<td>01-07</td>
<td>01-08</td>
<td>01-09</td>
<td>01-10</td>
<td>01-11</td>
<td>01-12</td>
<td>01-13</td>
<td>01-14</td>
</tr>
<tr class="odd">
<td>32</td>
<td>01-15</td>
<td>01-16</td>
<td>01-17</td>
<td>01-18</td>
<td>01-19</td>
<td>01-20</td>
<td>01-21</td>
<td>01-22</td>
<td>01-23</td>
<td>01-24</td>
</tr>
<tr class="even">
<td>33</td>
<td>01-25</td>
<td>01-26</td>
<td>01-27</td>
<td>01-28</td>
<td>01-29</td>
<td>01-30</td>
<td>01-31</td>
<td>02-01</td>
<td>02-02</td>
<td>02-03</td>
</tr>
<tr class="odd">
<td>34</td>
<td>02-04</td>
<td>02-05</td>
<td>02-06</td>
<td>02-07</td>
<td>02-08</td>
<td>02-09</td>
<td>02-10</td>
<td>02-11</td>
<td>02-12</td>
<td>02-13</td>
</tr>
<tr class="even">
<td>35</td>
<td>02-14</td>
<td>02-15</td>
<td>02-16</td>
<td>02-17</td>
<td>02-18</td>
<td>02-19</td>
<td>02-20</td>
<td>02-21</td>
<td>02-22</td>
<td>02-23</td>
</tr>
<tr class="odd">
<td>36</td>
<td>02-24</td>
<td>02-25</td>
<td>02-26</td>
<td>02-27</td>
<td>02-28</td>
<td>02-29</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<div class="quarto-table-caption margin-caption">Table&nbsp;6: <code>Doty</code> number to Gregorian calendar date conversion</div></div>
</div>
</div>
</div>
</section></section><section id="sec-conv" class="level3" data-number="4.3.2"><h3 data-number="4.3.2" class="anchored" data-anchor-id="sec-conv">
<span class="header-section-number">4.3.2</span> Gregorian calendar date conversion</h3>
<p>In addition to using a conversion table like <a href="#tbl-greg2doty">Table&nbsp;5</a>, we can convert between Gregorian calendar dates and <code>Decalendar</code> <code>doty</code> dates programmatically. The code in <a href="#exm-coor">Example&nbsp;6</a> is derived from the <a href="http://howardhinnant.github.io/date_algorithms.html#days_from_civil"><code>days_from_civil</code></a> and <a href="http://howardhinnant.github.io/date_algorithms.html#civil_from_days"><code>civil_from_days</code></a> algorithms described by <a href="https://howardhinnant.github.io/">Howard Hinnant</a> in <a href="http://howardhinnant.github.io/date_algorithms.html"><em>chrono-Compatible Low-Level Date Algorithms</em></a> <span class="citation" data-cites="hinnant2014">(<a href="#ref-hinnant2014" role="doc-biblioref">2014</a>)</span>. The output of the <code>greg2doty</code> function is a <code>doty</code>, while its inverse function, <code>doty2greg</code>, returns an array containing a month and a <code>dotm</code> number.</p>
<div id="exm-coor" class="theorem example">
<p><span class="theorem-title"><strong>Example 6 </strong></span>&nbsp;</p>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href="">JavaScript</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href="">Julia</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false" href="">Python</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false" href="">R</a></li>
</ul>
<div class="tab-content" data-group="language">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<section id="greg2doty" class="level5"><h5 class="anchored" data-anchor-id="greg2doty"><code>greg2doty</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;greg2doty&quot;]" data-execution_count="1">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb35"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">greg2doty</span>(month <span class="op">=</span> <span class="dv">1</span><span class="op">,</span> day <span class="op">=</span> <span class="dv">1</span>) {</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>        (<span class="dv">153</span> <span class="op">*</span> (month <span class="op">&gt;</span> <span class="dv">2</span> <span class="op">?</span> month <span class="op">-</span> <span class="dv">3</span> <span class="op">:</span> month <span class="op">+</span> <span class="dv">9</span>) <span class="op">+</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">5</span> <span class="op">+</span> day <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>)}</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="fu">greg2doty</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>306</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-2" href="dec_javascript.ipynb.html">Source: dec_javascript.ipynb</a></div>
</section><section id="doty2greg" class="level5"><h5 class="anchored" data-anchor-id="doty2greg"><code>doty2greg</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;doty2greg&quot;]" data-execution_count="2">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb37"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2greg</span>(doty <span class="op">=</span> <span class="dv">306</span>) {</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> m <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((<span class="dv">5</span> <span class="op">*</span> doty <span class="op">+</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">153</span>)<span class="op">;</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [<span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(m <span class="op">&lt;</span> <span class="dv">10</span> <span class="op">?</span> m <span class="op">+</span> <span class="dv">3</span> <span class="op">:</span> m <span class="op">-</span> <span class="dv">9</span>)<span class="op">,</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(doty <span class="op">-</span> (<span class="dv">153</span> <span class="op">*</span> m <span class="op">+</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">5</span> <span class="op">+</span> <span class="dv">2</span>)]<span class="op">;</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="fu">doty2greg</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>[ 1, 1 ]</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-3" href="dec_javascript.ipynb.html">Source: dec_javascript.ipynb</a></div>
</section>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<section id="greg2doty-1" class="level5"><h5 class="anchored" data-anchor-id="greg2doty-1"><code>greg2doty</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;greg2doty&quot;]" data-execution_count="1">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb39"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">greg2doty</span>(month<span class="op">=</span><span class="fl">1</span>, day<span class="op">=</span><span class="fl">1</span>)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Int</span>(<span class="fu">floor</span>((<span class="fl">153</span> <span class="op">*</span> (month <span class="op">&gt;</span> <span class="fl">2</span> ? month <span class="op">-</span> <span class="fl">3</span> <span class="op">:</span> month <span class="op">+</span> <span class="fl">9</span>) <span class="op">+</span> <span class="fl">2</span>) <span class="op">/</span> <span class="fl">5</span> <span class="op">+</span> day <span class="op">-</span> <span class="fl">1</span>))</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="fu">greg2doty</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>306</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-4" href="dec_julia.ipynb.html">Source: dec_julia.ipynb</a></div>
</section><section id="doty2greg-1" class="level5"><h5 class="anchored" data-anchor-id="doty2greg-1"><code>doty2greg</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;doty2greg&quot;]" data-execution_count="2">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb41"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2greg</span>(doty <span class="op">=</span> <span class="fl">306</span>)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>    m <span class="op">=</span> <span class="fu">floor</span>((<span class="fl">5</span> <span class="op">*</span> doty <span class="op">+</span> <span class="fl">2</span>) <span class="op">/</span> <span class="fl">153</span>);</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">Int</span>(m <span class="op">&lt;</span> <span class="fl">10</span> ? m <span class="op">+</span> <span class="fl">3</span> <span class="op">:</span> m <span class="op">-</span> <span class="fl">9</span>), <span class="fu">Int</span>(<span class="fu">floor</span>(doty <span class="op">-</span> (<span class="fl">153</span> <span class="op">*</span> m <span class="op">+</span> <span class="fl">2</span>) <span class="op">/</span> <span class="fl">5</span> <span class="op">+</span> <span class="fl">2</span>))</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="fu">doty2greg</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>(1, 1)</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-5" href="dec_julia.ipynb.html">Source: dec_julia.ipynb</a></div>
</section>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<section id="greg2doty-2" class="level5"><h5 class="anchored" data-anchor-id="greg2doty-2"><code>greg2doty</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;greg2doty&quot;]" data-execution_count="1">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> greg2doty(month<span class="op">=</span><span class="dv">1</span>, day<span class="op">=</span><span class="dv">1</span>):</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (<span class="dv">153</span> <span class="op">*</span> (month <span class="op">-</span> <span class="dv">3</span> <span class="cf">if</span> month <span class="op">&gt;</span> <span class="dv">2</span> <span class="cf">else</span> month <span class="op">+</span> <span class="dv">9</span>) <span class="op">+</span> <span class="dv">2</span>) <span class="op">//</span> <span class="dv">5</span> <span class="op">+</span> day <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>greg2doty()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>306</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-6" href="dec_python.ipynb.html">Source: dec_python.ipynb</a></div>
</section><section id="doty2greg-2" class="level5"><h5 class="anchored" data-anchor-id="doty2greg-2"><code>doty2greg</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;doty2greg&quot;]" data-execution_count="2">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> doty2greg(doty<span class="op">=</span><span class="dv">306</span>):</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>    m <span class="op">=</span> (<span class="dv">5</span> <span class="op">*</span> doty <span class="op">+</span> <span class="dv">2</span>) <span class="op">//</span> <span class="dv">153</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> m <span class="op">+</span> <span class="dv">3</span> <span class="cf">if</span> m <span class="op">&lt;</span> <span class="dv">10</span> <span class="cf">else</span> m <span class="op">-</span> <span class="dv">9</span>, doty <span class="op">-</span> (<span class="dv">153</span> <span class="op">*</span> m <span class="op">+</span> <span class="dv">2</span>) <span class="op">//</span> <span class="dv">5</span> <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>doty2greg()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>(1, 1)</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-7" href="dec_python.ipynb.html">Source: dec_python.ipynb</a></div>
</section>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<section id="greg2doty-3" class="level5"><h5 class="anchored" data-anchor-id="greg2doty-3"><code>greg2doty</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;greg2doty&quot;]" data-execution_count="1">
<details><summary>Code</summary><div class="sourceCode" id="cb47"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">greg2doty</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">month</span> <span class="op">=</span> <span class="fl">1</span>, <span class="va">day</span> <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/Round.html">floor</a></span><span class="op">(</span><span class="op">(</span><span class="fl">153</span> <span class="op">*</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">month</span> <span class="op">&gt;</span> <span class="fl">2</span>, <span class="va">month</span> <span class="op">-</span> <span class="fl">3</span>, <span class="va">month</span> <span class="op">+</span> <span class="fl">9</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="fl">5</span> <span class="op">+</span> <span class="va">day</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">greg2doty</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
306
</div>
</div>
<a class="quarto-notebook-link" id="nblink-8" href="dec_r.ipynb.html">Source: dec_r.ipynb</a></div>
</section><section id="doty2greg-3" class="level5"><h5 class="anchored" data-anchor-id="doty2greg-3"><code>doty2greg</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;doty2greg&quot;]" data-execution_count="2">
<details><summary>Code</summary><div class="sourceCode" id="cb48"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">doty2greg</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">doty</span> <span class="op">=</span> <span class="fl">306</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">floor</a></span><span class="op">(</span><span class="op">(</span><span class="fl">5</span> <span class="op">*</span> <span class="va">doty</span> <span class="op">+</span> <span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="fl">153</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">m</span> <span class="op">&lt;</span> <span class="fl">10</span>, <span class="va">m</span> <span class="op">+</span> <span class="fl">3</span>, <span class="va">m</span> <span class="op">-</span> <span class="fl">9</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html">floor</a></span><span class="op">(</span><span class="va">doty</span> <span class="op">-</span> <span class="op">(</span><span class="fl">153</span> <span class="op">*</span> <span class="va">m</span> <span class="op">+</span> <span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="fl">5</span> <span class="op">+</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu">doty2greg</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline">
<li>1</li>
<li>1</li>
</ol>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-9" href="dec_r.ipynb.html">Source: dec_r.ipynb</a></div>
</section>
</div>
</div>
</div>
</section><section id="sec-gregm" class="level3 page-columns page-full" data-number="4.3.3"><h3 data-number="4.3.3" class="anchored" data-anchor-id="sec-gregm">
<span class="header-section-number">4.3.3</span> Gregorian calendar months and years</h3>
<p><code>Decalendar</code> only uses months for converting to and from Gregorian calendar dates. Nevertheless, discussing months can help to explain how <code>Decalendar</code> works. The <code>Decalendar</code> year ends with January and February, as shown in <a href="#tbl-gregm">Table&nbsp;7</a>. During these two months, the <code>Decalendar</code> year is 1 less than the Gregorian calendar year. To obtain a <code>Decalendar</code> year (<code>dy</code>) from a Gregorian calendar year (<code>gy</code>) and month number (<code>gm</code>), we subtract 1 from <code>gy</code> if <code>gm</code> is less than 3 (<span class="math inline">\(dy = gy - [gm &lt; 3]\)</span>). To obtain a Gregorian calendar year (<code>gy</code>) from a <code>Decalendar</code> year (<code>dy</code>) and <code>doty</code>, we add 1 to <code>dy</code> if <code>doty</code> is greater than 305 (<span class="math inline">\(gy = dy + [dm &gt; 305]\)</span>). Code to convert between <code>Decalendar</code> and Gregorian calendar years is provided in <a href="#exm-gregm">Example&nbsp;7</a>.</p>
<section id="tbl-gregm" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="tbl-gregm"><a href="#tbl-gregm">Table&nbsp;7</a></h4>
<div class="callout callout-style-default callout-note no-icon callout-titled page-columns page-full" title="Click to toggle table expansion">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click to toggle table expansion
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse page-columns page-full">
<div class="callout-body-container callout-body page-columns page-full">
<div id="tbl-gregm" class="anchored page-columns page-full">
<table class="table">

<thead><tr class="header">
<th>dm</th>
<th>gm</th>
<th>Month</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>3</td>
<td>March</td>
</tr>
<tr class="even">
<td>1</td>
<td>4</td>
<td>April</td>
</tr>
<tr class="odd">
<td>2</td>
<td>5</td>
<td>May</td>
</tr>
<tr class="even">
<td>3</td>
<td>6</td>
<td>June</td>
</tr>
<tr class="odd">
<td>4</td>
<td>7</td>
<td>July</td>
</tr>
<tr class="even">
<td>5</td>
<td>8</td>
<td>August</td>
</tr>
<tr class="odd">
<td>6</td>
<td>9</td>
<td>September</td>
</tr>
<tr class="even">
<td>7</td>
<td>10</td>
<td>October</td>
</tr>
<tr class="odd">
<td>8</td>
<td>11</td>
<td>November</td>
</tr>
<tr class="even">
<td>9</td>
<td>12</td>
<td>December</td>
</tr>
<tr class="odd">
<td>10</td>
<td>1</td>
<td>January</td>
</tr>
<tr class="even">
<td>11</td>
<td>2</td>
<td>February</td>
</tr>
</tbody>
</table>
<div class="quarto-table-caption margin-caption">Table&nbsp;7: The numeric values of months in <code>Decalendar</code> and the Gregorian calendar</div></div>
</div>
</div>
</div>
<div id="exm-gregm" class="theorem example">
<p><span class="theorem-title"><strong>Example 7 </strong></span>&nbsp;</p>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true" href="">JavaScript</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false" href="">Julia</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false" href="">Python</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-4" role="tab" aria-controls="tabset-2-4" aria-selected="false" href="">R</a></li>
</ul>
<div class="tab-content" data-group="language">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<section id="greg2year" class="level5"><h5 class="anchored" data-anchor-id="greg2year"><code>greg2year</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;greg2year&quot;]" data-execution_count="3">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb49"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">greg2year</span>(year <span class="op">=</span> <span class="dv">1970</span><span class="op">,</span> month <span class="op">=</span> <span class="dv">1</span>) { <span class="cf">return</span> year <span class="op">-</span> (month <span class="op">&lt;</span> <span class="dv">3</span>) }</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">greg2year</span>())<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>1969</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-10" href="dec_javascript.ipynb.html">Source: dec_javascript.ipynb</a></div>
</section><section id="doty2year" class="level5"><h5 class="anchored" data-anchor-id="doty2year"><code>doty2year</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;doty2year&quot;]" data-execution_count="4">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb51"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2year</span>(year <span class="op">=</span> <span class="dv">1969</span><span class="op">,</span> doty <span class="op">=</span> <span class="dv">306</span>) { <span class="cf">return</span> year <span class="op">+</span> (doty <span class="op">&gt;</span> <span class="dv">305</span>) }</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">doty2year</span>())<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>1970</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-11" href="dec_javascript.ipynb.html">Source: dec_javascript.ipynb</a></div>
</section>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<section id="greg2year-1" class="level5"><h5 class="anchored" data-anchor-id="greg2year-1"><code>greg2year</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;greg2year&quot;]" data-execution_count="3">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb53"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">greg2year</span>(year<span class="op">=</span><span class="fl">1970</span>, month<span class="op">=</span><span class="fl">1</span>)</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>    year <span class="op">-</span> (month <span class="op">&lt;</span> <span class="fl">3</span>)</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a><span class="fu">greg2year</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>1969</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-12" href="dec_julia.ipynb.html">Source: dec_julia.ipynb</a></div>
</section><section id="doty2year-1" class="level5"><h5 class="anchored" data-anchor-id="doty2year-1"><code>doty2year</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;doty2year&quot;]" data-execution_count="4">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb55"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2year</span>(year<span class="op">=</span><span class="fl">1969</span>, doty<span class="op">=</span><span class="fl">306</span>)</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>    year <span class="op">+</span> (doty <span class="op">&gt;</span> <span class="fl">305</span>)</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a><span class="fu">doty2year</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>1970</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-13" href="dec_julia.ipynb.html">Source: dec_julia.ipynb</a></div>
</section>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<section id="greg2year-2" class="level5"><h5 class="anchored" data-anchor-id="greg2year-2"><code>greg2year</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;greg2year&quot;]" data-execution_count="3">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> greg2year(year<span class="op">=</span><span class="dv">1970</span>, month<span class="op">=</span><span class="dv">1</span>):</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> year <span class="op">-</span> (month <span class="op">&lt;</span> <span class="dv">3</span>)</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>greg2year()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>1969</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-14" href="dec_python.ipynb.html">Source: dec_python.ipynb</a></div>
</section><section id="doty2year-2" class="level5"><h5 class="anchored" data-anchor-id="doty2year-2"><code>doty2year</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;doty2year&quot;]" data-execution_count="4">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> doty2year(year<span class="op">=</span><span class="dv">1969</span>, doty<span class="op">=</span><span class="dv">306</span>):</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> year <span class="op">+</span> (doty <span class="op">&gt;</span> <span class="dv">305</span>)</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>doty2year()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>1970</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-15" href="dec_python.ipynb.html">Source: dec_python.ipynb</a></div>
</section>
</div>
<div id="tabset-2-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-4-tab">
<section id="greg2year-3" class="level5"><h5 class="anchored" data-anchor-id="greg2year-3"><code>greg2year</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;greg2year&quot;]" data-execution_count="3">
<details><summary>Code</summary><div class="sourceCode" id="cb61"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">greg2year</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">year</span> <span class="op">=</span> <span class="fl">1970</span>, <span class="va">month</span> <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">year</span> <span class="op">-</span> <span class="op">(</span><span class="va">month</span> <span class="op">&lt;</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">greg2year</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
1969
</div>
</div>
<a class="quarto-notebook-link" id="nblink-16" href="dec_r.ipynb.html">Source: dec_r.ipynb</a></div>
</section><section id="doty2year-3" class="level5"><h5 class="anchored" data-anchor-id="doty2year-3"><code>doty2year</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;doty2year&quot;]" data-execution_count="4">
<details><summary>Code</summary><div class="sourceCode" id="cb62"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">doty2year</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">year</span> <span class="op">=</span> <span class="fl">1969</span>, <span class="va">doty</span> <span class="op">=</span> <span class="fl">306</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">year</span> <span class="op">+</span> <span class="op">(</span><span class="va">doty</span> <span class="op">&gt;</span> <span class="fl">305</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">doty2year</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
1970
</div>
</div>
<a class="quarto-notebook-link" id="nblink-17" href="dec_r.ipynb.html">Source: dec_r.ipynb</a></div>
</section>
</div>
</div>
</div>
</section></section><section id="sec-gregl" class="level3" data-number="4.3.4"><h3 data-number="4.3.4" class="anchored" data-anchor-id="sec-gregl">
<span class="header-section-number">4.3.4</span> Leap years</h3>
<p>A leap year has 366 days in both <code>Decalendar</code> and the Gregorian calendar. <code>Day</code> <code>365</code> is Leap Day in <code>Decalendar</code> and is synonymous with February 29, the Gregorian calendar leap day. <code>Decalendar</code> positions Leap Day, <code>Day</code> <code>365</code>, at the end of the year, which requires an adjustment of the Gregorian calendar definition of a leap year. To check if a <code>Decalendar</code> year is a leap, we must first add 1 to the year before plugging it into <a href="#eq-gregl">Equation&nbsp;1</a> or the <a href="http://howardhinnant.github.io/date_algorithms.html#is_leap"><code>year2bool</code></a> function in <a href="#exm-gregl">Example&nbsp;8</a>.</p>
<p>Interestingly, years from negative <code>deco</code> dates do not need any adjustment. The first day of <code>Year</code> <code>1999</code> is <code>1999+000</code> or <code>2000-366</code>, while the last day is <code>1999+365</code> or <code>2000-001</code>. <code>Year</code> <code>1999</code> is a leap year from the perspective of the positive <code>deco</code> dates, <code>1999+000</code> and <code>1999+365</code>, because it goes from <code>Day</code> <code>0</code> to <code>Day</code> <code>365</code>. In the context of the negative <code>deco</code> dates,<code>2000-366</code> and <code>2000-001</code>, <code>Year</code> <code>2000</code> is a leap year because it goes from <code>Day</code> <code>-366</code> to <code>Day</code> <code>-1</code>.</p>
<p><span id="eq-gregl"><span class="math display">\[y \mod 4 = 0 \land year \mod 100 \neq 0 \lor year \mod 400 = 0 \tag{1}\]</span></span></p>
<div id="exm-gregl" class="theorem example">
<p><span class="theorem-title"><strong>Example 8 </strong></span>&nbsp;</p>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true" href="">JavaScript</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false" href="">Julia</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-3" role="tab" aria-controls="tabset-3-3" aria-selected="false" href="">Python</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-4" role="tab" aria-controls="tabset-3-4" aria-selected="false" href="">R</a></li>
</ul>
<div class="tab-content" data-group="language">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<section id="leap" class="level5"><h5 class="anchored" data-anchor-id="leap"><code>leap</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;leap&quot;]" data-execution_count="5">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb63"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">year2bool</span>(year <span class="op">=</span> <span class="dv">1970</span>) {</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> year <span class="op">%</span> <span class="dv">4</span> <span class="op">==</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> year <span class="op">%</span> <span class="dv">100</span> <span class="op">!=</span> <span class="dv">0</span> <span class="op">||</span> year <span class="op">%</span> <span class="dv">400</span> <span class="op">==</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a><span class="fu">year2bool</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>false</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-18" href="dec_javascript.ipynb.html">Source: dec_javascript.ipynb</a></div>
</section>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<section id="leap-1" class="level5"><h5 class="anchored" data-anchor-id="leap-1"><code>leap</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;leap&quot;]" data-execution_count="5">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb65"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">year2bool</span>(year<span class="op">=</span><span class="fl">1970</span>)</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>    year <span class="op">%</span> <span class="fl">4</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">&amp;&amp;</span> year <span class="op">%</span> <span class="fl">100</span> <span class="op">!=</span> <span class="fl">0</span> <span class="op">||</span> year <span class="op">%</span> <span class="fl">400</span> <span class="op">==</span> <span class="fl">0</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="fu">year2bool</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>false</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-19" href="dec_julia.ipynb.html">Source: dec_julia.ipynb</a></div>
</section>
</div>
<div id="tabset-3-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-3-tab">
<section id="leap-2" class="level5"><h5 class="anchored" data-anchor-id="leap-2"><code>leap</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;leap&quot;]" data-execution_count="5">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> year2bool(year<span class="op">=</span><span class="dv">1970</span>):</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> year <span class="op">%</span> <span class="dv">4</span> <span class="op">==</span> <span class="dv">0</span> <span class="kw">and</span> year <span class="op">%</span> <span class="dv">100</span> <span class="op">!=</span> <span class="dv">0</span> <span class="kw">or</span> year <span class="op">%</span> <span class="dv">400</span> <span class="op">==</span> <span class="dv">0</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>year2bool()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>False</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-20" href="dec_python.ipynb.html">Source: dec_python.ipynb</a></div>
</section>
</div>
<div id="tabset-3-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-4-tab">
<section id="leap-3" class="level5"><h5 class="anchored" data-anchor-id="leap-3"><code>leap</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;leap&quot;]" data-execution_count="5">
<details><summary>Code</summary><div class="sourceCode" id="cb69"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">year2bool</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">year</span> <span class="op">=</span> <span class="fl">1970</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">year</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html">%%</a></span> <span class="fl">4</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">&amp;</span> <span class="va">year</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html">%%</a></span> <span class="fl">100</span> <span class="op">!=</span> <span class="fl">0</span> <span class="op">|</span> <span class="va">year</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html">%%</a></span> <span class="fl">400</span> <span class="op">==</span> <span class="fl">0</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">year2bool</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
FALSE
</div>
</div>
<a class="quarto-notebook-link" id="nblink-21" href="dec_r.ipynb.html">Source: dec_r.ipynb</a></div>
</section>
</div>
</div>
</div>
</section></section><section id="sec-iso" class="level2 page-columns page-full" data-number="4.4"><h2 data-number="4.4" class="anchored" data-anchor-id="sec-iso">
<span class="header-section-number">4.4</span> ISO 8601</h2>
<section id="sec-isoy" class="level3" data-number="4.4.1"><h3 data-number="4.4.1" class="anchored" data-anchor-id="sec-isoy">
<span class="header-section-number">4.4.1</span> Years</h3>
<p>Both <code>Decalendar</code> and <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a> dates show <a href="https://en.wikipedia.org/wiki/ISO_8601#Years">years</a> as 4-digit numbers. Unlike ISO 8601, <code>Decalendar</code> does not require years to be included in dates. As shown in <a href="#tbl-2x2">Table&nbsp;1</a>, <code>Decalendar</code> <code>deco</code> dates include years while <code>doty</code> dates do not. Year 0 in both <code>Decalendar</code> and ISO 8601 is 1 BCE (Before Common Era) in the Gregorian calendar. The first day of Year 0 in <code>Decalendar</code>, <code>0000+000</code>, is called the <code>Decalendar</code> epoch and translates to March 1, 1 BCE in the Gregorian calendar. The first day of Year 0 according to ISO 8601 is <code>-0001+306</code> in <code>Decalendar</code> and January 1, 1 BCE in the Gregorian calendar.</p>
</section><section id="sec-isoo" class="level3" data-number="4.4.2"><h3 data-number="4.4.2" class="anchored" data-anchor-id="sec-isoo">
<span class="header-section-number">4.4.2</span> Ordinal dates</h3>
<p><code>Deco</code> dates (<code>year+day</code>) are very similar to <a href="https://en.wikipedia.org/wiki/ISO_8601#Ordinal_dates">ISO 8601 ordinal (<code>isoo</code>) dates</a> (<code>year-day</code>). Like <code>Decalendar</code> <code>doties</code>, <code>isoo</code> dates count the number of days since the start of the year. Unlike ordinal dates, <code>doties</code> are <a href="https://en.wikipedia.org/wiki/Zero-based_numbering">zero-based</a> and do not differ across common and leap years. The <code>deco</code> date can be easily obtained from the <code>isoo</code> date using the calculations shown in <a href="#eq-isoo1">Equation&nbsp;2</a>, <a href="#eq-isoo2">Equation&nbsp;3</a>, and <a href="#exm-isoo">Example&nbsp;9</a>. These calculation shift the <code>isoo</code> date by 60 or 61 days to account for the 2-month difference between <code>Decalendar</code> and the Gregorian calendar.</p>
<p>In <a href="#exm-isoo">Example&nbsp;9</a>, the <code>isoo2doty</code> and <code>doty2isoo</code> functions convert between ISO 8601 ordinal day numbers and <code>doties</code>. We use the <code>year2bool</code> function from <a href="#exm-gregl">Example&nbsp;8</a> in <a href="#exm-isoo">Example&nbsp;9</a> to correct for the fact that Leap Day shifts ISO 8601 ordinal day numbers by 1 day in leap years. To be clear, we only have to take Leap Day into account when dealing with <code>isoo</code> dates. <code>Decalendar</code> <code>doties</code> are the same in common and leap years, because Leap Day is at the end of the <code>Decalendar</code> year.</p>
<p><span id="eq-isoo1"><span class="math display">\[(isoordinal + 305 - year2bool(year)) \mod 365 \tag{2}\]</span></span></p>
<p><span id="eq-isoo2"><span class="math display">\[(doty + 60 + year2bool(year + 1)) \mod 365 \tag{3}\]</span></span></p>
<div id="exm-isoo" class="theorem example">
<p><span class="theorem-title"><strong>Example 9 </strong></span>&nbsp;</p>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true" href="">JavaScript</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false" href="">Julia</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-3" role="tab" aria-controls="tabset-4-3" aria-selected="false" href="">Python</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-4" role="tab" aria-controls="tabset-4-4" aria-selected="false" href="">R</a></li>
</ul>
<div class="tab-content" data-group="language">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<section id="isoo2doty" class="level5"><h5 class="anchored" data-anchor-id="isoo2doty"><code>isoo2doty</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;isoo2doty&quot;]" data-execution_count="6">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb70"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">isoo2doty</span>(yd <span class="op">=</span> <span class="st">"1970-001"</span>) {</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> [year<span class="op">,</span> day] <span class="op">=</span> yd<span class="op">.</span><span class="fu">includes</span>(<span class="st">"-"</span>) <span class="op">?</span> yd<span class="op">.</span><span class="fu">split</span>(<span class="st">"-"</span>) <span class="op">:</span> yd<span class="op">.</span><span class="fu">split</span>(<span class="ss">/</span><span class="sc">(?</span><span class="ss">=</span><span class="sc">\d{4})</span><span class="ss">/</span>)<span class="op">;</span></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [<span class="pp">parseInt</span>(year) <span class="op">-</span> (<span class="pp">parseInt</span>(day) <span class="op">&lt;</span> (<span class="dv">60</span> <span class="op">+</span> <span class="fu">year2bool</span>(year <span class="op">-</span> <span class="dv">1</span>)))<span class="op">,</span></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>        (<span class="pp">parseInt</span>(day) <span class="op">+</span> <span class="dv">305</span> <span class="op">-</span> <span class="fu">year2bool</span>(year)) <span class="op">%</span> <span class="dv">365</span>]</span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">isoo2doty</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[ 1969, 306 ]</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-22" href="dec_javascript.ipynb.html">Source: dec_javascript.ipynb</a></div>
</section><section id="isoo2deco" class="level5"><h5 class="anchored" data-anchor-id="isoo2deco"><code>isoo2deco</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;isoo2deco&quot;]" data-execution_count="7">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb72"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">isoo2deco</span>(yd <span class="op">=</span> <span class="st">"1970-001"</span>) {</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> [year<span class="op">,</span> doty] <span class="op">=</span> <span class="fu">isoo2doty</span>(yd)<span class="op">.</span><span class="fu">map</span>(i <span class="kw">=&gt;</span> i<span class="op">.</span><span class="fu">toString</span>())</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`</span><span class="sc">${</span>year<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">4</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}</span><span class="vs">+</span><span class="sc">${</span>doty<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">3</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}</span><span class="vs">`</span></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">isoo2deco</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>1969+306</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-23" href="dec_javascript.ipynb.html">Source: dec_javascript.ipynb</a></div>
</section><section id="doty2isoo" class="level5"><h5 class="anchored" data-anchor-id="doty2isoo"><code>doty2isoo</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;doty2isoo&quot;]" data-execution_count="8">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb74"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2isoo</span>(year <span class="op">=</span> <span class="dv">1969</span><span class="op">,</span> doty <span class="op">=</span> <span class="dv">306</span>) {</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`</span><span class="sc">${</span><span class="fu">doty2year</span>(year<span class="op">,</span> doty)<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">4</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}</span><span class="vs">-</span><span class="sc">${</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>    ((doty <span class="op">+</span> <span class="dv">60</span> <span class="op">+</span> <span class="fu">year2bool</span>(year <span class="op">+</span> <span class="dv">1</span>)) <span class="op">%</span> <span class="dv">365</span>)<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">3</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}</span><span class="vs">`</span></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">doty2isoo</span>())<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>1970-001</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-24" href="dec_javascript.ipynb.html">Source: dec_javascript.ipynb</a></div>
</section>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<section id="isoo2year" class="level5"><h5 class="anchored" data-anchor-id="isoo2year"><code>isoo2year</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;isoo2doty&quot;]" data-execution_count="6">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb76"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">isoo2year</span>(year<span class="op">=</span><span class="fl">1970</span>, day<span class="op">=</span><span class="fl">1</span>)</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>    year <span class="op">-</span> (day <span class="op">&lt;</span> (<span class="fl">60</span> <span class="op">+</span> <span class="fu">year2bool</span>(year <span class="op">-</span> <span class="fl">1</span>)))</span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a><span class="fu">isoo2year</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>1969</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-25" href="dec_julia.ipynb.html">Source: dec_julia.ipynb</a></div>
</section><section id="isoo2doty-1" class="level5"><h5 class="anchored" data-anchor-id="isoo2doty-1"><code>isoo2doty</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;isoo2doty&quot;]" data-execution_count="6">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb78"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">isoo2year</span>(year<span class="op">=</span><span class="fl">1970</span>, day<span class="op">=</span><span class="fl">1</span>)</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>    year <span class="op">-</span> (day <span class="op">&lt;</span> (<span class="fl">60</span> <span class="op">+</span> <span class="fu">year2bool</span>(year <span class="op">-</span> <span class="fl">1</span>)))</span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a><span class="fu">isoo2year</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>1969</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-26" href="dec_julia.ipynb.html">Source: dec_julia.ipynb</a></div>
</section><section id="doty2isoo-1" class="level5"><h5 class="anchored" data-anchor-id="doty2isoo-1"><code>doty2isoo</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;doty2isoo&quot;]" data-execution_count="8">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb80"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2isoo</span>(year<span class="op">=</span><span class="fl">1970</span>, doty<span class="op">=</span><span class="fl">0</span>)</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>    (doty <span class="op">+</span> <span class="fl">60</span> <span class="op">+</span> <span class="fu">year2bool</span>(year <span class="op">+</span> <span class="fl">1</span>)) <span class="op">%</span> <span class="fl">365</span></span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a><span class="st">"</span><span class="sc">$</span>(<span class="fu">lpad</span>(<span class="fu">doty2year</span>(), <span class="fl">4</span>, <span class="ch">'0'</span>))<span class="st">+</span><span class="sc">$</span>(<span class="fu">lpad</span>(<span class="fu">doty2isoo</span>(), <span class="fl">3</span>, <span class="ch">'0'</span>))<span class="st">"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>"1970+060"</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-27" href="dec_julia.ipynb.html">Source: dec_julia.ipynb</a></div>
</section>
</div>
<div id="tabset-4-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-3-tab">
<section id="isoo2year-1" class="level5"><h5 class="anchored" data-anchor-id="isoo2year-1"><code>isoo2year</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;isoo2year&quot;]" data-execution_count="6">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb82"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> isoo2year(year<span class="op">=</span><span class="dv">1970</span>, day<span class="op">=</span><span class="dv">1</span>):</span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> year <span class="op">-</span> (day <span class="op">&lt;</span> (<span class="dv">60</span> <span class="op">+</span> year2bool(year <span class="op">-</span> <span class="dv">1</span>)))</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>isoo2year()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>1969</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-28" href="dec_python.ipynb.html">Source: dec_python.ipynb</a></div>
</section><section id="isoo2doty-2" class="level5"><h5 class="anchored" data-anchor-id="isoo2doty-2"><code>isoo2doty</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;isoo2doty&quot;]" data-execution_count="7">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb84"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> isoo2doty(year<span class="op">=</span><span class="dv">1970</span>, day<span class="op">=</span><span class="dv">1</span>):</span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (day <span class="op">+</span> <span class="dv">305</span> <span class="op">-</span> year2bool(year)) <span class="op">%</span> <span class="dv">365</span></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a><span class="ss">f"</span><span class="sc">{</span>isoo2year()<span class="sc">:&gt;04}</span><span class="ss">+</span><span class="sc">{</span>isoo2doty()<span class="sc">:&gt;03}</span><span class="ss">"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>'1969+306'</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-29" href="dec_python.ipynb.html">Source: dec_python.ipynb</a></div>
</section><section id="doty2isoo-2" class="level5"><h5 class="anchored" data-anchor-id="doty2isoo-2"><code>doty2isoo</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;doty2isoo&quot;]" data-execution_count="8">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb86"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> doty2isoo(year<span class="op">=</span><span class="dv">1970</span>, doty<span class="op">=</span><span class="dv">0</span>):</span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (doty <span class="op">+</span> <span class="dv">60</span> <span class="op">+</span> year2bool(year <span class="op">+</span> <span class="dv">1</span>)) <span class="op">%</span> <span class="dv">365</span></span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a><span class="ss">f"</span><span class="sc">{</span>doty2year()<span class="sc">:&gt;04}</span><span class="ss">+</span><span class="sc">{</span>doty2isoo()<span class="sc">:&gt;03}</span><span class="ss">"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>'1970+060'</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-30" href="dec_python.ipynb.html">Source: dec_python.ipynb</a></div>
</section>
</div>
<div id="tabset-4-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-4-tab">
<section id="isoo2year-2" class="level5"><h5 class="anchored" data-anchor-id="isoo2year-2"><code>isoo2year</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;isoo2year&quot;]" data-execution_count="6">
<details><summary>Code</summary><div class="sourceCode" id="cb88"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">isoo2year</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">year</span> <span class="op">=</span> <span class="fl">1970</span>, <span class="va">day</span> <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">year</span> <span class="op">-</span> <span class="op">(</span><span class="va">day</span> <span class="op">&lt;</span> <span class="op">(</span><span class="fl">60</span> <span class="op">+</span> <span class="fu">year2bool</span><span class="op">(</span><span class="va">year</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">isoo2year</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
1969
</div>
</div>
<a class="quarto-notebook-link" id="nblink-31" href="dec_r.ipynb.html">Source: dec_r.ipynb</a></div>
</section><section id="isoo2doty-3" class="level5"><h5 class="anchored" data-anchor-id="isoo2doty-3"><code>isoo2doty</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;isoo2doty&quot;]" data-execution_count="7">
<details><summary>Code</summary><div class="sourceCode" id="cb89"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">isoo2doty</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">year</span> <span class="op">=</span> <span class="fl">1970</span>, <span class="va">day</span> <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="op">(</span><span class="va">day</span> <span class="op">+</span> <span class="fl">305</span> <span class="op">-</span> <span class="fu">year2bool</span><span class="op">(</span><span class="va">year</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html">%%</a></span> <span class="fl">365</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">"%04d"</span>, <span class="fu">isoo2year</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>, <span class="st">"+"</span>, <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">"%03d"</span>, <span class="fu">isoo2doty</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
'1969+306'
</div>
</div>
<a class="quarto-notebook-link" id="nblink-32" href="dec_r.ipynb.html">Source: dec_r.ipynb</a></div>
</section><section id="doty2isoo-3" class="level5"><h5 class="anchored" data-anchor-id="doty2isoo-3"><code>doty2isoo</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;doty2isoo&quot;]" data-execution_count="8">
<details><summary>Code</summary><div class="sourceCode" id="cb90"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">doty2isoo</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">year</span> <span class="op">=</span> <span class="fl">1970</span>, <span class="va">doty</span> <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="op">(</span><span class="va">doty</span> <span class="op">+</span> <span class="fl">60</span> <span class="op">+</span> <span class="fu">year2bool</span><span class="op">(</span><span class="va">year</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html">%%</a></span> <span class="fl">365</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">"%04d"</span>, <span class="fu">doty2year</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>, <span class="st">"+"</span>, <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">"%03d"</span>, <span class="fu">doty2isoo</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
'1970+060'
</div>
</div>
<a class="quarto-notebook-link" id="nblink-33" href="dec_r.ipynb.html">Source: dec_r.ipynb</a></div>
</section>
</div>
</div>
</div>
</section><section id="sec-isoc" class="level3" data-number="4.4.3"><h3 data-number="4.4.3" class="anchored" data-anchor-id="sec-isoc">
<span class="header-section-number">4.4.3</span> Calendar dates</h3>
<p>ISO 8601 <a href="https://en.wikipedia.org/wiki/ISO_8601#Calendar_dates">calendar dates (<code>isoc</code>)</a> consist of a four-digit year, a two-digit month, and a two-digit <code>dotm</code> separated by hyphens (<code>year-mm-dd</code>). This format is the current widely accepted standard for displaying Gregorian calendar dates. We can combine code from <a href="#exm-coor">Example&nbsp;6</a> and <a href="#exm-gregm">Example&nbsp;7</a> to convert between <code>deco</code> dates and <code>isoc</code> dates, as shown in <a href="#exm-isoc">Example&nbsp;10</a>. The code in <a href="#exm-isoc">Example&nbsp;10</a> formats the output of the <code>greg2year</code> and <code>greg2doty</code> functions into <code>deco</code> dates and the output of the <code>doty2year</code> and <code>doty2greg</code> functions into <code>isoc</code> dates.</p>
<p>As mentioned in <a href="#sec-coor">Section&nbsp;4.3.1</a>, <code>Decalendar</code> uses <code>doties</code> as dates instead of month and day-of-the-month (<code>dotm</code>) numbers, but if required, Gregorian calendar dates can be provided in the <code>Decalendar</code> calendar (<code>decc</code>, pronounced ‚Äúdeck-see‚Äù) format (<code>year+m+dd</code>), which is very similar to the <code>isoc</code> date format. The <code>decc</code> format is described in <a href="#sec-dotm">Section&nbsp;5.1</a>. Examples of the <code>decc</code> format are provided in <a href="#sec-dotex">Section&nbsp;5.3</a>. To be clear, the <code>decc</code> format is only used to display Gregorian calendar dates and otherwise does not play any role in <code>Decalendar</code>.</p>
<div id="exm-isoc" class="theorem example">
<p><span class="theorem-title"><strong>Example 10 </strong></span>&nbsp;</p>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true" href="">JavaScript</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false" href="">Julia</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-3" role="tab" aria-controls="tabset-5-3" aria-selected="false" href="">Python</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-4" role="tab" aria-controls="tabset-5-4" aria-selected="false" href="">R</a></li>
</ul>
<div class="tab-content" data-group="language">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<section id="greg2deco" class="level5"><h5 class="anchored" data-anchor-id="greg2deco"><code>greg2deco</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;greg2deco&quot;]" data-execution_count="9">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb91"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">greg2deco</span>(year <span class="op">=</span> <span class="dv">1970</span><span class="op">,</span> month <span class="op">=</span> <span class="dv">1</span><span class="op">,</span> day <span class="op">=</span> <span class="dv">1</span>) {</span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`</span><span class="sc">${</span><span class="fu">greg2year</span>(year<span class="op">,</span> month)<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">4</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}</span><span class="vs">+</span><span class="sc">${</span></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">greg2doty</span>(month<span class="op">,</span> day)<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">3</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}</span><span class="vs">`</span><span class="op">;</span></span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<a class="quarto-notebook-link" id="nblink-34" href="dec_javascript.ipynb.html">Source: dec_javascript.ipynb</a></div>
</section><section id="doty2isoc" class="level5"><h5 class="anchored" data-anchor-id="doty2isoc"><code>doty2isoc</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;doty2isoc&quot;]" data-execution_count="10">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb92"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2isoc</span>(year <span class="op">=</span> <span class="dv">1969</span><span class="op">,</span> doty <span class="op">=</span> <span class="dv">306</span>) {</span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`</span><span class="sc">${</span><span class="fu">doty2year</span>()<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">4</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}</span><span class="vs">-</span><span class="sc">${</span></span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">doty2greg</span>()<span class="op">.</span><span class="fu">map</span>(</span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>            i <span class="kw">=&gt;</span> i<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">2</span><span class="op">,</span> <span class="st">"0"</span>)</span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a>        )<span class="op">.</span><span class="fu">join</span>(<span class="st">"-"</span>)<span class="sc">}</span><span class="vs">`</span><span class="op">;</span></span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<a class="quarto-notebook-link" id="nblink-35" href="dec_javascript.ipynb.html">Source: dec_javascript.ipynb</a></div>
</section><section id="greg2isoc" class="level5"><h5 class="anchored" data-anchor-id="greg2isoc"><code>greg2isoc</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;greg2isoc&quot;]" data-execution_count="11">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb93"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">greg2isoc</span>(year <span class="op">=</span> <span class="dv">1970</span><span class="op">,</span> month <span class="op">=</span> <span class="dv">1</span><span class="op">,</span> day <span class="op">=</span> <span class="dv">1</span>) {</span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`</span><span class="sc">${</span>year<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">4</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}</span><span class="vs">-</span><span class="sc">${</span></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>        month<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">2</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}</span><span class="vs">-</span><span class="sc">${</span></span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>        day<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">2</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}</span><span class="vs">`</span><span class="op">;</span></span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<a class="quarto-notebook-link" id="nblink-36" href="dec_javascript.ipynb.html">Source: dec_javascript.ipynb</a></div>
</section>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<section id="deco-date" class="level5"><h5 class="anchored" data-anchor-id="deco-date">
<code>deco</code> date</h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;decdate&quot;]" data-execution_count="9">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb94"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="st">"</span><span class="sc">$</span>(<span class="fu">lpad</span>(<span class="fu">greg2year</span>(), <span class="fl">4</span>, <span class="ch">'0'</span>))<span class="st">+</span><span class="sc">$</span>(<span class="fu">lpad</span>(<span class="fu">greg2doty</span>(), <span class="fl">3</span>, <span class="ch">'0'</span>))<span class="st">"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>"1969+306"</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-37" href="dec_julia.ipynb.html">Source: dec_julia.ipynb</a></div>
</section><section id="iso-8601-date" class="level5"><h5 class="anchored" data-anchor-id="iso-8601-date">ISO 8601 date</h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;isodate&quot;]" data-execution_count="10">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb96"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="st">"</span><span class="sc">$</span>(<span class="fu">lpad</span>(<span class="fu">doty2year</span>(), <span class="fl">4</span>, <span class="ch">'0'</span>))<span class="st">-</span><span class="sc">$</span>(<span class="fu">join</span>(<span class="fu">map</span>((x) <span class="op">-&gt;</span> <span class="fu">lpad</span>(x, <span class="fl">2</span>, <span class="ch">'0'</span>), <span class="fu">doty2greg</span>()), <span class="ch">'-'</span>))<span class="st">"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>"1970-01-01"</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-38" href="dec_julia.ipynb.html">Source: dec_julia.ipynb</a></div>
</section>
</div>
<div id="tabset-5-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-3-tab">
<section id="deco-date-1" class="level5"><h5 class="anchored" data-anchor-id="deco-date-1">
<code>deco</code> date</h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;decdate&quot;]" data-execution_count="9">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb98"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="ss">f"</span><span class="sc">{</span>greg2year()<span class="sc">:&gt;04}</span><span class="ss">+</span><span class="sc">{</span>greg2doty()<span class="sc">:&lt;3}</span><span class="ss">"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>'1969+306'</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-39" href="dec_python.ipynb.html">Source: dec_python.ipynb</a></div>
</section><section id="iso-8601-date-1" class="level5"><h5 class="anchored" data-anchor-id="iso-8601-date-1">ISO 8601 date</h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;isodate&quot;]" data-execution_count="10">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb100"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="ss">f"</span><span class="sc">{</span>doty2year()<span class="sc">:&gt;04}</span><span class="ss">-</span><span class="sc">{</span><span class="st">'-'</span><span class="sc">.</span>join(<span class="bu">map</span>(<span class="kw">lambda</span> i: <span class="bu">str</span>(i).rjust(<span class="dv">2</span>, <span class="st">'0'</span>), doty2greg()))<span class="sc">}</span><span class="ss">"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>'1970-01-01'</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-40" href="dec_python.ipynb.html">Source: dec_python.ipynb</a></div>
</section>
</div>
<div id="tabset-5-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-4-tab">
<section id="deco-date-2" class="level5"><h5 class="anchored" data-anchor-id="deco-date-2">
<code>deco</code> date</h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;decdate&quot;]" data-execution_count="9">
<details><summary>Code</summary><div class="sourceCode" id="cb102"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">"%04d"</span>, <span class="fu">greg2year</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>, <span class="st">"+"</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">"%03d"</span>, <span class="fu">greg2doty</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
'1969+306'
</div>
</div>
<a class="quarto-notebook-link" id="nblink-41" href="dec_r.ipynb.html">Source: dec_r.ipynb</a></div>
</section><section id="iso-8601-date-2" class="level5"><h5 class="anchored" data-anchor-id="iso-8601-date-2">ISO 8601 date</h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;isodate&quot;]" data-execution_count="10">
<details><summary>Code</summary><div class="sourceCode" id="cb103"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">"%04d"</span>, <span class="fu">doty2year</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>, <span class="st">"-"</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">"%02d"</span>, <span class="fu">doty2greg</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>, collapse <span class="op">=</span> <span class="st">'-'</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
'1970-01-01'
</div>
</div>
<a class="quarto-notebook-link" id="nblink-42" href="dec_r.ipynb.html">Source: dec_r.ipynb</a></div>
</section>
</div>
</div>
</div>
</section><section id="sec-isoz" class="level3" data-number="4.4.4"><h3 data-number="4.4.4" class="anchored" data-anchor-id="sec-isoz">
<span class="header-section-number">4.4.4</span> Time zones</h3>
<p><code>Isoc</code> dates can be combined with the <a href="https://en.wikipedia.org/wiki/ISO_8601#Times">ISO 8601 time (<code>isot</code>) format</a> (<code>hh:mm:ss</code>) to form <code>isoc</code> timestamps. Likewise, <code>deco</code> dates can be combined with <code>Declock</code> times to form <code>deco</code> timestamps. Both <code>deco</code> (<code>year+day.clockZ</code>) and <code>isoc</code> (<code>year-mm-ddThh:mm:ssZ</code>) timestamps can end in a <code>Z</code>. This <code>Z</code> is a <a href="https://en.wikipedia.org/wiki/Military_time_zone#Description">military time zone code</a> that represents the <a href="https://en.wikipedia.org/wiki/UTC+00:00">UTC+00:00</a> time zone, which is the basis of <a href="https://en.wikipedia.org/wiki/Coordinated_Universal_Time">Coordinated Universal Time (UTC)</a>.</p>
<p><code>Deco</code> timestamps that are synchronized with UTC can either end in <code>Z</code> (<code>year+day.clockZ</code>) or <code>+0</code> (<code>year+day.clock+0</code>). Noon UTC can be written <code>.5Z</code> or <code>.5+0</code> in <code>Declock</code> and 12:00:00Z, 120000Z, 12:00:00+00, or 120000+00 as per ISO 8601. The code in <a href="#exm-isoz">Example&nbsp;11</a> converts between UTC offsets and military time zone codes. <a href="#sec-zone">Section&nbsp;3</a> provides more information on <code>Declock</code> time zones.</p>
<div id="exm-isoz" class="theorem example">
<p><span class="theorem-title"><strong>Example 11 </strong></span>&nbsp;</p>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-6-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-1" role="tab" aria-controls="tabset-6-1" aria-selected="true" href="">JavaScript</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-2" role="tab" aria-controls="tabset-6-2" aria-selected="false" href="">Julia</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-3" role="tab" aria-controls="tabset-6-3" aria-selected="false" href="">Python</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-4" role="tab" aria-controls="tabset-6-4" aria-selected="false" href="">R</a></li>
</ul>
<div class="tab-content" data-group="language">
<div id="tabset-6-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-6-1-tab">
<section id="hour2zone" class="level5"><h5 class="anchored" data-anchor-id="hour2zone">hour2zone</h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;hour2zone&quot;]" data-execution_count="12">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb104"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">hour2zone</span>(hour <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> hour <span class="op">==</span> <span class="dv">0</span> <span class="op">?</span> <span class="st">"Z"</span></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> hour <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> hour <span class="op">&lt;</span> <span class="dv">10</span> <span class="op">?</span> <span class="bu">String</span><span class="op">.</span><span class="fu">fromCharCode</span>(hour <span class="op">+</span> <span class="dv">64</span>)</span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> hour <span class="op">&gt;</span> <span class="dv">9</span> <span class="op">&amp;&amp;</span> hour <span class="op">&lt;</span> <span class="dv">13</span> <span class="op">?</span> <span class="bu">String</span><span class="op">.</span><span class="fu">fromCharCode</span>(hour <span class="op">+</span> <span class="dv">65</span>)</span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> hour <span class="op">&lt;</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> hour <span class="op">&gt;</span> <span class="op">-</span><span class="dv">13</span> <span class="op">?</span> <span class="bu">String</span><span class="op">.</span><span class="fu">fromCharCode</span>(<span class="bu">Math</span><span class="op">.</span><span class="fu">abs</span>(hour) <span class="op">+</span> <span class="dv">77</span>)</span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> <span class="st">"J"</span><span class="op">;</span></span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb104-8"><a href="#cb104-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-9"><a href="#cb104-9" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">hour2zone</span>(<span class="op">-</span><span class="kw">new</span> <span class="bu">Date</span>()<span class="op">.</span><span class="fu">getTimezoneOffset</span>() <span class="op">/</span> <span class="dv">60</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>Q</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-43" href="dec_javascript.ipynb.html">Source: dec_javascript.ipynb</a></div>
</section><section id="zone2hour" class="level5"><h5 class="anchored" data-anchor-id="zone2hour"><code>zone2hour</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;zone2hour&quot;]" data-execution_count="13">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb106"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">zone2hour</span>(zone <span class="op">=</span> <span class="st">"Z"</span>) {</span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (zone <span class="op">=</span> zone<span class="op">.</span><span class="fu">toUpperCase</span>()) <span class="op">==</span> <span class="st">"Z"</span> <span class="op">?</span> <span class="dv">0</span></span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> zone <span class="op">&gt;</span> <span class="st">"@"</span> <span class="op">&amp;&amp;</span> zone <span class="op">&lt;</span> <span class="st">"J"</span> <span class="op">?</span> zone<span class="op">.</span><span class="fu">charCodeAt</span>() <span class="op">-</span> <span class="dv">64</span></span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> zone <span class="op">&gt;</span> <span class="st">"J"</span> <span class="op">&amp;&amp;</span> zone <span class="op">&lt;</span> <span class="st">"N"</span> <span class="op">?</span> zone<span class="op">.</span><span class="fu">charCodeAt</span>() <span class="op">-</span> <span class="dv">65</span></span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> zone <span class="op">&lt;</span> <span class="st">"Z"</span> <span class="op">&amp;&amp;</span> zone <span class="op">&gt;</span> <span class="st">"M"</span> <span class="op">?</span> <span class="op">-</span>(zone<span class="op">.</span><span class="fu">charCodeAt</span>() <span class="op">-</span> <span class="dv">77</span>)</span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> zone<span class="op">;</span></span>
<span id="cb106-7"><a href="#cb106-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb106-8"><a href="#cb106-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-9"><a href="#cb106-9" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">zone2hour</span>(<span class="fu">hour2zone</span>(<span class="op">-</span><span class="kw">new</span> <span class="bu">Date</span>()<span class="op">.</span><span class="fu">getTimezoneOffset</span>() <span class="op">/</span> <span class="dv">60</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>-4</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-44" href="dec_javascript.ipynb.html">Source: dec_javascript.ipynb</a></div>
</section>
</div>
<div id="tabset-6-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-2-tab">
<section id="hour2zone-1" class="level5"><h5 class="anchored" data-anchor-id="hour2zone-1"><code>hour2zone</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;hour2zone&quot;]" data-execution_count="11">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb108"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co"># import Pkg; Pkg.add("TimeZones")</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a><span class="co"># using TimeZones</span></span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a><span class="co"># localzone()</span></span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">hour2zone</span>(hour<span class="op">=</span><span class="fl">0</span>)</span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a>    (</span>
<span id="cb108-6"><a href="#cb108-6" aria-hidden="true" tabindex="-1"></a>        hour <span class="op">==</span> <span class="fl">0</span> ? <span class="st">"Z"</span> <span class="op">:</span></span>
<span id="cb108-7"><a href="#cb108-7" aria-hidden="true" tabindex="-1"></a>        hour <span class="op">&gt;</span> <span class="fl">0</span> <span class="op">&amp;&amp;</span> hour <span class="op">&lt;</span> <span class="fl">10</span> ? <span class="fu">Char</span>(hour <span class="op">+</span> <span class="fl">64</span>) <span class="op">:</span></span>
<span id="cb108-8"><a href="#cb108-8" aria-hidden="true" tabindex="-1"></a>        hour <span class="op">&gt;</span> <span class="fl">9</span> <span class="op">&amp;&amp;</span> hour <span class="op">&lt;</span> <span class="fl">13</span> ? <span class="fu">Char</span>(hour <span class="op">+</span> <span class="fl">65</span>) <span class="op">:</span></span>
<span id="cb108-9"><a href="#cb108-9" aria-hidden="true" tabindex="-1"></a>        hour <span class="op">&lt;</span> <span class="fl">0</span> <span class="op">&amp;&amp;</span> hour <span class="op">&gt;</span> <span class="op">-</span><span class="fl">13</span> ? <span class="fu">Char</span>(<span class="fu">abs</span>(hour) <span class="op">+</span> <span class="fl">77</span>) <span class="op">:</span> <span class="st">"J"</span>;</span>
<span id="cb108-10"><a href="#cb108-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb108-11"><a href="#cb108-11" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb108-12"><a href="#cb108-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-13"><a href="#cb108-13" aria-hidden="true" tabindex="-1"></a><span class="fu">hour2zone</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>"Z"</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-45" href="dec_julia.ipynb.html">Source: dec_julia.ipynb</a></div>
</section><section id="zone2hour-1" class="level5"><h5 class="anchored" data-anchor-id="zone2hour-1"><code>zone2hour</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;zone2hour&quot;]" data-execution_count="12">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb110"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">zone2hour</span>(zone<span class="op">=</span><span class="st">"Z"</span>)</span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>    (</span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a>        (zone <span class="op">=</span> <span class="fu">uppercase</span>(<span class="fu">string</span>(zone))) <span class="op">==</span> <span class="st">"Z"</span> ? <span class="fl">0</span> <span class="op">:</span></span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a>        zone <span class="op">&gt;</span> <span class="st">"@"</span> <span class="op">&amp;&amp;</span> zone <span class="op">&lt;</span> <span class="st">"J"</span> ? <span class="fu">Int</span>(<span class="fu">codepoint</span>(<span class="fu">only</span>(zone))) <span class="op">-</span> <span class="fl">64</span> <span class="op">:</span></span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a>        zone <span class="op">&gt;</span> <span class="st">"J"</span> <span class="op">&amp;&amp;</span> zone <span class="op">&lt;</span> <span class="st">"N"</span> ? <span class="fu">Int</span>(<span class="fu">codepoint</span>(<span class="fu">only</span>(zone))) <span class="op">-</span> <span class="fl">65</span> <span class="op">:</span></span>
<span id="cb110-6"><a href="#cb110-6" aria-hidden="true" tabindex="-1"></a>        zone <span class="op">&lt;</span> <span class="st">"Z"</span> <span class="op">&amp;&amp;</span> zone <span class="op">&gt;</span> <span class="st">"M"</span> ? <span class="fu">-</span>(<span class="fu">Int</span>(<span class="fu">codepoint</span>(<span class="fu">only</span>(zone))) <span class="op">-</span> <span class="fl">77</span>) <span class="op">:</span> zone;</span>
<span id="cb110-7"><a href="#cb110-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb110-8"><a href="#cb110-8" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb110-9"><a href="#cb110-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-10"><a href="#cb110-10" aria-hidden="true" tabindex="-1"></a><span class="fu">zone2hour</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>0</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-46" href="dec_julia.ipynb.html">Source: dec_julia.ipynb</a></div>
</section>
</div>
<div id="tabset-6-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-3-tab">
<section id="hour2zone-2" class="level5"><h5 class="anchored" data-anchor-id="hour2zone-2"><code>hour2zone</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;hour2zone&quot;]" data-execution_count="11">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb112"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="co"># import time</span></span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a><span class="co"># print(int(-time.timezone / 3600))</span></span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> hour2zone(hour<span class="op">=</span><span class="dv">0</span>):</span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (</span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Z"</span> <span class="cf">if</span> hour <span class="op">==</span> <span class="dv">0</span> <span class="cf">else</span></span>
<span id="cb112-6"><a href="#cb112-6" aria-hidden="true" tabindex="-1"></a>        <span class="bu">chr</span>(hour <span class="op">+</span> <span class="dv">64</span>) <span class="cf">if</span> <span class="dv">0</span> <span class="op">&lt;</span> hour <span class="op">&lt;</span> <span class="dv">10</span> <span class="cf">else</span></span>
<span id="cb112-7"><a href="#cb112-7" aria-hidden="true" tabindex="-1"></a>        <span class="bu">chr</span>(hour <span class="op">+</span> <span class="dv">65</span>) <span class="cf">if</span> <span class="dv">9</span> <span class="op">&lt;</span> hour <span class="op">&lt;</span> <span class="dv">13</span> <span class="cf">else</span></span>
<span id="cb112-8"><a href="#cb112-8" aria-hidden="true" tabindex="-1"></a>        <span class="bu">chr</span>(<span class="bu">abs</span>(hour) <span class="op">+</span> <span class="dv">77</span>) <span class="cf">if</span> <span class="op">-</span><span class="dv">13</span> <span class="op">&lt;</span> hour <span class="op">&lt;</span> <span class="dv">0</span> <span class="cf">else</span> <span class="st">"J"</span></span>
<span id="cb112-9"><a href="#cb112-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb112-10"><a href="#cb112-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-11"><a href="#cb112-11" aria-hidden="true" tabindex="-1"></a>hour2zone()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>'Z'</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-47" href="dec_python.ipynb.html">Source: dec_python.ipynb</a></div>
</section><section id="zone2hour-2" class="level5"><h5 class="anchored" data-anchor-id="zone2hour-2"><code>zone2hour</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;zone2hour&quot;]" data-execution_count="12">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb114"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> zone2hour(zone<span class="op">=</span><span class="st">"Z"</span>):</span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (</span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a>    <span class="dv">0</span> <span class="cf">if</span> (zone <span class="op">:=</span> zone.upper()) <span class="op">==</span> <span class="st">"Z"</span> <span class="cf">else</span></span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a>        <span class="bu">ord</span>(zone) <span class="op">-</span> <span class="dv">64</span> <span class="cf">if</span> <span class="st">"@"</span> <span class="op">&lt;</span> zone <span class="op">&lt;</span> <span class="st">"J"</span> <span class="cf">else</span></span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a>        <span class="bu">ord</span>(zone) <span class="op">-</span> <span class="dv">65</span> <span class="cf">if</span> <span class="st">"J"</span> <span class="op">&lt;</span> zone <span class="op">&lt;</span> <span class="st">"N"</span> <span class="cf">else</span></span>
<span id="cb114-6"><a href="#cb114-6" aria-hidden="true" tabindex="-1"></a>        <span class="op">-</span>(<span class="bu">ord</span>(zone) <span class="op">-</span> <span class="dv">77</span>) <span class="cf">if</span> <span class="st">"M"</span> <span class="op">&lt;</span> zone <span class="op">&lt;</span> <span class="st">"Z"</span> <span class="cf">else</span> zone</span>
<span id="cb114-7"><a href="#cb114-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb114-8"><a href="#cb114-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-9"><a href="#cb114-9" aria-hidden="true" tabindex="-1"></a>zone2hour()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>0</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-48" href="dec_python.ipynb.html">Source: dec_python.ipynb</a></div>
</section>
</div>
<div id="tabset-6-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-4-tab">
<section id="hour2zone-3" class="level5"><h5 class="anchored" data-anchor-id="hour2zone-3"><code>hour2zone</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;hour2zone&quot;]" data-execution_count="11">
<details><summary>Code</summary><div class="sourceCode" id="cb116"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Sys.timezone()</span></span>
<span><span class="va">hour2zone</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">hour</span> <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">hour</span> <span class="op">==</span> <span class="fl">0</span>, <span class="st">"Z"</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">hour</span> <span class="op">&gt;</span> <span class="fl">0</span> <span class="op">&amp;&amp;</span> <span class="va">hour</span> <span class="op">&lt;</span> <span class="fl">10</span>, <span class="fu"><a href="https://rdrr.io/r/base/utf8Conversion.html">intToUtf8</a></span><span class="op">(</span><span class="va">hour</span> <span class="op">+</span> <span class="fl">64</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">hour</span> <span class="op">&gt;</span> <span class="fl">9</span> <span class="op">&amp;&amp;</span> <span class="va">hour</span> <span class="op">&lt;</span> <span class="fl">13</span>, <span class="fu"><a href="https://rdrr.io/r/base/utf8Conversion.html">intToUtf8</a></span><span class="op">(</span><span class="va">hour</span> <span class="op">+</span> <span class="fl">65</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">hour</span> <span class="op">&lt;</span> <span class="fl">0</span> <span class="op">&amp;&amp;</span> <span class="va">hour</span> <span class="op">&gt;</span> <span class="op">-</span><span class="fl">13</span>, <span class="fu"><a href="https://rdrr.io/r/base/utf8Conversion.html">intToUtf8</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span><span class="op">(</span><span class="va">hour</span><span class="op">)</span> <span class="op">+</span> <span class="fl">77</span><span class="op">)</span>, <span class="st">"J"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">hour2zone</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
'Z'
</div>
</div>
<a class="quarto-notebook-link" id="nblink-49" href="dec_r.ipynb.html">Source: dec_r.ipynb</a></div>
</section><section id="zone2hour-3" class="level5"><h5 class="anchored" data-anchor-id="zone2hour-3"><code>zone2hour</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;zone2hour&quot;]" data-execution_count="12">
<details><summary>Code</summary><div class="sourceCode" id="cb117"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">zone2hour</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">zone</span> <span class="op">=</span> <span class="st">"Z"</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="op">(</span><span class="va">zone</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/chartr.html">toupper</a></span><span class="op">(</span><span class="va">zone</span><span class="op">)</span><span class="op">)</span> <span class="op">==</span> <span class="st">"Z"</span>, <span class="fl">0</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">zone</span> <span class="op">&gt;</span> <span class="st">"@"</span> <span class="op">&amp;&amp;</span> <span class="va">zone</span> <span class="op">&lt;</span> <span class="st">"J"</span>, <span class="fu"><a href="https://rdrr.io/r/base/utf8Conversion.html">utf8ToInt</a></span><span class="op">(</span><span class="va">zone</span><span class="op">)</span> <span class="op">-</span> <span class="fl">64</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">zone</span> <span class="op">&gt;</span> <span class="st">"J"</span> <span class="op">&amp;&amp;</span> <span class="va">zone</span> <span class="op">&lt;</span> <span class="st">"N"</span>, <span class="fu"><a href="https://rdrr.io/r/base/utf8Conversion.html">utf8ToInt</a></span><span class="op">(</span><span class="va">zone</span><span class="op">)</span> <span class="op">-</span> <span class="fl">65</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">zone</span> <span class="op">&lt;</span> <span class="st">"Z"</span> <span class="op">&amp;&amp;</span> <span class="va">zone</span> <span class="op">&gt;</span> <span class="st">"M"</span>, <span class="op">-</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/utf8Conversion.html">utf8ToInt</a></span><span class="op">(</span><span class="va">zone</span><span class="op">)</span> <span class="op">-</span> <span class="fl">77</span><span class="op">)</span>, <span class="va">zone</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">zone2hour</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
0
</div>
</div>
<a class="quarto-notebook-link" id="nblink-50" href="dec_r.ipynb.html">Source: dec_r.ipynb</a></div>
</section>
</div>
</div>
</div>
</section><section id="sec-isot" class="level3 page-columns page-full" data-number="4.4.5"><h3 data-number="4.4.5" class="anchored" data-anchor-id="sec-isot">
<span class="header-section-number">4.4.5</span> Times</h3>
<p>The formula for conversion of standard time to <code>Declock</code> time is shown in <a href="#eq-declock">Equation&nbsp;4</a>. The value of <code>x</code> in <a href="#eq-declock">Equation&nbsp;4</a>. can be modified to obtain different units, which are displayed in <a href="#tbl-isot">Table&nbsp;8</a>. To convert <code>Declock</code> time into standard time, we first convert into hours using <a href="#eq-hour">Equation&nbsp;5</a> and the appropriate <code>x</code> value from <a href="#tbl-isot">Table&nbsp;8</a>. Then, we convert hours into minutes with <a href="#eq-minute">Equation&nbsp;6</a> and minutes into seconds with <a href="#eq-second">Equation&nbsp;7</a> The <code>hmso2doty</code> and <code>doty2hmso</code> functions in <a href="#exm-isot">Example&nbsp;12</a> uses these formulas to convert between standard time and <code>Declock</code> time.</p>
<p><span id="eq-declock"><span class="math display">\[declock = \frac{hour}{24} + \frac{minute}{1440} + \frac{second}{86400} \cdot 10^x \tag{4}\]</span></span></p>
<p><span id="eq-hour"><span class="math display">\[hour = declock \cdot 24 \cdot 10^x \tag{5}\]</span></span></p>
<p><span id="eq-minute"><span class="math display">\[minute = \frac{hour - \lfloor hour \rfloor}{60} \tag{6}\]</span></span></p>
<p><span id="eq-second"><span class="math display">\[second = \frac{minute - \lfloor minute \rfloor}{60} \tag{7}\]</span></span></p>
<section id="tbl-isot" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="tbl-isot"><a href="#tbl-isot">Table&nbsp;8</a></h4>
<div class="callout callout-style-default callout-note no-icon callout-titled page-columns page-full" title="Click to toggle table expansion">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-8-contents" aria-controls="callout-8" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click to toggle table expansion
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-8" class="callout-8-contents callout-collapse collapse page-columns page-full">
<div class="callout-body-container callout-body page-columns page-full">
<div id="tbl-isot" class="anchored page-columns page-full">
<table class="table">

<thead><tr class="header">
<th>x</th>
<th>units</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>-1</td>
<td>deks</td>
</tr>
<tr class="even">
<td>0</td>
<td>days</td>
</tr>
<tr class="odd">
<td>1</td>
<td>dimes</td>
</tr>
<tr class="even">
<td>2</td>
<td>cents</td>
</tr>
<tr class="odd">
<td>3</td>
<td>mils</td>
</tr>
<tr class="even">
<td>4</td>
<td>phrases</td>
</tr>
<tr class="odd">
<td>5</td>
<td>beats</td>
</tr>
<tr class="even">
<td>6</td>
<td>mics</td>
</tr>
</tbody>
</table>
<div class="quarto-table-caption margin-caption">Table&nbsp;8: The powers of ten of units based on days</div></div>
</div>
</div>
</div>
<div id="exm-isot" class="theorem example">
<p><span class="theorem-title"><strong>Example 12 </strong></span>&nbsp;</p>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-7-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-1" role="tab" aria-controls="tabset-7-1" aria-selected="true" href="">JavaScript</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-2" role="tab" aria-controls="tabset-7-2" aria-selected="false" href="">Julia</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-3" role="tab" aria-controls="tabset-7-3" aria-selected="false" href="">Python</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-4" role="tab" aria-controls="tabset-7-4" aria-selected="false" href="">R</a></li>
</ul>
<div class="tab-content" data-group="language">
<div id="tabset-7-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-7-1-tab">
<section id="hmso2doty" class="level5"><h5 class="anchored" data-anchor-id="hmso2doty"><code>hmso2doty</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;hmso2doty&quot;]" data-execution_count="14">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb118"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">hmso2doty</span>(hour <span class="op">=</span> <span class="dv">1</span><span class="op">,</span> minute <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> second <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> hour <span class="op">/</span> <span class="dv">24</span> <span class="op">+</span> minute <span class="op">/</span> <span class="dv">1440</span> <span class="op">+</span> second <span class="op">/</span> <span class="dv">86400</span></span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-5"><a href="#cb118-5" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">hmso2doty</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>0.041666666666666664</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-51" href="dec_javascript.ipynb.html">Source: dec_javascript.ipynb</a></div>
</section><section id="hmso2isot" class="level5"><h5 class="anchored" data-anchor-id="hmso2isot"><code>hmso2isot</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;hmso2isot&quot;]" data-execution_count="15">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb120"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">hmso2isot</span>(hour <span class="op">=</span> <span class="dv">1</span><span class="op">,</span> minute <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> second <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> hour <span class="op">/</span> <span class="dv">24</span> <span class="op">+</span> minute <span class="op">/</span> <span class="dv">1440</span> <span class="op">+</span> second <span class="op">/</span> <span class="dv">86400</span></span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-5"><a href="#cb120-5" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">hmso2isot</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>0.041666666666666664</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-52" href="dec_javascript.ipynb.html">Source: dec_javascript.ipynb</a></div>
</section>
</div>
<div id="tabset-7-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-2-tab">
<section id="time" class="level5"><h5 class="anchored" data-anchor-id="time"><code>time</code></h5>
</section><section id="hmso2doty-1" class="level5"><h5 class="anchored" data-anchor-id="hmso2doty-1"><code>hmso2doty</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;hmso2doty&quot;]" data-execution_count="13">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb122"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">hmso2doty</span>(hour<span class="op">=</span><span class="fl">1</span>, minute<span class="op">=</span><span class="fl">0</span>, second<span class="op">=</span><span class="fl">0</span>)</span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a>    hour <span class="op">/</span> <span class="fl">24</span> <span class="op">+</span> minute <span class="op">/</span> <span class="fl">1440</span> <span class="op">+</span> second <span class="op">/</span> <span class="fl">86400</span></span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-5"><a href="#cb122-5" aria-hidden="true" tabindex="-1"></a><span class="fu">hmso2doty</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>0.041666666666666664</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-53" href="dec_julia.ipynb.html">Source: dec_julia.ipynb</a></div>
</section><section id="doty2hmso" class="level5"><h5 class="anchored" data-anchor-id="doty2hmso"><code>doty2hmso</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;doty2hmso&quot;]" data-execution_count="14">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb124"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2hmso</span>(doty<span class="op">=</span><span class="fl">1</span><span class="op">/</span><span class="fl">24</span>)</span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a>    hour <span class="op">=</span> doty <span class="op">*</span> <span class="fl">24</span></span>
<span id="cb124-3"><a href="#cb124-3" aria-hidden="true" tabindex="-1"></a>    floorHour <span class="op">=</span> <span class="fu">floor</span>(hour)</span>
<span id="cb124-4"><a href="#cb124-4" aria-hidden="true" tabindex="-1"></a>    minute <span class="op">=</span> (hour <span class="op">-</span> floorHour) <span class="op">/</span> <span class="fl">60</span></span>
<span id="cb124-5"><a href="#cb124-5" aria-hidden="true" tabindex="-1"></a>    floorMinute <span class="op">=</span> <span class="fu">floor</span>(minute)</span>
<span id="cb124-6"><a href="#cb124-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> floorHour, floorMinute, (minute <span class="op">-</span> floorMinute) <span class="op">/</span> <span class="fl">60</span></span>
<span id="cb124-7"><a href="#cb124-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb124-8"><a href="#cb124-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-9"><a href="#cb124-9" aria-hidden="true" tabindex="-1"></a><span class="fu">doty2hmso</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>(1.0, 0.0, 0.0)</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-54" href="dec_julia.ipynb.html">Source: dec_julia.ipynb</a></div>
</section>
</div>
<div id="tabset-7-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-3-tab">
<section id="hmso2doty-2" class="level5"><h5 class="anchored" data-anchor-id="hmso2doty-2"><code>hmso2doty</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;hmso2doty&quot;]" data-execution_count="13">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb126"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> hmso2doty(hour<span class="op">=</span><span class="dv">1</span>, minute<span class="op">=</span><span class="dv">0</span>, second<span class="op">=</span><span class="dv">0</span>):</span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> hour <span class="op">/</span> <span class="dv">24</span> <span class="op">+</span> minute <span class="op">/</span> <span class="dv">1440</span> <span class="op">+</span> second <span class="op">/</span> <span class="dv">86400</span></span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-4"><a href="#cb126-4" aria-hidden="true" tabindex="-1"></a>hmso2doty()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>0.041666666666666664</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-55" href="dec_python.ipynb.html">Source: dec_python.ipynb</a></div>
</section><section id="doty2hmso-1" class="level5"><h5 class="anchored" data-anchor-id="doty2hmso-1"><code>doty2hmso</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;doty2hmso&quot;]" data-execution_count="14">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb128"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> doty2hmso(doty <span class="op">=</span> <span class="dv">1</span><span class="op">/</span><span class="dv">24</span>):</span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a>    hour <span class="op">=</span> doty <span class="op">*</span> <span class="dv">24</span></span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true" tabindex="-1"></a>    floorHour <span class="op">=</span> hour.<span class="fu">__floor__</span>()</span>
<span id="cb128-4"><a href="#cb128-4" aria-hidden="true" tabindex="-1"></a>    minute <span class="op">=</span> (hour <span class="op">-</span> floorHour) <span class="op">/</span> <span class="dv">60</span></span>
<span id="cb128-5"><a href="#cb128-5" aria-hidden="true" tabindex="-1"></a>    floorMinute <span class="op">=</span> minute.<span class="fu">__floor__</span>()</span>
<span id="cb128-6"><a href="#cb128-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> floorHour, floorMinute, (minute <span class="op">-</span> floorMinute) <span class="op">/</span> <span class="dv">60</span></span>
<span id="cb128-7"><a href="#cb128-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-8"><a href="#cb128-8" aria-hidden="true" tabindex="-1"></a>doty2hmso()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>(1, 0, 0.0)</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-56" href="dec_python.ipynb.html">Source: dec_python.ipynb</a></div>
</section>
</div>
<div id="tabset-7-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-4-tab">
<section id="hmso2doty-3" class="level5"><h5 class="anchored" data-anchor-id="hmso2doty-3"><code>hmso2doty</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;hmso2doty&quot;]" data-execution_count="13">
<details><summary>Code</summary><div class="sourceCode" id="cb130"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">hmso2doty</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">hour</span> <span class="op">=</span> <span class="fl">1</span>, <span class="va">minute</span> <span class="op">=</span> <span class="fl">0</span>, <span class="va">second</span> <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">hour</span> <span class="op">/</span> <span class="fl">24</span> <span class="op">+</span> <span class="va">minute</span> <span class="op">/</span> <span class="fl">1440</span> <span class="op">+</span> <span class="va">second</span> <span class="op">/</span> <span class="fl">86400</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">hmso2doty</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
0.0416666666666667
</div>
</div>
<a class="quarto-notebook-link" id="nblink-57" href="dec_r.ipynb.html">Source: dec_r.ipynb</a></div>
</section><section id="doty2hmso-2" class="level5"><h5 class="anchored" data-anchor-id="doty2hmso-2"><code>doty2hmso</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;doty2hmso&quot;]" data-execution_count="14">
<details><summary>Code</summary><div class="sourceCode" id="cb131"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">doty2hmso</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">doty</span> <span class="op">=</span> <span class="fl">1</span> <span class="op">/</span> <span class="fl">24</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">hour</span> <span class="op">&lt;-</span> <span class="va">doty</span> <span class="op">*</span> <span class="fl">24</span></span>
<span>    <span class="va">floorHour</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">floor</a></span><span class="op">(</span><span class="va">hour</span><span class="op">)</span></span>
<span>    <span class="va">minute</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">hour</span> <span class="op">-</span> <span class="va">floorHour</span><span class="op">)</span> <span class="op">/</span> <span class="fl">60</span></span>
<span>    <span class="va">floorMinute</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">floor</a></span><span class="op">(</span><span class="va">minute</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">floorHour</span>, <span class="va">floorMinute</span>, <span class="op">(</span><span class="va">minute</span> <span class="op">-</span> <span class="va">floorMinute</span><span class="op">)</span> <span class="op">/</span> <span class="fl">60</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">doty2hmso</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline">
<li>1</li>
<li>0</li>
<li>0</li>
</ol>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-58" href="dec_r.ipynb.html">Source: dec_r.ipynb</a></div>
</section>
</div>
</div>
</div>
</section></section><section id="sec-isos" class="level3" data-number="4.4.6"><h3 data-number="4.4.6" class="anchored" data-anchor-id="sec-isos">
<span class="header-section-number">4.4.6</span> Timestamps</h3>
<p><code>Decalendar</code> seeks to make months and weeks obsolete. Similarly, <code>Declock</code> aims to deprecate hours, minutes, and seconds in favor of <a href="https://en.wikipedia.org/wiki/Decimal_time#Fractional_days">fractional days</a> (<code>.day</code>). <code>Deco</code> timestamps, which combine <code>Decalendar</code> dates and <code>Declock</code> times, are more concise and easier to read than ISO 8601 timestamps. An <code>isoc</code> timestamp that includes seconds is 20 characters long (<code>year-mm-ddThh:mm:ssZ</code>), while a <code>deco</code> timestamp with slightly greater precision is only 15 characters long (<code>year+day.clockZ</code>). ISO 8601 timestamps can omit delimiters except for the <code>T</code> which separates the date and the time (<code>yearmmddThhmmssZ</code>). Without delimiters, <code>isoc</code> timestamps become even more difficult to read and still cannot match the brevity of <code>Decalendar</code> timestamps.</p>
<p>Coincidentally, an ISO 8601 ordinal (<code>isoo</code>) timestamp (<code>year-dayThh:mm:ssZ</code>) without delimiters (<code>yeardayThhmmssZ</code>) is the same length as a <code>deco</code> timestamp (<code>year+day.clockZ</code>). <code>Deco</code> timestamps cannot exist without delimiters, because removing the plus sign (<code>+</code>) from a <code>deco</code> timestamp turns it into a <code>doty</code> number (<code>ddddddd.clock</code>). If we removed the <code>+</code> from the <code>deco</code> timestamp <code>1969+306.00000</code>, we would obtain the <code>doty</code> number <code>1969306.00000</code> would represent midnight 1969306 days from the beginning of the current year. The rules for <code>deco</code> timestamp interpretation are summarized by the code in the <code>deco2doty</code> function in <a href="#exm-unixp">Example&nbsp;19</a>.</p>
<p>To create a <code>deco</code> timestamp, we can use the <code>doty2deco</code> or the <code>greg2deco</code> functions as shown in <a href="#exm-isos">Example&nbsp;13</a>. Similarly, <a href="#exm-isos">Example&nbsp;13</a> also shows how to create an <code>isoc</code> timestamp with the <code>doty2isoc</code> and <code>doty2isoc</code> functions. All of these timestamp creation functions assume that the provided times are in the UTC+00:00 time zone or <code>Zone</code> <code>0</code> and need to be adjusted to the provided time zone by adding the appropriate time zone offset to the timestamp. <a href="#sec-unixb">Section&nbsp;4.6.4</a> and <a href="#sec-unixp">Section&nbsp;4.6.5</a> further discuss timestamps and provide functions for building, parsing, and converting timestamps.</p>
<div id="exm-isos" class="theorem example">
<p><span class="theorem-title"><strong>Example 13 </strong></span>&nbsp;</p>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-8-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-1" role="tab" aria-controls="tabset-8-1" aria-selected="true" href="">JavaScript</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-2" role="tab" aria-controls="tabset-8-2" aria-selected="false" href="">Julia</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-3" role="tab" aria-controls="tabset-8-3" aria-selected="false" href="">Python</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-4" role="tab" aria-controls="tabset-8-4" aria-selected="false" href="">R</a></li>
</ul>
<div class="tab-content" data-group="language">
<div id="tabset-8-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-8-1-tab">
<section id="doty2deco" class="level5"><h5 class="anchored" data-anchor-id="doty2deco"><code>doty2deco</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;doty2deco&quot;]" data-execution_count="16">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb132"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2deco</span>(year <span class="op">=</span> <span class="dv">1969</span><span class="op">,</span> doty <span class="op">=</span> <span class="dv">306</span><span class="op">,</span> zone <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`</span><span class="sc">${</span>year<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">4</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}</span><span class="vs">+</span><span class="sc">${</span></span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a>        doty<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">3</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}</span><span class="vs">`</span><span class="op">;</span></span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<a class="quarto-notebook-link" id="nblink-59" href="dec_javascript.ipynb.html">Source: dec_javascript.ipynb</a></div>
</section><section id="hmso2doty-4" class="level5"><h5 class="anchored" data-anchor-id="hmso2doty-4"><code>hmso2doty</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;hmso2doty&quot;]" data-execution_count="14">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb133"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">hmso2doty</span>(hour <span class="op">=</span> <span class="dv">1</span><span class="op">,</span> minute <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> second <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> hour <span class="op">/</span> <span class="dv">24</span> <span class="op">+</span> minute <span class="op">/</span> <span class="dv">1440</span> <span class="op">+</span> second <span class="op">/</span> <span class="dv">86400</span></span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-5"><a href="#cb133-5" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">hmso2doty</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>0.041666666666666664</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-60" href="dec_javascript.ipynb.html">Source: dec_javascript.ipynb</a></div>
</section><section id="hmso2deco" class="level5"><h5 class="anchored" data-anchor-id="hmso2deco"><code>hmso2deco</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;hmso2deco&quot;]" data-execution_count="18">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb135"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">hmso2deco</span>(hour <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> minute <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> second <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (<span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(<span class="fu">hmso2doty</span>(hour<span class="op">,</span> minute<span class="op">,</span> second)</span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a>        <span class="op">*</span> <span class="fl">1e5</span>) <span class="op">/</span> <span class="fl">1e5</span>)<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">5</span><span class="op">,</span> <span class="st">'0'</span>)</span>
<span id="cb135-4"><a href="#cb135-4" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<a class="quarto-notebook-link" id="nblink-61" href="dec_javascript.ipynb.html">Source: dec_javascript.ipynb</a></div>
</section><section id="doty2hmso-3" class="level5"><h5 class="anchored" data-anchor-id="doty2hmso-3"><code>doty2hmso</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;doty2hmso&quot;]" data-execution_count="19">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb136"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2hmso</span>(doty <span class="op">=</span> <span class="dv">1</span> <span class="op">/</span> <span class="dv">24</span>) {</span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a>    doty <span class="op">=</span> doty <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(doty)</span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> hour <span class="op">=</span> doty <span class="op">*</span> <span class="dv">24</span><span class="op">,</span></span>
<span id="cb136-4"><a href="#cb136-4" aria-hidden="true" tabindex="-1"></a>        floorHour <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(hour)<span class="op">,</span></span>
<span id="cb136-5"><a href="#cb136-5" aria-hidden="true" tabindex="-1"></a>        minute <span class="op">=</span> (hour <span class="op">-</span> floorHour) <span class="op">/</span> <span class="dv">60</span><span class="op">,</span></span>
<span id="cb136-6"><a href="#cb136-6" aria-hidden="true" tabindex="-1"></a>        floorMinute <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(minute)<span class="op">;</span></span>
<span id="cb136-7"><a href="#cb136-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> [floorHour<span class="op">,</span> floorMinute<span class="op">,</span> (minute <span class="op">-</span> floorMinute) <span class="op">/</span> <span class="dv">60</span>]</span>
<span id="cb136-8"><a href="#cb136-8" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<a class="quarto-notebook-link" id="nblink-62" href="dec_javascript.ipynb.html">Source: dec_javascript.ipynb</a></div>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;doty2isoc&quot;]" data-execution_count="10">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb137"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2isoc</span>(year <span class="op">=</span> <span class="dv">1969</span><span class="op">,</span> doty <span class="op">=</span> <span class="dv">306</span>) {</span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`</span><span class="sc">${</span><span class="fu">doty2year</span>()<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">4</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}</span><span class="vs">-</span><span class="sc">${</span></span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">doty2greg</span>()<span class="op">.</span><span class="fu">map</span>(</span>
<span id="cb137-4"><a href="#cb137-4" aria-hidden="true" tabindex="-1"></a>            i <span class="kw">=&gt;</span> i<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">2</span><span class="op">,</span> <span class="st">"0"</span>)</span>
<span id="cb137-5"><a href="#cb137-5" aria-hidden="true" tabindex="-1"></a>        )<span class="op">.</span><span class="fu">join</span>(<span class="st">"-"</span>)<span class="sc">}</span><span class="vs">`</span><span class="op">;</span></span>
<span id="cb137-6"><a href="#cb137-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<a class="quarto-notebook-link" id="nblink-63" href="dec_javascript.ipynb.html">Source: dec_javascript.ipynb</a></div>
</section>
</div>
<div id="tabset-8-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-2-tab">
<section id="time-1" class="level5"><h5 class="anchored" data-anchor-id="time-1"><code>time</code></h5>
</section><section id="hmso2doty-5" class="level5"><h5 class="anchored" data-anchor-id="hmso2doty-5"><code>hmso2doty</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;hmso2doty&quot;]" data-execution_count="13">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb138"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">hmso2doty</span>(hour<span class="op">=</span><span class="fl">1</span>, minute<span class="op">=</span><span class="fl">0</span>, second<span class="op">=</span><span class="fl">0</span>)</span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a>    hour <span class="op">/</span> <span class="fl">24</span> <span class="op">+</span> minute <span class="op">/</span> <span class="fl">1440</span> <span class="op">+</span> second <span class="op">/</span> <span class="fl">86400</span></span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb138-4"><a href="#cb138-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-5"><a href="#cb138-5" aria-hidden="true" tabindex="-1"></a><span class="fu">hmso2doty</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>0.041666666666666664</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-64" href="dec_julia.ipynb.html">Source: dec_julia.ipynb</a></div>
</section><section id="doty2hmso-4" class="level5"><h5 class="anchored" data-anchor-id="doty2hmso-4"><code>doty2hmso</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;doty2hmso&quot;]" data-execution_count="14">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb140"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2hmso</span>(doty<span class="op">=</span><span class="fl">1</span><span class="op">/</span><span class="fl">24</span>)</span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a>    hour <span class="op">=</span> doty <span class="op">*</span> <span class="fl">24</span></span>
<span id="cb140-3"><a href="#cb140-3" aria-hidden="true" tabindex="-1"></a>    floorHour <span class="op">=</span> <span class="fu">floor</span>(hour)</span>
<span id="cb140-4"><a href="#cb140-4" aria-hidden="true" tabindex="-1"></a>    minute <span class="op">=</span> (hour <span class="op">-</span> floorHour) <span class="op">/</span> <span class="fl">60</span></span>
<span id="cb140-5"><a href="#cb140-5" aria-hidden="true" tabindex="-1"></a>    floorMinute <span class="op">=</span> <span class="fu">floor</span>(minute)</span>
<span id="cb140-6"><a href="#cb140-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> floorHour, floorMinute, (minute <span class="op">-</span> floorMinute) <span class="op">/</span> <span class="fl">60</span></span>
<span id="cb140-7"><a href="#cb140-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb140-8"><a href="#cb140-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-9"><a href="#cb140-9" aria-hidden="true" tabindex="-1"></a><span class="fu">doty2hmso</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>(1.0, 0.0, 0.0)</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-65" href="dec_julia.ipynb.html">Source: dec_julia.ipynb</a></div>
</section>
</div>
<div id="tabset-8-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-3-tab">
<section id="hmso2doty-6" class="level5"><h5 class="anchored" data-anchor-id="hmso2doty-6"><code>hmso2doty</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;hmso2doty&quot;]" data-execution_count="13">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb142"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> hmso2doty(hour<span class="op">=</span><span class="dv">1</span>, minute<span class="op">=</span><span class="dv">0</span>, second<span class="op">=</span><span class="dv">0</span>):</span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> hour <span class="op">/</span> <span class="dv">24</span> <span class="op">+</span> minute <span class="op">/</span> <span class="dv">1440</span> <span class="op">+</span> second <span class="op">/</span> <span class="dv">86400</span></span>
<span id="cb142-3"><a href="#cb142-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-4"><a href="#cb142-4" aria-hidden="true" tabindex="-1"></a>hmso2doty()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>0.041666666666666664</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-66" href="dec_python.ipynb.html">Source: dec_python.ipynb</a></div>
</section><section id="doty2hmso-5" class="level5"><h5 class="anchored" data-anchor-id="doty2hmso-5"><code>doty2hmso</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;doty2hmso&quot;]" data-execution_count="14">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb144"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> doty2hmso(doty <span class="op">=</span> <span class="dv">1</span><span class="op">/</span><span class="dv">24</span>):</span>
<span id="cb144-2"><a href="#cb144-2" aria-hidden="true" tabindex="-1"></a>    hour <span class="op">=</span> doty <span class="op">*</span> <span class="dv">24</span></span>
<span id="cb144-3"><a href="#cb144-3" aria-hidden="true" tabindex="-1"></a>    floorHour <span class="op">=</span> hour.<span class="fu">__floor__</span>()</span>
<span id="cb144-4"><a href="#cb144-4" aria-hidden="true" tabindex="-1"></a>    minute <span class="op">=</span> (hour <span class="op">-</span> floorHour) <span class="op">/</span> <span class="dv">60</span></span>
<span id="cb144-5"><a href="#cb144-5" aria-hidden="true" tabindex="-1"></a>    floorMinute <span class="op">=</span> minute.<span class="fu">__floor__</span>()</span>
<span id="cb144-6"><a href="#cb144-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> floorHour, floorMinute, (minute <span class="op">-</span> floorMinute) <span class="op">/</span> <span class="dv">60</span></span>
<span id="cb144-7"><a href="#cb144-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-8"><a href="#cb144-8" aria-hidden="true" tabindex="-1"></a>doty2hmso()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>(1, 0, 0.0)</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-67" href="dec_python.ipynb.html">Source: dec_python.ipynb</a></div>
</section>
</div>
<div id="tabset-8-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-4-tab">
<section id="hmso2doty-7" class="level5"><h5 class="anchored" data-anchor-id="hmso2doty-7"><code>hmso2doty</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;hmso2doty&quot;]" data-execution_count="13">
<details><summary>Code</summary><div class="sourceCode" id="cb146"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">hmso2doty</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">hour</span> <span class="op">=</span> <span class="fl">1</span>, <span class="va">minute</span> <span class="op">=</span> <span class="fl">0</span>, <span class="va">second</span> <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">hour</span> <span class="op">/</span> <span class="fl">24</span> <span class="op">+</span> <span class="va">minute</span> <span class="op">/</span> <span class="fl">1440</span> <span class="op">+</span> <span class="va">second</span> <span class="op">/</span> <span class="fl">86400</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">hmso2doty</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
0.0416666666666667
</div>
</div>
<a class="quarto-notebook-link" id="nblink-68" href="dec_r.ipynb.html">Source: dec_r.ipynb</a></div>
</section><section id="doty2hmso-6" class="level5"><h5 class="anchored" data-anchor-id="doty2hmso-6"><code>doty2hmso</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;doty2hmso&quot;]" data-execution_count="14">
<details><summary>Code</summary><div class="sourceCode" id="cb147"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">doty2hmso</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">doty</span> <span class="op">=</span> <span class="fl">1</span> <span class="op">/</span> <span class="fl">24</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">hour</span> <span class="op">&lt;-</span> <span class="va">doty</span> <span class="op">*</span> <span class="fl">24</span></span>
<span>    <span class="va">floorHour</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">floor</a></span><span class="op">(</span><span class="va">hour</span><span class="op">)</span></span>
<span>    <span class="va">minute</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">hour</span> <span class="op">-</span> <span class="va">floorHour</span><span class="op">)</span> <span class="op">/</span> <span class="fl">60</span></span>
<span>    <span class="va">floorMinute</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">floor</a></span><span class="op">(</span><span class="va">minute</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">floorHour</span>, <span class="va">floorMinute</span>, <span class="op">(</span><span class="va">minute</span> <span class="op">-</span> <span class="va">floorMinute</span><span class="op">)</span> <span class="op">/</span> <span class="fl">60</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">doty2hmso</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline">
<li>1</li>
<li>0</li>
<li>0</li>
</ol>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-69" href="dec_r.ipynb.html">Source: dec_r.ipynb</a></div>
</section>
</div>
</div>
</div>
</section><section id="sec-isoi" class="level3" data-number="4.4.7"><h3 data-number="4.4.7" class="anchored" data-anchor-id="sec-isoi">
<span class="header-section-number">4.4.7</span> Time intervals</h3>
<p>ISO 8601 specifies three methods of unequivocally representing <a href="https://en.wikipedia.org/wiki/ISO_8601#Time_intervals">time intervals</a>, <code>start/stop</code>, <code>start/span</code>, and <code>span/stop</code>. The <code>Decalendar</code> equivalents of these three time interval representations are <code>start:stop</code>, <code>start&gt;span</code>, and <code>stop&lt;span</code>. Notably, the <code>start/stop</code> syntax is used in Google Calendar ‚ÄúAdd to Calendar‚Äù links (<code>https://calendar.google.com/calendar/render?action=TEMPLATE&amp;dates=start/stop</code>). Clicking on an ‚ÄúAdd to Calendar‚Äù link opens an web browser interface for adding an event to an online calendar. The <code>greg2link</code> and <code>doty2link</code> functions in <a href="#exm-isoi">Example&nbsp;14</a> create such links for Google, Outlook, Office 365, and Yahoo online calendars.</p>
<div id="exm-isoi" class="theorem example">
<p><span class="theorem-title"><strong>Example 14 </strong></span>&nbsp;</p>
</div>
</section><section id="sec-isor" class="level3" data-number="4.4.8"><h3 data-number="4.4.8" class="anchored" data-anchor-id="sec-isor">
<span class="header-section-number">4.4.8</span> Repeating time intervals</h3>
<p>ISO 8601 time intervals can be made to repeat with the <code>Rn/</code> prefix (<code>Rn/start/stop</code>, <code>Rn/start/span</code>, <code>Rn/span/stop</code>), where <code>n</code> is the number of repetitions. Such <a href="https://en.wikipedia.org/wiki/ISO_8601#Repeating_intervals">repeating time intervals</a> are always consecutive and never overlap. The first three 6-hour intervals of 1970 could be written <code>R3/1970-01-01T00:00:00Z/T06</code> as per ISO 8601. This time interval in <code>Decalendar</code> could be written <code>1969+306&gt;.75&gt;.25&gt;0</code>. Unlike ISO 8601, <code>Decalendar</code> allows for the creation of non-consecutive and overlapping recurring intervals. If we wanted to include 3-hour breaks in between the three 6-hour intervals, we could write <code>1969+306&gt;1&gt;.25&gt;.125</code>. Similarly, the three 6-hour intervals could be made to overlap by 3 hours by writing <code>1969+306&gt;.5&gt;.25&lt;.125</code>.</p>
<p>The <code>Decalendar</code> time interval representations above are called <code>spreads</code> and were inspired by the concept of <a href="https://en.wikipedia.org/wiki/Array_slicing">array slicing</a> from computer programming. <code>Decalendar</code> allows for the use of both <code>slices</code> (<code>start:stop:step</code>) and <code>spreads</code> (<code>start&gt;span&gt;split&gt;space</code>) to create time intervals. <a href="https://pandas.pydata.org/pandas-docs/version/1.1/user_guide/timeseries.html#indexing">Slicing of dates and times</a> is fully implemented in the <a href="https://pandas.pydata.org/">Pandas Python library</a>. The pandas code shown in <a href="#exm-isor">Example&nbsp;15</a> uses slicing to obtain the start times of the last three 6-hour intervals in Gregorian calendar year 1970, which is <code>1970+305&gt;.75&gt;.25&gt;0</code> in <code>Decalendar</code> and <code>R3/1970-12-31T06:00:00Z/T06</code> as per ISO 8601.</p>
<div id="exm-isor" class="theorem example">
<p><span class="theorem-title"><strong>Example 15 </strong></span>&nbsp;</p>
</div>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;intervals&quot;]" data-execution_count="17">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb148"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-3"><a href="#cb148-3" aria-hidden="true" tabindex="-1"></a>pd.date_range(<span class="st">"1970"</span>, <span class="st">"1971"</span>, freq<span class="op">=</span><span class="st">"6H"</span>)[<span class="op">-</span><span class="dv">4</span>:<span class="op">-</span><span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>DatetimeIndex(['1970-12-31 06:00:00', '1970-12-31 12:00:00',
               '1970-12-31 18:00:00'],
              dtype='datetime64[ns]', freq='6H')</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-70" href="dec_python.ipynb.html">Source: dec_python.ipynb</a></div>
</section></section><section id="sec-jd" class="level2" data-number="4.5"><h2 data-number="4.5" class="anchored" data-anchor-id="sec-jd">
<span class="header-section-number">4.5</span> Julian dates</h2>
<p>A <a href="https://en.wikipedia.org/wiki/Julian_day#:~:text=The%20Julian%20date%20(JD)%20of%20any%20instant%20is%20the%20Julian%20day%20number%20plus%20the%20fraction%20of%20a%20day%20since%20the%20preceding%20noon%20in%20Universal%20Time.">Julian date</a> is the number of <a href="https://en.wikipedia.org/wiki/Decimal_time#Fractional_days">fractional days</a> since <code>-4713+268.5</code>, which is noon on November 24, 4714 BC in the Gregorian calendar and January 1, 4713 BC in the Julian calendar. The analogous date format in <code>Decalendar</code> is the day-of-the-<a href="https://en.wikipedia.org/wiki/Calendar_era">era</a> (<code>dote</code>). Both Julian dates and days-of-the-era (<code>dotes</code>) count days from a starting point called an <a href="https://en.wikipedia.org/wiki/Epoch">epoch</a>. The <code>Decalendar</code> epoch is <code>0000+000.0</code>, which is midnight on March 1, 1 BC in the Gregorian calendar. To convert a Julian date into a <code>dote</code>, we simply subtract 1721120.5 days (<span class="math inline">\(dote = julian - 1721120.5\)</span>).</p>
<p>Like Julian dates, <code>dotes</code> are very useful for date and time calculations. <a href="#eq-dote">Equation&nbsp;8</a> shows how a year and a <code>doty</code> can be turned into a <code>dote</code>. The conversion of a <code>dote</code> into a year and <code>doty</code> requires calculations adapted from the <a href="http://howardhinnant.github.io/date_algorithms.html#civil_from_days">‚Äúcivil_from_days‚Äù algorithm</a> from <span class="citation" data-cites="hinnant2014">(<a href="#ref-hinnant2014" role="doc-biblioref">Hinnant 2014</a>)</span>. Briefly, the <code>dote</code> is used to obtain the <a href="https://en.wikipedia.org/wiki/Solar_cycle_(calendar)#:~:text=400%2Dyear%20cycle%20of%20the%20Gregorian%20calendar%20with%20respect%20to%20the%20week.">solar cycle</a> in <a href="#eq-cycl">Equation&nbsp;9</a>, which is then plugged into <a href="#eq-dotc">Equation&nbsp;10</a> and <a href="#eq-yotc">Equation&nbsp;11</a> to calculate the <code>day-of-the-cycle</code> in (<code>dotc</code>) and the <code>year-of-the-cycle</code> (<code>yotc</code>) in <a href="#eq-yotc">Equation&nbsp;11</a>. <a href="#eq-year">Equation&nbsp;12</a> takes the <code>yotc</code> and the solar cycle and yields the year, while <a href="#eq-doty">Equation&nbsp;13</a> generates the <code>doty</code> from the <code>yotc</code> and the <code>dotc</code>.</p>
<p><span id="eq-dote"><span class="math display">\[dote = doty + (365 \cdot year + \lfloor \frac{year}{4} \rfloor - \lfloor \frac{year}{100} \rfloor + \lfloor \frac{year}{400} \rfloor) \tag{8}\]</span></span></p>
<p><span id="eq-cycl"><span class="math display">\[cycle = \lfloor \frac{\begin{cases}dote&amp;{\text{if } dote \geq 0;}\\dote-146096&amp;{\text{otherwise.}}\end{cases}}{146097} \rfloor \tag{9}\]</span></span></p>
<p><span id="eq-dotc"><span class="math display">\[dotc = days - cycle \cdot 146097 \tag{10}\]</span></span></p>
<p><span id="eq-yotc"><span class="math display">\[yotc = \lfloor \frac{dotc - \lfloor \frac{dotc}{1460} \rfloor + \lfloor \frac{dotc}{36524} \rfloor - \lfloor \frac{dotc}{146096} \rfloor}{365} \rfloor \tag{11}\]</span></span></p>
<p><span id="eq-year"><span class="math display">\[year = yotc + cycle * 400 \tag{12}\]</span></span></p>
<p><span id="eq-doty"><span class="math display">\[doty = \lfloor dotc - (365 \cdot yotc + \lfloor \frac{yotc}{4} \rfloor - \lfloor \frac{yotc}{100} \rfloor + \lfloor \frac{yotc}{400} \rfloor) \rfloor \tag{13}\]</span></span></p>
<p>The conversion between <code>doty</code> and <code>dote</code> is the most important calculation in <code>Decalendar</code> because it defines the behavior of positive and negative <code>deco</code> dates and stamps. The arithmetic</p>
<div id="exm-jd" class="theorem example">
<p><span class="theorem-title"><strong>Example 16 </strong></span>&nbsp;</p>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-9-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-1" role="tab" aria-controls="tabset-9-1" aria-selected="true" href="">JavaScript</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-2" role="tab" aria-controls="tabset-9-2" aria-selected="false" href="">Julia</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-3" role="tab" aria-controls="tabset-9-3" aria-selected="false" href="">Python</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-4" role="tab" aria-controls="tabset-9-4" aria-selected="false" href="">R</a></li>
</ul>
<div class="tab-content" data-group="language">
<div id="tabset-9-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-9-1-tab">
<section id="doty2dote" class="level5"><h5 class="anchored" data-anchor-id="doty2dote"><code>doty2dote</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;doty2dote&quot;]" data-execution_count="21">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb150"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2dote</span>(year <span class="op">=</span> <span class="dv">1969</span><span class="op">,</span> doty <span class="op">=</span> <span class="dv">306</span>) {</span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> doty <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(year <span class="op">*</span> <span class="dv">365</span> <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(year <span class="op">/</span> <span class="dv">4</span>) <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(year <span class="op">/</span> <span class="dv">100</span>) <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(year <span class="op">/</span> <span class="dv">400</span>))<span class="op">;</span></span>
<span id="cb150-3"><a href="#cb150-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb150-4"><a href="#cb150-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-5"><a href="#cb150-5" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">doty2dote</span>())<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>719468</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-71" href="dec_javascript.ipynb.html">Source: dec_javascript.ipynb</a></div>
</section>
</div>
<div id="tabset-9-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-9-2-tab">
<section id="unix" class="level5"><h5 class="anchored" data-anchor-id="unix"><code>unix</code></h5>
</section><section id="doty2dote-1" class="level5"><h5 class="anchored" data-anchor-id="doty2dote-1"><code>doty2dote</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;doty2dote&quot;]" data-execution_count="17">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb152"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2dote</span>(s<span class="op">=</span><span class="fl">0</span>, ms<span class="op">=</span><span class="fl">0</span>)</span>
<span id="cb152-2"><a href="#cb152-2" aria-hidden="true" tabindex="-1"></a>    days <span class="op">=</span> s <span class="op">/</span> <span class="fl">86400</span> <span class="op">+</span> ms <span class="op">/</span> <span class="fl">86400000</span> <span class="op">+</span> <span class="fl">719468</span></span>
<span id="cb152-3"><a href="#cb152-3" aria-hidden="true" tabindex="-1"></a>    dote <span class="op">=</span> days <span class="op">-</span> (era <span class="op">=</span> <span class="fu">floor</span>((days <span class="op">&gt;=</span> <span class="fl">0</span> ? days <span class="op">:</span> days <span class="op">-</span> <span class="fl">146096</span>) <span class="op">/</span> <span class="fl">146097</span>)) <span class="op">*</span> <span class="fl">146097</span></span>
<span id="cb152-4"><a href="#cb152-4" aria-hidden="true" tabindex="-1"></a>    year <span class="op">=</span> <span class="fu">Int</span>(<span class="fu">floor</span>((dote <span class="op">-</span> dote <span class="op">/</span> <span class="fl">1460</span> <span class="op">+</span> dote <span class="op">/</span> <span class="fl">36524</span> <span class="op">-</span> dote <span class="op">/</span> <span class="fl">146096</span>) <span class="op">/</span> <span class="fl">365</span>) <span class="op">+</span> era <span class="op">*</span> <span class="fl">400</span>)</span>
<span id="cb152-5"><a href="#cb152-5" aria-hidden="true" tabindex="-1"></a>    year, days <span class="op">-</span> <span class="fu">floor</span>(year <span class="op">*</span> <span class="fl">365</span> <span class="op">+</span> year <span class="op">/</span> <span class="fl">4</span> <span class="op">-</span> year <span class="op">/</span> <span class="fl">100</span> <span class="op">+</span> year <span class="op">/</span> <span class="fl">400</span>)</span>
<span id="cb152-6"><a href="#cb152-6" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb152-7"><a href="#cb152-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-8"><a href="#cb152-8" aria-hidden="true" tabindex="-1"></a>y, d <span class="op">=</span> <span class="fu">doty2dote</span>(<span class="fu">time</span>())</span>
<span id="cb152-9"><a href="#cb152-9" aria-hidden="true" tabindex="-1"></a>day <span class="op">=</span> <span class="fu">Int</span>(<span class="fu">floor</span>(d))</span>
<span id="cb152-10"><a href="#cb152-10" aria-hidden="true" tabindex="-1"></a><span class="st">"</span><span class="sc">$</span>(<span class="fu">lpad</span>(y, <span class="fl">4</span>, <span class="ch">'0'</span>))<span class="st">+</span><span class="sc">$</span>(<span class="fu">lpad</span>(day, <span class="fl">3</span>, <span class="ch">'0'</span>))<span class="st">.</span><span class="sc">$</span>(<span class="fu">lpad</span>(<span class="fu">Int</span>(<span class="fu">round</span>((d <span class="op">-</span> day) <span class="op">*</span> <span class="fl">1e5</span>)), <span class="fl">5</span>, <span class="ch">'0'</span>))<span class="st">+0"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>"2023+248.77227+0"</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-72" href="dec_julia.ipynb.html">Source: dec_julia.ipynb</a></div>
</section>
</div>
<div id="tabset-9-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-9-3-tab">
<section id="doty2dote-2" class="level5"><h5 class="anchored" data-anchor-id="doty2dote-2"><code>doty2dote</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;doty2dote&quot;]" data-execution_count="18">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb154"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> time <span class="im">import</span> time</span>
<span id="cb154-2"><a href="#cb154-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-3"><a href="#cb154-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> doty2dote(s<span class="op">=</span><span class="dv">0</span>, ms<span class="op">=</span><span class="dv">0</span>):</span>
<span id="cb154-4"><a href="#cb154-4" aria-hidden="true" tabindex="-1"></a>    days <span class="op">=</span> s <span class="op">/</span> <span class="dv">86400</span> <span class="op">+</span> ms <span class="op">/</span> <span class="dv">86400000</span> <span class="op">+</span> <span class="dv">719468</span></span>
<span id="cb154-5"><a href="#cb154-5" aria-hidden="true" tabindex="-1"></a>    dote <span class="op">=</span> days <span class="op">-</span> (era <span class="op">:=</span> (days <span class="cf">if</span> days <span class="op">&gt;=</span> <span class="dv">0</span> <span class="cf">else</span> days <span class="op">-</span> <span class="dv">146096</span>) <span class="op">//</span> <span class="dv">146097</span>) <span class="op">*</span> <span class="dv">146097</span></span>
<span id="cb154-6"><a href="#cb154-6" aria-hidden="true" tabindex="-1"></a>    year <span class="op">=</span> <span class="bu">int</span>((dote <span class="op">-</span> dote <span class="op">/</span> <span class="dv">1460</span> <span class="op">+</span> dote <span class="op">/</span> <span class="dv">36524</span> <span class="op">-</span> dote <span class="op">/</span> <span class="dv">146096</span>) <span class="op">//</span> <span class="dv">365</span> <span class="op">+</span> era <span class="op">*</span> <span class="dv">400</span>)</span>
<span id="cb154-7"><a href="#cb154-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> year, days <span class="op">-</span> (year <span class="op">*</span> <span class="dv">365</span> <span class="op">+</span> year <span class="op">/</span> <span class="dv">4</span> <span class="op">-</span> year <span class="op">/</span> <span class="dv">100</span> <span class="op">+</span> year <span class="op">/</span> <span class="dv">400</span>).<span class="fu">__floor__</span>()</span>
<span id="cb154-8"><a href="#cb154-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-9"><a href="#cb154-9" aria-hidden="true" tabindex="-1"></a>y, d <span class="op">=</span> doty2dote(time())</span>
<span id="cb154-10"><a href="#cb154-10" aria-hidden="true" tabindex="-1"></a><span class="ss">f"</span><span class="sc">{</span>y<span class="sc">:&gt;04}</span><span class="ss">+</span><span class="sc">{</span>(day <span class="op">:=</span> d.<span class="fu">__floor__</span>())<span class="sc">:&gt;03}</span><span class="ss">.</span><span class="sc">{</span><span class="bu">round</span>((d <span class="op">-</span> day) <span class="op">*</span> <span class="fl">1e5</span>)<span class="sc">:&gt;05}</span><span class="ss">+0"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>'2023+248.77239+0'</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-73" href="dec_python.ipynb.html">Source: dec_python.ipynb</a></div>
</section>
</div>
<div id="tabset-9-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-9-4-tab">
<section id="doty2dote-3" class="level5"><h5 class="anchored" data-anchor-id="doty2dote-3"><code>doty2dote</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;doty2dote&quot;]" data-execution_count="17">
<details><summary>Code</summary><div class="sourceCode" id="cb156"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">doty2dote</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">s</span> <span class="op">=</span> <span class="fl">0</span>, <span class="va">ms</span> <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">days</span> <span class="op">=</span> <span class="va">s</span> <span class="op">/</span> <span class="fl">86400</span> <span class="op">+</span> <span class="va">ms</span> <span class="op">/</span> <span class="fl">86400000</span> <span class="op">+</span> <span class="fl">719468</span></span>
<span>    <span class="va">dote</span> <span class="op">=</span> <span class="va">days</span> <span class="op">-</span> <span class="op">(</span><span class="va">era</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">floor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">days</span> <span class="op">&gt;=</span> <span class="fl">0</span>, <span class="va">days</span>, <span class="va">days</span> <span class="op">-</span> <span class="fl">146096</span><span class="op">)</span> <span class="op">/</span> <span class="fl">146097</span><span class="op">)</span><span class="op">)</span> <span class="op">*</span> <span class="fl">146097</span></span>
<span>    <span class="va">year</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">floor</a></span><span class="op">(</span><span class="op">(</span><span class="va">dote</span> <span class="op">-</span> <span class="va">dote</span> <span class="op">/</span> <span class="fl">1460</span> <span class="op">+</span> <span class="va">dote</span> <span class="op">/</span> <span class="fl">36524</span> <span class="op">-</span> <span class="va">dote</span> <span class="op">/</span> <span class="fl">146096</span><span class="op">)</span> <span class="op">/</span> <span class="fl">365</span><span class="op">)</span> <span class="op">+</span> <span class="va">era</span> <span class="op">*</span> <span class="fl">400</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">days</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">floor</a></span><span class="op">(</span><span class="va">year</span> <span class="op">*</span> <span class="fl">365</span> <span class="op">+</span> <span class="va">year</span> <span class="op">/</span> <span class="fl">4</span> <span class="op">-</span> <span class="va">year</span> <span class="op">/</span> <span class="fl">100</span> <span class="op">+</span> <span class="va">year</span> <span class="op">/</span> <span class="fl">400</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">yd</span> <span class="op">&lt;-</span> <span class="fu">doty2dote</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">"%04d"</span>, <span class="va">yd</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>, <span class="st">"+"</span>,</span>
<span>       <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">"%03d"</span>, <span class="op">(</span><span class="va">day</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">floor</a></span><span class="op">(</span><span class="va">yd</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, <span class="st">"."</span>,</span>
<span>       <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">"%05d"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="op">(</span><span class="va">yd</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">-</span> <span class="va">day</span><span class="op">)</span> <span class="op">*</span> <span class="fl">1e5</span><span class="op">)</span><span class="op">)</span>, <span class="st">"+0"</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
'2023+248.77250+0'
</div>
</div>
<a class="quarto-notebook-link" id="nblink-74" href="dec_r.ipynb.html">Source: dec_r.ipynb</a></div>
</section>
</div>
</div>
</div>
</section><section id="sec-unix" class="level2" data-number="4.6"><h2 data-number="4.6" class="anchored" data-anchor-id="sec-unix">
<span class="header-section-number">4.6</span> UNIX time</h2>
<section id="sec-unixj" class="level3" data-number="4.6.1"><h3 data-number="4.6.1" class="anchored" data-anchor-id="sec-unixj">
<span class="header-section-number">4.6.1</span> Julian time conversion to UNIX time</h3>
<p>Building on the conversion of Julian dates into <code>dotes</code> and <code>doties</code>, it may be easiest to obtain the official definition of <code>deco</code> dates and <code>Declock</code> times is based on UNIX time. UNIX time is the number of seconds since the UNIX Epoch, which is <code>1969+306.0</code> in <code>Decalendar</code> or midnight in the <a href="https://en.wikipedia.org/wiki/List_of_UTC_offsets#UTC%C2%B100:00,_Z">UTC+0</a> time zone on January 1, 1970 in the Gregorian calendar. A day is exactly 86,400 seconds (100,000 <code>beats</code>) long in UNIX time, Julian dates, <code>deco</code> dates, and <code>Declock</code> times. To obtain UNIX time from a Julian Date, we subtract 2440587.5 from the Julian Date and multiply by 86400 as shown in <a href="#eq-unixj">Equation&nbsp;14</a>.</p>
<p><span id="eq-unixj"><span class="math display">\[unix = (JD ‚àí 2440587.5) \cdot 86400 \tag{14}\]</span></span></p>
</section><section id="sec-unixd" class="level3" data-number="4.6.2"><h3 data-number="4.6.2" class="anchored" data-anchor-id="sec-unixd">
<span class="header-section-number">4.6.2</span> UNIX time conversion to <code>deco</code> date</h3>
<p>To calculate <code>deco</code> dates directly from UNIX time, we can use a calculation adapted the 2014 article entitled <a href="http://howardhinnant.github.io/date_algorithms.html#civil_from_days">‚Äúchrono-Compatible Low-Level Date Algorithms‚Äù</a> by <a href="https://howardhinnant.github.io/">Howard Hinnant</a> <span class="citation" data-cites="hinnant2014">(<a href="#ref-hinnant2014" role="doc-biblioref">2014</a>)</span>. Briefly, the seconds (or milliseconds) in UNIX time are first converted to <code>days</code> (<span class="math inline">\(days = seconds \div 86400\)</span>). Then, the <code>days</code> are used to obtain the <code>era</code> (<a href="#eq-cycl">Equation&nbsp;9</a>), <code>day-of-the-era</code> (<a href="#eq-dote">Equation&nbsp;8</a>), <code>year</code> (<a href="#eq-year">Equation&nbsp;12</a>), and <code>doty</code> (<a href="#eq-doty">Equation&nbsp;13</a>).</p>
</section><section id="sec-unixt" class="level3" data-number="4.6.3"><h3 data-number="4.6.3" class="anchored" data-anchor-id="sec-unixt">
<span class="header-section-number">4.6.3</span> UNIX time conversion to <code>Decalendar</code> timestamp</h3>
<p>To obtain fractional days, we have to sum up all of the days in previous years and subtract this sum from <code>days</code> to obtain the current <code>Decalendar</code> ordinal (<code>deco</code>) timestamp as shown in <a href="#eq-unixt">Equation&nbsp;15</a>. The code in <a href="#exm-unixt">Example&nbsp;17</a> converts UNIX time into a <code>deco</code> timestamp in the <code>Zone</code> <code>0</code> time zone by passing the current UNIX timestamp to the <code>unix2doty</code> function. If we call this function without arguments (<code>unix2doty()</code>) the result will be the year and <code>doty</code> of the UNIX Epoch: 1969 and 306. To see <a href="#exm-unixt">Example&nbsp;17</a> in action, visit this <a href="https://codepen.io/maptv/pen/oNJZeea">CodePen</a> which displays the current <code>deco</code> (<code>year+day.clock</code>) and <code>isoc</code> (<code>year-mm-ddThh:mm:ss</code>) timestamps.</p>
<p><span id="eq-unixt"><span class="math display">\[time = year \cdot 365 + \sum_{n=1}^{year} \left[ \begin{array}{c}
y \mod 4 = 0 \\
\land y \mod 100 \neq 0 \\
\lor y \mod 400 = 0 \end{array} \right] \tag{15}\]</span></span></p>
<div id="exm-unixt" class="theorem example">
<p><span class="theorem-title"><strong>Example 17 </strong></span>&nbsp;</p>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-10-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-1" role="tab" aria-controls="tabset-10-1" aria-selected="true" href="">JavaScript</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-10-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-2" role="tab" aria-controls="tabset-10-2" aria-selected="false" href="">Julia</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-10-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-3" role="tab" aria-controls="tabset-10-3" aria-selected="false" href="">Python</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-10-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-4" role="tab" aria-controls="tabset-10-4" aria-selected="false" href="">R</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-10-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-5" role="tab" aria-controls="tabset-10-5" aria-selected="false" href="">Lua</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-10-6-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-6" role="tab" aria-controls="tabset-10-6" aria-selected="false" href="">CopyQ</a></li>
</ul>
<div class="tab-content" data-group="language">
<div id="tabset-10-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-10-1-tab">
<section id="unix2doty" class="level5"><h5 class="anchored" data-anchor-id="unix2doty"><code>unix2doty</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;unix2doty&quot;]" data-execution_count="22">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb157"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">unix2doty</span>(ms <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> days <span class="op">=</span> ms <span class="op">/</span> <span class="dv">86400000</span> <span class="op">+</span> <span class="dv">719468</span><span class="op">,</span></span>
<span id="cb157-3"><a href="#cb157-3" aria-hidden="true" tabindex="-1"></a>        dote <span class="op">=</span> days <span class="op">-</span> (era <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((days <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">?</span> days <span class="op">:</span> days <span class="op">-</span> <span class="dv">146096</span>) <span class="op">/</span> <span class="dv">146097</span>)) <span class="op">*</span> <span class="dv">146097</span><span class="op">,</span></span>
<span id="cb157-4"><a href="#cb157-4" aria-hidden="true" tabindex="-1"></a>        year <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((dote <span class="op">-</span> dote <span class="op">/</span> <span class="dv">1460</span> <span class="op">+</span> dote <span class="op">/</span> <span class="dv">36524</span> <span class="op">-</span> dote <span class="op">/</span> <span class="dv">146096</span>) <span class="op">/</span> <span class="dv">365</span>) <span class="op">+</span> era <span class="op">*</span> <span class="dv">400</span><span class="op">;</span></span>
<span id="cb157-5"><a href="#cb157-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [year<span class="op">,</span> days <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(year <span class="op">*</span> <span class="dv">365</span> <span class="op">+</span> year <span class="op">/</span> <span class="dv">4</span> <span class="op">-</span> year <span class="op">/</span> <span class="dv">100</span> <span class="op">+</span> year <span class="op">/</span> <span class="dv">400</span>)]<span class="op">;</span></span>
<span id="cb157-6"><a href="#cb157-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb157-7"><a href="#cb157-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-8"><a href="#cb157-8" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> [year<span class="op">,</span> doty] <span class="op">=</span> <span class="fu">unix2doty</span>(<span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>())<span class="op">;</span></span>
<span id="cb157-9"><a href="#cb157-9" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(</span>
<span id="cb157-10"><a href="#cb157-10" aria-hidden="true" tabindex="-1"></a>    <span class="vs">`</span><span class="sc">${</span>year<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">4</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}</span><span class="vs">+</span><span class="sc">${</span></span>
<span id="cb157-11"><a href="#cb157-11" aria-hidden="true" tabindex="-1"></a>    (day <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(doty))<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">3</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}</span><span class="vs">.</span><span class="sc">${</span></span>
<span id="cb157-12"><a href="#cb157-12" aria-hidden="true" tabindex="-1"></a>    (<span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>((doty <span class="op">-</span> day) <span class="op">*</span> <span class="fl">1e5</span>))<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">5</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}</span><span class="vs">+0`</span></span>
<span id="cb157-13"><a href="#cb157-13" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>2023+248.77211+0</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-75" href="dec_javascript.ipynb.html">Source: dec_javascript.ipynb</a></div>
</section>
</div>
<div id="tabset-10-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-10-2-tab">
<section id="unix-1" class="level5"><h5 class="anchored" data-anchor-id="unix-1"><code>unix</code></h5>
</section><section id="unix2doty-1" class="level5"><h5 class="anchored" data-anchor-id="unix2doty-1"><code>unix2doty</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;unix2doty&quot;]" data-execution_count="18">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb159"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">unix2doty</span>(s<span class="op">=</span><span class="fl">0</span>, ms<span class="op">=</span><span class="fl">0</span>)</span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a>    days <span class="op">=</span> s <span class="op">/</span> <span class="fl">86400</span> <span class="op">+</span> ms <span class="op">/</span> <span class="fl">86400000</span> <span class="op">+</span> <span class="fl">719468</span></span>
<span id="cb159-3"><a href="#cb159-3" aria-hidden="true" tabindex="-1"></a>    dote <span class="op">=</span> days <span class="op">-</span> (era <span class="op">=</span> <span class="fu">floor</span>((days <span class="op">&gt;=</span> <span class="fl">0</span> ? days <span class="op">:</span> days <span class="op">-</span> <span class="fl">146096</span>) <span class="op">/</span> <span class="fl">146097</span>)) <span class="op">*</span> <span class="fl">146097</span></span>
<span id="cb159-4"><a href="#cb159-4" aria-hidden="true" tabindex="-1"></a>    year <span class="op">=</span> <span class="fu">Int</span>(<span class="fu">floor</span>((dote <span class="op">-</span> dote <span class="op">/</span> <span class="fl">1460</span> <span class="op">+</span> dote <span class="op">/</span> <span class="fl">36524</span> <span class="op">-</span> dote <span class="op">/</span> <span class="fl">146096</span>) <span class="op">/</span> <span class="fl">365</span>) <span class="op">+</span> era <span class="op">*</span> <span class="fl">400</span>)</span>
<span id="cb159-5"><a href="#cb159-5" aria-hidden="true" tabindex="-1"></a>    year, days <span class="op">-</span> <span class="fu">floor</span>(year <span class="op">*</span> <span class="fl">365</span> <span class="op">+</span> year <span class="op">/</span> <span class="fl">4</span> <span class="op">-</span> year <span class="op">/</span> <span class="fl">100</span> <span class="op">+</span> year <span class="op">/</span> <span class="fl">400</span>)</span>
<span id="cb159-6"><a href="#cb159-6" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb159-7"><a href="#cb159-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-8"><a href="#cb159-8" aria-hidden="true" tabindex="-1"></a>y, d <span class="op">=</span> <span class="fu">unix2doty</span>(<span class="fu">time</span>())</span>
<span id="cb159-9"><a href="#cb159-9" aria-hidden="true" tabindex="-1"></a>day <span class="op">=</span> <span class="fu">Int</span>(<span class="fu">floor</span>(d))</span>
<span id="cb159-10"><a href="#cb159-10" aria-hidden="true" tabindex="-1"></a><span class="st">"</span><span class="sc">$</span>(<span class="fu">lpad</span>(y, <span class="fl">4</span>, <span class="ch">'0'</span>))<span class="st">+</span><span class="sc">$</span>(<span class="fu">lpad</span>(day, <span class="fl">3</span>, <span class="ch">'0'</span>))<span class="st">.</span><span class="sc">$</span>(<span class="fu">lpad</span>(<span class="fu">Int</span>(<span class="fu">round</span>((d <span class="op">-</span> day) <span class="op">*</span> <span class="fl">1e5</span>)), <span class="fl">5</span>, <span class="ch">'0'</span>))<span class="st">+0"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>"2023+248.77227+0"</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-76" href="dec_julia.ipynb.html">Source: dec_julia.ipynb</a></div>
</section>
</div>
<div id="tabset-10-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-10-3-tab">
<section id="unix2doty-2" class="level5"><h5 class="anchored" data-anchor-id="unix2doty-2"><code>unix2doty</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;unix2doty&quot;]" data-execution_count="19">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb161"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> time <span class="im">import</span> time</span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-3"><a href="#cb161-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> unix2doty(s<span class="op">=</span><span class="dv">0</span>, ms<span class="op">=</span><span class="dv">0</span>):</span>
<span id="cb161-4"><a href="#cb161-4" aria-hidden="true" tabindex="-1"></a>    days <span class="op">=</span> s <span class="op">/</span> <span class="dv">86400</span> <span class="op">+</span> ms <span class="op">/</span> <span class="dv">86400000</span> <span class="op">+</span> <span class="dv">719468</span></span>
<span id="cb161-5"><a href="#cb161-5" aria-hidden="true" tabindex="-1"></a>    dote <span class="op">=</span> days <span class="op">-</span> (era <span class="op">:=</span> (days <span class="cf">if</span> days <span class="op">&gt;=</span> <span class="dv">0</span> <span class="cf">else</span> days <span class="op">-</span> <span class="dv">146096</span>) <span class="op">//</span> <span class="dv">146097</span>) <span class="op">*</span> <span class="dv">146097</span></span>
<span id="cb161-6"><a href="#cb161-6" aria-hidden="true" tabindex="-1"></a>    year <span class="op">=</span> <span class="bu">int</span>((dote <span class="op">-</span> dote <span class="op">/</span> <span class="dv">1460</span> <span class="op">+</span> dote <span class="op">/</span> <span class="dv">36524</span> <span class="op">-</span> dote <span class="op">/</span> <span class="dv">146096</span>) <span class="op">//</span> <span class="dv">365</span> <span class="op">+</span> era <span class="op">*</span> <span class="dv">400</span>)</span>
<span id="cb161-7"><a href="#cb161-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> year, days <span class="op">-</span> (year <span class="op">*</span> <span class="dv">365</span> <span class="op">+</span> year <span class="op">/</span> <span class="dv">4</span> <span class="op">-</span> year <span class="op">/</span> <span class="dv">100</span> <span class="op">+</span> year <span class="op">/</span> <span class="dv">400</span>).<span class="fu">__floor__</span>()</span>
<span id="cb161-8"><a href="#cb161-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-9"><a href="#cb161-9" aria-hidden="true" tabindex="-1"></a>y, d <span class="op">=</span> unix2doty(time())</span>
<span id="cb161-10"><a href="#cb161-10" aria-hidden="true" tabindex="-1"></a><span class="ss">f"</span><span class="sc">{</span>y<span class="sc">:&gt;04}</span><span class="ss">+</span><span class="sc">{</span>(day <span class="op">:=</span> d.<span class="fu">__floor__</span>())<span class="sc">:&gt;03}</span><span class="ss">.</span><span class="sc">{</span><span class="bu">round</span>((d <span class="op">-</span> day) <span class="op">*</span> <span class="fl">1e5</span>)<span class="sc">:&gt;05}</span><span class="ss">+0"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>'2023+248.77239+0'</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-77" href="dec_python.ipynb.html">Source: dec_python.ipynb</a></div>
</section>
</div>
<div id="tabset-10-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-10-4-tab">
<section id="unix2doty-3" class="level5"><h5 class="anchored" data-anchor-id="unix2doty-3"><code>unix2doty</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;unix2doty&quot;]" data-execution_count="18">
<details><summary>Code</summary><div class="sourceCode" id="cb163"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">unix2doty</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">s</span> <span class="op">=</span> <span class="fl">0</span>, <span class="va">ms</span> <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">days</span> <span class="op">=</span> <span class="va">s</span> <span class="op">/</span> <span class="fl">86400</span> <span class="op">+</span> <span class="va">ms</span> <span class="op">/</span> <span class="fl">86400000</span> <span class="op">+</span> <span class="fl">719468</span></span>
<span>    <span class="va">dote</span> <span class="op">=</span> <span class="va">days</span> <span class="op">-</span> <span class="op">(</span><span class="va">era</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">floor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">days</span> <span class="op">&gt;=</span> <span class="fl">0</span>, <span class="va">days</span>, <span class="va">days</span> <span class="op">-</span> <span class="fl">146096</span><span class="op">)</span> <span class="op">/</span> <span class="fl">146097</span><span class="op">)</span><span class="op">)</span> <span class="op">*</span> <span class="fl">146097</span></span>
<span>    <span class="va">year</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">floor</a></span><span class="op">(</span><span class="op">(</span><span class="va">dote</span> <span class="op">-</span> <span class="va">dote</span> <span class="op">/</span> <span class="fl">1460</span> <span class="op">+</span> <span class="va">dote</span> <span class="op">/</span> <span class="fl">36524</span> <span class="op">-</span> <span class="va">dote</span> <span class="op">/</span> <span class="fl">146096</span><span class="op">)</span> <span class="op">/</span> <span class="fl">365</span><span class="op">)</span> <span class="op">+</span> <span class="va">era</span> <span class="op">*</span> <span class="fl">400</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">days</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">floor</a></span><span class="op">(</span><span class="va">year</span> <span class="op">*</span> <span class="fl">365</span> <span class="op">+</span> <span class="va">year</span> <span class="op">/</span> <span class="fl">4</span> <span class="op">-</span> <span class="va">year</span> <span class="op">/</span> <span class="fl">100</span> <span class="op">+</span> <span class="va">year</span> <span class="op">/</span> <span class="fl">400</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">yd</span> <span class="op">&lt;-</span> <span class="fu">unix2doty</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">"%04d"</span>, <span class="va">yd</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>, <span class="st">"+"</span>,</span>
<span>       <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">"%03d"</span>, <span class="op">(</span><span class="va">day</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">floor</a></span><span class="op">(</span><span class="va">yd</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, <span class="st">"."</span>,</span>
<span>       <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">"%05d"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="op">(</span><span class="va">yd</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">-</span> <span class="va">day</span><span class="op">)</span> <span class="op">*</span> <span class="fl">1e5</span><span class="op">)</span><span class="op">)</span>, <span class="st">"+0"</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
'2023+248.77250+0'
</div>
</div>
<a class="quarto-notebook-link" id="nblink-78" href="dec_r.ipynb.html">Source: dec_r.ipynb</a></div>
</section>
</div>
<div id="tabset-10-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-10-5-tab">
<div class="sourceCode" id="cb164"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> unix2doty<span class="op">(</span><span class="va">ms</span><span class="op">)</span></span>
<span id="cb164-2"><a href="#cb164-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">local</span> <span class="va">days</span> <span class="op">=</span> <span class="va">ms</span> <span class="op">/</span> <span class="dv">86400000</span> <span class="op">+</span> <span class="dv">719468</span></span>
<span id="cb164-3"><a href="#cb164-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">local</span> <span class="va">era</span> <span class="op">=</span> <span class="op">(</span><span class="va">days</span> <span class="op">&gt;=</span> <span class="dv">0</span> <span class="kw">and</span> <span class="va">days</span> <span class="kw">or</span> <span class="va">days</span> <span class="op">-</span> <span class="dv">146096</span><span class="op">)</span> <span class="op">//</span> <span class="dv">146097</span></span>
<span id="cb164-4"><a href="#cb164-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">local</span> <span class="va">dote</span> <span class="op">=</span> <span class="va">days</span> <span class="op">-</span> <span class="va">era</span> <span class="op">*</span> <span class="dv">146097</span></span>
<span id="cb164-5"><a href="#cb164-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">local</span> <span class="va">year</span> <span class="op">=</span> <span class="fu">math.floor</span><span class="op">((</span><span class="va">dote</span> <span class="op">-</span> <span class="va">dote</span> <span class="op">/</span> <span class="dv">1460</span> <span class="op">+</span> <span class="va">dote</span> <span class="op">/</span> <span class="dv">36524</span> <span class="op">-</span> <span class="va">dote</span> <span class="op">/</span> <span class="dv">146096</span><span class="op">)</span> <span class="op">/</span> <span class="dv">365</span><span class="op">)</span> <span class="op">+</span> <span class="va">era</span> <span class="op">*</span> <span class="dv">400</span></span>
<span id="cb164-6"><a href="#cb164-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">math.floor</span><span class="op">(</span><span class="va">year</span><span class="op">),</span> <span class="va">days</span> <span class="op">-</span> <span class="fu">math.floor</span><span class="op">(</span><span class="va">year</span> <span class="op">*</span> <span class="dv">365</span> <span class="op">+</span> <span class="va">year</span> <span class="op">/</span> <span class="dv">4</span> <span class="op">-</span> <span class="va">year</span> <span class="op">/</span> <span class="dv">100</span> <span class="op">+</span> <span class="va">year</span> <span class="op">/</span> <span class="dv">400</span><span class="op">)</span></span>
<span id="cb164-7"><a href="#cb164-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb164-8"><a href="#cb164-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-9"><a href="#cb164-9" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span><span class="op">(</span>unix2doty<span class="op">(</span><span class="dv">0</span><span class="op">))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb165"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> unix2deco<span class="op">(</span><span class="va">ms</span><span class="op">)</span></span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a>    <span class="va">year</span><span class="op">,</span> <span class="va">doty</span> <span class="op">=</span> unix2doty<span class="op">(</span><span class="va">ms</span><span class="op">)</span></span>
<span id="cb165-3"><a href="#cb165-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">string.format</span><span class="op">(</span><span class="st">"%s+%s"</span><span class="op">,</span> <span class="fu">math.floor</span><span class="op">(</span><span class="va">year</span><span class="op">),</span> <span class="fu">math.floor</span><span class="op">(</span><span class="va">doty</span><span class="op">))</span></span>
<span id="cb165-4"><a href="#cb165-4" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb165-5"><a href="#cb165-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-6"><a href="#cb165-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span><span class="op">(</span>unix2deco<span class="op">(</span><span class="dv">0</span><span class="op">))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-10-6" class="tab-pane" role="tabpanel" aria-labelledby="tabset-10-6-tab">
<div class="sourceCode" id="cb166"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a>copyq<span class="op">:</span></span>
<span id="cb166-2"><a href="#cb166-2" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">unix2doty</span>(ms <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb166-3"><a href="#cb166-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> days <span class="op">=</span> ms <span class="op">/</span> <span class="dv">86400000</span> <span class="op">+</span> <span class="dv">719468</span><span class="op">,</span></span>
<span id="cb166-4"><a href="#cb166-4" aria-hidden="true" tabindex="-1"></a>        dote <span class="op">=</span> days <span class="op">-</span> (era <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((days <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">?</span> days <span class="op">:</span> days <span class="op">-</span> <span class="dv">146096</span>) <span class="op">/</span> <span class="dv">146097</span>)) <span class="op">*</span> <span class="dv">146097</span><span class="op">,</span></span>
<span id="cb166-5"><a href="#cb166-5" aria-hidden="true" tabindex="-1"></a>        year <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((dote <span class="op">-</span> dote <span class="op">/</span> <span class="dv">1460</span> <span class="op">+</span> dote <span class="op">/</span> <span class="dv">36524</span> <span class="op">-</span> dote <span class="op">/</span> <span class="dv">146096</span>) <span class="op">/</span> <span class="dv">365</span>) <span class="op">+</span> era <span class="op">*</span> <span class="dv">400</span><span class="op">;</span></span>
<span id="cb166-6"><a href="#cb166-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [year<span class="op">,</span> days <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(year <span class="op">*</span> <span class="dv">365</span> <span class="op">+</span> year <span class="op">/</span> <span class="dv">4</span> <span class="op">-</span> year <span class="op">/</span> <span class="dv">100</span> <span class="op">+</span> year <span class="op">/</span> <span class="dv">400</span>)]<span class="op">;</span></span>
<span id="cb166-7"><a href="#cb166-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb166-8"><a href="#cb166-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-9"><a href="#cb166-9" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> [year<span class="op">,</span> doty] <span class="op">=</span> <span class="fu">unix2doty</span>(<span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>())<span class="op">,</span></span>
<span id="cb166-10"><a href="#cb166-10" aria-hidden="true" tabindex="-1"></a>    datetime <span class="op">=</span> <span class="vs">`</span><span class="sc">${</span>year<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">4</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}</span><span class="vs">+</span><span class="sc">${</span></span>
<span id="cb166-11"><a href="#cb166-11" aria-hidden="true" tabindex="-1"></a>    (day <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(doty))<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">3</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}</span><span class="vs">.</span><span class="sc">${</span></span>
<span id="cb166-12"><a href="#cb166-12" aria-hidden="true" tabindex="-1"></a>    (<span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>((doty <span class="op">-</span> day) <span class="op">*</span> <span class="fl">1e5</span>))<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">5</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}</span><span class="vs">+0`</span><span class="op">;</span></span>
<span id="cb166-13"><a href="#cb166-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-14"><a href="#cb166-14" aria-hidden="true" tabindex="-1"></a><span class="fu">copy</span>(datetime)</span>
<span id="cb166-15"><a href="#cb166-15" aria-hidden="true" tabindex="-1"></a><span class="fu">copySelection</span>(datetime)</span>
<span id="cb166-16"><a href="#cb166-16" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section><section id="sec-unixb" class="level3" data-number="4.6.4"><h3 data-number="4.6.4" class="anchored" data-anchor-id="sec-unixb">
<span class="header-section-number">4.6.4</span> Building timestamps</h3>
<p>The code in <a href="#exm-unixt">Example&nbsp;17</a> creates a <code>Decalendar</code> ordinal (<code>deco</code>) timestamp from UNIX time. <a href="#exm-unixb">Example&nbsp;18</a> encapsulates this code in a function called <code>unix2deco</code>. The <code>deco</code> timestamps converted from UNIX time are all in the <code>Zone</code> <code>0</code> time zone. To switch to a different time zone, we should pass the year and <code>doty</code> we obtain from the <code>unix2doty</code> function to the <code>doty2deco</code> function from <a href="#exm-isot">Example&nbsp;12</a> along with the desired time zone.</p>
<div id="exm-unixb" class="theorem example">
<p><span class="theorem-title"><strong>Example 18 </strong></span>&nbsp;</p>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-11-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-1" role="tab" aria-controls="tabset-11-1" aria-selected="true" href="">JavaScript</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-11-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-2" role="tab" aria-controls="tabset-11-2" aria-selected="false" href="">Julia</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-11-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-3" role="tab" aria-controls="tabset-11-3" aria-selected="false" href="">Python</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-11-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-4" role="tab" aria-controls="tabset-11-4" aria-selected="false" href="">R</a></li>
</ul>
<div class="tab-content" data-group="language">
<div id="tabset-11-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-11-1-tab">
<section id="unix2deco" class="level5"><h5 class="anchored" data-anchor-id="unix2deco"><code>unix2deco</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;unix2deco&quot;]" data-execution_count="23">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb167"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">unix2deco</span>(ms <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb167-2"><a href="#cb167-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> [year<span class="op">,</span> doty] <span class="op">=</span> <span class="fu">unix2doty</span>(ms)<span class="op">;</span></span>
<span id="cb167-3"><a href="#cb167-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`</span><span class="sc">${</span>year<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">4</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}</span><span class="vs">+</span><span class="sc">${</span></span>
<span id="cb167-4"><a href="#cb167-4" aria-hidden="true" tabindex="-1"></a>        (day <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(doty))<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">3</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}</span><span class="vs">.</span><span class="sc">${</span></span>
<span id="cb167-5"><a href="#cb167-5" aria-hidden="true" tabindex="-1"></a>        (<span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>((doty <span class="op">-</span> day) <span class="op">*</span> <span class="fl">1e5</span>))<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">5</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}</span><span class="vs">+0`</span></span>
<span id="cb167-6"><a href="#cb167-6" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb167-7"><a href="#cb167-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-8"><a href="#cb167-8" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">unix2deco</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>1969+306.00000+0</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-79" href="dec_javascript.ipynb.html">Source: dec_javascript.ipynb</a></div>
</section>
</div>
<div id="tabset-11-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-11-2-tab">
<section id="unix-2" class="level5"><h5 class="anchored" data-anchor-id="unix-2"><code>unix</code></h5>
</section><section id="unix2deco-1" class="level5"><h5 class="anchored" data-anchor-id="unix2deco-1"><code>unix2deco</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;unix2deco&quot;]" data-execution_count="19">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb169"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">unix2deco</span>(s<span class="op">=</span><span class="fl">0</span>, ms<span class="op">=</span><span class="fl">0</span>)</span>
<span id="cb169-2"><a href="#cb169-2" aria-hidden="true" tabindex="-1"></a>    y, d <span class="op">=</span> <span class="fu">unix2doty</span>(<span class="fu">time</span>())</span>
<span id="cb169-3"><a href="#cb169-3" aria-hidden="true" tabindex="-1"></a>    day <span class="op">=</span> <span class="fu">Int</span>(<span class="fu">floor</span>(d))</span>
<span id="cb169-4"><a href="#cb169-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"</span><span class="sc">$</span>(<span class="fu">lpad</span>(y, <span class="fl">4</span>, <span class="ch">'0'</span>))<span class="st">+</span><span class="sc">$</span>(<span class="fu">lpad</span>(day, <span class="fl">3</span>, <span class="ch">'0'</span>))<span class="st">.</span><span class="sc">$</span>(<span class="fu">lpad</span>(<span class="fu">Int</span>(<span class="fu">round</span>((d <span class="op">-</span> day) <span class="op">*</span> <span class="fl">1e5</span>)), <span class="fl">5</span>, <span class="ch">'0'</span>))<span class="st">+0"</span></span>
<span id="cb169-5"><a href="#cb169-5" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb169-6"><a href="#cb169-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb169-7"><a href="#cb169-7" aria-hidden="true" tabindex="-1"></a><span class="fu">unix2deco</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>"2023+248.77227+0"</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-80" href="dec_julia.ipynb.html">Source: dec_julia.ipynb</a></div>
</section>
</div>
<div id="tabset-11-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-11-3-tab">
<section id="unix2deco-2" class="level5"><h5 class="anchored" data-anchor-id="unix2deco-2"><code>unix2deco</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;unix2deco&quot;]" data-execution_count="20">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb171"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> time <span class="im">import</span> time</span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-3"><a href="#cb171-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> unix2deco(s<span class="op">=</span><span class="dv">0</span>, ms<span class="op">=</span><span class="dv">0</span>):</span>
<span id="cb171-4"><a href="#cb171-4" aria-hidden="true" tabindex="-1"></a>    y, d <span class="op">=</span> unix2doty(time())</span>
<span id="cb171-5"><a href="#cb171-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="ss">f"</span><span class="sc">{</span>y<span class="sc">:&gt;04}</span><span class="ss">+</span><span class="sc">{</span>(day <span class="op">:=</span> d.<span class="fu">__floor__</span>())<span class="sc">:&gt;03}</span><span class="ss">.</span><span class="sc">{</span><span class="bu">round</span>((d <span class="op">-</span> day) <span class="op">*</span> <span class="fl">1e5</span>)<span class="sc">:&gt;05}</span><span class="ss">+0"</span></span>
<span id="cb171-6"><a href="#cb171-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-7"><a href="#cb171-7" aria-hidden="true" tabindex="-1"></a>unix2deco()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<pre><code>'2023+248.77239+0'</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-81" href="dec_python.ipynb.html">Source: dec_python.ipynb</a></div>
</section>
</div>
<div id="tabset-11-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-11-4-tab">
<section id="unix2deco-3" class="level5"><h5 class="anchored" data-anchor-id="unix2deco-3"><code>unix2deco</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;unix2deco&quot;]" data-execution_count="19">
<details><summary>Code</summary><div class="sourceCode" id="cb173"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">unix2deco</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">s</span> <span class="op">=</span> <span class="fl">0</span>, <span class="va">ms</span> <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">yd</span> <span class="op">&lt;-</span> <span class="fu">unix2deco</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">"%04d"</span>, <span class="va">yd</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>, <span class="st">"+"</span>,</span>
<span>           <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">"%03d"</span>, <span class="op">(</span><span class="va">day</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">floor</a></span><span class="op">(</span><span class="va">yd</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, <span class="st">"."</span>,</span>
<span>           <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">"%05d"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="op">(</span><span class="va">yd</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">-</span> <span class="va">day</span><span class="op">)</span> <span class="op">*</span> <span class="fl">1e5</span><span class="op">)</span><span class="op">)</span>, <span class="st">"+0"</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">unix2deco</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<a class="quarto-notebook-link" id="nblink-82" href="dec_r.ipynb.html">Source: dec_r.ipynb</a></div>
</section>
</div>
</div>
</div>
</section><section id="sec-unixp" class="level3" data-number="4.6.5"><h3 data-number="4.6.5" class="anchored" data-anchor-id="sec-unixp">
<span class="header-section-number">4.6.5</span> Parsing timestamps</h3>
<p>To extract the components of a <code>Decalendar</code> timestamp, we can use the <code>parse_dec</code> function in <a href="#exm-isos">Example&nbsp;13</a>. Parsing timestamps is the first step before any later processes such as timestamp arithmetic or conversion between timestamp formats. The <code>parse_dec</code> function returns a year, a <code>doty</code>, and a fractional day time zone offset. The year and time zone offset can be omitted in the timestamp provided to <code>parse_dec</code>. If not specified in the timestamp, the year is the current year and the time zone offset is 0.</p>
<div id="exm-unixp" class="theorem example">
<p><span class="theorem-title"><strong>Example 19 </strong></span>&nbsp;</p>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-12-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-12-1" role="tab" aria-controls="tabset-12-1" aria-selected="true" href="">JavaScript</a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-12-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-12-1-tab">
<section id="parse_dec" class="level5"><h5 class="anchored" data-anchor-id="parse_dec"><code>parse_dec</code></h5>
<div class="quarto-embed-nb-cell">
<div class="cell" data-tags="[&quot;parse_dec&quot;]" data-execution_count="24">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb174"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">parse_dec</span>(timestamp <span class="op">=</span> <span class="st">"1969+306.00000Z"</span>) {</span>
<span id="cb174-2"><a href="#cb174-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> arr <span class="op">=</span> timestamp<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">split</span>(<span class="ss">/</span><span class="sc">(?</span><span class="ss">=</span><span class="sc">[+-]|[a-zA-Z])</span><span class="ss">/</span><span class="op">,</span> <span class="dv">3</span>)<span class="op">;</span></span>
<span id="cb174-3"><a href="#cb174-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">switch</span> (arr<span class="op">.</span><span class="at">length</span>) {</span>
<span id="cb174-4"><a href="#cb174-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="dv">1</span><span class="op">:</span> <span class="cf">return</span> [<span class="fu">unix2doty</span>(<span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>())[<span class="dv">0</span>]<span class="op">,</span> <span class="pp">parseFloat</span>(arr[<span class="dv">0</span>])<span class="op">,</span> <span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb174-5"><a href="#cb174-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="dv">2</span><span class="op">:</span> <span class="cf">return</span> (<span class="ss">/</span><span class="sc">^[a-zA-Z]+$</span><span class="ss">/</span><span class="op">.</span><span class="fu">test</span>(arr[<span class="dv">1</span>]))</span>
<span id="cb174-6"><a href="#cb174-6" aria-hidden="true" tabindex="-1"></a>            <span class="op">?</span> [<span class="fu">unix2doty</span>(<span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>())[<span class="dv">0</span>]<span class="op">,</span> <span class="pp">parseFloat</span>(arr[<span class="dv">0</span>])<span class="op">,</span> <span class="fu">zone2hour</span>(arr[<span class="dv">1</span>]) <span class="op">/</span> <span class="dv">24</span>]</span>
<span id="cb174-7"><a href="#cb174-7" aria-hidden="true" tabindex="-1"></a>            <span class="op">:</span> [<span class="pp">parseInt</span>(arr[<span class="dv">0</span>])<span class="op">,</span> <span class="pp">parseFloat</span>(arr[<span class="dv">1</span>])<span class="op">,</span> <span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb174-8"><a href="#cb174-8" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb174-9"><a href="#cb174-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [<span class="pp">parseInt</span>(arr[<span class="dv">0</span>])<span class="op">,</span> <span class="pp">parseFloat</span>(arr[<span class="dv">1</span>])<span class="op">,</span> <span class="ss">/</span><span class="sc">^[a-zA-Z]+$</span><span class="ss">/</span><span class="op">.</span><span class="fu">test</span>(arr[<span class="dv">2</span>])</span>
<span id="cb174-10"><a href="#cb174-10" aria-hidden="true" tabindex="-1"></a>        <span class="op">?</span> <span class="fu">zone2hour</span>(arr[<span class="dv">2</span>]) <span class="op">/</span> <span class="dv">24</span></span>
<span id="cb174-11"><a href="#cb174-11" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> <span class="pp">parseFloat</span>(arr[<span class="dv">2</span>]<span class="op">.</span><span class="fu">replace</span>(<span class="ss">/</span><span class="sc">([+-])</span><span class="ss">/</span><span class="op">,</span> <span class="st">"$1</span><span class="sc">\.</span><span class="st">"</span>))]<span class="op">;</span></span>
<span id="cb174-12"><a href="#cb174-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb174-13"><a href="#cb174-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-14"><a href="#cb174-14" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">parse_dec</span>())<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[ 1969, 306, 0 ]</code></pre>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-83" href="dec_javascript.ipynb.html">Source: dec_javascript.ipynb</a></div>
</section>
</div>
</div>
</div>
</section></section></section><section id="sec-format" class="level1 page-columns page-full" data-number="5"><h1 data-number="5">
<span class="header-section-number">5</span> Dot formats</h1>
<p>The <code>stamps</code> shown above are in the decimal days of the year (<code>.y</code>) format, which is the main <code>Decalendar</code> format. In addition to the <code>.y</code> format, there are 2 other supplemental <code>datetime</code> formats, which are based on decimal days of the month (<code>decc</code>), and decimal days of the week (<code>.w</code>). <a href="#tbl-format">Table&nbsp;9</a> summarizes the three decimal day-of-the ( <code>dot</code> or <code>.</code>) formats:</p>
<section id="tbl-format" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="tbl-format"><a href="#tbl-format">Table&nbsp;9</a></h4>
<div class="callout callout-style-default callout-note no-icon callout-titled page-columns page-full" title="Click to toggle table expansion">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click to toggle table expansion
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse page-columns page-full">
<div class="callout-body-container callout-body page-columns page-full">
<div id="tbl-format" class="anchored page-columns page-full">
<table class="table">

<thead><tr class="header">
<th>Day of the</th>
<th><code>.</code></th>
<th>General Form</th>
<th>Specific Example</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Year</td>
<td><code>y</code></td>
<td><code>year¬±day.day¬±z</code></td>
<td><code>1999+365.500-3</code></td>
</tr>
<tr class="even">
<td>Month</td>
<td><code>m</code></td>
<td><code>year¬±m¬±dd.day¬±z</code></td>
<td><code>1999+B+29.500-3</code></td>
</tr>
<tr class="odd">
<td>Week</td>
<td><code>w</code></td>
<td><code>year¬±ww¬±d.day¬±z</code></td>
<td><code>1999+52+5.500-3</code></td>
</tr>
</tbody>
</table>
<div class="quarto-table-caption margin-caption">Table&nbsp;9: The three dot formats</div></div>
</div>
</div>
</div>
<p>In <a href="#tbl-format">Table&nbsp;9</a> , <code>day</code> is the 3-digit day of the year (<code>doty</code>) number, <code>dd</code> is the 2-digit day of the month (<code>dotm</code>) number, <code>d</code> is the 1-digit day of the week (<code>dotw</code>) number, and <code>.day</code> is the time in <code>mils</code>.</p>
</section><section id="sec-dotm" class="level2" data-number="5.1"><h2 data-number="5.1" class="anchored" data-anchor-id="sec-dotm">
<span class="header-section-number">5.1</span> The <code>.m</code> format</h2>
<p>The <code>m</code> in the <code>.m</code> format is the 1-digit month number and is the double-digit <code>dotm</code>. To fit all of the months in a single digit, <code>m</code> is in <a href="https://en.wikipedia.org/wiki/Hexadecimal">hexadecimal</a> form (Base16 encoded). This means that the first 10 months are represented by the numbers 0 through 9 (<a href="https://en.wikipedia.org/wiki/Zero-based_numbering">zero-based numbering</a>) while the last two months of the year are represented by the letters ‚ÄúA‚Äù and ‚ÄúB‚Äù instead of numbers. The <code>.m</code> format is similar to the <a href="https://en.wikipedia.org/wiki/ISO_8601#Calendar_dates">ISO8601 calendar date</a> format (year-mm-dd).</p>
<p>The <a href="https://en.wikipedia.org/wiki/Ordinal_numeral">ordinal numerals</a> of September, October, November, and December in <code>Decalendar</code> (Sep=7th, Oct=8th, Nov=9th, Dec=10th) match the <a href="https://en.m.wikipedia.org/wiki/Numeral_prefix#Table_of_number_prefixes_in_English">numeral prefixes</a> in their names (Sep=7, Oct=8, Nov=9, Dec=10). The <code>m</code> value of a month is based on its cardinal number in <code>Decalendar</code>, which is 1 less than its ordinal number (Sep=6, Oct=7, Nov=8, Dec=9).</p>
<p>To convert a double-digit Gregorian calendar month number (<code>mm</code>) into a single-digit <code>Decalendar</code> <code>m</code> value, we subtract 3 if <code>mm</code> is greater than 2, add 9 if not, as shown in <a href="#eq-dotm1">Equation&nbsp;16</a>, and then encode into hexadecimal (Base16). To do the inverse (convert <code>m</code> to <code>mm</code>), we decode from hexadecimal, add 3 to <code>m</code> values less than 10 and subtract 9 from other <code>m</code> values, as shown in <a href="#eq-dotm2">Equation&nbsp;17</a>. After hexadecimal encoding, January is represented by <code>A</code> and February is represented by <code>B</code> (mnemonic: <code>jAn</code>=January, <code>feB</code>=February).</p>
<p><span id="eq-dotm1"><span class="math display">\[m = \begin{cases}mm - 3&amp;{\text{if } month &gt; 2;}\\mm + 9&amp;{\text{otherwise.}}\end{cases} \tag{16}\]</span></span></p>
<p><span id="eq-dotm2"><span class="math display">\[m = \begin{cases}month + 3&amp;{\text{if } month &lt; 10;}\\month - 9&amp;{\text{otherwise.}}\end{cases} \tag{17}\]</span></span></p>
</section><section id="sec-dotw" class="level2 page-columns page-full" data-number="5.2"><h2 data-number="5.2" class="anchored" data-anchor-id="sec-dotw">
<span class="header-section-number">5.2</span> The <code>decw</code> format</h2>
<p>The week number in the <code>decw</code> format, <code>ww</code>, ranges from 0 to 53 or -54 to -1. Weeks in the <code>decw</code> format start from Sunday. <a href="#tbl-dotw">Table&nbsp;10</a> shows the possible <code>dotw</code> values, which range from 0 to 6 or -7 to -1.</p>
<section id="tbl-dotw" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="tbl-dotw"><a href="#tbl-dotw">Table&nbsp;10</a></h4>
<div class="callout callout-style-default callout-note no-icon callout-titled page-columns page-full" title="Click to toggle table expansion">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-10-contents" aria-controls="callout-10" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click to toggle table expansion
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-10" class="callout-10-contents callout-collapse collapse page-columns page-full">
<div class="callout-body-container callout-body page-columns page-full">
<div id="tbl-dotw" class="anchored page-columns page-full">
<table class="table">

<thead><tr class="header">
<th>Day</th>
<th>Pos</th>
<th>Neg</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Sunday</td>
<td>0</td>
<td>-7</td>
</tr>
<tr class="even">
<td>Monday</td>
<td>1</td>
<td>-6</td>
</tr>
<tr class="odd">
<td>Tuesday</td>
<td>2</td>
<td>-5</td>
</tr>
<tr class="even">
<td>Wednesday</td>
<td>3</td>
<td>-4</td>
</tr>
<tr class="odd">
<td>Thursday</td>
<td>4</td>
<td>-3</td>
</tr>
<tr class="even">
<td>Friday</td>
<td>5</td>
<td>-2</td>
</tr>
<tr class="odd">
<td>Saturday</td>
<td>6</td>
<td>-1</td>
</tr>
</tbody>
</table>
<div class="quarto-table-caption margin-caption">Table&nbsp;10: The weeks in the <code>decw</code> format</div></div>
</div>
</div>
</div>
</section></section><section id="sec-dotex" class="level2 page-columns page-full" data-number="5.3"><h2 data-number="5.3" class="anchored" data-anchor-id="sec-dotex">
<span class="header-section-number">5.3</span> Dot format examples</h2>
<p><a href="#tbl-dotex">Table&nbsp;11</a> builds on the example from <a href="#sec-zone">Section&nbsp;3</a> to compare all three <code>.</code> formats. The 3 <code>.</code> formats differ only in their approach to the date, not the time. Therefore, the times below are all shown to 1-digit <code>dime</code> precision (same as time zones) instead of the typical 3-digit <code>mil</code> precision. In Mexico City, the time is <code>+5-3</code> or <code>-5-3</code>, while the time in London is <code>+8+0</code> or <code>-2+0</code> and time in Tokyo is <code>+2+4</code> or <code>-8+4</code>.</p>
<section id="tbl-dotex" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="tbl-dotex"><a href="#tbl-dotex">Table&nbsp;11</a></h4>
<div class="callout callout-style-default callout-note no-icon callout-titled page-columns page-full" title="Click to toggle table expansion">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click to toggle table expansion
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse page-columns page-full">
<div class="callout-body-container callout-body page-columns page-full">
<div id="tbl-dotex" class="anchored page-columns page-full">
<table class="table">

<colgroup>
<col style="width: 17%">
<col style="width: 7%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead><tr class="header">
<th>Day of the</th>
<th><code>.</code></th>
<th>Mexico City</th>
<th>London</th>
<th>Tokyo</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Year</td>
<td><code>y</code></td>
<td><code>1999+365.5-3</code></td>
<td><code>1999+365.8+0</code></td>
<td><code>2000+000.2+4</code></td>
</tr>
<tr class="even">
<td>Year</td>
<td><code>y</code></td>
<td><code>2000-001.5-3</code></td>
<td><code>2000-001.2+0</code></td>
<td><code>2001-365.8+4</code></td>
</tr>
<tr class="odd">
<td>Month</td>
<td><code>m</code></td>
<td><code>1999+B+29.5-3</code></td>
<td><code>1999+B+29.8+0</code></td>
<td><code>2000+0+00.2+4</code></td>
</tr>
<tr class="even">
<td>Month</td>
<td><code>m</code></td>
<td><code>2000-1-01.5-3</code></td>
<td><code>2000-1-01.2+0</code></td>
<td><code>2001-C-31.8+4</code></td>
</tr>
<tr class="odd">
<td>Week</td>
<td><code>w</code></td>
<td><code>1999+52+2.5-3</code></td>
<td><code>1999+52+2.8+0</code></td>
<td><code>2000+00+3.2+4</code></td>
</tr>
<tr class="even">
<td>Week</td>
<td><code>w</code></td>
<td><code>2000-01-5.5-3</code></td>
<td><code>2000-01-5.2+0</code></td>
<td><code>2001-53-4.8+4</code></td>
</tr>
</tbody>
</table>
<div class="quarto-table-caption margin-caption">Table&nbsp;11: The time in Mexico City, London, and Tokyo in all three dot formats</div></div>
</div>
</div>
</div>
<p>In <a href="#tbl-dotex">Table&nbsp;11</a>, the <code>.m</code> format tells us that the month in Tokyo is January (<code>Month</code> <code>0</code>) and the month in Mexico City and London is December (<code>Month</code> <code>B</code>). We could say the <code>.m</code> dates in Mexico City and London as ‚ÄúYear 1999 Month B Day 29‚Äù or ‚ÄúYear 1999 Month -1 Day -1‚Äù and the Tokyo date as ‚ÄúYear 2000 Month 0 Day 0‚Äù or ‚ÄúYear 2000 Month -C Day -31‚Äù.</p>
<p>The <code>decw</code> format always starts the year with <code>Week</code> <code>0</code>, but the year can start on any day of the week. <a href="#tbl-dotex">Table&nbsp;11</a> shows that the year 2000 starts on a Saturday (<code>Week</code> <code>0</code> <code>Day</code> <code>6</code>). The <code>decw</code> dates in Mexico City and London could be said ‚ÄúYear 1999 Week 52 Day 2‚Äù or ‚ÄúYear 1999 Week -1 Day -5‚Äù, while the date in Tokyo could be pronounced ‚ÄúYear 2000 Week 0 Day 3‚Äù or ‚ÄúYear 2000 Week -52 Day -4‚Äù in Tokyo.</p>
<p>In contrast to the <code>.m</code> and the <code>decw</code> formats, the dates in the <code>.y</code> format are one character shorter and a little easier to say. The spoken form of the <code>.y</code> date in Mexico City and London is ‚ÄúYear 1999 Day 365‚Äù or ‚ÄúYear 1999 Day -1‚Äù and the spoken form of the Tokyo date is ‚ÄúYear 2000 Day 0‚Äù or ‚ÄúYear 2000 Day -365‚Äù.</p>
</section></section><section id="sec-dek" class="level2 page-columns page-full" data-number="5.4"><h2 data-number="5.4" class="anchored" data-anchor-id="sec-dek">
<span class="header-section-number">5.4</span> <code>Deks</code>
</h2>
<p>Even though it provides formats for months and weeks, <code>Decalendar</code> envisions a world in which these units are replaced by <code>deks</code>. In terms of scale, <code>deks</code> are somewhere between a week and a month, precisely half a day less than a week and a half (1.5 weeks - 0.5 days) and approximately a third of month. <code>Deks</code> could provide the functionality of both weeks and months if we followed a <code>dekly</code> schedule instead of <code>weekly</code> and <code>monthly</code> schedules. The transition to a <code>dekly</code> schedule would be a massive undertaking, but could start with the creation of the digital infrastructure needed for the new system. Every desktop and mobile application that uses dates could be adapted to optionally use <code>deks</code> instead of weeks and months.</p>
<section id="sec-dotd" class="level3" data-number="5.4.1"><h3 data-number="5.4.1" class="anchored" data-anchor-id="sec-dotd">
<span class="header-section-number">5.4.1</span> Days of the <code>dek</code>
</h3>
<p>A major difficulty with the Gregorian calendar is that the date is disconnected from the day of the week. In contrast, the day of the <code>dek</code> (<code>dotd</code>) is simply the last digit of the day number in the <code>.y</code> format. For example, the first day of the year (<code>Day</code> <code>0</code>) is always a <code>Nulday</code>, the last day of common years (<code>Day</code> <code>364</code>) is always an <code>Quaday</code>, and the last day of leap years (<code>Day</code> <code>365</code>) is always a <code>Penday</code>. The day number allows us to distinguish workdays from restdays. <code>Decalendar</code> defines <code>Triday</code>, <code>Quaday</code>, <code>Octday</code>, and <code>Ennday</code> as restdays, which means that days with numbers that end in 3, 4, 8, or 9 are days off from work and school. Each <code>dek</code> consists of 2 <code>pents</code> (<code>pentadays</code>), each <code>pent</code> has 3 workdays called the <code>trep</code> (<code>trepalium</code>) and 2 restdays called the <code>pentend</code>. In total, there are 219 workdays and 146 restdays in a <code>Decalendar</code> year, not counting the only obligatory holiday, Leap Day (<code>Day</code> <code>365</code>).</p>
</section><section id="sec-work" class="level3" data-number="5.4.2"><h3 data-number="5.4.2" class="anchored" data-anchor-id="sec-work">
<span class="header-section-number">5.4.2</span> Workdays</h3>
<p>The Gregorian calendar has many more workdays, 260 in common years and 261 in leap year. Despite having many fewer workdays and many more restdays, workers following <code>Decalendar</code> would actually spent slightly more time at work overall, because the <code>Decalendar</code> workday goes from <code>Dot</code> <code>3</code> to <code>Dot</code> <code>7</code> and thus is 4 <code>dimes</code> (9.6 hours) long, 6.6ÃÖ <code>cents</code> (96 minutes) longer than the typical 9-to-5 work schedule (<code>Dot</code> <code>375</code> to <code>Dot</code> <code>7083ÃÖ</code>). In other words, this work schedule starts 75 <code>mils</code> (1.8 hours) earlier than 9AM (<code>Dot</code> <code>375</code>) and ends 8.3ÃÖ <code>mils</code> (12 minutes) earlier than 5PM (<code>Dot</code> <code>7083ÃÖ</code>). In a typical 40-hour workweek, workers spend 23.80952381 <code>cents</code> per day at work on average, which adds up to 8.6ÃÖ <code>deks</code> (260*8/240) per common year and 8.7 <code>deks</code> (<span class="math inline">\(261 \times 8 \div 240\)</span>) per leap year. In contrast, workers following <code>Decalendar</code> spend 24 <code>cents</code> per day at work on average, which totals up to 87.6 <code>days</code> (<span class="math inline">\(219 \times .4\)</span>) spent at work every year. The default approach of <code>Decalendar</code> is to compensate for having more restdays with longer workdays.</p>
</section><section id="sec-sched" class="level3 page-columns page-full" data-number="5.4.3"><h3 data-number="5.4.3" class="anchored" data-anchor-id="sec-sched">
<span class="header-section-number">5.4.3</span> Schedules</h3>
<section id="sec-pently" class="level4"><h4 class="anchored" data-anchor-id="sec-pently">Pently schedules</h4>
<p>If necessary, the length of the workday and the number of workdays in the <code>dek</code> can be adjusted according to different schedules. As mentioned above, each half of the <code>dek</code> is called a <code>pent</code>. Each <code>pent</code> can have its own <code>pently</code> schedule. The expectation is that workers will work for 12 <code>dimes</code> per <code>pent</code>. It is possible to split those 12 <code>dimes</code> over the course of 5, 4, 3, or 2 days in each <code>pent</code>. <a href="#tbl-pently">Table&nbsp;12</a> displays how the number of workdays and restdays in a <code>pent</code> affects the start time, end time, and duration of the workday. The different <code>pently</code> schedules are named after the number of workdays per <code>pent</code>. People can switch between <code>pently</code> schedules every <code>pent</code> as needed, but everyone should follow the <code>Schedule</code> <code>3</code> by default. <code>Schedule</code> <code>3</code> has 3 workdays and 2 restdays in each <code>pent</code>. Each <code>Schedule</code> <code>3</code> workday starts at <code>Dot</code> <code>3</code>, ends at <code>Dot</code> <code>7</code>, and lasts 4 <code>dimes</code>.</p>
</section><section id="tbl-pently" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="tbl-pently"><a href="#tbl-pently">Table&nbsp;12</a></h4>
<div class="callout callout-style-default callout-note no-icon callout-titled page-columns page-full" title="Click to toggle table expansion">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-12-contents" aria-controls="callout-12" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click to toggle table expansion
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-12" class="callout-12-contents callout-collapse collapse page-columns page-full">
<div class="callout-body-container callout-body page-columns page-full">
<div id="tbl-pently" class="anchored page-columns page-full">
<table class="table">

<thead><tr class="header">
<th>Schedule</th>
<th>Workdays</th>
<th>Restdays</th>
<th>Start</th>
<th>End</th>
<th>Duration</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>2</td>
<td>2</td>
<td>3</td>
<td>.2</td>
<td>.8</td>
<td>.6</td>
</tr>
<tr class="even">
<td>3</td>
<td>3</td>
<td>2</td>
<td>.3</td>
<td>.7</td>
<td>.4</td>
</tr>
<tr class="odd">
<td>4</td>
<td>4</td>
<td>1</td>
<td>.35</td>
<td>.65</td>
<td>.3</td>
</tr>
<tr class="even">
<td>5</td>
<td>5</td>
<td>0</td>
<td>.38</td>
<td>.62</td>
<td>.24</td>
</tr>
</tbody>
</table>
<div class="quarto-table-caption margin-caption">Table&nbsp;12: The characteristics of the pently schedules</div></div>
</div>
</div>
</div>
</section><section id="sec-daily" class="level4"><h4 class="anchored" data-anchor-id="sec-daily">Daily schedules</h4>
<p><code>Decalendar</code> recommends waking up at <code>Dot</code> <code>2</code> and going to bed at <code>Dot</code> <code>8</code>. This recommendation allots 4 <code>dimes</code> (9.6 hours) for falling asleep and sleeping. To keep daily schedules symmetrical, the time spent awake should be split evenly before and after work. People following <code>Schedule</code> <code>3</code> would thus have 10 <code>cents</code> (2.4 hours) to prepare for work and another 10 <code>cents</code> to prepare for bed. <a href="#tbl-daily">Table&nbsp;13</a> shows the recommended <code>Schedule</code> <code>3</code> daily schedule. <code>Schedule</code> <code>4</code> and <code>Schedule</code> <code>5</code> allot even more time, 15 <code>cents</code> (3.6 hours) and 18 <code>cents</code> (4.32 hours), respectively, for before-work and after-work activities. The recommended sleep schedule does not fit well with <code>Schedule</code> <code>2</code>, but this incompatibility does not have to result in a sleep deficit. If the <code>Schedule</code> <code>2</code> workdays are not consecutive, people following <code>Schedule</code> <code>2</code> can catch up on sleep on their days off by going to bed early before and sleeping in after every workday.</p>
</section><section id="tbl-daily" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="tbl-daily"><a href="#tbl-daily">Table&nbsp;13</a></h4>
<div class="callout callout-style-default callout-note no-icon callout-titled page-columns page-full" title="Click to toggle table expansion">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-13-contents" aria-controls="callout-13" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click to toggle table expansion
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-13" class="callout-13-contents callout-collapse collapse page-columns page-full">
<div class="callout-body-container callout-body page-columns page-full">
<div id="tbl-daily" class="anchored page-columns page-full">
<table class="table">

<thead><tr class="header">
<th>Start</th>
<th>End</th>
<th>Duration</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>.2</td>
<td>.3</td>
<td>.1</td>
<td>Wake up and prepare for work</td>
</tr>
<tr class="even">
<td>.3</td>
<td>.7</td>
<td>.4</td>
<td>Work</td>
</tr>
<tr class="odd">
<td>.7</td>
<td>.8</td>
<td>.1</td>
<td>End work and prepare for bed</td>
</tr>
<tr class="even">
<td>.8</td>
<td>.2</td>
<td>.4</td>
<td>Go to bed and sleep</td>
</tr>
</tbody>
</table>
<div class="quarto-table-caption margin-caption">Table&nbsp;13: The workday schedule</div></div>
</div>
</div>
</div>
</section></section></section><section id="sec-subyear" class="level2 page-columns page-full" data-number="5.5"><h2 data-number="5.5" class="anchored" data-anchor-id="sec-subyear">
<span class="header-section-number">5.5</span> Subyear units</h2>
<p>In addition to serving as a part of the Gregorian date coordinate system described above, months can also indicate the current season or quarter. <code>Deks</code> can also serve as indicator of subyear units like seasons.</p>
<section id="sec-season" class="level3 page-columns page-full" data-number="5.5.1"><h3 data-number="5.5.1" class="anchored" data-anchor-id="sec-season">
<span class="header-section-number">5.5.1</span> Seasons</h3>
<p>We can use <a href="#tbl-greg2doty">Table&nbsp;5</a> to convert any Gregorian calendar date to a positive <code>doty</code> number. This is especially useful for variable dates that have to be converted every year. For example, the dates of the solstices, the longest and shortest days of the year, vary slightly every year. Instead of calculating the exact <code>doty</code> number of the solstices ourselves we could translate from existing Gregorian calendar dates. Solstices and equinoxes (the points in between the solstices) are the basis of the some holidays, such as <a href="https://en.wikipedia.org/wiki/Nowruz">Nowruz</a>.</p>
<p>The dates of the solstices and the equinoxes can be used as definitions of the seasons. Each season has its opposite. The opposite of Spring is Fall and the opposite of Summer is Winter. These opposites are always occurring simultaneously, one opposing season in the Northern hemisphere and the other in the Southern hemisphere. <a href="#tbl-soleq">Table&nbsp;14</a> lists the opposing seasons in the North and South columns (which correspond to the Northern and Southern hemispheres) and the approximate dates of the solstices and the equinoxes that mark the start of each season.</p>
<section id="tbl-soleq" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="tbl-soleq"><a href="#tbl-soleq">Table&nbsp;14</a></h4>
<div class="callout callout-style-default callout-note no-icon callout-titled page-columns page-full" title="Click to toggle table expansion">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-14-contents" aria-controls="callout-14" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click to toggle table expansion
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-14" class="callout-14-contents callout-collapse collapse page-columns page-full">
<div class="callout-body-container callout-body page-columns page-full">
<div id="tbl-soleq" class="anchored page-columns page-full">
<table class="table">

<colgroup>
<col style="width: 8%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 19%">
<col style="width: 27%">
</colgroup>
<thead><tr class="header">
<th>Code</th>
<th>North</th>
<th>South</th>
<th><code>doty</code></th>
<th><code>dotm</code></th>
<th>Date</th>
<th>Event</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>S0</td>
<td>Spring</td>
<td>Fall</td>
<td>20</td>
<td>0+20</td>
<td>March 21</td>
<td>Northward Equinox</td>
</tr>
<tr class="even">
<td>S1</td>
<td>Summer</td>
<td>Winter</td>
<td>110</td>
<td>3+18</td>
<td>June 19</td>
<td>Northward Solstice</td>
</tr>
<tr class="odd">
<td>S2</td>
<td>Fall</td>
<td>Spring</td>
<td>205</td>
<td>6+21</td>
<td>September 22</td>
<td>Southward Equinox</td>
</tr>
<tr class="even">
<td>S3</td>
<td>Winter</td>
<td>Summer</td>
<td>295</td>
<td>9+20</td>
<td>December 21</td>
<td>Southward Solstice</td>
</tr>
</tbody>
</table>
<div class="quarto-table-caption margin-caption">Table&nbsp;14: Solstice and equinox Gregorian calendar and <code>doty</code> dates</div></div>
</div>
</div>
</div>
<p>Using the information in <a href="#tbl-soleq">Table&nbsp;14</a>, we can group the <code>deks</code> and <code>pents</code> in a year according to the seasons in which they occur. We identify <code>deks</code> using the first 2 digits of the 3-digit day number of any day in that <code>dek</code>. The <code>pent</code> number is twice the <code>dek</code> number plus one if the <code>dotd</code> is greater than 4 (<span class="math inline">\(dek \cdot 2 + dotd &gt; 4\)</span>). For example, <code>Day</code> <code>19</code> is the last day in <code>Dek</code> <code>1</code> and <code>Pent</code> <code>3</code>, while <code>Day</code> <code>111</code> is the second day in <code>Dek</code> <code>11</code> and <code>Pent</code> <code>22</code>.</p>
<p>We can round up the start of the first season and round down the start of the second season to obtain the division of <code>pents</code> by season as summarized in <a href="#tbl-season">Table&nbsp;15</a> It is important to note that the last season starts in <code>Pent</code> <code>59</code> of one year and ends with <code>Pent</code> <code>3</code> of the subsequent year. In common years, each season in <a href="#tbl-season">Table&nbsp;15</a> has 18 <code>pents</code> (90 days), except for the season in the second row, which has 19 <code>pents</code> (95 days). In leap years, the season in the last row of <a href="#tbl-season">Table&nbsp;15</a> has 18.2 pents (91 days).</p>
</section><section id="tbl-season" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="tbl-season"><a href="#tbl-season">Table&nbsp;15</a></h4>
<div class="callout callout-style-default callout-note no-icon callout-titled page-columns page-full" title="Click to toggle table expansion">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-15-contents" aria-controls="callout-15" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click to toggle table expansion
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-15" class="callout-15-contents callout-collapse collapse page-columns page-full">
<div class="callout-body-container callout-body page-columns page-full">
<div id="tbl-season" class="anchored page-columns page-full">
<table class="table">

<thead><tr class="header">
<th>Code</th>
<th>North</th>
<th>South</th>
<th>First</th>
<th>Last</th>
<th>Duration</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>S0</td>
<td>Spring</td>
<td>Fall</td>
<td>4</td>
<td>21</td>
<td>18</td>
</tr>
<tr class="even">
<td>S1</td>
<td>Summer</td>
<td>Winter</td>
<td>22</td>
<td>40</td>
<td>19</td>
</tr>
<tr class="odd">
<td>S2</td>
<td>Fall</td>
<td>Spring</td>
<td>41</td>
<td>58</td>
<td>18</td>
</tr>
<tr class="even">
<td>S3</td>
<td>Winter</td>
<td>Summer</td>
<td>59</td>
<td>3</td>
<td>18</td>
</tr>
</tbody>
</table>
<div class="quarto-table-caption margin-caption">Table&nbsp;15: The <code>pents</code> that begin and end each season</div></div>
</div>
</div>
</div>
</section></section><section id="sec-qdew" class="level3 page-columns page-full" data-number="5.5.2"><h3 data-number="5.5.2" class="anchored" data-anchor-id="sec-qdew">
<span class="header-section-number">5.5.2</span> <code>Qops</code>, <code>Delts</code>, <code>Eps</code> and <code>Waus</code>
</h3>
<section id="sec-q" class="level4"><h4 class="anchored" data-anchor-id="sec-q"><code>Qops</code></h4>
<p>In contrast to the variable length of seasons, other <code>Decalendar</code> units are constant length. Of these constant length units, <code>qops</code> (<code>qoppas</code>, <code>œü</code>) are most like seasons. <code>Qops</code> divide the year into four parts, but unlike seasons, <code>qops</code> do not include <code>Pent</code> <code>72</code>, the last <code>pent</code> of the year. <code>Pent</code> <code>72</code> is not included in the last <code>qop</code> so that each <code>qop</code> is 9 <code>deks</code> and 90 days long. The omission of <code>Dek</code> <code>36</code> also maintains the pattern of alternating even and odd numbers in each row. This omission leaves out only 5 or 6 days per year, because <code>Dek</code> <code>36</code> overlaps with <code>Dek</code> <code>0</code>. <a href="#tbl-q">Table&nbsp;16</a> shows the division of <code>deks</code> by <code>qop</code>.</p>
</section><section id="tbl-q" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="tbl-q"><a href="#tbl-q">Table&nbsp;16</a></h4>
<div class="callout callout-style-default callout-note no-icon callout-titled page-columns page-full" title="Click to toggle table expansion">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-16-contents" aria-controls="callout-16" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click to toggle table expansion
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-16" class="callout-16-contents callout-collapse collapse page-columns page-full">
<div class="callout-body-container callout-body page-columns page-full">
<div id="tbl-q" class="anchored page-columns page-full">
<table class="table">

<thead><tr class="header">
<th>Code</th>
<th>First</th>
<th>Last</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Q0</td>
<td>0</td>
<td>8</td>
</tr>
<tr class="even">
<td>Q1</td>
<td>9</td>
<td>17</td>
</tr>
<tr class="odd">
<td>Q2</td>
<td>18</td>
<td>26</td>
</tr>
<tr class="even">
<td>Q3</td>
<td>27</td>
<td>35</td>
</tr>
</tbody>
</table>
<div class="quarto-table-caption margin-caption">Table&nbsp;16: The <code>deks</code> that begin and end each <code>qop</code>
</div></div>
</div>
</div>
</div>
</section><section id="sec-d" class="level4"><h4 class="anchored" data-anchor-id="sec-d"><code>Delts</code></h4>
<p>In addition to <code>qops</code> shown above, <code>Decalendar</code> describes 3 other similar units called <code>delts</code> (<code>deltas</code>, <code>Œ¥</code>), <code>eps</code> (<code>epsilons</code>, <code>Œµ</code>), and <code>waus</code> (<code>œõ</code>). These units do not leave out as many days in each year, because they split the year by day, rather than by <code>dek</code>. <code>Delts</code>, <code>eps</code>, and <code>wau</code> split the year into 4, 5, and 6 parts, respectively. <code>Delts</code> are 91 days long and leave out one day at the end of common years and two days at the end of leap years. Just as above, leaving out a small number of days at the end of the year preserves a pattern that can be useful for remembering the days on which <code>delts</code> start and end. <a href="#tbl-d">Table&nbsp;17</a> list the numbers of the days that begin and end each <code>delt</code>. In <a href="#tbl-q">Table&nbsp;16</a>, not only do rows alternate between even and odd numbers, but the <code>delt</code> number is the last digit of both the start and the end day of the <code>delt</code>.</p>
</section><section id="tbl-d" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="tbl-d"><a href="#tbl-d">Table&nbsp;17</a></h4>
<div class="callout callout-style-default callout-note no-icon callout-titled page-columns page-full" title="Click to toggle table expansion">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-17-contents" aria-controls="callout-17" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click to toggle table expansion
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-17" class="callout-17-contents callout-collapse collapse page-columns page-full">
<div class="callout-body-container callout-body page-columns page-full">
<div id="tbl-d" class="anchored page-columns page-full">
<table class="table">

<thead><tr class="header">
<th>Code</th>
<th>First</th>
<th>Last</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>D0</td>
<td>0</td>
<td>90</td>
</tr>
<tr class="even">
<td>D1</td>
<td>91</td>
<td>181</td>
</tr>
<tr class="odd">
<td>D2</td>
<td>182</td>
<td>272</td>
</tr>
<tr class="even">
<td>D3</td>
<td>273</td>
<td>363</td>
</tr>
</tbody>
</table>
<div class="quarto-table-caption margin-caption">Table&nbsp;17: The days that begin and end each <code>delt</code>
</div></div>
</div>
</div>
</div>
</section><section id="sec-e" class="level4"><h4 class="anchored" data-anchor-id="sec-e"><code>Eps</code></h4>
<p>Unlike <code>delts</code>, <code>eps</code> are 73 days long and do not leave out any days from common years. <code>Qops</code>, <code>delts</code>, and <code>eps</code> all leave out leap days in leap years. <a href="#tbl-e">Table&nbsp;18</a> list the numbers of the days that begin and end each <code>ep</code>.</p>
</section><section id="tbl-e" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="tbl-e"><a href="#tbl-e">Table&nbsp;18</a></h4>
<div class="callout callout-style-default callout-note no-icon callout-titled page-columns page-full" title="Click to toggle table expansion">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-18-contents" aria-controls="callout-18" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click to toggle table expansion
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-18" class="callout-18-contents callout-collapse collapse page-columns page-full">
<div class="callout-body-container callout-body page-columns page-full">
<div id="tbl-e" class="anchored page-columns page-full">
<table class="table">

<thead><tr class="header">
<th>Code</th>
<th>First</th>
<th>Last</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>E0</td>
<td>0</td>
<td>72</td>
</tr>
<tr class="even">
<td>E1</td>
<td>73</td>
<td>145</td>
</tr>
<tr class="odd">
<td>E2</td>
<td>146</td>
<td>218</td>
</tr>
<tr class="even">
<td>E3</td>
<td>219</td>
<td>291</td>
</tr>
<tr class="odd">
<td>E4</td>
<td>292</td>
<td>364</td>
</tr>
</tbody>
</table>
<div class="quarto-table-caption margin-caption">Table&nbsp;18: The days that begin and end each <code>ep</code>
</div></div>
</div>
</div>
</div>
</section><section id="sec-w" class="level4"><h4 class="anchored" data-anchor-id="sec-w"><code>Waus</code></h4>
<p>The only unit that can include the leap year is a <code>wau</code> (<code>œõ</code>), which is 61 days long and follows a similar pattern as a <code>delt</code>, except the last <code>wau</code> in common years is 1 day short than all the others. <a href="#tbl-w">Table&nbsp;19</a> list the numbers of the days that begin and end each <code>wau</code>. As with <code>delts</code>, the <code>wau</code> number is the last digit of the numbers of its first and last day.</p>
</section><section id="tbl-w" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="tbl-w"><a href="#tbl-w">Table&nbsp;19</a></h4>
<div class="callout callout-style-default callout-note no-icon callout-titled page-columns page-full" title="Click to toggle table expansion">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-19-contents" aria-controls="callout-19" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click to toggle table expansion
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-19" class="callout-19-contents callout-collapse collapse page-columns page-full">
<div class="callout-body-container callout-body page-columns page-full">
<div id="tbl-w" class="anchored page-columns page-full">
<table class="table">

<thead><tr class="header">
<th>Code</th>
<th>First</th>
<th>Last</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>W0</td>
<td>0</td>
<td>60</td>
</tr>
<tr class="even">
<td>W1</td>
<td>61</td>
<td>121</td>
</tr>
<tr class="odd">
<td>W2</td>
<td>122</td>
<td>182</td>
</tr>
<tr class="even">
<td>W3</td>
<td>183</td>
<td>243</td>
</tr>
<tr class="odd">
<td>W4</td>
<td>244</td>
<td>304</td>
</tr>
<tr class="even">
<td>W5</td>
<td>305</td>
<td>365</td>
</tr>
</tbody>
</table>
<div class="quarto-table-caption margin-caption">Table&nbsp;19: The days that begin and end each <code>wau</code>
</div></div>
</div>
</div>
</div>
<p>All of the subyear unit codes can be preceded by a year and followed by a day number. The midpoint of common years is noon on the first day of <code>Delt</code> <code>2</code>, <code>D2+00.5</code> or <code>+182.5</code>, and the midpoint of leap years is midnight of the first day of <code>Wau</code> <code>3</code>, <code>W3+00.0</code> or <code>+183.0</code>. The first day of Spring in northern hemisphere and Fall in the southern hemisphere in the year 2000 is <code>2000S0+00</code> or <code>2000+020</code>, while the last day of this season is <code>2000S0+89</code> or <code>2000+109</code>. The subyear units are essentially date intervals, series of contiguous dates. <code>Decalendar</code> includes very powerful approaches to describing series of dates, times, and <code>stamps</code>.</p>
</section></section></section></section><section id="sec-series" class="level1 page-columns page-full" data-number="6"><h1 data-number="6">
<span class="header-section-number">6</span> Series</h1>
<p>A single <code>doty</code> number, such as <code>Day</code> <code>0</code>, implies a duration on 1 day. We can indicate a duration of multiple days by listing consecutive days in a <code>series</code>. A <code>series</code> consists of dates, times, or <code>stamps</code> separated by commas (<code>,</code>). The items in a <code>series</code> should all be of the same type. In other words, <code>series</code> should be homogeneous and not mix dates, times, and <code>stamps</code>. The first 3 days of the year in the form of a <code>series</code> would be written <code>0,1,2</code>, while the last three days would be <code>-3,-2,-1</code>. The first half a day, from midnight to noon, could be written <code>0,.1,.2,.3,.4</code>.</p>
<section id="sec-slice" class="level2 page-columns page-full" data-number="6.1"><h2 data-number="6.1" class="anchored" data-anchor-id="sec-slice">
<span class="header-section-number">6.1</span> Slices</h2>
<p>Instead of listing every single day in a <code>series</code>, we can ‚Äúslice‚Äù from <code>Day</code> <code>0</code> up to but not including <code>Day</code> <code>3</code> by writing <code>:3</code>. <code>Simple</code> <code>slices</code> consist of a <code>start</code> and a <code>stop</code> separated by a colon (<code>start:stop</code>). When the <code>start</code> is omitted, <code>slices</code> begin at the first value, which in the context of a year is <code>Day</code> <code>0</code> and in the context of a day is midnight. Therefore, writing <code>:3</code> is the same as writing <code>0:3</code>, both represent the first 3 days of the year: <code>0,1,2</code>. Using this approach, we can shorten the series <code>0,.1,.2,.3,.4</code> to <code>:.5</code>. If we omit the <code>stop</code>, instead of the <code>start</code>, we would ‚Äúslice‚Äù up to and including the last value.</p>
<p>In the context of <code>doty</code> dates, omitting the <code>stop</code> value obtains all of the days in the year after the <code>start</code>, because the default <code>stop</code> is the number of days in the year (<code>n</code>). For example, the <code>slice</code> <code>3:</code> has a <code>start</code> of <code>Day</code> <code>3</code> and a <code>stop</code> of <code>n</code>, and thus represents every day in the year except the first 3. The number of items we obtain from a <code>slice</code> is called a <code>span</code>. To calculate the <code>span</code>, we subtract the <code>start</code> from the <code>stop</code> (<span class="math inline">\(stop-start\)</span>). In a common year, the <code>span</code> of <code>003:</code> is <span class="math inline">\(n-3=362\)</span>, while in a leap year it would be <span class="math inline">\(n-3=363\)</span>. If both the <code>start</code> and the <code>stop</code> are omitted, every day is included (<span class="math inline">\(span=n-0\)</span>). <a href="#tbl-4slice">Table&nbsp;20</a> lists the seasons, <code>qops</code>, and <code>delts</code> in the form of <code>slices</code>. The superscript plus sign (‚Å∫) in <a href="#tbl-4slice">Table&nbsp;20</a> indicates a number that has to be incremented in leap years.</p>
<section id="tbl-4slice" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="tbl-4slice"><a href="#tbl-4slice">Table&nbsp;20</a></h4>
<div class="callout callout-style-default callout-note no-icon callout-titled page-columns page-full" title="Click to toggle table expansion">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-20-contents" aria-controls="callout-20" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click to toggle table expansion
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-20" class="callout-20-contents callout-collapse collapse page-columns page-full">
<div class="callout-body-container callout-body page-columns page-full">
<div id="tbl-4slice" class="anchored page-columns page-full">
<table class="table">

<thead><tr class="header">
<th>Index</th>
<th>Season</th>
<th>Qop</th>
<th>Delt</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>20:110</td>
<td>:90</td>
<td>:91</td>
</tr>
<tr class="even">
<td>1</td>
<td>110:205</td>
<td>90:180</td>
<td>91:182</td>
</tr>
<tr class="odd">
<td>2</td>
<td>205:354</td>
<td>180:270</td>
<td>182:273</td>
</tr>
<tr class="even">
<td>3</td>
<td>295:385‚Å∫</td>
<td>270:360</td>
<td>273:364</td>
</tr>
</tbody>
</table>
<div class="quarto-table-caption margin-caption">Table&nbsp;20: The slices that represent the 4-part subyear units</div></div>
</div>
</div>
</div>
</section></section><section id="sec-step" class="level2" data-number="6.2"><h2 data-number="6.2" class="anchored" data-anchor-id="sec-step">
<span class="header-section-number">6.2</span> Steps</h2>
<p>The <code>simple</code> <code>slices</code> (<code>start:stop</code>) described above are a type of time <code>segment</code>, an unbroken time interval. To break up a <code>simple</code> <code>slice</code> into a non-consecutive <code>series</code>, we can add a <code>step</code> value and create a <code>stepped</code> <code>slice</code> (<code>start:stop:step</code>). <code>stepped</code> <code>slices</code> move in <code>step</code>-sized ‚Äústeps‚Äù starting from <code>start</code>, skipping over <span class="math inline">\(step-1\)</span> items with each ‚Äústep‚Äù, keeping only items that are ‚Äústepped‚Äù on.</p>
<p>In other words, <code>stepped</code> <code>slices</code> keep items whose index (zero-based position) in the <code>slice</code> is evenly divisible by <code>step</code>. A <code>step</code> value of 1 keeps every item, because every index is divisible by 1, and a <code>step</code> of 2 keeps every other item, those with even-numbered indexes. <code>Day</code> <code>0</code> and every other third day in the year thereafter (<code>Day</code> <code>3</code>, <code>Day</code> <code>6</code>, etc.) can be represented by the <code>slice</code> <code>::3</code>.</p>
<p>To create a <code>series</code> of times on days throughout the year, we can use a <code>slice</code> with a <code>series</code> of <code>steps</code>. The <code>slice</code> <code>:365:1,1,3</code> represents all of the <code>Decalendar</code> workdays in a year. It is necessary to specify 365 as the <code>stop</code>, so that Leap Day (<code>Day</code> <code>365</code>) is not included as a workday in leap years. Similarly, <code>3::1,4</code> is a <code>seq</code> that represents all of the regular restdays, not including the Leap Day holiday.</p>
<p><code>stepped</code> <code>slices</code> cannot be included in <code>series</code>, because both use commas (<code>,</code>) and it would not possible to differentiate a <code>series</code> of <code>steps</code> from subsequent items in the <code>series</code>. The simple rule is that <code>slices</code> with more than 1 colon (<code>:</code>) cannot be part of a series. For example, <code>:365:1,1,3</code> is a <code>stepped</code> <code>slice</code> with a <code>series</code> of 3 <code>steps</code> rather than a series consisting of a <code>slice</code> and two numbers.</p>
</section><section id="sec-spread" class="level2 page-columns page-full" data-number="6.3"><h2 data-number="6.3" class="anchored" data-anchor-id="sec-spread">
<span class="header-section-number">6.3</span> Spreads</h2>
<p>To create <code>series</code> of consecutive items with breaks in between, it may be better to use a <code>spread</code> than a <code>slice</code>. <code>Simple</code> <code>spreads</code> consist of either a <code>start</code> and a <code>span</code> (<code>start&gt;span</code>) separated by a greater-than sign (<code>&gt;</code>) or a <code>stop</code> and a <code>span</code> (<code>stop&lt;span</code>) separated by a less-than (<code>&lt;</code>) sign. The default <code>start</code> and <code>stop</code> values are the same for both <code>slices</code> and <code>spreads</code>. We can <code>spread</code> forward from the default <code>start</code> to capture the first <code>span</code> days in a year. For example, the first 3 days in a year can be represented by the <code>spread</code> <code>&gt;3</code>, which is synonymous with the <code>slice</code> <code>:3</code>. In this example, the <code>start</code> is 0, while the <code>stop</code> and the <code>span</code> are both 3. In addition to default <code>start</code> and <code>stop</code> values, <code>spreads</code> also have default <code>span</code> values. A <code>spread</code> that only uses default values (<code>&gt;</code> or <code>&lt;</code>) will include every day in the year (<span class="math inline">\(span=n\)</span>). <a href="#tbl-4spread">Table&nbsp;21</a> lists the seasons, <code>qops</code>, and <code>delts</code> in the form of <code>spreads</code>.</p>
<section id="tbl-4spread" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="tbl-4spread"><a href="#tbl-4spread">Table&nbsp;21</a></h4>
<div class="callout callout-style-default callout-note no-icon callout-titled page-columns page-full" title="Click to toggle table expansion">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-21-contents" aria-controls="callout-21" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click to toggle table expansion
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-21" class="callout-21-contents callout-collapse collapse page-columns page-full">
<div class="callout-body-container callout-body page-columns page-full">
<div id="tbl-4spread" class="anchored page-columns page-full">
<table class="table">

<thead><tr class="header">
<th>Index</th>
<th>Season</th>
<th>Qop</th>
<th>Delt</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>20&gt;90</td>
<td>&gt;90</td>
<td>&gt;91</td>
</tr>
<tr class="even">
<td>1</td>
<td>110&gt;95</td>
<td>90&gt;90</td>
<td>91&gt;91</td>
</tr>
<tr class="odd">
<td>2</td>
<td>205&gt;90</td>
<td>180&gt;90</td>
<td>182&gt;91</td>
</tr>
<tr class="even">
<td>3</td>
<td>295&gt;90‚Å∫</td>
<td>270&gt;90</td>
<td>273&gt;91</td>
</tr>
</tbody>
</table>
<div class="quarto-table-caption margin-caption">Table&nbsp;21: The spreads that represent the 4-part subyear units</div></div>
</div>
</div>
</div>
<p>If we ‚Äúspread‚Äù forward from a positive <code>start</code>, the default <code>span</code> is <span class="math inline">\(n-start\)</span>. If we spread backward from a positive <code>stop</code>, the default <code>span</code> is <code>stop</code>. We can <code>spread</code> backward from the default <code>stop</code> to capture the last <code>span</code> days in a year. For example, <code>&lt;3</code> represents the last 3 days of any year. We could also use a negative <code>start</code> of <code>-3</code>, the third to last day of any year, to create the <code>slice</code> <code>-3:</code> and the <code>spread</code> <code>-3&gt;</code>, both of which are synonymous with <code>&lt;3</code>. One advantage of <code>spreads</code> over <code>slices</code> is the ability to access days from the end of a year without negative numbers. A <code>span</code> value of zero does not return any items. Negative <code>span</code> values reverse the direction of the first sign, turning <code>start</code> into <code>stop</code> and vice versa.</p>
</section></section><section id="sec-split" class="level2" data-number="6.4"><h2 data-number="6.4" class="anchored" data-anchor-id="sec-split">
<span class="header-section-number">6.4</span> Splits</h2>
<p>As with <code>stepped</code> <code>slices</code>, we can create non-consecutive <code>series</code> by ‚Äúsplitting‚Äù a <code>simple</code> <code>spread</code> (<code>start&gt;span</code> or <code>stop&lt;span</code>) into <code>split</code> <code>spread</code> (e.g.&nbsp;<code>start&gt;span&gt;split</code>) with a <code>split</code> value that works like the opposite of a <code>step</code>. While <code>steps</code> keep items that are ‚Äústepped‚Äù on, <code>splits</code> exclude items that are used to create the boundaries of the <code>splits</code>. The default <code>split</code> value is <code>span</code>, meaning that the entire <code>span</code> is included in one <code>split</code>.</p>
<p>A <code>split</code> <code>spread</code> with a <code>split</code> value of 1 (<code>start&gt;span&gt;1</code>) is the same as a <code>stepped</code> <code>slice</code> with a <code>step</code> value of 2 (<code>start:stop:2</code>). <code>Split</code> values greater than 1 but less than <code>span</code> will yield a <code>series</code> of <code>segments</code>. If <code>split</code> is zero (<code>start&gt;span&gt;0</code>), the <code>split</code> <code>spread</code> will not return any items. A negative <code>split</code> value reverses the direction of the second greater-than sign (<code>start&gt;span&gt;-2</code> and <code>start&gt;span&lt;2</code> are synonymous). This can be useful when providing a series of <code>split</code> values. Negative <code>split</code> values reverse the direction of a <code>split</code> and a <code>split</code> value of zero skips a <code>split</code>. Just like <code>stepped</code> <code>slices</code>, <code>split</code> <code>spreads</code> cannot be included in a <code>series</code>, because every <code>split</code> can have a <code>series</code> of values.</p>
<p>The direction of the second sign in <code>split</code> <code>spreads</code> determines whether we begin creating splits from the <code>start</code> (<code>&gt;</code>) or the <code>stop</code> (<code>&lt;</code>) of the <code>span</code>. If the first two values (<code>start</code> and <code>span</code> or <code>stop</code> and <code>span</code>) are blank, the direction of the first sign does not matter and the first two signs can be combined into a ‚Äúmuch greater-than sign‚Äù (<code>‚â´</code>), a ‚Äúmuch less-than sign‚Äù (<code>‚â™</code>), a diamond (<code>‚ô¢</code>), or simply an <code>x</code>. The split spreads <code>‚â´4</code> and <code>‚ô¢4</code> are synonymous; both skip every 5th day to create groups of 4 days throughout the year starting with the first 4 days of the year <code>&gt;4</code>. Notably, <code>‚â´4</code> and <code>‚ô¢4</code> will always end with a <code>segment</code> containing the last 4 days of common years, <code>360:364</code>, <code>360&gt;4</code>, or <code>364&lt;4</code>, even in leap years, because partial <code>splits</code> are not allowed.</p>
</section><section id="sec-space" class="level2 page-columns page-full" data-number="6.5"><h2 data-number="6.5" class="anchored" data-anchor-id="sec-space">
<span class="header-section-number">6.5</span> Spaces</h2>
<p>The patterns described above require that <code>splits</code> are separated by the default <code>space</code> value of 1. We can specify a different <code>space</code> value in the form <code>start&gt;span&gt;split&gt;space</code>. The <code>split</code> <code>spreads</code> <code>‚â´3&gt;2</code> and <code>‚ô¢3&gt;2</code> create 3-day <code>splits</code> separated by 2-day <code>spaces</code>. This is the pattern of workdays in the <code>Decalendar</code> system. The first <code>segment</code> of <code>‚â´3&gt;2</code> and <code>‚ô¢3&gt;2</code> can be written as <code>:3</code>, <code>&gt;3</code>, or <code>3&lt;</code>, while the last <code>segment</code> is <code>360:363</code>, <code>360&gt;3</code>, or <code>363&lt;3</code>. The workdays in the first <code>dek</code> of <code>‚â´3&gt;2</code> and <code>‚ô¢3&gt;2</code> can be written as the following <code>series</code> of <code>segments</code>: <code>:4,5:8</code>, <code>&gt;3,5&gt;3</code>, or <code>3&lt;,8&lt;3</code>. Unlike <code>stepped</code> <code>slices</code> and <code>split</code> <code>spreads</code>, <code>simple</code> <code>slices</code> and <code>simple</code> <code>spreads</code> can be used in <code>series</code>.</p>
<p>A <code>space</code> value of 0 may also be useful. For example, <code>delts</code>, <code>qops</code>, <code>eps</code>, and <code>waus</code> can be summarized as <code>split</code> <code>spreads</code> as shown in <a href="#tbl-constant">Table&nbsp;22</a>. When <code>space</code> is zero, the direction of the third sign does not matter. The <code>split</code> <code>spreads</code> <code>‚â´61&gt;0</code>, <code>‚ô¢61&gt;0</code>, <code>‚â´61&lt;0</code>, and <code>‚ô¢61&lt;0</code> all represents the <code>waus</code> in a year. <code>Waus</code> divide leap years evenly and <code>eps</code> divide common years evenly. Therefore, <code>x61&gt;0</code> and <code>x61&lt;0</code> can represent all of the <code>waus</code> in leap years, just like <code>x73&gt;0</code> and <code>x73&lt;0</code> can represent all of the <code>eps</code> in common years. The seasons can be described by a <code>spread</code> with a <code>series</code> of <code>splits</code> and a <code>space</code> of 0: <code>¬ª90,95,90,90‚Å∫&gt;0</code>.</p>
<section id="tbl-constant" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="tbl-constant"><a href="#tbl-constant">Table&nbsp;22</a></h4>
<div class="callout callout-style-default callout-note no-icon callout-titled page-columns page-full" title="Click to toggle table expansion">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-22-contents" aria-controls="callout-22" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click to toggle table expansion
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-22" class="callout-22-contents callout-collapse collapse page-columns page-full">
<div class="callout-body-container callout-body page-columns page-full">
<div id="tbl-constant" class="anchored page-columns page-full">
<table class="table">

<thead><tr class="header">
<th>Unit</th>
<th>Spread</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Delt</td>
<td><code>‚â´91&gt;0</code></td>
</tr>
<tr class="even">
<td>Qop</td>
<td><code>‚â´90&gt;0</code></td>
</tr>
<tr class="odd">
<td>Ep</td>
<td><code>‚â´73&gt;0</code></td>
</tr>
<tr class="even">
<td>Wau</td>
<td><code>‚â´61&gt;0</code></td>
</tr>
</tbody>
</table>
<div class="quarto-table-caption margin-caption">Table&nbsp;22: The spreads that represent the constant length subyear units</div></div>
</div>
</div>
</div>
<p>If <code>space</code> is greater than zero and the second and third sign are pointing in opposite directions, the resulting time <code>segments</code> will overlap. The <code>split</code> <code>spreads</code> <code>&gt;1&gt;.4&lt;.2</code> and <code>&lt;1&lt;.4&gt;.2</code> both result in the same 4 overlapping time <code>segments</code>: <code>:.4</code>, <code>.2:.6</code>, <code>.4:.8</code>, <code>.6:1</code>. Negative values can be used in a <code>series</code> of <code>spaces</code> to temporarily reverse the direction and intersperse overlapping and non-overlapping <code>segments</code>. The <code>split</code> <code>spread</code> <code>&gt;1&gt;.4&lt;.2,-.1</code> yields two <code>segments</code> that overlap and one <code>segment</code> that does not overlap: <code>:.4</code>, <code>.2:.6</code>, <code>.6:1</code>.</p>
<p>Overlapping segments could be used to plan work shifts that require a hand-off between teams. The segments created by <code>&gt;1&gt;.4&lt;.2</code> are shifted by two <code>dimes</code> in relation to each other and overlap by 2 <code>dimes</code>. If these segments are in <code>Zone</code> <code>0</code> time, they represent the normal workday (<code>.3:.7</code>) for <code>Zone</code> <code>3</code> (<code>:.4</code>), <code>Zone</code> <code>1</code>(<code>.2:.6</code>), <code>Zone</code> <code>-1</code>(<code>.4:.8</code>), and <code>Zone</code> <code>-3</code>(<code>.6:1</code>). Each of these 4 segments could represent a team working during the normal workday in their respective time zone. All but the last team would have two dimes of overlap with the subsequent team.</p>
</section></section><section id="sec-seq" class="level2 page-columns page-full" data-number="6.6"><h2 data-number="6.6" class="anchored" data-anchor-id="sec-seq">
<span class="header-section-number">6.6</span> Sequential spreads and slices</h2>
<p><code>split</code> <code>spreads</code> can be combined with other <code>spreads</code> into <code>sequences</code> called <code>seq</code> <code>spreads</code> (<code>sequential</code> <code>spreads</code>). The intuition behind <code>seq</code> <code>spreads</code> and is that each item in the first (outer) <code>spread</code> serves as a starting point for the second (inner) <code>spread</code>. The main use of <code>seq</code> <code>spreads</code> is to first ‚Äúspread‚Äù across days and then ‚Äúspread‚Äù across times in those days. We can combine <code>‚â´3&gt;2</code>, a <code>split</code> <code>spread</code> that represents the <code>Decalendar</code> workdays, with <code>.3&gt;.4</code>, a <code>simple</code> <code>spread</code> that provides the <code>start</code> and <code>span</code> of the <code>Decalendar</code> workday, to obtain <code>‚â´3&gt;2&gt;.3&gt;.4</code>, a <code>seq</code> <code>spread</code> that represents the time spent at work in a <code>Decalendar</code> year.</p>
<p>In this <code>seq</code> <code>spread</code>, the <code>split</code> is the number of workdays (<code>3</code>), the space is the number of restdays (<code>2</code>), the second-to-last number is the <code>start</code> of the workday (<code>.3</code>) and the last number is the workday <code>span</code> (<code>.4</code>). The <code>spread</code> <code>‚â´3&gt;2&gt;.3&gt;.4</code> first starts at midnight of each workday, then moves forward 3 <code>dimes</code> to the new <code>start</code> of <code>Dot</code> <code>3</code>, and then ‚Äúspreads‚Äù forward by a <code>span</code> of 4 <code>dimes</code> to the new <code>stop</code> of <code>Dot</code> <code>7</code>. We could replace the start of the workday in <code>‚â´3&gt;2&gt;.3&gt;.4</code> with the end of workday if we reverse the last sign: <code>‚â´3&gt;2&gt;.7&lt;.4</code>, because <code>.3&gt;.4</code> and <code>.7&lt;.4</code> are synonymous.</p>
<p>We combine the two <code>spreads</code> with <code>&gt;</code> because we want to move forward from the beginning of each workday, instead of backward to the previous day. If we combined <code>‚â´3&gt;2</code> and <code>.3&gt;.4</code> with <code>&lt;</code>, the resulting <code>spread</code> <code>‚â´3&gt;2&lt;.3&gt;.4</code> would move backward from midnight of each workday to <code>Dot</code> <code>7</code> of each previous day and then ‚Äúspread‚Äù forward to <code>Dot</code> <code>1</code> of each workday. We may want to use such a mixed direction <code>seq</code> <code>spreads</code> when dealing with time zones. If we lived in <code>Zone</code> <code>-3</code> and wanted to know how the workdays in <code>Zone</code> <code>4</code> translated into our time zone, we could take the <code>spread</code> <code>‚â´3&gt;2&gt;.3&gt;.4</code> and move its <code>start</code> to 7 <code>dimes</code> earlier: <code>‚â´3&gt;2&lt;.4&gt;.4</code>. <code>seq</code> <code>spreads</code> enable such time zone conversions without the use of negative numbers.</p>
<p>The <code>seq</code> <code>slice</code> equivalent of <code>‚â´3&gt;2&gt;.3&gt;.4</code> is <code>:365:1,1,3:.3:.7</code>. <code>seq</code> <code>spreads</code> will always be a more succinct way for creating long consecutive sequences with breaks than <code>slices</code>. For example, to include a lunch break in the middle of work, we could simply add a <code>split</code> and a <code>space</code> to the <code>seq</code> <code>spread</code> above: <code>‚â´3&gt;2&gt;.3&gt;.4&gt;.18&gt;.04</code>. To do the same with a <code>seq</code> <code>slice</code>, we have to create 17 steps of 0.01 and a step of .04: <code>:365:1,1,3:.3:.7:17*1%,4%</code>. Here, we are using the replication operator (<code>*</code>) to avoid writing 0.01 17 times and the percent operator (<code>%</code>) to save a few characters, but even so the <code>seq</code> <code>slice</code> is not as concise as the <code>seq</code> <code>spread</code>. <a href="#tbl-workday">Table&nbsp;23</a> shows each part of this schedule in the form of <code>simple</code> <code>slices</code> and <code>simple</code> <code>spreads</code>.</p>
<section id="tbl-workday" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="tbl-workday"><a href="#tbl-workday">Table&nbsp;23</a></h4>
<div class="callout callout-style-default callout-note no-icon callout-titled page-columns page-full" title="Click to toggle table expansion">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-23-contents" aria-controls="callout-23" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click to toggle table expansion
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-23" class="callout-23-contents callout-collapse collapse page-columns page-full">
<div class="callout-body-container callout-body page-columns page-full">
<div id="tbl-workday" class="anchored page-columns page-full">
<table class="table">

<thead><tr class="header">
<th>slice</th>
<th>spread</th>
<th>spread</th>
<th>label</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>.30:.48</td>
<td>.30&gt;.18</td>
<td>.48&lt;.18</td>
<td>work0</td>
</tr>
<tr class="even">
<td>.48:.52</td>
<td>.48&gt;.04</td>
<td>.52&lt;.04</td>
<td>lunch</td>
</tr>
<tr class="odd">
<td>.52:.70</td>
<td>.52&gt;.18</td>
<td>.70&lt;.18</td>
<td>work1</td>
</tr>
</tbody>
</table>
<div class="quarto-table-caption margin-caption">Table&nbsp;23: A workday schedule with a lunch break</div></div>
</div>
</div>
</div>
</section></section><section id="sec-pom" class="level2 page-columns page-full" data-number="6.7"><h2 data-number="6.7" class="anchored" data-anchor-id="sec-pom">
<span class="header-section-number">6.7</span> Pomodoro</h2>
<p>Another real-life application of <code>spreads</code> can be to intersperse breaks in between periods of work as in the <a href="https://en.wikipedia.org/wiki/Pomodoro_Technique">Pomodoro technique</a>. The times spent working and resting can vary, but a reasonable translation of the original Pomodoro into the <code>Declock</code> units would be to have each <code>pomodoro</code> consist of 17 <code>mils</code> of work and 3 <code>mils</code> of rest, with a 17 <code>mil</code> break after every 4 <code>pomodoros</code>. To repeat 16 <code>pomodoros</code> throughout the <code>Decalendar</code> workday, we could use the following <code>seq</code> <code>spread</code>: <code>.3&gt;.7&gt;.08&gt;.02‚ãô.017&gt;.003</code>. Here, we use the ‚Äúvery much greater-then sign‚Äù (<code>‚ãô</code>) instead of a combination of a ‚Äúmuch greater-than sign‚Äù (<code>‚â´</code>) and a greater-than sign (<code>&gt;</code>). The <code>pomodoro</code> pattern is difficult to capture with a <code>slice</code> because we have to use <code>*</code> for the steps of the inner and the outer <code>slice</code>: <code>.3:.7:8*.01,.02:::17*.001,.003</code>.</p>
<section id="sec-rep" class="level3" data-number="6.7.1"><h3 data-number="6.7.1" class="anchored" data-anchor-id="sec-rep">
<span class="header-section-number">6.7.1</span> Replication operator</h3>
<p>The replication operator (<code>*</code>) is very useful for replacing repetitive values. For example, to divide any year into six parts we could use the <code>spread</code> <code>‚â´5*61,60‚Å∫&gt;0</code> to create 5 ‚Äúsplits‚Äù that are all 61 days long and one last ‚Äúsplit‚Äù that is <code>60‚Å∫</code> days (60 days in a common year or 61 days in a leap year) long. The <code>*</code> helps us avoid the repetitiveness of writing <code>‚â´61,61,61,61,61,60‚Å∫&gt;0</code>. In addition to being used in the <code>split</code> and <code>space</code> of a <code>split</code> <code>spread</code> or the <code>step</code> of a <code>stepped</code> <code>slice</code>, the <code>*</code> can also be used in the <code>span</code> of a <code>split</code> <code>spread</code> or the <code>stop</code> of a <code>stepped</code> <code>slice</code> to indicate has many cycles of <code>splits</code> or <code>steps</code> we want to complete. For example, <code>&gt;4*&gt;5*61,60‚Å∫&gt;0</code> indicates that we want 4 years (the current year and the 3 subsequent years) ‚Äúsplit‚Äù into 6 parts for a total of 24 parts. In other words, <code>4*</code> means that we want to stop cycling after completing four yearly cycles. We can read <code>4*</code> out loud as ‚Äúfour times‚Äù because it means we intend to go through the yearly cycle ‚Äúfour times‚Äù.</p>
</section><section id="sec-per" class="level3" data-number="6.7.2"><h3 data-number="6.7.2" class="anchored" data-anchor-id="sec-per">
<span class="header-section-number">6.7.2</span> Percent, permil, and permyr operators</h3>
<p>We can make the <code>seq</code> <code>spread</code> above even shorter by using the <code>per</code> operators: <code>%</code>, <code>‚Ä∞</code>, and <code>‚Ä±</code>. Most of the values in <code>.3&gt;2*&gt;.08&gt;.02‚ãô.017&gt;.003</code> are either percents (.01 or ¬π/‚ÇÅ‚ÇÄ‚ÇÄ) or permils (.001 or ¬π/‚ÇÅ‚ÇÄ‚ÇÄ‚ÇÄ) of a day, we can therefore rewrite this <code>seq</code> <code>spread</code> as <code>.3&gt;2*&gt;8%&gt;2%‚ãô17‚Ä∞&gt;3‚Ä∞</code>. It may be difficult to write the permil (<code>‚Ä∞</code>) operator (hex: <code>2030</code>, html: <code>&amp;permil;</code>, vim: <code>%0</code>, compose: <code>%o</code>), because it does not appear on a typical keyboard, so it is also possible to write <code>.3&gt;2*&gt;8%&gt;2%‚ãô17‚Ä∞&gt;3‚Ä∞</code> as <code>.3&gt;2*&gt;8%&gt;2%‚ãô17m&gt;3m</code>, with the letter <code>m</code>, which stands for <code>mil</code>, replacing <code>‚Ä∞</code>. In addition to the percent (<code>%</code>) and permil (<code>‚Ä∞</code>) operators, there is also the permyr (<code>‚Ä±</code>) operator, which is short for permyriad and represents <code>Declock</code> <code>phrases</code> (10‚Åª‚Å¥).</p>
</section><section id="sec-3s" class="level3 page-columns page-full" data-number="6.7.3"><h3 data-number="6.7.3" class="anchored" data-anchor-id="sec-3s">
<span class="header-section-number">6.7.3</span> Pently schedules as seq spreads, splices, and sleds</h3>
<p>We can use <code>seq</code> <code>spreads</code> to describe the <a href="#sched"><code>pently</code>schedules</a>. <code>Schedule</code> <code>5</code> is particularly interesting because it includes all of the days of the year. <code>Spreads</code> that include every item can be written as <code>&gt;</code> or <code>&lt;</code>, but <code>seq</code> <code>spreads</code> must have at least 5 values. The <code>Schedule</code> <code>5</code> <code>seq</code> <code>spread</code> <code>‚â´‚â´.38&gt;.24</code> has 4 blank values, which represent the default <code>start</code>, <code>span</code>, <code>split</code>, and <code>space</code>. Similarly, the <code>Schedule</code> <code>4</code> <code>seq</code> <code>spread</code> <code>‚â´4‚â´.35&gt;.3</code> has 3 blank values, which represent the default <code>start</code>, <code>span</code>, and <code>space</code>. The <code>Schedule</code> <code>2</code> and <code>Schedule</code> <code>3</code> <code>seq</code> <code>spreads</code>, <code>‚â´2&gt;3&gt;.2&gt;.6</code> and <code>‚â´3&gt;2&gt;.3&gt;.4</code>, respectively, only have 2 blank values, the <code>start</code> and the <code>span</code>. As an alternative to <code>seq</code> <code>spreads</code> and <code>seq</code> <code>slices</code>, we can use <code>slice</code>-<code>spread</code> hybrids called <code>sleds</code> or <code>spread</code>-<code>slice</code> hybrids called <code>splices</code>. <code>Sleds</code> put the <code>slice</code> elements first (<code>start:stop:step:start&gt;span&gt;split&gt;space</code>), while <code>splices</code> start with the <code>spread</code> elements (<code>start&gt;span&gt;split&gt;space&gt;start:stop:step</code>). The <code>pently</code> schedules are easiest to write as <code>seq</code> <code>spreads</code> and <code>splices</code>, as shown in <a href="#tbl-sched">Table&nbsp;24</a>.</p>
<section id="tbl-sched" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="tbl-sched"><a href="#tbl-sched">Table&nbsp;24</a></h4>
<div class="callout callout-style-default callout-note no-icon callout-titled page-columns page-full" title="Click to toggle table expansion">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-24-contents" aria-controls="callout-24" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click to toggle table expansion
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-24" class="callout-24-contents callout-collapse collapse page-columns page-full">
<div class="callout-body-container callout-body page-columns page-full">
<div id="tbl-sched" class="anchored page-columns page-full">
<table class="table">

<colgroup>
<col style="width: 12%">
<col style="width: 18%">
<col style="width: 17%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead><tr class="header">
<th>Schedule</th>
<th>seq spread</th>
<th>splice</th>
<th>sled</th>
<th>seq slice</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>2</td>
<td>‚â´2&gt;3&gt;.2&gt;.6</td>
<td>‚â´2&gt;3&gt;.2:.8</td>
<td>:365:1,4:.2&gt;.6</td>
<td>:365:1,4:.2:.8</td>
</tr>
<tr class="even">
<td>3</td>
<td>‚â´3&gt;2&gt;.3&gt;.4</td>
<td>‚â´3&gt;2&gt;.3:.7</td>
<td>:365:1,1,3:.3&gt;.4</td>
<td>:365:1,1,3:.3:.7</td>
</tr>
<tr class="odd">
<td>4</td>
<td>‚â´4‚â´.35&gt;.3</td>
<td>‚â´4‚â´.35:.65</td>
<td>:365:3*1,2:.35&gt;.3</td>
<td>:365:3*1,2:.35:.65</td>
</tr>
<tr class="even">
<td>5</td>
<td>‚â´‚â´.38&gt;.24</td>
<td>‚â´‚â´.38:.62</td>
<td>:365::.38&gt;.24</td>
<td>:365::.38:.62</td>
</tr>
</tbody>
</table>
<div class="quarto-table-caption margin-caption">Table&nbsp;24: The seq spreads, splices, and sleds that represent the 4 pently schedules</div></div>
</div>
</div>
</div>
</section></section></section><section id="sec-trans" class="level2 page-columns page-full" data-number="6.8"><h2 data-number="6.8" class="anchored" data-anchor-id="sec-trans">
<span class="header-section-number">6.8</span> Yearly transition</h2>
<section id="sec-transc" class="level3 page-columns page-full" data-number="6.8.1"><h3 data-number="6.8.1" class="anchored" data-anchor-id="sec-transc">
<span class="header-section-number">6.8.1</span> Common years</h3>
<p>The <code>pently</code> schedules are important for the transition between years. In common years, the last <code>dek</code> of the year (<code>Dek</code> <code>36</code>) contains the last <code>pent</code> of the current year (<code>Pent</code> <code>72</code>), and the first <code>pent</code> of the subsequent year (<code>Pent</code> <code>0</code>). If these two <code>pents</code> follow the default <code>pently</code> schedule, <code>Schedule</code> <code>3</code>, the natural rhythm of 3 workdays followed by 2 rest days continues undisrupted. <a href="#tbl-common">Table&nbsp;25</a> shows the positive and negative <code>doties</code>, names, and types (work or rest) of the days in <code>Dek</code> <code>36</code> in common years. Notably, while the positive <code>doties</code> continue counting past the end of the year, the negative <code>doties</code> of the current year turn into the positive <code>doties</code> of the subsequent year. The negative <code>doties</code> in <code>Dek</code> <code>36</code> can thus serve as the bridge from the one year to the next.</p>
<section id="tbl-common" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="tbl-common"><a href="#tbl-common">Table&nbsp;25</a></h4>
<div class="callout callout-style-default callout-note no-icon callout-titled page-columns page-full" title="Click to toggle table expansion">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-25-contents" aria-controls="callout-25" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click to toggle table expansion
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-25" class="callout-25-contents callout-collapse collapse page-columns page-full">
<div class="callout-body-container callout-body page-columns page-full">
<div id="tbl-common" class="anchored page-columns page-full">
<table class="table">

<thead><tr class="header">
<th>Pos</th>
<th>Neg</th>
<th>Name</th>
<th>Type</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>360</td>
<td>-5</td>
<td>Nulday</td>
<td>work</td>
</tr>
<tr class="even">
<td>361</td>
<td>-4</td>
<td>Unoday</td>
<td>work</td>
</tr>
<tr class="odd">
<td>362</td>
<td>-3</td>
<td>Duoday</td>
<td>work</td>
</tr>
<tr class="even">
<td>363</td>
<td>-2</td>
<td>Triday</td>
<td>rest</td>
</tr>
<tr class="odd">
<td>364</td>
<td>-1</td>
<td>Quaday</td>
<td>rest</td>
</tr>
<tr class="even">
<td>365</td>
<td>0</td>
<td>Nulday</td>
<td>work</td>
</tr>
<tr class="odd">
<td>366</td>
<td>1</td>
<td>Unoday</td>
<td>work</td>
</tr>
<tr class="even">
<td>367</td>
<td>2</td>
<td>Duoday</td>
<td>work</td>
</tr>
<tr class="odd">
<td>368</td>
<td>3</td>
<td>Triday</td>
<td>rest</td>
</tr>
<tr class="even">
<td>369</td>
<td>4</td>
<td>Quaday</td>
<td>rest</td>
</tr>
</tbody>
</table>
<div class="quarto-table-caption margin-caption">Table&nbsp;25: The days in Dek 36 in common years</div></div>
</div>
</div>
</div>
</section></section><section id="sec-transl" class="level3 page-columns page-full" data-number="6.8.2"><h3 data-number="6.8.2" class="anchored" data-anchor-id="sec-transl">
<span class="header-section-number">6.8.2</span> Leap years</h3>
<p>In leap years, <code>Dek</code> <code>36</code> contains the last 6 days of the current year and the first 4 days of the subsequent year. Interestingly, <code>Dek</code> <code>36</code> always contain 6 workdays and 4 restdays, just like every other <code>dek</code>, but in leaps years these days do not follow the typical order of <code>Schedule</code> <code>3</code>. Leap years end in 3 restdays instead of 2, because Leap Day (<code>Day</code> <code>365</code>) is always a holiday. Leap day is always a <code>Penday</code> and always followed by a <code>Nulday</code>. After Leap Day, the normal rhythm of <code>Schedule</code> <code>3</code> resumes. <a href="#tbl-leap">Table&nbsp;26</a> shows the positive and negative <code>doties</code> of the days in <code>Dek</code> <code>36</code> in leap years, as well as their names and their types (work or rest).</p>
<section id="tbl-leap" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="tbl-leap"><a href="#tbl-leap">Table&nbsp;26</a></h4>
<div class="callout callout-style-default callout-note no-icon callout-titled page-columns page-full" title="Click to toggle table expansion">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-26-contents" aria-controls="callout-26" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click to toggle table expansion
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-26" class="callout-26-contents callout-collapse collapse page-columns page-full">
<div class="callout-body-container callout-body page-columns page-full">
<div id="tbl-leap" class="anchored page-columns page-full">
<table class="table">

<thead><tr class="header">
<th>Pos</th>
<th>Neg</th>
<th>Name</th>
<th>Type</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>360</td>
<td>-6</td>
<td>Nulday</td>
<td>work</td>
</tr>
<tr class="even">
<td>361</td>
<td>-5</td>
<td>Unoday</td>
<td>work</td>
</tr>
<tr class="odd">
<td>362</td>
<td>-4</td>
<td>Duoday</td>
<td>work</td>
</tr>
<tr class="even">
<td>363</td>
<td>-3</td>
<td>Triday</td>
<td>rest</td>
</tr>
<tr class="odd">
<td>364</td>
<td>-2</td>
<td>Quaday</td>
<td>rest</td>
</tr>
<tr class="even">
<td>365</td>
<td>-1</td>
<td>Penday</td>
<td>rest</td>
</tr>
<tr class="odd">
<td>366</td>
<td>0</td>
<td>Nulday</td>
<td>work</td>
</tr>
<tr class="even">
<td>367</td>
<td>1</td>
<td>Unoday</td>
<td>work</td>
</tr>
<tr class="odd">
<td>368</td>
<td>2</td>
<td>Duoday</td>
<td>work</td>
</tr>
<tr class="even">
<td>369</td>
<td>3</td>
<td>Triday</td>
<td>rest</td>
</tr>
</tbody>
</table>
<div class="quarto-table-caption margin-caption">Table&nbsp;26: The days in Dek 36 in leap years</div></div>
</div>
</div>
</div>
</section></section></section><section id="sec-holiday" class="level2 page-columns page-full" data-number="6.9"><h2 data-number="6.9" class="anchored" data-anchor-id="sec-holiday">
<span class="header-section-number">6.9</span> Holidays</h2>
<p>Leap Day is a important holiday because it occurs only once every four years except for years that start centuries not divisible by 400 and it results in the only time when there are 3 consecutive restdays in <code>Decalendar</code>. Another <code>Decalendar</code> holiday that only occurs in leap years is Dyad Day. At noon on Dyad Day, the positive and negative <code>.y</code> format <code>stamps</code> are the same (<code>+183.5</code> and <code>-183.5</code>), meaning that 183.5 days have passed in the year and 183.5 days remain in the year. Unlike Leap Day, Dyad Day is naturally a day off. Many Gregorian calendar holidays just so happen to also fall on the first day of a <code>pent</code> (<code>Nulday</code> or <code>Quaday</code>). <a href="#tbl-holiday">Table&nbsp;27</a> lists 8 such holidays and their <code>doty</code>, <code>dotm</code>, and Gregorian calendar dates.</p>
<section id="tbl-holiday" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="tbl-holiday"><a href="#tbl-holiday">Table&nbsp;27</a></h4>
<div class="callout callout-style-default callout-note no-icon callout-titled page-columns page-full" title="Click to toggle table expansion">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-27-contents" aria-controls="callout-27" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click to toggle table expansion
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-27" class="callout-27-contents callout-collapse collapse page-columns page-full">
<div class="callout-body-container callout-body page-columns page-full">
<div id="tbl-holiday" class="anchored page-columns page-full">
<table class="table">

<thead><tr class="header">
<th>Name</th>
<th>doty</th>
<th>dotm</th>
<th>date</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Cinco de Mayo</td>
<td>65</td>
<td>2+04</td>
<td>May 5</td>
</tr>
<tr class="even">
<td>Flag Day</td>
<td>105</td>
<td>3+13</td>
<td>June 14</td>
</tr>
<tr class="odd">
<td>Juneteenth Day</td>
<td>110</td>
<td>3+18</td>
<td>June 19</td>
</tr>
<tr class="even">
<td>Independence Day</td>
<td>125</td>
<td>4+03</td>
<td>July 4</td>
</tr>
<tr class="odd">
<td>All Saints‚Äô Day</td>
<td>245</td>
<td>8+00</td>
<td>November 1</td>
</tr>
<tr class="even">
<td>Veterans‚Äô Day</td>
<td>255</td>
<td>8+10</td>
<td>November 11</td>
</tr>
<tr class="odd">
<td>Boxing Day</td>
<td>300</td>
<td>9+25</td>
<td>December 26</td>
</tr>
<tr class="even">
<td>New Year‚Äôs Eve</td>
<td>305</td>
<td>9+31</td>
<td>December 31</td>
</tr>
</tbody>
</table>
<div class="quarto-table-caption margin-caption">Table&nbsp;27: Gregorian calendar holidays that happen to fall on <code>Decalendar</code> restdays</div></div>
</div>
</div>
</div>
<p>Any holiday with a fixed (rather than floating) date in the Gregorian calendar can easily be added to <code>Decalendar</code>. Holidays with floating dates do not follow easily recognizable patterns. <code>Decalendar</code> recommends redefining such dates to always be on the same <code>doty</code> every year. For example, November 25 (<code>Day</code> <code>269</code>) is a sensible fixed date for Thanksgiving, because it is exactly 30 days before Christmas (December 25, <code>Day</code> <code>299</code>) and falls on a <code>Decalendar</code> restday. When assigning fixed dates to floating date holidays, we should choose <code>Decalendar</code> restdays to avoid disrupting the normal rhythm of the <code>pently</code> schedules. Instead of gaining days off because of holidays, workers should gain additional time off from their employers. In the United States, the 11 federal holidays (88 hours = 3.6ÃÖ dimes) would translate to 9 <code>Schedule</code> <code>3</code> days offs (3.6 dimes).</p>
</section></section></section><section id="references" class="level1" data-number="7"><h1 data-number="7">
<span class="header-section-number">7</span> References</h1>
<div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-hinnant2014" class="csl-entry" role="listitem">
Hinnant, Howard. 2014. <span>‚ÄúChrono-Compatible Low-Level Date Algorithms.‚Äù</span> <a href="http://howardhinnant.github.io/date_algorithms.html" class="uri">http://howardhinnant.github.io/date_algorithms.html</a>.
</div>
</div>
</section><section id="appendix" class="level1" data-number="8"><h1 data-number="8">
<span class="header-section-number">8</span> Appendix</h1>
<!-- -->

<script type="ojs-module-contents">
{"contents":[
  {"methodName":"interpret","inline":"true","source":"htl.html`<span>${styledDotyDate}.${styledDotyTime}</span>`", "cellName":"ojs-element-id-1"}
,
  {"methodName":"interpret","inline":"true","source":"htl.html`<span>${styledDek}</span>`", "cellName":"ojs-element-id-2"}
,
  {"methodName":"interpret","inline":"true","source":"htl.html`<span>${styledDotd}</span>`", "cellName":"ojs-element-id-3"}
,
  {"methodName":"interpret","inline":"true","source":"htl.html`<span>${styledCent}</span>`", "cellName":"ojs-element-id-4"}
,
  {"methodName":"interpret","inline":"true","source":"htl.html`<span>${styledMil}</span>`", "cellName":"ojs-element-id-5"}
,
  {"methodName":"interpret","inline":"true","source":"htl.html`<span>${styledBeat}</span>`", "cellName":"ojs-element-id-6"}
,
  {"methodName":"interpret","inline":"true","source":"htl.html`<span>${styledTickTime}</span>`", "cellName":"ojs-element-id-7"}
,
  {"methodName":"interpret","inline":"true","source":"htl.html`<span>${inputDotySeason[0]}</span>`", "cellName":"ojs-element-id-8"}
,
  {"methodName":"interpret","inline":"true","source":"htl.html`<span>${inputDotySeason[1]}</span>`", "cellName":"ojs-element-id-9"}
,
  {"methodName":"interpret","inline":"true","source":"htl.html`<span>${inputDotyZodiac}</span>`", "cellName":"ojs-element-id-10"}
,
  {"methodName":"interpret","inline":"true","source":"htl.html`<span>${dtYear}+${dtDotyDate}${dtDotyTimeDelimiter}${dtDotyTime}</span>`", "cellName":"ojs-element-id-11"}
,
  {"methodName":"interpret","inline":"true","source":"htl.html`<span>${styledOutputDatetimeYear}</span>`", "cellName":"ojs-element-id-12"}
,
  {"methodName":"interpret","inline":"true","source":"htl.html`<span>${styledIsocYear}-${styledIsocMd}T${styledIsocTime}</span>`", "cellName":"ojs-element-id-13"}
,
  {"methodName":"interpret","inline":"true","source":"htl.html`<span>${styledOutputDecoYear}</span>`", "cellName":"ojs-element-id-14"}
,
  {"methodName":"interpret","inline":"true","source":"htl.html`<span>${setStyle(dotyDate, d3.schemePaired[1])}</span>`", "cellName":"ojs-element-id-15"}
,
  {"methodName":"interpret","inline":"true","source":"htl.html`<span>${setStyle(dotyTime, d3.schemePaired[2])}</span>`", "cellName":"ojs-element-id-16"}
,
  {"methodName":"interpret","inline":"true","source":"htl.html`<span>${setStyle(dotyDate, d3.schemePaired[1])}</span>`", "cellName":"ojs-element-id-17"}
,
  {"methodName":"interpret","inline":"true","source":"htl.html`<span>${setStyle(dotyTime, d3.schemePaired[2])}</span>`", "cellName":"ojs-element-id-18"}
,
  {"methodName":"interpret","inline":"true","source":"htl.html`<span>${setStyle(yearDate.toString().slice(4), d3.schemePaired[10])}</span>`", "cellName":"ojs-element-id-19"}
]}
</script></section><div id="quarto-appendix" class="default"><section id="sec-ojs-code-doty" class="level4 appendix"><h2 class="anchored quarto-appendix-heading">
<code>Doty</code> Observable code</h2><div class="quarto-appendix-contents">
</div></section><section id="functions" class="level5 appendix"><h2 class="anchored quarto-appendix-heading">Functions</h2><div class="quarto-appendix-contents">
<div class="cell">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb5" data-startfrom="318" data-source-offset="-62"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 317;"><span id="cb5-318"><a href="#cb5-318" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">set</span>(input<span class="op">,</span> value) {</span>
<span id="cb5-319"><a href="#cb5-319" aria-hidden="true" tabindex="-1"></a>  input<span class="op">.</span><span class="at">value</span> <span class="op">=</span> value<span class="op">;</span></span>
<span id="cb5-320"><a href="#cb5-320" aria-hidden="true" tabindex="-1"></a>  input<span class="op">.</span><span class="fu">dispatchEvent</span>(<span class="kw">new</span> <span class="bu">Event</span>(<span class="st">"input"</span><span class="op">,</span> {<span class="dt">bubbles</span><span class="op">:</span> <span class="kw">true</span>}))<span class="op">;</span></span>
<span id="cb5-321"><a href="#cb5-321" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-322"><a href="#cb5-322" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/@mbostock/scrubber</span></span>
<span id="cb5-323"><a href="#cb5-323" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">Scrubber</span>(values<span class="op">,</span> {</span>
<span id="cb5-324"><a href="#cb5-324" aria-hidden="true" tabindex="-1"></a>  format <span class="op">=</span> value <span class="kw">=&gt;</span> value<span class="op">,</span></span>
<span id="cb5-325"><a href="#cb5-325" aria-hidden="true" tabindex="-1"></a>  initial <span class="op">=</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb5-326"><a href="#cb5-326" aria-hidden="true" tabindex="-1"></a>  direction <span class="op">=</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb5-327"><a href="#cb5-327" aria-hidden="true" tabindex="-1"></a>  delay <span class="op">=</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb5-328"><a href="#cb5-328" aria-hidden="true" tabindex="-1"></a>  autoplay <span class="op">=</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb5-329"><a href="#cb5-329" aria-hidden="true" tabindex="-1"></a>  loop <span class="op">=</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb5-330"><a href="#cb5-330" aria-hidden="true" tabindex="-1"></a>  loopDelay <span class="op">=</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb5-331"><a href="#cb5-331" aria-hidden="true" tabindex="-1"></a>  alternate <span class="op">=</span> <span class="kw">false</span></span>
<span id="cb5-332"><a href="#cb5-332" aria-hidden="true" tabindex="-1"></a>} <span class="op">=</span> {}) {</span>
<span id="cb5-333"><a href="#cb5-333" aria-hidden="true" tabindex="-1"></a>  values <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>(values)<span class="op">;</span></span>
<span id="cb5-334"><a href="#cb5-334" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> form <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;form style="font: 12px var(--sans-serif); font-variant-numeric: tabular-nums; display: flex; height: 33px; align-items: center;"&gt;</span></span>
<span id="cb5-335"><a href="#cb5-335" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;button name=b type=button style="background-color:#002ead;color:#fff;border-radius:10px;margin-left:.4em;width: 5em;"&gt;&lt;/button&gt;</span></span>
<span id="cb5-336"><a href="#cb5-336" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;label style="display: flex; align-items: center;"&gt;</span></span>
<span id="cb5-337"><a href="#cb5-337" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;input name=i type=range min=0 max=</span><span class="sc">${</span>values<span class="op">.</span><span class="at">length</span> <span class="op">-</span> <span class="dv">1</span><span class="sc">}</span><span class="vs"> value=</span><span class="sc">${</span>initial<span class="sc">}</span><span class="vs"> step=1 style="display: none;"&gt;</span></span>
<span id="cb5-338"><a href="#cb5-338" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;output name=o style="display: none;"&gt;&lt;/output&gt;</span></span>
<span id="cb5-339"><a href="#cb5-339" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/label&gt;</span></span>
<span id="cb5-340"><a href="#cb5-340" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/form&gt;`</span><span class="op">;</span></span>
<span id="cb5-341"><a href="#cb5-341" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> frame <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb5-342"><a href="#cb5-342" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> timer <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb5-343"><a href="#cb5-343" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> interval <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb5-344"><a href="#cb5-344" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">start</span>() {</span>
<span id="cb5-345"><a href="#cb5-345" aria-hidden="true" tabindex="-1"></a>    form<span class="op">.</span><span class="at">b</span><span class="op">.</span><span class="at">textContent</span> <span class="op">=</span> <span class="st">"Pause"</span><span class="op">;</span></span>
<span id="cb5-346"><a href="#cb5-346" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (delay <span class="op">===</span> <span class="kw">null</span>) frame <span class="op">=</span> <span class="fu">requestAnimationFrame</span>(tick)<span class="op">;</span></span>
<span id="cb5-347"><a href="#cb5-347" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> interval <span class="op">=</span> <span class="pp">setInterval</span>(tick<span class="op">,</span> delay)<span class="op">;</span></span>
<span id="cb5-348"><a href="#cb5-348" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-349"><a href="#cb5-349" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">stop</span>() {</span>
<span id="cb5-350"><a href="#cb5-350" aria-hidden="true" tabindex="-1"></a>    form<span class="op">.</span><span class="at">b</span><span class="op">.</span><span class="at">textContent</span> <span class="op">=</span> <span class="st">"Play"</span><span class="op">;</span></span>
<span id="cb5-351"><a href="#cb5-351" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (frame <span class="op">!==</span> <span class="kw">null</span>) <span class="fu">cancelAnimationFrame</span>(frame)<span class="op">,</span> frame <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb5-352"><a href="#cb5-352" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (timer <span class="op">!==</span> <span class="kw">null</span>) <span class="pp">clearTimeout</span>(timer)<span class="op">,</span> timer <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb5-353"><a href="#cb5-353" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (interval <span class="op">!==</span> <span class="kw">null</span>) <span class="pp">clearInterval</span>(interval)<span class="op">,</span> interval <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb5-354"><a href="#cb5-354" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-355"><a href="#cb5-355" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">running</span>() {</span>
<span id="cb5-356"><a href="#cb5-356" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> frame <span class="op">!==</span> <span class="kw">null</span> <span class="op">||</span> timer <span class="op">!==</span> <span class="kw">null</span> <span class="op">||</span> interval <span class="op">!==</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb5-357"><a href="#cb5-357" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-358"><a href="#cb5-358" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">tick</span>() {</span>
<span id="cb5-359"><a href="#cb5-359" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="at">valueAsNumber</span> <span class="op">===</span> (direction <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">?</span> values<span class="op">.</span><span class="at">length</span> <span class="op">-</span> <span class="dv">1</span> <span class="op">:</span> direction <span class="op">&lt;</span> <span class="dv">0</span> <span class="op">?</span> <span class="dv">0</span> <span class="op">:</span> <span class="kw">NaN</span>)) {</span>
<span id="cb5-360"><a href="#cb5-360" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="op">!</span>loop) <span class="cf">return</span> <span class="fu">stop</span>()<span class="op">;</span></span>
<span id="cb5-361"><a href="#cb5-361" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (alternate) direction <span class="op">=</span> <span class="op">-</span>direction<span class="op">;</span></span>
<span id="cb5-362"><a href="#cb5-362" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (loopDelay <span class="op">!==</span> <span class="kw">null</span>) {</span>
<span id="cb5-363"><a href="#cb5-363" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (frame <span class="op">!==</span> <span class="kw">null</span>) <span class="fu">cancelAnimationFrame</span>(frame)<span class="op">,</span> frame <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb5-364"><a href="#cb5-364" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (interval <span class="op">!==</span> <span class="kw">null</span>) <span class="pp">clearInterval</span>(interval)<span class="op">,</span> interval <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb5-365"><a href="#cb5-365" aria-hidden="true" tabindex="-1"></a>        timer <span class="op">=</span> <span class="pp">setTimeout</span>(() <span class="kw">=&gt;</span> (<span class="fu">step</span>()<span class="op">,</span> <span class="fu">start</span>())<span class="op">,</span> loopDelay)<span class="op">;</span></span>
<span id="cb5-366"><a href="#cb5-366" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span><span class="op">;</span></span>
<span id="cb5-367"><a href="#cb5-367" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb5-368"><a href="#cb5-368" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb5-369"><a href="#cb5-369" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (delay <span class="op">===</span> <span class="kw">null</span>) frame <span class="op">=</span> <span class="fu">requestAnimationFrame</span>(tick)<span class="op">;</span></span>
<span id="cb5-370"><a href="#cb5-370" aria-hidden="true" tabindex="-1"></a>    <span class="fu">step</span>()<span class="op">;</span></span>
<span id="cb5-371"><a href="#cb5-371" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-372"><a href="#cb5-372" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">step</span>() {</span>
<span id="cb5-373"><a href="#cb5-373" aria-hidden="true" tabindex="-1"></a>    form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="at">valueAsNumber</span> <span class="op">=</span> (form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="at">valueAsNumber</span> <span class="op">+</span> direction <span class="op">+</span> values<span class="op">.</span><span class="at">length</span>) <span class="op">%</span> values<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb5-374"><a href="#cb5-374" aria-hidden="true" tabindex="-1"></a>    form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="fu">dispatchEvent</span>(<span class="kw">new</span> <span class="bu">CustomEvent</span>(<span class="st">"input"</span><span class="op">,</span> {<span class="dt">bubbles</span><span class="op">:</span> <span class="kw">true</span>}))<span class="op">;</span></span>
<span id="cb5-375"><a href="#cb5-375" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-376"><a href="#cb5-376" aria-hidden="true" tabindex="-1"></a>  form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="at">oninput</span> <span class="op">=</span> <span class="bu">event</span> <span class="kw">=&gt;</span> {</span>
<span id="cb5-377"><a href="#cb5-377" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="bu">event</span> <span class="op">&amp;&amp;</span> <span class="bu">event</span><span class="op">.</span><span class="at">isTrusted</span> <span class="op">&amp;&amp;</span> <span class="fu">running</span>()) <span class="fu">stop</span>()<span class="op">;</span></span>
<span id="cb5-378"><a href="#cb5-378" aria-hidden="true" tabindex="-1"></a>    form<span class="op">.</span><span class="at">value</span> <span class="op">=</span> values[form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="at">valueAsNumber</span>]<span class="op">;</span></span>
<span id="cb5-379"><a href="#cb5-379" aria-hidden="true" tabindex="-1"></a>    form<span class="op">.</span><span class="at">o</span><span class="op">.</span><span class="at">value</span> <span class="op">=</span> <span class="fu">format</span>(form<span class="op">.</span><span class="at">value</span><span class="op">,</span> form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="at">valueAsNumber</span><span class="op">,</span> values)<span class="op">;</span></span>
<span id="cb5-380"><a href="#cb5-380" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb5-381"><a href="#cb5-381" aria-hidden="true" tabindex="-1"></a>  form<span class="op">.</span><span class="at">b</span><span class="op">.</span><span class="at">onclick</span> <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb5-382"><a href="#cb5-382" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">running</span>()) <span class="cf">return</span> <span class="fu">stop</span>()<span class="op">;</span></span>
<span id="cb5-383"><a href="#cb5-383" aria-hidden="true" tabindex="-1"></a>    direction <span class="op">=</span> alternate <span class="op">&amp;&amp;</span> form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="at">valueAsNumber</span> <span class="op">===</span> values<span class="op">.</span><span class="at">length</span> <span class="op">-</span> <span class="dv">1</span> <span class="op">?</span> <span class="op">-</span><span class="dv">1</span> <span class="op">:</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb5-384"><a href="#cb5-384" aria-hidden="true" tabindex="-1"></a>    form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="at">valueAsNumber</span> <span class="op">=</span> (form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="at">valueAsNumber</span> <span class="op">+</span> direction) <span class="op">%</span> values<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb5-385"><a href="#cb5-385" aria-hidden="true" tabindex="-1"></a>    form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="fu">dispatchEvent</span>(<span class="kw">new</span> <span class="bu">CustomEvent</span>(<span class="st">"input"</span><span class="op">,</span> {<span class="dt">bubbles</span><span class="op">:</span> <span class="kw">true</span>}))<span class="op">;</span></span>
<span id="cb5-386"><a href="#cb5-386" aria-hidden="true" tabindex="-1"></a>    <span class="fu">start</span>()<span class="op">;</span></span>
<span id="cb5-387"><a href="#cb5-387" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb5-388"><a href="#cb5-388" aria-hidden="true" tabindex="-1"></a>  form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="fu">oninput</span>()<span class="op">;</span></span>
<span id="cb5-389"><a href="#cb5-389" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (autoplay) <span class="fu">start</span>()<span class="op">;</span></span>
<span id="cb5-390"><a href="#cb5-390" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span> <span class="fu">stop</span>()<span class="op">;</span></span>
<span id="cb5-391"><a href="#cb5-391" aria-hidden="true" tabindex="-1"></a>  Inputs<span class="op">.</span><span class="fu">disposal</span>(form)<span class="op">.</span><span class="fu">then</span>(stop)<span class="op">;</span></span>
<span id="cb5-392"><a href="#cb5-392" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> form<span class="op">;</span></span>
<span id="cb5-393"><a href="#cb5-393" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-394"><a href="#cb5-394" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/@juang1744/transform-input/1</span></span>
<span id="cb5-395"><a href="#cb5-395" aria-hidden="true" tabindex="-1"></a>transformInput <span class="op">=</span> <span class="kw">function</span>(target<span class="op">,</span> {<span class="dt">bind</span><span class="op">:</span> source<span class="op">,</span> transform <span class="op">=</span> identity<span class="op">,</span> involutory <span class="op">=</span> <span class="kw">false</span><span class="op">,</span> invert <span class="op">=</span> involutory <span class="op">?</span> transform <span class="op">:</span> <span class="fu">inverse</span>(transform)} <span class="op">=</span> {}){</span>
<span id="cb5-396"><a href="#cb5-396" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (source <span class="op">===</span> <span class="kw">undefined</span>) {</span>
<span id="cb5-397"><a href="#cb5-397" aria-hidden="true" tabindex="-1"></a>    source <span class="op">=</span> target<span class="op">;</span></span>
<span id="cb5-398"><a href="#cb5-398" aria-hidden="true" tabindex="-1"></a>    target <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;div&gt;</span><span class="sc">${</span>source<span class="sc">}</span><span class="vs">&lt;/div&gt;`</span><span class="op">;</span></span>
<span id="cb5-399"><a href="#cb5-399" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-400"><a href="#cb5-400" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">sourceInputHandler</span>() {</span>
<span id="cb5-401"><a href="#cb5-401" aria-hidden="true" tabindex="-1"></a>    target<span class="op">.</span><span class="fu">removeEventListener</span>(<span class="st">"input"</span><span class="op">,</span> targetInputHandler)<span class="op">;</span></span>
<span id="cb5-402"><a href="#cb5-402" aria-hidden="true" tabindex="-1"></a>    <span class="fu">setTransform</span>(target)<span class="op">.</span><span class="fu">to</span>(<span class="fu">transform</span>(source<span class="op">.</span><span class="at">value</span>))<span class="op">.</span><span class="fu">andDispatchEvent</span>()<span class="op">;</span></span>
<span id="cb5-403"><a href="#cb5-403" aria-hidden="true" tabindex="-1"></a>    target<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"input"</span><span class="op">,</span> targetInputHandler)<span class="op">;</span></span>
<span id="cb5-404"><a href="#cb5-404" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-405"><a href="#cb5-405" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">targetInputHandler</span>() {</span>
<span id="cb5-406"><a href="#cb5-406" aria-hidden="true" tabindex="-1"></a>    source<span class="op">.</span><span class="fu">removeEventListener</span>(<span class="st">"input"</span><span class="op">,</span> sourceInputHandler)<span class="op">;</span></span>
<span id="cb5-407"><a href="#cb5-407" aria-hidden="true" tabindex="-1"></a>    <span class="fu">setTransform</span>(source)<span class="op">.</span><span class="fu">to</span>(<span class="fu">invert</span>(target<span class="op">.</span><span class="at">value</span>))<span class="op">.</span><span class="fu">andDispatchEvent</span>()<span class="op">;</span></span>
<span id="cb5-408"><a href="#cb5-408" aria-hidden="true" tabindex="-1"></a>    source<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"input"</span><span class="op">,</span> sourceInputHandler)<span class="op">;</span></span>
<span id="cb5-409"><a href="#cb5-409" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-410"><a href="#cb5-410" aria-hidden="true" tabindex="-1"></a>  source<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"input"</span><span class="op">,</span> sourceInputHandler)<span class="op">;</span></span>
<span id="cb5-411"><a href="#cb5-411" aria-hidden="true" tabindex="-1"></a>  target<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"input"</span><span class="op">,</span> targetInputHandler)<span class="op">;</span></span>
<span id="cb5-412"><a href="#cb5-412" aria-hidden="true" tabindex="-1"></a>  invalidation<span class="op">.</span><span class="fu">then</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb5-413"><a href="#cb5-413" aria-hidden="true" tabindex="-1"></a>    source<span class="op">.</span><span class="fu">removeEventListener</span>(<span class="st">"input"</span><span class="op">,</span> sourceInputHandler)<span class="op">;</span></span>
<span id="cb5-414"><a href="#cb5-414" aria-hidden="true" tabindex="-1"></a>    target<span class="op">.</span><span class="fu">removeEventListener</span>(<span class="st">"input"</span><span class="op">,</span> targetInputHandler)<span class="op">;</span></span>
<span id="cb5-415"><a href="#cb5-415" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb5-416"><a href="#cb5-416" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-417"><a href="#cb5-417" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sourceInputHandler</span>()<span class="op">;</span></span>
<span id="cb5-418"><a href="#cb5-418" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> target<span class="op">;</span></span>
<span id="cb5-419"><a href="#cb5-419" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-420"><a href="#cb5-420" aria-hidden="true" tabindex="-1"></a>setTransform <span class="op">=</span> (input) <span class="kw">=&gt;</span> ({<span class="dt">to</span><span class="op">:</span> (value) <span class="kw">=&gt;</span> (input<span class="op">.</span><span class="at">value</span> <span class="op">=</span> value<span class="op">,</span> {<span class="dt">andDispatchEvent</span><span class="op">:</span> (<span class="bu">event</span> <span class="op">=</span> <span class="kw">new</span> <span class="bu">Event</span>(<span class="st">"input"</span>)) <span class="kw">=&gt;</span> input<span class="op">.</span><span class="fu">dispatchEvent</span>(<span class="bu">event</span>)})})<span class="op">;</span></span>
<span id="cb5-421"><a href="#cb5-421" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">inverse</span>(f) {</span>
<span id="cb5-422"><a href="#cb5-422" aria-hidden="true" tabindex="-1"></a>  <span class="cf">switch</span> (f) {</span>
<span id="cb5-423"><a href="#cb5-423" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="dt">identity</span><span class="op">:</span>  <span class="cf">return</span> identity<span class="op">;</span></span>
<span id="cb5-424"><a href="#cb5-424" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sqrt</span><span class="op">:</span> <span class="cf">return</span> square<span class="op">;</span></span>
<span id="cb5-425"><a href="#cb5-425" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">log</span><span class="op">:</span>  <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">exp</span><span class="op">;</span></span>
<span id="cb5-426"><a href="#cb5-426" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">exp</span><span class="op">:</span>  <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">log</span><span class="op">;</span></span>
<span id="cb5-427"><a href="#cb5-427" aria-hidden="true" tabindex="-1"></a>    <span class="cf">default</span><span class="op">:</span>        <span class="cf">return</span> (x <span class="kw">=&gt;</span> <span class="fu">solve</span>(f<span class="op">,</span> x<span class="op">,</span> x))<span class="op">;</span></span>
<span id="cb5-428"><a href="#cb5-428" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-429"><a href="#cb5-429" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">solve</span>(f<span class="op">,</span> y<span class="op">,</span> x <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb5-430"><a href="#cb5-430" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> dx <span class="op">=</span> <span class="fl">1e-6</span><span class="op">;</span></span>
<span id="cb5-431"><a href="#cb5-431" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> steps <span class="op">=</span> <span class="dv">100</span><span class="op">,</span> deltax<span class="op">,</span> fx<span class="op">,</span> dfx<span class="op">;</span></span>
<span id="cb5-432"><a href="#cb5-432" aria-hidden="true" tabindex="-1"></a>    <span class="cf">do</span> {</span>
<span id="cb5-433"><a href="#cb5-433" aria-hidden="true" tabindex="-1"></a>      fx <span class="op">=</span> <span class="fu">f</span>(x)</span>
<span id="cb5-434"><a href="#cb5-434" aria-hidden="true" tabindex="-1"></a>      dfx <span class="op">=</span> (<span class="fu">f</span>(x <span class="op">+</span> dx) <span class="op">-</span> fx) <span class="op">||</span> dx<span class="op">;</span></span>
<span id="cb5-435"><a href="#cb5-435" aria-hidden="true" tabindex="-1"></a>      deltax <span class="op">=</span> dx <span class="op">*</span> (fx <span class="op">-</span> y)<span class="op">/</span>dfx</span>
<span id="cb5-436"><a href="#cb5-436" aria-hidden="true" tabindex="-1"></a>      x <span class="op">-=</span> deltax<span class="op">;</span></span>
<span id="cb5-437"><a href="#cb5-437" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">while</span> (<span class="bu">Math</span><span class="op">.</span><span class="fu">abs</span>(deltax) <span class="op">&gt;</span> dx <span class="op">&amp;&amp;</span> <span class="op">--</span>steps <span class="op">&gt;</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb5-438"><a href="#cb5-438" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> steps <span class="op">===</span> <span class="dv">0</span> <span class="op">?</span> <span class="kw">NaN</span> <span class="op">:</span> x<span class="op">;</span></span>
<span id="cb5-439"><a href="#cb5-439" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-440"><a href="#cb5-440" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-441"><a href="#cb5-441" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">square</span>(x) {</span>
<span id="cb5-442"><a href="#cb5-442" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">*</span> x<span class="op">;</span></span>
<span id="cb5-443"><a href="#cb5-443" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-444"><a href="#cb5-444" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-445"><a href="#cb5-445" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">identity</span>(x) {</span>
<span id="cb5-446"><a href="#cb5-446" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> x<span class="op">;</span></span>
<span id="cb5-447"><a href="#cb5-447" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-448"><a href="#cb5-448" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/@observablehq/text-color-annotations-in-markdown#textcolor</span></span>
<span id="cb5-449"><a href="#cb5-449" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">setStyle</span>(content<span class="op">,</span> style <span class="op">=</span> {}) {</span>
<span id="cb5-450"><a href="#cb5-450" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">yiq</span>(color) {</span>
<span id="cb5-451"><a href="#cb5-451" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> {r<span class="op">,</span> g<span class="op">,</span> b} <span class="op">=</span> d3<span class="op">.</span><span class="fu">rgb</span>(color)<span class="op">;</span></span>
<span id="cb5-452"><a href="#cb5-452" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (r <span class="op">*</span> <span class="dv">299</span> <span class="op">+</span> g <span class="op">*</span> <span class="dv">587</span> <span class="op">+</span> b <span class="op">*</span> <span class="dv">114</span>) <span class="op">/</span> <span class="dv">1000</span> <span class="op">/</span> <span class="dv">255</span><span class="op">;</span> <span class="co">// returns values between 0 and 1</span></span>
<span id="cb5-453"><a href="#cb5-453" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-454"><a href="#cb5-454" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> {</span>
<span id="cb5-455"><a href="#cb5-455" aria-hidden="true" tabindex="-1"></a>    background<span class="op">,</span></span>
<span id="cb5-456"><a href="#cb5-456" aria-hidden="true" tabindex="-1"></a>    color <span class="op">=</span> <span class="fu">yiq</span>(background) <span class="op">&gt;=</span> <span class="fl">0.6</span> <span class="op">?</span> <span class="st">"#111"</span> <span class="op">:</span> <span class="st">"white"</span><span class="op">,</span></span>
<span id="cb5-457"><a href="#cb5-457" aria-hidden="true" tabindex="-1"></a>    padding <span class="op">=</span> <span class="st">"0 1px"</span><span class="op">,</span></span>
<span id="cb5-458"><a href="#cb5-458" aria-hidden="true" tabindex="-1"></a>    borderRadius <span class="op">=</span> <span class="st">"4px"</span><span class="op">,</span></span>
<span id="cb5-459"><a href="#cb5-459" aria-hidden="true" tabindex="-1"></a>    fontWeight <span class="op">=</span> <span class="dv">900</span><span class="op">,</span></span>
<span id="cb5-460"><a href="#cb5-460" aria-hidden="true" tabindex="-1"></a>    fontSize <span class="op">=</span> <span class="st">"1em"</span><span class="op">,</span></span>
<span id="cb5-461"><a href="#cb5-461" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span>rest</span>
<span id="cb5-462"><a href="#cb5-462" aria-hidden="true" tabindex="-1"></a>  } <span class="op">=</span> <span class="kw">typeof</span> style <span class="op">===</span> <span class="st">"string"</span> <span class="op">?</span> {<span class="dt">background</span><span class="op">:</span> style} <span class="op">:</span> style<span class="op">;</span></span>
<span id="cb5-463"><a href="#cb5-463" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> htl<span class="op">.</span><span class="fu">html</span><span class="vs">`&lt;span style=</span><span class="sc">${</span>{</span>
<span id="cb5-464"><a href="#cb5-464" aria-hidden="true" tabindex="-1"></a>    background<span class="op">,</span></span>
<span id="cb5-465"><a href="#cb5-465" aria-hidden="true" tabindex="-1"></a>    color<span class="op">,</span></span>
<span id="cb5-466"><a href="#cb5-466" aria-hidden="true" tabindex="-1"></a>    padding<span class="op">,</span></span>
<span id="cb5-467"><a href="#cb5-467" aria-hidden="true" tabindex="-1"></a>    borderRadius<span class="op">,</span></span>
<span id="cb5-468"><a href="#cb5-468" aria-hidden="true" tabindex="-1"></a>    fontWeight<span class="op">,</span></span>
<span id="cb5-469"><a href="#cb5-469" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span>rest</span>
<span id="cb5-470"><a href="#cb5-470" aria-hidden="true" tabindex="-1"></a>  }<span class="sc">}</span><span class="vs">&gt;</span><span class="sc">${</span>content<span class="sc">}</span><span class="vs">&lt;/span&gt;`</span><span class="op">;</span></span>
<span id="cb5-471"><a href="#cb5-471" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-472"><a href="#cb5-472" aria-hidden="true" tabindex="-1"></a><span class="co">// http://howardhinnant.github.io/date_algorithms.html#civil_from_days</span></span>
<span id="cb5-473"><a href="#cb5-473" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">dote2doty</span>(days <span class="op">=</span> <span class="dv">719468</span>) {</span>
<span id="cb5-474"><a href="#cb5-474" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> era <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((days <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">?</span> days <span class="op">:</span> days <span class="op">-</span> <span class="dv">146096</span>) <span class="op">/</span> <span class="dv">146097</span>)<span class="op">,</span></span>
<span id="cb5-475"><a href="#cb5-475" aria-hidden="true" tabindex="-1"></a>        dotc <span class="op">=</span> days <span class="op">-</span> era <span class="op">*</span> <span class="dv">146097</span><span class="op">,</span></span>
<span id="cb5-476"><a href="#cb5-476" aria-hidden="true" tabindex="-1"></a>        yotc <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((dotc <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(dotc <span class="op">/</span> <span class="dv">1460</span>) <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(dotc <span class="op">/</span> <span class="dv">36524</span>) <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(dotc <span class="op">/</span> <span class="dv">146096</span>)) <span class="op">/</span> <span class="dv">365</span>)<span class="op">;</span></span>
<span id="cb5-477"><a href="#cb5-477" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [yotc <span class="op">+</span> era <span class="op">*</span> <span class="dv">400</span><span class="op">,</span> dotc <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(yotc <span class="op">/</span> <span class="dv">100</span>) <span class="op">-</span> yotc <span class="op">*</span> <span class="dv">365</span> <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(yotc <span class="op">/</span> <span class="dv">4</span>)]<span class="op">;</span></span>
<span id="cb5-478"><a href="#cb5-478" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-479"><a href="#cb5-479" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">unix2doty</span>(ms <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb5-480"><a href="#cb5-480" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="fu">dote2doty</span>(ms <span class="op">/</span> <span class="dv">86400000</span> <span class="op">+</span> <span class="dv">719468</span>)</span>
<span id="cb5-481"><a href="#cb5-481" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-482"><a href="#cb5-482" aria-hidden="true" tabindex="-1"></a><span class="co">// https://howardhinnant.github.io/date_algorithms.html#days_from_civil</span></span>
<span id="cb5-483"><a href="#cb5-483" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2dote</span>(year <span class="op">=</span> <span class="dv">1969</span><span class="op">,</span> doty <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> zone <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb5-484"><a href="#cb5-484" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> cycle <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((year <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">?</span> year <span class="op">:</span> year <span class="op">-</span> <span class="dv">399</span>) <span class="op">/</span> <span class="dv">400</span>)<span class="op">,</span></span>
<span id="cb5-485"><a href="#cb5-485" aria-hidden="true" tabindex="-1"></a>    yote <span class="op">=</span> year <span class="op">-</span> cycle <span class="op">*</span> <span class="dv">400</span><span class="op">;</span></span>
<span id="cb5-486"><a href="#cb5-486" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> cycle <span class="op">*</span> <span class="dv">146097</span> <span class="op">+</span> yote <span class="op">*</span> <span class="dv">365</span> <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(yote <span class="op">/</span> <span class="dv">4</span>) <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(yote <span class="op">/</span> <span class="dv">100</span>) <span class="op">+</span> doty <span class="op">-</span> zone</span>
<span id="cb5-487"><a href="#cb5-487" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-488"><a href="#cb5-488" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2deco</span>(yearDoty <span class="op">=</span> [<span class="dv">1969</span><span class="op">,</span> <span class="dv">306</span>]<span class="op">,</span> zone <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb5-489"><a href="#cb5-489" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> yd <span class="op">=</span> <span class="fu">dote2doty</span>(<span class="fu">doty2dote</span>(yearDoty[<span class="dv">0</span>]<span class="op">,</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(yearDoty[<span class="dv">1</span>])))<span class="op">;</span></span>
<span id="cb5-490"><a href="#cb5-490" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`</span><span class="sc">${</span>yd[<span class="dv">0</span>]<span class="sc">}</span><span class="vs">+</span><span class="sc">${</span>(yd[<span class="dv">1</span>])<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">3</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}${</span></span>
<span id="cb5-491"><a href="#cb5-491" aria-hidden="true" tabindex="-1"></a>        yearDoty[<span class="dv">1</span>]<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">includes</span>(<span class="st">"."</span>) <span class="op">?</span> <span class="st">"."</span> <span class="op">+</span> (</span>
<span id="cb5-492"><a href="#cb5-492" aria-hidden="true" tabindex="-1"></a>            (yearDoty[<span class="dv">1</span>] <span class="op">&gt;</span> <span class="dv">0</span>) <span class="op">?</span> (yearDoty[<span class="dv">1</span>] <span class="op">-</span> zone)<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">split</span>(<span class="st">"."</span>)<span class="op">.</span><span class="fu">pop</span>()</span>
<span id="cb5-493"><a href="#cb5-493" aria-hidden="true" tabindex="-1"></a>            <span class="op">:</span> [<span class="op">...</span>(yearDoty[<span class="dv">1</span>] <span class="op">-</span> zone)<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">split</span>(<span class="st">"."</span>)<span class="op">.</span><span class="fu">pop</span>()]<span class="op">.</span><span class="fu">map</span>(</span>
<span id="cb5-494"><a href="#cb5-494" aria-hidden="true" tabindex="-1"></a>                (e<span class="op">,</span> i<span class="op">,</span> a) <span class="kw">=&gt;</span> (i <span class="op">+</span> <span class="dv">1</span> <span class="op">===</span> a<span class="op">.</span><span class="at">length</span>) <span class="op">?</span> <span class="dv">10</span> <span class="op">-</span> e <span class="op">:</span> <span class="dv">9</span> <span class="op">-</span> e</span>
<span id="cb5-495"><a href="#cb5-495" aria-hidden="true" tabindex="-1"></a>            )<span class="op">.</span><span class="fu">join</span>(<span class="st">""</span>)</span>
<span id="cb5-496"><a href="#cb5-496" aria-hidden="true" tabindex="-1"></a>        ) <span class="op">:</span> <span class="st">""</span></span>
<span id="cb5-497"><a href="#cb5-497" aria-hidden="true" tabindex="-1"></a>    <span class="sc">}</span><span class="vs">`</span></span>
<span id="cb5-498"><a href="#cb5-498" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-499"><a href="#cb5-499" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">unix2deco</span>(ms <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb5-500"><a href="#cb5-500" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">doty2deco</span>(<span class="fu">unix2doty</span>(ms))<span class="op">;</span></span>
<span id="cb5-501"><a href="#cb5-501" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb5-502"><a href="#cb5-502" aria-hidden="true" tabindex="-1"></a><span class="co">// http://howardhinnant.github.io/date_algorithms.html#days_from_civil</span></span>
<span id="cb5-503"><a href="#cb5-503" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">greg2doty</span>(month <span class="op">=</span> <span class="dv">1</span><span class="op">,</span> day <span class="op">=</span> <span class="dv">1</span>) {</span>
<span id="cb5-504"><a href="#cb5-504" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(</span>
<span id="cb5-505"><a href="#cb5-505" aria-hidden="true" tabindex="-1"></a>        (<span class="dv">153</span> <span class="op">*</span> (month <span class="op">&gt;</span> <span class="dv">2</span> <span class="op">?</span> month <span class="op">-</span> <span class="dv">3</span> <span class="op">:</span> month <span class="op">+</span> <span class="dv">9</span>) <span class="op">+</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">5</span> <span class="op">+</span> day <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb5-506"><a href="#cb5-506" aria-hidden="true" tabindex="-1"></a>)}</span>
<span id="cb5-507"><a href="#cb5-507" aria-hidden="true" tabindex="-1"></a><span class="co">// http://howardhinnant.github.io/date_algorithms.html#civil_from_days</span></span>
<span id="cb5-508"><a href="#cb5-508" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2greg</span>(doty <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb5-509"><a href="#cb5-509" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> m <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((<span class="dv">5</span> <span class="op">*</span> doty <span class="op">+</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">153</span>)<span class="op">;</span></span>
<span id="cb5-510"><a href="#cb5-510" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [<span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(m <span class="op">&lt;</span> <span class="dv">10</span> <span class="op">?</span> m <span class="op">+</span> <span class="dv">3</span> <span class="op">:</span> m <span class="op">-</span> <span class="dv">9</span>)<span class="op">,</span> doty <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((<span class="dv">153</span> <span class="op">*</span> m <span class="op">+</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">5</span>) <span class="op">+</span> <span class="dv">1</span>]<span class="op">;</span></span>
<span id="cb5-511"><a href="#cb5-511" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-512"><a href="#cb5-512" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2toty</span>(doty <span class="op">=</span> <span class="dv">306</span>) {</span>
<span id="cb5-513"><a href="#cb5-513" aria-hidden="true" tabindex="-1"></a>    doty <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(doty)</span>
<span id="cb5-514"><a href="#cb5-514" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (<span class="dv">205</span> <span class="op">&lt;=</span> doty <span class="op">&amp;&amp;</span> doty <span class="op">&lt;</span> <span class="dv">295</span>) <span class="op">?</span> [<span class="st">"FallüçÅ"</span><span class="op">,</span> <span class="st">"Springüåº"</span>] <span class="op">:</span></span>
<span id="cb5-515"><a href="#cb5-515" aria-hidden="true" tabindex="-1"></a>        (<span class="dv">110</span> <span class="op">&lt;=</span> doty <span class="op">&amp;&amp;</span> doty <span class="op">&lt;</span> <span class="dv">205</span>) <span class="op">?</span> [<span class="st">"Summer‚òÄÔ∏è"</span><span class="op">,</span> <span class="st">"Winter‚ùÑÔ∏è"</span>] <span class="op">:</span></span>
<span id="cb5-516"><a href="#cb5-516" aria-hidden="true" tabindex="-1"></a>        (<span class="dv">20</span> <span class="op">&lt;=</span> doty <span class="op">&amp;&amp;</span> doty <span class="op">&lt;</span> <span class="dv">110</span>) <span class="op">?</span> [<span class="st">"Springüåº"</span><span class="op">,</span> <span class="st">"FallüçÅ"</span>] <span class="op">:</span></span>
<span id="cb5-517"><a href="#cb5-517" aria-hidden="true" tabindex="-1"></a>        (<span class="dv">0</span> <span class="op">&lt;=</span> doty <span class="op">&amp;&amp;</span> doty <span class="op">&lt;</span> <span class="dv">20</span>) <span class="op">||</span> (<span class="dv">295</span> <span class="op">&lt;=</span> doty <span class="op">&amp;&amp;</span> doty <span class="op">&lt;=</span> <span class="dv">365</span>)</span>
<span id="cb5-518"><a href="#cb5-518" aria-hidden="true" tabindex="-1"></a>        <span class="op">?</span> [<span class="st">"Winter‚ùÑÔ∏è"</span><span class="op">,</span> <span class="st">"Summer‚òÄÔ∏è"</span>] <span class="op">:</span> <span class="st">"Unknown"</span></span>
<span id="cb5-519"><a href="#cb5-519" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-520"><a href="#cb5-520" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2zodi</span>(doty <span class="op">=</span> <span class="dv">306</span>) {</span>
<span id="cb5-521"><a href="#cb5-521" aria-hidden="true" tabindex="-1"></a>    doty <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(doty)</span>
<span id="cb5-522"><a href="#cb5-522" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (<span class="dv">20</span> <span class="op">&lt;=</span> doty <span class="op">&amp;&amp;</span> doty <span class="op">&lt;</span> <span class="dv">50</span>) <span class="op">?</span> <span class="st">"Aries‚ôàÔ∏è"</span> <span class="op">:</span></span>
<span id="cb5-523"><a href="#cb5-523" aria-hidden="true" tabindex="-1"></a>     (<span class="dv">50</span> <span class="op">&lt;=</span> doty <span class="op">&amp;&amp;</span> doty <span class="op">&lt;</span> <span class="dv">81</span>) <span class="op">?</span> <span class="st">"Taurus‚ôâÔ∏è"</span> <span class="op">:</span></span>
<span id="cb5-524"><a href="#cb5-524" aria-hidden="true" tabindex="-1"></a>     (<span class="dv">81</span> <span class="op">&lt;=</span> doty <span class="op">&amp;&amp;</span> doty <span class="op">&lt;</span> <span class="dv">112</span>) <span class="op">?</span> <span class="st">"Gemini‚ôäÔ∏è"</span> <span class="op">:</span></span>
<span id="cb5-525"><a href="#cb5-525" aria-hidden="true" tabindex="-1"></a>     (<span class="dv">112</span> <span class="op">&lt;=</span> doty <span class="op">&amp;&amp;</span> doty <span class="op">&lt;</span> <span class="dv">144</span>) <span class="op">?</span> <span class="st">"Cancer‚ôãÔ∏è"</span> <span class="op">:</span></span>
<span id="cb5-526"><a href="#cb5-526" aria-hidden="true" tabindex="-1"></a>     (<span class="dv">144</span> <span class="op">&lt;=</span> doty <span class="op">&amp;&amp;</span> doty <span class="op">&lt;</span> <span class="dv">175</span>) <span class="op">?</span> <span class="st">"Leo‚ôåÔ∏è"</span> <span class="op">:</span></span>
<span id="cb5-527"><a href="#cb5-527" aria-hidden="true" tabindex="-1"></a>     (<span class="dv">175</span> <span class="op">&lt;=</span> doty <span class="op">&amp;&amp;</span> doty <span class="op">&lt;</span> <span class="dv">206</span>) <span class="op">?</span> <span class="st">"Virgo‚ôçÔ∏è"</span> <span class="op">:</span></span>
<span id="cb5-528"><a href="#cb5-528" aria-hidden="true" tabindex="-1"></a>     (<span class="dv">206</span> <span class="op">&lt;=</span> doty <span class="op">&amp;&amp;</span> doty <span class="op">&lt;</span> <span class="dv">236</span>) <span class="op">?</span> <span class="st">"Libra‚ôéÔ∏è"</span> <span class="op">:</span></span>
<span id="cb5-529"><a href="#cb5-529" aria-hidden="true" tabindex="-1"></a>     (<span class="dv">236</span> <span class="op">&lt;=</span> doty <span class="op">&amp;&amp;</span> doty <span class="op">&lt;</span> <span class="dv">266</span>) <span class="op">?</span> <span class="st">"Scorpio‚ôèÔ∏è"</span> <span class="op">:</span></span>
<span id="cb5-530"><a href="#cb5-530" aria-hidden="true" tabindex="-1"></a>     (<span class="dv">266</span> <span class="op">&lt;=</span> doty <span class="op">&amp;&amp;</span> doty <span class="op">&lt;</span> <span class="dv">296</span>) <span class="op">?</span> <span class="st">"Sagittarius‚ôêÔ∏è"</span> <span class="op">:</span></span>
<span id="cb5-531"><a href="#cb5-531" aria-hidden="true" tabindex="-1"></a>     (<span class="dv">296</span> <span class="op">&lt;=</span> doty <span class="op">&amp;&amp;</span> doty <span class="op">&lt;</span> <span class="dv">325</span>) <span class="op">?</span> <span class="st">"Capricorn‚ôëÔ∏è"</span> <span class="op">:</span></span>
<span id="cb5-532"><a href="#cb5-532" aria-hidden="true" tabindex="-1"></a>     (<span class="dv">325</span> <span class="op">&lt;=</span> doty <span class="op">&amp;&amp;</span> doty <span class="op">&lt;</span> <span class="dv">355</span>) <span class="op">?</span> <span class="st">"Aquarius‚ôíÔ∏è"</span> <span class="op">:</span></span>
<span id="cb5-533"><a href="#cb5-533" aria-hidden="true" tabindex="-1"></a>     (<span class="dv">355</span> <span class="op">&lt;=</span> doty <span class="op">&amp;&amp;</span> doty <span class="op">&lt;=</span> <span class="dv">365</span>) <span class="op">||</span> (<span class="dv">0</span> <span class="op">&lt;=</span> doty <span class="op">&amp;&amp;</span> doty <span class="op">&lt;</span> <span class="dv">20</span>)</span>
<span id="cb5-534"><a href="#cb5-534" aria-hidden="true" tabindex="-1"></a>     <span class="op">?</span> <span class="st">"Pisces‚ôìÔ∏è"</span> <span class="op">:</span> <span class="st">"Unknown"</span></span>
<span id="cb5-535"><a href="#cb5-535" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-536"><a href="#cb5-536" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2month</span>(doty <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb5-537"><a href="#cb5-537" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> m <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((<span class="dv">5</span> <span class="op">*</span> doty <span class="op">+</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">153</span>)<span class="op">;</span></span>
<span id="cb5-538"><a href="#cb5-538" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(m <span class="op">&lt;</span> <span class="dv">10</span> <span class="op">?</span> m <span class="op">+</span> <span class="dv">3</span> <span class="op">:</span> m <span class="op">-</span> <span class="dv">9</span>)<span class="op">;</span></span>
<span id="cb5-539"><a href="#cb5-539" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-540"><a href="#cb5-540" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">month2doty</span>(month <span class="op">=</span> <span class="dv">1</span>) {</span>
<span id="cb5-541"><a href="#cb5-541" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(</span>
<span id="cb5-542"><a href="#cb5-542" aria-hidden="true" tabindex="-1"></a>        (<span class="dv">153</span> <span class="op">*</span> (month <span class="op">&gt;</span> <span class="dv">2</span> <span class="op">?</span> month <span class="op">-</span> <span class="dv">3</span> <span class="op">:</span> month <span class="op">+</span> <span class="dv">9</span>) <span class="op">+</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">5</span></span>
<span id="cb5-543"><a href="#cb5-543" aria-hidden="true" tabindex="-1"></a>)}</span>
<span id="cb5-544"><a href="#cb5-544" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2dotm</span>(doty <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb5-545"><a href="#cb5-545" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> m <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((<span class="dv">5</span> <span class="op">*</span> doty <span class="op">+</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">153</span>)<span class="op">;</span></span>
<span id="cb5-546"><a href="#cb5-546" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> doty <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((<span class="dv">153</span> <span class="op">*</span> m <span class="op">+</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">5</span>) <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb5-547"><a href="#cb5-547" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-6" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-7" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-8" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-9" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-10" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-11" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-12" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-13" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-14" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-15" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-16" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-17" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-18" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-19" data-nodetype="declaration">

</div>
</div>
</div>
</div>
</div></section><section id="variables" class="level5 appendix"><h2 class="anchored quarto-appendix-heading">Variables</h2><div class="quarto-appendix-contents">
<div class="cell" data-output="all">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb6" data-startfrom="554" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 553;"><span id="cb6-554"><a href="#cb6-554" aria-hidden="true" tabindex="-1"></a>width</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-1" data-nodetype="expression">

</div>
</div>
</div>
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb7" data-startfrom="555" data-source-offset="-6"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 554;"><span id="cb7-555"><a href="#cb7-555" aria-hidden="true" tabindex="-1"></a>unix <span class="op">=</span> {</span>
<span id="cb7-556"><a href="#cb7-556" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span>(<span class="kw">true</span>) {</span>
<span id="cb7-557"><a href="#cb7-557" aria-hidden="true" tabindex="-1"></a>    <span class="kw">yield</span> <span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>()<span class="op">;</span></span>
<span id="cb7-558"><a href="#cb7-558" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-559"><a href="#cb7-559" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-560"><a href="#cb7-560" aria-hidden="true" tabindex="-1"></a>tick <span class="op">=</span> {</span>
<span id="cb7-561"><a href="#cb7-561" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb7-562"><a href="#cb7-562" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span> (<span class="kw">true</span>) {</span>
<span id="cb7-563"><a href="#cb7-563" aria-hidden="true" tabindex="-1"></a>    <span class="kw">yield</span> Promises<span class="op">.</span><span class="fu">tick</span>(<span class="dv">864</span><span class="op">,</span> <span class="op">++</span>i)<span class="op">;</span></span>
<span id="cb7-564"><a href="#cb7-564" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-565"><a href="#cb7-565" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-566"><a href="#cb7-566" aria-hidden="true" tabindex="-1"></a>tickDate <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(tick <span class="op">/</span> <span class="fl">1e5</span>)</span>
<span id="cb7-567"><a href="#cb7-567" aria-hidden="true" tabindex="-1"></a>tickTime <span class="op">=</span> tick <span class="op">%</span> <span class="fl">1e5</span></span>
<span id="cb7-568"><a href="#cb7-568" aria-hidden="true" tabindex="-1"></a>tickDelimiter <span class="op">=</span> (tickDate <span class="op">&gt;</span> <span class="dv">0</span>) <span class="op">?</span> <span class="st">"."</span> <span class="op">:</span> <span class="st">""</span></span>
<span id="cb7-569"><a href="#cb7-569" aria-hidden="true" tabindex="-1"></a>barTime <span class="op">=</span> <span class="fu">unix2dote</span>(unix)<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">split</span>(<span class="st">"."</span>)[<span class="dv">1</span>]<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">8</span>)</span>
<span id="cb7-570"><a href="#cb7-570" aria-hidden="true" tabindex="-1"></a>barCents <span class="op">=</span> barTime<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">2</span>)</span>
<span id="cb7-571"><a href="#cb7-571" aria-hidden="true" tabindex="-1"></a>barMils <span class="op">=</span> barTime[<span class="dv">2</span>]</span>
<span id="cb7-572"><a href="#cb7-572" aria-hidden="true" tabindex="-1"></a>barBeats <span class="op">=</span> barTime<span class="op">.</span><span class="fu">slice</span>(<span class="dv">3</span><span class="op">,</span> <span class="dv">5</span>)</span>
<span id="cb7-573"><a href="#cb7-573" aria-hidden="true" tabindex="-1"></a>barMb <span class="op">=</span> barTime<span class="op">.</span><span class="fu">slice</span>(<span class="dv">5</span>)</span>
<span id="cb7-574"><a href="#cb7-574" aria-hidden="true" tabindex="-1"></a>deco <span class="op">=</span> <span class="fu">unix2deco</span>(unix)<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">14</span>)</span>
<span id="cb7-575"><a href="#cb7-575" aria-hidden="true" tabindex="-1"></a>doty <span class="op">=</span> deco<span class="op">.</span><span class="fu">slice</span>(<span class="dv">5</span>)</span>
<span id="cb7-576"><a href="#cb7-576" aria-hidden="true" tabindex="-1"></a>dotyDate <span class="op">=</span> doty<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">3</span>)</span>
<span id="cb7-577"><a href="#cb7-577" aria-hidden="true" tabindex="-1"></a>dotyTime <span class="op">=</span> doty<span class="op">.</span><span class="fu">slice</span>(<span class="dv">4</span>)</span>
<span id="cb7-578"><a href="#cb7-578" aria-hidden="true" tabindex="-1"></a>dotyDek <span class="op">=</span> doty<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">2</span>)</span>
<span id="cb7-579"><a href="#cb7-579" aria-hidden="true" tabindex="-1"></a>dotyDotd <span class="op">=</span> doty[<span class="dv">2</span>]</span>
<span id="cb7-580"><a href="#cb7-580" aria-hidden="true" tabindex="-1"></a>iso <span class="op">=</span> {</span>
<span id="cb7-581"><a href="#cb7-581" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span>(<span class="kw">true</span>) {</span>
<span id="cb7-582"><a href="#cb7-582" aria-hidden="true" tabindex="-1"></a>    <span class="kw">yield</span> <span class="kw">new</span> <span class="bu">Date</span>()<span class="op">.</span><span class="fu">toISOString</span>()</span>
<span id="cb7-583"><a href="#cb7-583" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-584"><a href="#cb7-584" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-585"><a href="#cb7-585" aria-hidden="true" tabindex="-1"></a>isoDate <span class="op">=</span> iso<span class="op">.</span><span class="fu">slice</span>(<span class="dv">5</span><span class="op">,</span> <span class="dv">10</span>)</span>
<span id="cb7-586"><a href="#cb7-586" aria-hidden="true" tabindex="-1"></a>isoTime <span class="op">=</span> iso<span class="op">.</span><span class="fu">slice</span>(<span class="dv">11</span><span class="op">,</span> <span class="dv">19</span>)</span>
<span id="cb7-587"><a href="#cb7-587" aria-hidden="true" tabindex="-1"></a>season <span class="op">=</span> <span class="fu">doty2toty</span>(dotyDate)</span>
<span id="cb7-588"><a href="#cb7-588" aria-hidden="true" tabindex="-1"></a>zodiac <span class="op">=</span> <span class="fu">doty2zodi</span>(dotyDate)</span>
<span id="cb7-589"><a href="#cb7-589" aria-hidden="true" tabindex="-1"></a>inputDotySeason <span class="op">=</span> <span class="fu">doty2toty</span>(inputDoty)</span>
<span id="cb7-590"><a href="#cb7-590" aria-hidden="true" tabindex="-1"></a>inputDotyZodiac <span class="op">=</span> <span class="fu">doty2zodi</span>(inputDoty)</span>
<span id="cb7-591"><a href="#cb7-591" aria-hidden="true" tabindex="-1"></a>numbers <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>({<span class="dt">length</span><span class="op">:</span> <span class="dv">366</span>}<span class="op">,</span> (_<span class="op">,</span> i) <span class="kw">=&gt;</span> i)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-6" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-7" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-8" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-9" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-10" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-11" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-12" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-13" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-14" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-15" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-16" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-17" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-18" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-19" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-20" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-21" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-22" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-23" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-24" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-25" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb8" data-startfrom="595" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 594;"><span id="cb8-595"><a href="#cb8-595" aria-hidden="true" tabindex="-1"></a>styledDotyDate <span class="op">=</span> <span class="fu">setStyle</span>(dotyDate<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">1</span>])</span>
<span id="cb8-596"><a href="#cb8-596" aria-hidden="true" tabindex="-1"></a>styledDotyTime <span class="op">=</span> <span class="fu">setStyle</span>(dotyTime<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">2</span>])</span>
<span id="cb8-597"><a href="#cb8-597" aria-hidden="true" tabindex="-1"></a>styledTickTime <span class="op">=</span> <span class="fu">setStyle</span>(tickTime<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">2</span>])</span>
<span id="cb8-598"><a href="#cb8-598" aria-hidden="true" tabindex="-1"></a>styledDek <span class="op">=</span> <span class="fu">setStyle</span>(dotyDek<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">0</span>])</span>
<span id="cb8-599"><a href="#cb8-599" aria-hidden="true" tabindex="-1"></a>styledDotd <span class="op">=</span> <span class="fu">setStyle</span>(dotyDotd<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">9</span>])</span>
<span id="cb8-600"><a href="#cb8-600" aria-hidden="true" tabindex="-1"></a>styledCent <span class="op">=</span> <span class="fu">setStyle</span>(dotyTime<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">7</span>])</span>
<span id="cb8-601"><a href="#cb8-601" aria-hidden="true" tabindex="-1"></a>styledMil <span class="op">=</span> <span class="fu">setStyle</span>(dotyTime[<span class="dv">2</span>]<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">6</span>])</span>
<span id="cb8-602"><a href="#cb8-602" aria-hidden="true" tabindex="-1"></a>styledBeat <span class="op">=</span> <span class="fu">setStyle</span>(dotyTime<span class="op">.</span><span class="fu">slice</span>(<span class="dv">3</span><span class="op">,</span> <span class="dv">5</span>)<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">11</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-7-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-7-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-7-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-7-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-7-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-7-6" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-7-7" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-7-8" data-nodetype="declaration">

</div>
</div>
</div>
</div>
</div></section><section id="set-values" class="level5 appendix"><h2 class="anchored quarto-appendix-heading">Set values</h2><div class="quarto-appendix-contents">
<div class="cell">
<details class="hidden"><summary>Code</summary><div class="sourceCode cell-code hidden" id="cb9" data-startfrom="608" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 607;"><span id="cb9-608"><a href="#cb9-608" aria-hidden="true" tabindex="-1"></a><span class="kw">set</span>(viewof inputDoty<span class="op">,</span> scrubberDoty)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<div id="ojs-cell-8" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="hidden"><summary>Code</summary><div class="sourceCode cell-code hidden" id="cb10" data-startfrom="613" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 612;"><span id="cb10-613"><a href="#cb10-613" aria-hidden="true" tabindex="-1"></a><span class="kw">set</span>(viewof decoOutput<span class="op">,</span> <span class="vs">`1969+</span><span class="sc">${</span>scrubberDeco<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">3</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}</span><span class="vs">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<div id="ojs-cell-9" data-nodetype="expression">

</div>
</div>
</div>
</div></section><section id="sec-ojs-code-deco" class="level4 appendix"><h2 class="anchored quarto-appendix-heading">
<code>Deco</code> Observable code</h2><div class="quarto-appendix-contents">
</div></section><section id="functions-1" class="level5 appendix"><h2 class="anchored quarto-appendix-heading">Functions</h2><div class="quarto-appendix-contents">
<div class="cell">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb15" data-startfrom="699" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 698;"><span id="cb15-699"><a href="#cb15-699" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">zone2hour</span>(zone <span class="op">=</span> <span class="st">"Z"</span>) {</span>
<span id="cb15-700"><a href="#cb15-700" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (zone <span class="op">=</span> zone<span class="op">.</span><span class="fu">toUpperCase</span>()) <span class="op">==</span> <span class="st">"Z"</span> <span class="op">?</span> <span class="dv">0</span></span>
<span id="cb15-701"><a href="#cb15-701" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> zone <span class="op">&gt;</span> <span class="st">"@"</span> <span class="op">&amp;&amp;</span> zone <span class="op">&lt;</span> <span class="st">"J"</span> <span class="op">?</span> zone<span class="op">.</span><span class="fu">charCodeAt</span>() <span class="op">-</span> <span class="dv">64</span></span>
<span id="cb15-702"><a href="#cb15-702" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> zone <span class="op">&gt;</span> <span class="st">"J"</span> <span class="op">&amp;&amp;</span> zone <span class="op">&lt;</span> <span class="st">"N"</span> <span class="op">?</span> zone<span class="op">.</span><span class="fu">charCodeAt</span>() <span class="op">-</span> <span class="dv">65</span></span>
<span id="cb15-703"><a href="#cb15-703" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> zone <span class="op">&lt;</span> <span class="st">"Z"</span> <span class="op">&amp;&amp;</span> zone <span class="op">&gt;</span> <span class="st">"M"</span> <span class="op">?</span> <span class="op">-</span>(zone<span class="op">.</span><span class="fu">charCodeAt</span>() <span class="op">-</span> <span class="dv">77</span>)</span>
<span id="cb15-704"><a href="#cb15-704" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> zone<span class="op">;</span></span>
<span id="cb15-705"><a href="#cb15-705" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-706"><a href="#cb15-706" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">deco2doty</span>(timestamp <span class="op">=</span> <span class="st">"1969+306.00000Z"</span>) {</span>
<span id="cb15-707"><a href="#cb15-707" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> arr <span class="op">=</span> timestamp<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">split</span>(<span class="ss">/</span><span class="sc">(?</span><span class="ss">=</span><span class="sc">[+-]|[a-zA-Z])</span><span class="ss">/</span><span class="op">,</span> <span class="dv">3</span>)<span class="op">;</span></span>
<span id="cb15-708"><a href="#cb15-708" aria-hidden="true" tabindex="-1"></a>    <span class="cf">switch</span> (arr<span class="op">.</span><span class="at">length</span>) {</span>
<span id="cb15-709"><a href="#cb15-709" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="dv">1</span><span class="op">:</span> <span class="cf">return</span> [<span class="fu">unix2doty</span>(<span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>())[<span class="dv">0</span>]<span class="op">,</span> <span class="pp">parseFloat</span>(arr[<span class="dv">0</span>])<span class="op">,</span> <span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb15-710"><a href="#cb15-710" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="dv">2</span><span class="op">:</span> <span class="cf">return</span> (<span class="ss">/</span><span class="sc">^[a-zA-Z]+$</span><span class="ss">/</span><span class="op">.</span><span class="fu">test</span>(arr[<span class="dv">1</span>]))</span>
<span id="cb15-711"><a href="#cb15-711" aria-hidden="true" tabindex="-1"></a>            <span class="op">?</span> [<span class="fu">unix2doty</span>(<span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>())[<span class="dv">0</span>]<span class="op">,</span> <span class="pp">parseFloat</span>(arr[<span class="dv">0</span>])<span class="op">,</span> <span class="fu">zone2hour</span>(arr[<span class="dv">1</span>]) <span class="op">/</span> <span class="dv">24</span>]</span>
<span id="cb15-712"><a href="#cb15-712" aria-hidden="true" tabindex="-1"></a>            <span class="op">:</span> [<span class="pp">parseFloat</span>(arr[<span class="dv">0</span>])<span class="op">,</span> <span class="pp">parseFloat</span>(arr[<span class="dv">1</span>])<span class="op">,</span> <span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb15-713"><a href="#cb15-713" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb15-714"><a href="#cb15-714" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [<span class="pp">parseFloat</span>(arr[<span class="dv">0</span>])<span class="op">,</span> <span class="pp">parseFloat</span>(arr[<span class="dv">1</span>])<span class="op">,</span> <span class="ss">/</span><span class="sc">^[a-zA-Z]+$</span><span class="ss">/</span><span class="op">.</span><span class="fu">test</span>(arr[<span class="dv">2</span>])</span>
<span id="cb15-715"><a href="#cb15-715" aria-hidden="true" tabindex="-1"></a>        <span class="op">?</span> <span class="fu">zone2hour</span>(arr[<span class="dv">2</span>]) <span class="op">/</span> <span class="dv">24</span></span>
<span id="cb15-716"><a href="#cb15-716" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> <span class="pp">parseFloat</span>(arr[<span class="dv">2</span>]<span class="op">.</span><span class="fu">replace</span>(<span class="ss">/</span><span class="sc">([+-])</span><span class="ss">/</span><span class="op">,</span> <span class="st">"$1</span><span class="sc">\.</span><span class="st">"</span>))]<span class="op">;</span></span>
<span id="cb15-717"><a href="#cb15-717" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-718"><a href="#cb15-718" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">deco2deco</span>(timestamp <span class="op">=</span> <span class="st">"1969+306.00000Z"</span>) {</span>
<span id="cb15-719"><a href="#cb15-719" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">doty2deco</span>(<span class="fu">deco2doty</span>(timestamp))</span>
<span id="cb15-720"><a href="#cb15-720" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-721"><a href="#cb15-721" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2doty</span>(year <span class="op">=</span> <span class="dv">1969</span><span class="op">,</span> doty <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> zone <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb15-722"><a href="#cb15-722" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">dote2doty</span>(<span class="fu">doty2dote</span>(year<span class="op">,</span> doty<span class="op">,</span> zone))<span class="op">;</span></span>
<span id="cb15-723"><a href="#cb15-723" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-724"><a href="#cb15-724" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2unix</span>(year <span class="op">=</span> <span class="dv">1969</span><span class="op">,</span> doty <span class="op">=</span> <span class="dv">306</span><span class="op">,</span> zone <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb15-725"><a href="#cb15-725" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (<span class="fu">doty2dote</span>(year<span class="op">,</span> doty<span class="op">,</span> zone) <span class="op">-</span> <span class="dv">719468</span>) <span class="op">*</span> <span class="dv">86400000</span><span class="op">;</span></span>
<span id="cb15-726"><a href="#cb15-726" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-727"><a href="#cb15-727" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2isoc</span>(year <span class="op">=</span> <span class="dv">1969</span><span class="op">,</span> doty <span class="op">=</span> <span class="dv">306</span><span class="op">,</span> zone <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb15-728"><a href="#cb15-728" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">new</span> <span class="bu">Date</span>(<span class="fu">doty2unix</span>(year<span class="op">,</span> doty<span class="op">,</span> zone))<span class="op">.</span><span class="fu">toISOString</span>()<span class="op">.</span><span class="fu">split</span>(<span class="st">"."</span>)[<span class="dv">0</span>]</span>
<span id="cb15-729"><a href="#cb15-729" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-730"><a href="#cb15-730" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">deco2isoc</span>(timestamp <span class="op">=</span> <span class="st">"1969+306.00000Z"</span>) {</span>
<span id="cb15-731"><a href="#cb15-731" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">doty2isoc</span>(<span class="op">...</span><span class="fu">deco2doty</span>(timestamp))</span>
<span id="cb15-732"><a href="#cb15-732" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-733"><a href="#cb15-733" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">unix2dote</span>(ms <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb15-734"><a href="#cb15-734" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> ms <span class="op">/</span> <span class="dv">86400000</span> <span class="op">+</span> <span class="dv">719468</span><span class="op">;</span></span>
<span id="cb15-735"><a href="#cb15-735" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-736"><a href="#cb15-736" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">dote2year</span>(days <span class="op">=</span> <span class="dv">719468</span>) {</span>
<span id="cb15-737"><a href="#cb15-737" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> era <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((days <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">?</span> days <span class="op">:</span> days <span class="op">-</span> <span class="dv">146096</span>) <span class="op">/</span> <span class="dv">146097</span>)<span class="op">,</span></span>
<span id="cb15-738"><a href="#cb15-738" aria-hidden="true" tabindex="-1"></a>        dotc <span class="op">=</span> days <span class="op">-</span> era <span class="op">*</span> <span class="dv">146097</span><span class="op">,</span></span>
<span id="cb15-739"><a href="#cb15-739" aria-hidden="true" tabindex="-1"></a>        yotc <span class="op">=</span> (dotc <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(dotc <span class="op">/</span> <span class="dv">1460</span>) <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(dotc <span class="op">/</span> <span class="dv">36524</span>) <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(dotc <span class="op">/</span> <span class="dv">146096</span>)) <span class="op">/</span> <span class="dv">365</span><span class="op">;</span></span>
<span id="cb15-740"><a href="#cb15-740" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> yotc <span class="op">+</span> era <span class="op">*</span> <span class="dv">400</span><span class="op">;</span></span>
<span id="cb15-741"><a href="#cb15-741" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-742"><a href="#cb15-742" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2year</span>(year <span class="op">=</span> <span class="dv">1969</span><span class="op">,</span> doty <span class="op">=</span> <span class="dv">306</span><span class="op">,</span> zone <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb15-743"><a href="#cb15-743" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">dote2year</span>(<span class="fu">doty2dote</span>(year<span class="op">,</span> doty<span class="op">,</span> zone))<span class="op">;</span></span>
<span id="cb15-744"><a href="#cb15-744" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-745"><a href="#cb15-745" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">unix2year</span>(ms <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb15-746"><a href="#cb15-746" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">dote2year</span>(<span class="fu">unix2dote</span>(ms))<span class="op">;</span></span>
<span id="cb15-747"><a href="#cb15-747" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-14-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-14-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-14-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-14-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-14-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-14-6" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-14-7" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-14-8" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-14-9" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-14-10" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-14-11" data-nodetype="declaration">

</div>
</div>
</div>
</div>
</div></section><section id="variables-1" class="level5 appendix"><h2 class="anchored quarto-appendix-heading">Variables</h2><div class="quarto-appendix-contents">
<div class="cell" data-output="all">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb16" data-startfrom="754" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 753;"><span id="cb16-754"><a href="#cb16-754" aria-hidden="true" tabindex="-1"></a>tzOffsetInMs <span class="op">=</span> inputDatetime<span class="op">.</span><span class="fu">getTimezoneOffset</span>() <span class="op">*</span> <span class="dv">60000</span></span>
<span id="cb16-755"><a href="#cb16-755" aria-hidden="true" tabindex="-1"></a>utcDatetime <span class="op">=</span> inputDatetime <span class="op">-</span> tzOffsetInMs</span>
<span id="cb16-756"><a href="#cb16-756" aria-hidden="true" tabindex="-1"></a>outputDatetimeDeco <span class="op">=</span> <span class="fu">unix2deco</span>(utcDatetime)</span>
<span id="cb16-757"><a href="#cb16-757" aria-hidden="true" tabindex="-1"></a>dtDoty <span class="op">=</span> outputDatetimeDeco<span class="op">.</span><span class="fu">split</span>(<span class="st">"+"</span>)[<span class="dv">1</span>]</span>
<span id="cb16-758"><a href="#cb16-758" aria-hidden="true" tabindex="-1"></a>dtDotyDateRaw <span class="op">=</span> dtDoty<span class="op">.</span><span class="fu">split</span>(<span class="st">"."</span>)[<span class="dv">0</span>]</span>
<span id="cb16-759"><a href="#cb16-759" aria-hidden="true" tabindex="-1"></a>dtDotyTimeRaw <span class="op">=</span> dtDoty<span class="op">.</span><span class="fu">split</span>(<span class="st">"."</span>)[<span class="dv">1</span>]<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">5</span>)</span>
<span id="cb16-760"><a href="#cb16-760" aria-hidden="true" tabindex="-1"></a>outputDatetimeYear <span class="op">=</span> <span class="fu">unix2year</span>(utcDatetime)<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">8</span>)</span>
<span id="cb16-761"><a href="#cb16-761" aria-hidden="true" tabindex="-1"></a>dtDotyTimeDelimiter <span class="op">=</span> dtDotyTimeRaw <span class="op">?</span> <span class="st">"."</span> <span class="op">:</span> <span class="st">""</span></span>
<span id="cb16-762"><a href="#cb16-762" aria-hidden="true" tabindex="-1"></a>outputDecoYear <span class="op">=</span> <span class="fu">doty2year</span>(<span class="op">...</span>yd)<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">8</span>)</span>
<span id="cb16-763"><a href="#cb16-763" aria-hidden="true" tabindex="-1"></a>outputIsoc <span class="op">=</span> <span class="fu">doty2isoc</span>(<span class="op">...</span>yd)</span>
<span id="cb16-764"><a href="#cb16-764" aria-hidden="true" tabindex="-1"></a>yearDate <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">ceil</span>(<span class="fu">unix2year</span>(unix) <span class="op">*</span> <span class="fl">1e3</span>) <span class="op">/</span> <span class="fl">1e3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-15-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-15-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-15-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-15-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-15-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-15-6" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-15-7" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-15-8" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-15-9" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-15-10" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-15-11" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb17" data-startfrom="768" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 767;"><span id="cb17-768"><a href="#cb17-768" aria-hidden="true" tabindex="-1"></a>dtYear <span class="op">=</span> <span class="fu">setStyle</span>(outputDatetimeDeco<span class="op">.</span><span class="fu">split</span>(<span class="st">"+"</span>)[<span class="dv">0</span>]<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">10</span>])</span>
<span id="cb17-769"><a href="#cb17-769" aria-hidden="true" tabindex="-1"></a>dtDotyDate <span class="op">=</span> <span class="fu">setStyle</span>(dtDotyDateRaw<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">1</span>])</span>
<span id="cb17-770"><a href="#cb17-770" aria-hidden="true" tabindex="-1"></a>dtDotyTime <span class="op">=</span> dtDotyTimeRaw <span class="op">?</span> <span class="fu">setStyle</span>(dtDotyTimeRaw<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">2</span>]) <span class="op">:</span> <span class="st">""</span></span>
<span id="cb17-771"><a href="#cb17-771" aria-hidden="true" tabindex="-1"></a>styledIsocYear <span class="op">=</span> <span class="fu">setStyle</span>(outputIsoc<span class="op">.</span><span class="fu">split</span>(<span class="ss">/</span><span class="sc">(?</span><span class="ss">=-</span><span class="sc">)</span><span class="ss">/</span>)[<span class="dv">0</span>]<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">10</span>])</span>
<span id="cb17-772"><a href="#cb17-772" aria-hidden="true" tabindex="-1"></a>styledIsocMd <span class="op">=</span> <span class="fu">setStyle</span>(outputIsoc<span class="op">.</span><span class="fu">slice</span>(outputIsoc<span class="op">.</span><span class="fu">split</span>(<span class="ss">/</span><span class="sc">(?</span><span class="ss">=-</span><span class="sc">)</span><span class="ss">/</span>)[<span class="dv">0</span>]<span class="op">.</span><span class="at">length</span><span class="op">+</span><span class="dv">1</span><span class="op">,</span>outputIsoc<span class="op">.</span><span class="fu">split</span>(<span class="ss">/</span><span class="sc">(?</span><span class="ss">=-</span><span class="sc">)</span><span class="ss">/</span>)[<span class="dv">0</span>]<span class="op">.</span><span class="at">length</span><span class="op">+</span><span class="dv">6</span>)<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">5</span>])</span>
<span id="cb17-773"><a href="#cb17-773" aria-hidden="true" tabindex="-1"></a>styledIsocTime <span class="op">=</span> <span class="fu">setStyle</span>(outputIsoc<span class="op">.</span><span class="fu">slice</span>(outputIsoc<span class="op">.</span><span class="fu">split</span>(<span class="ss">/</span><span class="sc">(?</span><span class="ss">=-</span><span class="sc">)</span><span class="ss">/</span>)[<span class="dv">0</span>]<span class="op">.</span><span class="at">length</span><span class="op">+</span><span class="dv">7</span>)<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">4</span>])</span>
<span id="cb17-774"><a href="#cb17-774" aria-hidden="true" tabindex="-1"></a>styledOutputDatetimeYear <span class="op">=</span> <span class="fu">setStyle</span>(outputDatetimeYear<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">10</span>])</span>
<span id="cb17-775"><a href="#cb17-775" aria-hidden="true" tabindex="-1"></a>styledOutputDecoYear <span class="op">=</span> <span class="fu">setStyle</span>(outputDecoYear<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">10</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-16-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-16-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-16-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-16-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-16-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-16-6" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-16-7" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-16-8" data-nodetype="declaration">

</div>
</div>
</div>
</div>
</div></section><section id="sec-ojs-code-dek" class="level4 appendix"><h2 class="anchored quarto-appendix-heading">
<code>Dek</code> Observable code</h2><div class="quarto-appendix-contents">
</div></section><section id="functions-2" class="level5 appendix"><h2 class="anchored quarto-appendix-heading">Functions</h2><div class="quarto-appendix-contents">
<div class="cell">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb29" data-startfrom="970" data-source-offset="-50"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 969;"><span id="cb29-970"><a href="#cb29-970" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">interval</span>(range <span class="op">=</span> []<span class="op">,</span> options <span class="op">=</span> {}) {</span>
<span id="cb29-971"><a href="#cb29-971" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> [min <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> max <span class="op">=</span> <span class="dv">1</span>] <span class="op">=</span> range<span class="op">;</span></span>
<span id="cb29-972"><a href="#cb29-972" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> {</span>
<span id="cb29-973"><a href="#cb29-973" aria-hidden="true" tabindex="-1"></a>    step <span class="op">=</span> <span class="op">.</span><span class="bn">001</span><span class="op">,</span></span>
<span id="cb29-974"><a href="#cb29-974" aria-hidden="true" tabindex="-1"></a>    label <span class="op">=</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb29-975"><a href="#cb29-975" aria-hidden="true" tabindex="-1"></a>    value <span class="op">=</span> [min<span class="op">,</span> max]<span class="op">,</span></span>
<span id="cb29-976"><a href="#cb29-976" aria-hidden="true" tabindex="-1"></a>    format <span class="op">=</span> ([start<span class="op">,</span> end]) <span class="kw">=&gt;</span> <span class="vs">`</span><span class="sc">${</span>start<span class="sc">}</span><span class="vs"> ‚Ä¶ </span><span class="sc">${</span>end<span class="sc">}</span><span class="vs">`</span><span class="op">,</span></span>
<span id="cb29-977"><a href="#cb29-977" aria-hidden="true" tabindex="-1"></a>    color<span class="op">,</span></span>
<span id="cb29-978"><a href="#cb29-978" aria-hidden="true" tabindex="-1"></a>    width<span class="op">,</span></span>
<span id="cb29-979"><a href="#cb29-979" aria-hidden="true" tabindex="-1"></a>    theme<span class="op">,</span></span>
<span id="cb29-980"><a href="#cb29-980" aria-hidden="true" tabindex="-1"></a>  } <span class="op">=</span> options<span class="op">;</span></span>
<span id="cb29-981"><a href="#cb29-981" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> __ns__ <span class="op">=</span> DOM<span class="op">.</span><span class="fu">uid</span>(<span class="st">'scope'</span>)<span class="op">.</span><span class="at">id</span><span class="op">;</span></span>
<span id="cb29-982"><a href="#cb29-982" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> css <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb29-983"><a href="#cb29-983" aria-hidden="true" tabindex="-1"></a><span class="vs">#</span><span class="sc">${</span>__ns__<span class="sc">}</span><span class="vs"> {</span></span>
<span id="cb29-984"><a href="#cb29-984" aria-hidden="true" tabindex="-1"></a><span class="vs">  font: 13px/1.2 var(--sans-serif);</span></span>
<span id="cb29-985"><a href="#cb29-985" aria-hidden="true" tabindex="-1"></a><span class="vs">  display: flex;</span></span>
<span id="cb29-986"><a href="#cb29-986" aria-hidden="true" tabindex="-1"></a><span class="vs">  align-items: baseline;</span></span>
<span id="cb29-987"><a href="#cb29-987" aria-hidden="true" tabindex="-1"></a><span class="vs">  flex-wrap: wrap;</span></span>
<span id="cb29-988"><a href="#cb29-988" aria-hidden="true" tabindex="-1"></a><span class="vs">  max-width: 100%;</span></span>
<span id="cb29-989"><a href="#cb29-989" aria-hidden="true" tabindex="-1"></a><span class="vs">  width: auto;</span></span>
<span id="cb29-990"><a href="#cb29-990" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb29-991"><a href="#cb29-991" aria-hidden="true" tabindex="-1"></a><span class="vs">@media only screen and (min-width: 30em) {</span></span>
<span id="cb29-992"><a href="#cb29-992" aria-hidden="true" tabindex="-1"></a><span class="vs">  #</span><span class="sc">${</span>__ns__<span class="sc">}</span><span class="vs"> {</span></span>
<span id="cb29-993"><a href="#cb29-993" aria-hidden="true" tabindex="-1"></a><span class="vs">    flex-wrap: nowrap;</span></span>
<span id="cb29-994"><a href="#cb29-994" aria-hidden="true" tabindex="-1"></a><span class="vs">    width: 360px;</span></span>
<span id="cb29-995"><a href="#cb29-995" aria-hidden="true" tabindex="-1"></a><span class="vs">  }</span></span>
<span id="cb29-996"><a href="#cb29-996" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb29-997"><a href="#cb29-997" aria-hidden="true" tabindex="-1"></a><span class="vs">#</span><span class="sc">${</span>__ns__<span class="sc">}</span><span class="vs"> .label {</span></span>
<span id="cb29-998"><a href="#cb29-998" aria-hidden="true" tabindex="-1"></a><span class="vs">  width: 99px;</span></span>
<span id="cb29-999"><a href="#cb29-999" aria-hidden="true" tabindex="-1"></a><span class="vs">  padding: 5px 0 4px 0;</span></span>
<span id="cb29-1000"><a href="#cb29-1000" aria-hidden="true" tabindex="-1"></a><span class="vs">  margin-right: .5px;</span></span>
<span id="cb29-1001"><a href="#cb29-1001" aria-hidden="true" tabindex="-1"></a><span class="vs">  flex-shrink: 0;</span></span>
<span id="cb29-1002"><a href="#cb29-1002" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb29-1003"><a href="#cb29-1003" aria-hidden="true" tabindex="-1"></a><span class="vs">#</span><span class="sc">${</span>__ns__<span class="sc">}</span><span class="vs"> .form {</span></span>
<span id="cb29-1004"><a href="#cb29-1004" aria-hidden="true" tabindex="-1"></a><span class="vs">  display: flex;</span></span>
<span id="cb29-1005"><a href="#cb29-1005" aria-hidden="true" tabindex="-1"></a><span class="vs">  width: 100%;</span></span>
<span id="cb29-1006"><a href="#cb29-1006" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb29-1007"><a href="#cb29-1007" aria-hidden="true" tabindex="-1"></a><span class="vs">#</span><span class="sc">${</span>__ns__<span class="sc">}</span><span class="vs"> .range {</span></span>
<span id="cb29-1008"><a href="#cb29-1008" aria-hidden="true" tabindex="-1"></a><span class="vs">  flex-shrink: 1;</span></span>
<span id="cb29-1009"><a href="#cb29-1009" aria-hidden="true" tabindex="-1"></a><span class="vs">  width: 100%;</span></span>
<span id="cb29-1010"><a href="#cb29-1010" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb29-1011"><a href="#cb29-1011" aria-hidden="true" tabindex="-1"></a><span class="vs">#</span><span class="sc">${</span>__ns__<span class="sc">}</span><span class="vs"> .range-slider {</span></span>
<span id="cb29-1012"><a href="#cb29-1012" aria-hidden="true" tabindex="-1"></a><span class="vs">  width: 100%;</span></span>
<span id="cb29-1013"><a href="#cb29-1013" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb29-1014"><a href="#cb29-1014" aria-hidden="true" tabindex="-1"></a><span class="vs">  `</span><span class="op">;</span></span>
<span id="cb29-1015"><a href="#cb29-1015" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> $range <span class="op">=</span> <span class="fu">rangeInput</span>({min<span class="op">,</span> max<span class="op">,</span> <span class="dt">value</span><span class="op">:</span> [value[<span class="dv">0</span>]<span class="op">,</span> value[<span class="dv">1</span>]]<span class="op">,</span> step<span class="op">,</span> color<span class="op">,</span> width<span class="op">,</span> theme})<span class="op">;</span></span>
<span id="cb29-1016"><a href="#cb29-1016" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> $output <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;output&gt;`</span><span class="op">;</span></span>
<span id="cb29-1017"><a href="#cb29-1017" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> $view <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;div id=</span><span class="sc">${</span>__ns__<span class="sc">}</span><span class="vs">&gt;</span></span>
<span id="cb29-1018"><a href="#cb29-1018" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span>label <span class="op">==</span> <span class="kw">null</span> <span class="op">?</span> <span class="st">''</span> <span class="op">:</span> <span class="fu">html</span><span class="vs">`&lt;div class="label"&gt;</span><span class="sc">${</span>label<span class="sc">}</span><span class="vs">`</span><span class="sc">}</span></span>
<span id="cb29-1019"><a href="#cb29-1019" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;div class=form&gt;</span></span>
<span id="cb29-1020"><a href="#cb29-1020" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;div class=range&gt;</span></span>
<span id="cb29-1021"><a href="#cb29-1021" aria-hidden="true" tabindex="-1"></a><span class="vs">    </span><span class="sc">${</span>$range<span class="sc">}</span><span class="vs">&lt;div class=range-output style="display: inline-block;"&gt;</span><span class="sc">${</span>$output<span class="sc">}</span><span class="vs">&lt;/div&gt;</span></span>
<span id="cb29-1022"><a href="#cb29-1022" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/div&gt;</span></span>
<span id="cb29-1023"><a href="#cb29-1023" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb29-1024"><a href="#cb29-1024" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span><span class="fu">html</span><span class="vs">`&lt;style&gt;</span><span class="sc">${</span>css<span class="sc">}</span><span class="vs">`</span><span class="sc">}</span></span>
<span id="cb29-1025"><a href="#cb29-1025" aria-hidden="true" tabindex="-1"></a><span class="vs">  `</span><span class="op">;</span></span>
<span id="cb29-1026"><a href="#cb29-1026" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> update <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb29-1027"><a href="#cb29-1027" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> content <span class="op">=</span> <span class="fu">format</span>([$range<span class="op">.</span><span class="at">value</span>[<span class="dv">0</span>]<span class="op">,</span> $range<span class="op">.</span><span class="at">value</span>[<span class="dv">1</span>]])<span class="op">;</span></span>
<span id="cb29-1028"><a href="#cb29-1028" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="kw">typeof</span> content <span class="op">===</span> <span class="st">'string'</span>) $output<span class="op">.</span><span class="at">value</span> <span class="op">=</span> content<span class="op">;</span></span>
<span id="cb29-1029"><a href="#cb29-1029" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> {</span>
<span id="cb29-1030"><a href="#cb29-1030" aria-hidden="true" tabindex="-1"></a>      <span class="cf">while</span>($output<span class="op">.</span><span class="at">lastChild</span>) $output<span class="op">.</span><span class="at">lastChild</span><span class="op">.</span><span class="fu">remove</span>()<span class="op">;</span></span>
<span id="cb29-1031"><a href="#cb29-1031" aria-hidden="true" tabindex="-1"></a>      $output<span class="op">.</span><span class="fu">appendChild</span>(content)<span class="op">;</span></span>
<span id="cb29-1032"><a href="#cb29-1032" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb29-1033"><a href="#cb29-1033" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb29-1034"><a href="#cb29-1034" aria-hidden="true" tabindex="-1"></a>  $range<span class="op">.</span><span class="at">oninput</span> <span class="op">=</span> update<span class="op">;</span></span>
<span id="cb29-1035"><a href="#cb29-1035" aria-hidden="true" tabindex="-1"></a>  <span class="fu">update</span>()<span class="op">;</span></span>
<span id="cb29-1036"><a href="#cb29-1036" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">defineProperty</span>($view<span class="op">,</span> <span class="st">'value'</span><span class="op">,</span> {</span>
<span id="cb29-1037"><a href="#cb29-1037" aria-hidden="true" tabindex="-1"></a>    <span class="kw">get</span><span class="op">:</span> () <span class="kw">=&gt;</span> $range<span class="op">.</span><span class="at">value</span><span class="op">,</span></span>
<span id="cb29-1038"><a href="#cb29-1038" aria-hidden="true" tabindex="-1"></a>    <span class="kw">set</span><span class="op">:</span> ([a<span class="op">,</span> b]) <span class="kw">=&gt;</span> {</span>
<span id="cb29-1039"><a href="#cb29-1039" aria-hidden="true" tabindex="-1"></a>      $range<span class="op">.</span><span class="at">value</span> <span class="op">=</span> [a<span class="op">,</span> b]<span class="op">;</span></span>
<span id="cb29-1040"><a href="#cb29-1040" aria-hidden="true" tabindex="-1"></a>      <span class="fu">update</span>()<span class="op">;</span></span>
<span id="cb29-1041"><a href="#cb29-1041" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb29-1042"><a href="#cb29-1042" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb29-1043"><a href="#cb29-1043" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-1044"><a href="#cb29-1044" aria-hidden="true" tabindex="-1"></a>cssLength <span class="op">=</span> v <span class="kw">=&gt;</span> v <span class="op">==</span> <span class="kw">null</span> <span class="op">?</span> <span class="kw">null</span> <span class="op">:</span> <span class="kw">typeof</span> v <span class="op">===</span> <span class="st">'number'</span> <span class="op">?</span> <span class="vs">`</span><span class="sc">${</span>v<span class="sc">}</span><span class="vs">px`</span> <span class="op">:</span> <span class="vs">`</span><span class="sc">${</span>v<span class="sc">}</span><span class="vs">`</span></span>
<span id="cb29-1045"><a href="#cb29-1045" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">randomScope</span>(prefix <span class="op">=</span> <span class="st">'scope-'</span>) {</span>
<span id="cb29-1046"><a href="#cb29-1046" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> prefix <span class="op">+</span> (<span class="bu">performance</span><span class="op">.</span><span class="fu">now</span>() <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">random</span>())<span class="op">.</span><span class="fu">toString</span>(<span class="dv">32</span>)<span class="op">.</span><span class="fu">replace</span>(<span class="st">'.'</span><span class="op">,</span> <span class="st">'-'</span>)<span class="op">;</span></span>
<span id="cb29-1047"><a href="#cb29-1047" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-1048"><a href="#cb29-1048" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">rangeInput</span>(options <span class="op">=</span> {}) {</span>
<span id="cb29-1049"><a href="#cb29-1049" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> {</span>
<span id="cb29-1050"><a href="#cb29-1050" aria-hidden="true" tabindex="-1"></a>    min <span class="op">=</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb29-1051"><a href="#cb29-1051" aria-hidden="true" tabindex="-1"></a>    max <span class="op">=</span> <span class="dv">100</span><span class="op">,</span></span>
<span id="cb29-1052"><a href="#cb29-1052" aria-hidden="true" tabindex="-1"></a>    step <span class="op">=</span> <span class="st">'any'</span><span class="op">,</span></span>
<span id="cb29-1053"><a href="#cb29-1053" aria-hidden="true" tabindex="-1"></a>    <span class="dt">value</span><span class="op">:</span> defaultValue <span class="op">=</span> [min<span class="op">,</span> max]<span class="op">,</span></span>
<span id="cb29-1054"><a href="#cb29-1054" aria-hidden="true" tabindex="-1"></a>    color<span class="op">,</span></span>
<span id="cb29-1055"><a href="#cb29-1055" aria-hidden="true" tabindex="-1"></a>    width<span class="op">,</span></span>
<span id="cb29-1056"><a href="#cb29-1056" aria-hidden="true" tabindex="-1"></a>    theme <span class="op">=</span> theme_Flat<span class="op">,</span></span>
<span id="cb29-1057"><a href="#cb29-1057" aria-hidden="true" tabindex="-1"></a>  } <span class="op">=</span> options<span class="op">;</span></span>
<span id="cb29-1058"><a href="#cb29-1058" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> controls <span class="op">=</span> {}<span class="op">;</span></span>
<span id="cb29-1059"><a href="#cb29-1059" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> scope <span class="op">=</span> <span class="fu">randomScope</span>()<span class="op">;</span></span>
<span id="cb29-1060"><a href="#cb29-1060" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> clamp <span class="op">=</span> (a<span class="op">,</span> b<span class="op">,</span> v) <span class="kw">=&gt;</span> v <span class="op">&lt;</span> a <span class="op">?</span> a <span class="op">:</span> v <span class="op">&gt;</span> b <span class="op">?</span> b <span class="op">:</span> v<span class="op">;</span></span>
<span id="cb29-1061"><a href="#cb29-1061" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> html <span class="op">=</span> htl<span class="op">.</span><span class="at">html</span><span class="op">;</span></span>
<span id="cb29-1062"><a href="#cb29-1062" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Will be used to sanitize values while avoiding floating point issues.</span></span>
<span id="cb29-1063"><a href="#cb29-1063" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> input <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;input type=range </span><span class="sc">${</span>{min<span class="op">,</span> max<span class="op">,</span> step}<span class="sc">}</span><span class="vs">&gt;`</span><span class="op">;</span></span>
<span id="cb29-1064"><a href="#cb29-1064" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> dom <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;div class=</span><span class="sc">${</span><span class="vs">`</span><span class="sc">${</span>scope<span class="sc">}</span><span class="vs"> range-slider`</span><span class="sc">}</span><span class="vs"> style=</span><span class="sc">${</span>{</span>
<span id="cb29-1065"><a href="#cb29-1065" aria-hidden="true" tabindex="-1"></a>    color<span class="op">,</span></span>
<span id="cb29-1066"><a href="#cb29-1066" aria-hidden="true" tabindex="-1"></a>    <span class="dt">width</span><span class="op">:</span> <span class="fu">cssLength</span>(width)<span class="op">,</span></span>
<span id="cb29-1067"><a href="#cb29-1067" aria-hidden="true" tabindex="-1"></a>  }<span class="sc">}</span><span class="vs">&gt;</span></span>
<span id="cb29-1068"><a href="#cb29-1068" aria-hidden="true" tabindex="-1"></a><span class="vs">  </span><span class="sc">${</span>controls<span class="op">.</span><span class="at">track</span> <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;div class="range-track"&gt;</span></span>
<span id="cb29-1069"><a href="#cb29-1069" aria-hidden="true" tabindex="-1"></a><span class="vs">    </span><span class="sc">${</span>controls<span class="op">.</span><span class="at">zone</span> <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;div class="range-track-zone"&gt;</span></span>
<span id="cb29-1070"><a href="#cb29-1070" aria-hidden="true" tabindex="-1"></a><span class="vs">      </span><span class="sc">${</span>controls<span class="op">.</span><span class="at">range</span> <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;div class="range-select" tabindex=0&gt;</span></span>
<span id="cb29-1071"><a href="#cb29-1071" aria-hidden="true" tabindex="-1"></a><span class="vs">        </span><span class="sc">${</span>controls<span class="op">.</span><span class="at">min</span> <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;div class="thumb thumb-min" tabindex=0&gt;`</span><span class="sc">}</span></span>
<span id="cb29-1072"><a href="#cb29-1072" aria-hidden="true" tabindex="-1"></a><span class="vs">        </span><span class="sc">${</span>controls<span class="op">.</span><span class="at">max</span> <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;div class="thumb thumb-max" tabindex=0&gt;`</span><span class="sc">}</span></span>
<span id="cb29-1073"><a href="#cb29-1073" aria-hidden="true" tabindex="-1"></a><span class="vs">      `</span><span class="sc">}</span></span>
<span id="cb29-1074"><a href="#cb29-1074" aria-hidden="true" tabindex="-1"></a><span class="vs">    `</span><span class="sc">}</span></span>
<span id="cb29-1075"><a href="#cb29-1075" aria-hidden="true" tabindex="-1"></a><span class="vs">  `</span><span class="sc">}</span></span>
<span id="cb29-1076"><a href="#cb29-1076" aria-hidden="true" tabindex="-1"></a><span class="vs">  </span><span class="sc">${</span><span class="fu">html</span><span class="vs">`&lt;style&gt;</span><span class="sc">${</span>theme<span class="op">.</span><span class="fu">replace</span>(<span class="ss">/:scope</span><span class="sc">\b</span><span class="ss">/g</span><span class="op">,</span> <span class="st">'.'</span><span class="op">+</span>scope)<span class="sc">}</span><span class="vs">`</span><span class="sc">}</span></span>
<span id="cb29-1077"><a href="#cb29-1077" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/div&gt;`</span><span class="op">;</span></span>
<span id="cb29-1078"><a href="#cb29-1078" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> value <span class="op">=</span> []<span class="op">,</span> changed <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb29-1079"><a href="#cb29-1079" aria-hidden="true" tabindex="-1"></a>  <span class="bu">Object</span><span class="op">.</span><span class="fu">defineProperty</span>(dom<span class="op">,</span> <span class="st">'value'</span><span class="op">,</span> {</span>
<span id="cb29-1080"><a href="#cb29-1080" aria-hidden="true" tabindex="-1"></a>    <span class="kw">get</span><span class="op">:</span> () <span class="kw">=&gt;</span> [<span class="op">...</span>value]<span class="op">,</span></span>
<span id="cb29-1081"><a href="#cb29-1081" aria-hidden="true" tabindex="-1"></a>    <span class="kw">set</span><span class="op">:</span> ([a<span class="op">,</span> b]) <span class="kw">=&gt;</span> {</span>
<span id="cb29-1082"><a href="#cb29-1082" aria-hidden="true" tabindex="-1"></a>      value <span class="op">=</span> <span class="fu">sanitize</span>(a<span class="op">,</span> b)<span class="op">;</span></span>
<span id="cb29-1083"><a href="#cb29-1083" aria-hidden="true" tabindex="-1"></a>      <span class="fu">updateRange</span>()<span class="op">;</span></span>
<span id="cb29-1084"><a href="#cb29-1084" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb29-1085"><a href="#cb29-1085" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb29-1086"><a href="#cb29-1086" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> sanitize <span class="op">=</span> (a<span class="op">,</span> b) <span class="kw">=&gt;</span> {</span>
<span id="cb29-1087"><a href="#cb29-1087" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> <span class="pp">isNaN</span>(a) <span class="op">?</span> min <span class="op">:</span> ((input<span class="op">.</span><span class="at">value</span> <span class="op">=</span> a)<span class="op">,</span> input<span class="op">.</span><span class="at">valueAsNumber</span>)<span class="op">;</span></span>
<span id="cb29-1088"><a href="#cb29-1088" aria-hidden="true" tabindex="-1"></a>    b <span class="op">=</span> <span class="pp">isNaN</span>(b) <span class="op">?</span> max <span class="op">:</span> ((input<span class="op">.</span><span class="at">value</span> <span class="op">=</span> b)<span class="op">,</span> input<span class="op">.</span><span class="at">valueAsNumber</span>)<span class="op">;</span></span>
<span id="cb29-1089"><a href="#cb29-1089" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [<span class="bu">Math</span><span class="op">.</span><span class="fu">min</span>(a<span class="op">,</span> b)<span class="op">,</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(a<span class="op">,</span> b)]<span class="op">;</span></span>
<span id="cb29-1090"><a href="#cb29-1090" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb29-1091"><a href="#cb29-1091" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> updateRange <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb29-1092"><a href="#cb29-1092" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> ratio <span class="op">=</span> v <span class="kw">=&gt;</span> (v <span class="op">-</span> min) <span class="op">/</span> (max <span class="op">-</span> min)<span class="op">;</span></span>
<span id="cb29-1093"><a href="#cb29-1093" aria-hidden="true" tabindex="-1"></a>    dom<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="fu">setProperty</span>(<span class="st">'--range-min'</span><span class="op">,</span> <span class="vs">`</span><span class="sc">${</span><span class="fu">ratio</span>(value[<span class="dv">0</span>]) <span class="op">*</span> <span class="dv">100</span><span class="sc">}</span><span class="vs">%`</span>)<span class="op">;</span></span>
<span id="cb29-1094"><a href="#cb29-1094" aria-hidden="true" tabindex="-1"></a>    dom<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="fu">setProperty</span>(<span class="st">'--range-max'</span><span class="op">,</span> <span class="vs">`</span><span class="sc">${</span><span class="fu">ratio</span>(value[<span class="dv">1</span>]) <span class="op">*</span> <span class="dv">100</span><span class="sc">}</span><span class="vs">%`</span>)<span class="op">;</span></span>
<span id="cb29-1095"><a href="#cb29-1095" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb29-1096"><a href="#cb29-1096" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> dispatch <span class="op">=</span> name <span class="kw">=&gt;</span> {</span>
<span id="cb29-1097"><a href="#cb29-1097" aria-hidden="true" tabindex="-1"></a>    dom<span class="op">.</span><span class="fu">dispatchEvent</span>(<span class="kw">new</span> <span class="bu">Event</span>(name<span class="op">,</span> {<span class="dt">bubbles</span><span class="op">:</span> <span class="kw">true</span>}))<span class="op">;</span></span>
<span id="cb29-1098"><a href="#cb29-1098" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb29-1099"><a href="#cb29-1099" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> setValue <span class="op">=</span> (vmin<span class="op">,</span> vmax) <span class="kw">=&gt;</span> {</span>
<span id="cb29-1100"><a href="#cb29-1100" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> [pmin<span class="op">,</span> pmax] <span class="op">=</span> value<span class="op">;</span></span>
<span id="cb29-1101"><a href="#cb29-1101" aria-hidden="true" tabindex="-1"></a>    value <span class="op">=</span> <span class="fu">sanitize</span>(vmin<span class="op">,</span> vmax)<span class="op">;</span></span>
<span id="cb29-1102"><a href="#cb29-1102" aria-hidden="true" tabindex="-1"></a>    <span class="fu">updateRange</span>()<span class="op">;</span></span>
<span id="cb29-1103"><a href="#cb29-1103" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Only dispatch if values have changed.</span></span>
<span id="cb29-1104"><a href="#cb29-1104" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(pmin <span class="op">===</span> value[<span class="dv">0</span>] <span class="op">&amp;&amp;</span> pmax <span class="op">===</span> value[<span class="dv">1</span>]) <span class="cf">return</span><span class="op">;</span></span>
<span id="cb29-1105"><a href="#cb29-1105" aria-hidden="true" tabindex="-1"></a>    <span class="fu">dispatch</span>(<span class="st">'input'</span>)<span class="op">;</span></span>
<span id="cb29-1106"><a href="#cb29-1106" aria-hidden="true" tabindex="-1"></a>    changed <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb29-1107"><a href="#cb29-1107" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb29-1108"><a href="#cb29-1108" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setValue</span>(<span class="op">...</span>defaultValue)<span class="op">;</span></span>
<span id="cb29-1109"><a href="#cb29-1109" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Mousemove handlers.</span></span>
<span id="cb29-1110"><a href="#cb29-1110" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> handlers <span class="op">=</span> <span class="kw">new</span> <span class="bu">Map</span>([</span>
<span id="cb29-1111"><a href="#cb29-1111" aria-hidden="true" tabindex="-1"></a>    [controls<span class="op">.</span><span class="at">min</span><span class="op">,</span> (dt<span class="op">,</span> ov) <span class="kw">=&gt;</span> {</span>
<span id="cb29-1112"><a href="#cb29-1112" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> v <span class="op">=</span> <span class="fu">clamp</span>(min<span class="op">,</span> ov[<span class="dv">1</span>]<span class="op">,</span> ov[<span class="dv">0</span>] <span class="op">+</span> dt <span class="op">*</span> (max <span class="op">-</span> min))<span class="op">;</span></span>
<span id="cb29-1113"><a href="#cb29-1113" aria-hidden="true" tabindex="-1"></a>      <span class="fu">setValue</span>(v<span class="op">,</span> ov[<span class="dv">1</span>])<span class="op">;</span></span>
<span id="cb29-1114"><a href="#cb29-1114" aria-hidden="true" tabindex="-1"></a>    }]<span class="op">,</span></span>
<span id="cb29-1115"><a href="#cb29-1115" aria-hidden="true" tabindex="-1"></a>    [controls<span class="op">.</span><span class="at">max</span><span class="op">,</span> (dt<span class="op">,</span> ov) <span class="kw">=&gt;</span> {</span>
<span id="cb29-1116"><a href="#cb29-1116" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> v <span class="op">=</span> <span class="fu">clamp</span>(ov[<span class="dv">0</span>]<span class="op">,</span> max<span class="op">,</span> ov[<span class="dv">1</span>] <span class="op">+</span> dt <span class="op">*</span> (max <span class="op">-</span> min))<span class="op">;</span></span>
<span id="cb29-1117"><a href="#cb29-1117" aria-hidden="true" tabindex="-1"></a>      <span class="fu">setValue</span>(ov[<span class="dv">0</span>]<span class="op">,</span> v)<span class="op">;</span></span>
<span id="cb29-1118"><a href="#cb29-1118" aria-hidden="true" tabindex="-1"></a>    }]<span class="op">,</span></span>
<span id="cb29-1119"><a href="#cb29-1119" aria-hidden="true" tabindex="-1"></a>    [controls<span class="op">.</span><span class="at">range</span><span class="op">,</span> (dt<span class="op">,</span> ov) <span class="kw">=&gt;</span> {</span>
<span id="cb29-1120"><a href="#cb29-1120" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> d <span class="op">=</span> ov[<span class="dv">1</span>] <span class="op">-</span> ov[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb29-1121"><a href="#cb29-1121" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> v <span class="op">=</span> <span class="fu">clamp</span>(min<span class="op">,</span> max <span class="op">-</span> d<span class="op">,</span> ov[<span class="dv">0</span>] <span class="op">+</span> dt <span class="op">*</span> (max <span class="op">-</span> min))<span class="op">;</span></span>
<span id="cb29-1122"><a href="#cb29-1122" aria-hidden="true" tabindex="-1"></a>      <span class="fu">setValue</span>(v<span class="op">,</span> v <span class="op">+</span> d)<span class="op">;</span></span>
<span id="cb29-1123"><a href="#cb29-1123" aria-hidden="true" tabindex="-1"></a>    }]<span class="op">,</span></span>
<span id="cb29-1124"><a href="#cb29-1124" aria-hidden="true" tabindex="-1"></a>  ])<span class="op">;</span></span>
<span id="cb29-1125"><a href="#cb29-1125" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Returns client offset object.</span></span>
<span id="cb29-1126"><a href="#cb29-1126" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> pointer <span class="op">=</span> e <span class="kw">=&gt;</span> e<span class="op">.</span><span class="at">touches</span> <span class="op">?</span> e<span class="op">.</span><span class="at">touches</span>[<span class="dv">0</span>] <span class="op">:</span> e<span class="op">;</span></span>
<span id="cb29-1127"><a href="#cb29-1127" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Note: Chrome defaults "passive" for touch events to true.</span></span>
<span id="cb29-1128"><a href="#cb29-1128" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> on  <span class="op">=</span> (e<span class="op">,</span> fn) <span class="kw">=&gt;</span> e<span class="op">.</span><span class="fu">split</span>(<span class="st">' '</span>)<span class="op">.</span><span class="fu">map</span>(e <span class="kw">=&gt;</span> <span class="bu">document</span><span class="op">.</span><span class="fu">addEventListener</span>(e<span class="op">,</span> fn<span class="op">,</span> {<span class="dt">passive</span><span class="op">:</span> <span class="kw">false</span>}))<span class="op">;</span></span>
<span id="cb29-1129"><a href="#cb29-1129" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> off <span class="op">=</span> (e<span class="op">,</span> fn) <span class="kw">=&gt;</span> e<span class="op">.</span><span class="fu">split</span>(<span class="st">' '</span>)<span class="op">.</span><span class="fu">map</span>(e <span class="kw">=&gt;</span> <span class="bu">document</span><span class="op">.</span><span class="fu">removeEventListener</span>(e<span class="op">,</span> fn<span class="op">,</span> {<span class="dt">passive</span><span class="op">:</span> <span class="kw">false</span>}))<span class="op">;</span></span>
<span id="cb29-1130"><a href="#cb29-1130" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> initialX<span class="op">,</span> initialV<span class="op">,</span> target<span class="op">,</span> dragging <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb29-1131"><a href="#cb29-1131" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">handleDrag</span>(e) {</span>
<span id="cb29-1132"><a href="#cb29-1132" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Gracefully handle exit and reentry of the viewport.</span></span>
<span id="cb29-1133"><a href="#cb29-1133" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="op">!</span>e<span class="op">.</span><span class="at">buttons</span> <span class="op">&amp;&amp;</span> <span class="op">!</span>e<span class="op">.</span><span class="at">touches</span>) {</span>
<span id="cb29-1134"><a href="#cb29-1134" aria-hidden="true" tabindex="-1"></a>      <span class="fu">handleDragStop</span>()<span class="op">;</span></span>
<span id="cb29-1135"><a href="#cb29-1135" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span><span class="op">;</span></span>
<span id="cb29-1136"><a href="#cb29-1136" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb29-1137"><a href="#cb29-1137" aria-hidden="true" tabindex="-1"></a>    dragging <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb29-1138"><a href="#cb29-1138" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> w <span class="op">=</span> controls<span class="op">.</span><span class="at">zone</span><span class="op">.</span><span class="fu">getBoundingClientRect</span>()<span class="op">.</span><span class="at">width</span><span class="op">;</span></span>
<span id="cb29-1139"><a href="#cb29-1139" aria-hidden="true" tabindex="-1"></a>    e<span class="op">.</span><span class="fu">preventDefault</span>()<span class="op">;</span></span>
<span id="cb29-1140"><a href="#cb29-1140" aria-hidden="true" tabindex="-1"></a>    handlers<span class="op">.</span><span class="fu">get</span>(target)((<span class="fu">pointer</span>(e)<span class="op">.</span><span class="at">clientX</span> <span class="op">-</span> initialX) <span class="op">/</span> w<span class="op">,</span> initialV)<span class="op">;</span></span>
<span id="cb29-1141"><a href="#cb29-1141" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb29-1142"><a href="#cb29-1142" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">handleDragStop</span>(e) {</span>
<span id="cb29-1143"><a href="#cb29-1143" aria-hidden="true" tabindex="-1"></a>    <span class="fu">off</span>(<span class="st">'mousemove touchmove'</span><span class="op">,</span> handleDrag)<span class="op">;</span></span>
<span id="cb29-1144"><a href="#cb29-1144" aria-hidden="true" tabindex="-1"></a>    <span class="fu">off</span>(<span class="st">'mouseup touchend'</span><span class="op">,</span> handleDragStop)<span class="op">;</span></span>
<span id="cb29-1145"><a href="#cb29-1145" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(changed) <span class="fu">dispatch</span>(<span class="st">'change'</span>)<span class="op">;</span></span>
<span id="cb29-1146"><a href="#cb29-1146" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb29-1147"><a href="#cb29-1147" aria-hidden="true" tabindex="-1"></a>  invalidation<span class="op">.</span><span class="fu">then</span>(handleDragStop)<span class="op">;</span></span>
<span id="cb29-1148"><a href="#cb29-1148" aria-hidden="true" tabindex="-1"></a>  dom<span class="op">.</span><span class="at">ontouchstart</span> <span class="op">=</span> dom<span class="op">.</span><span class="at">onmousedown</span> <span class="op">=</span> e <span class="kw">=&gt;</span> {</span>
<span id="cb29-1149"><a href="#cb29-1149" aria-hidden="true" tabindex="-1"></a>    dragging <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb29-1150"><a href="#cb29-1150" aria-hidden="true" tabindex="-1"></a>    changed <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb29-1151"><a href="#cb29-1151" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="op">!</span>handlers<span class="op">.</span><span class="fu">has</span>(e<span class="op">.</span><span class="at">target</span>)) <span class="cf">return</span><span class="op">;</span></span>
<span id="cb29-1152"><a href="#cb29-1152" aria-hidden="true" tabindex="-1"></a>    <span class="fu">on</span>(<span class="st">'mousemove touchmove'</span><span class="op">,</span> handleDrag)<span class="op">;</span></span>
<span id="cb29-1153"><a href="#cb29-1153" aria-hidden="true" tabindex="-1"></a>    <span class="fu">on</span>(<span class="st">'mouseup touchend'</span><span class="op">,</span> handleDragStop)<span class="op">;</span></span>
<span id="cb29-1154"><a href="#cb29-1154" aria-hidden="true" tabindex="-1"></a>    e<span class="op">.</span><span class="fu">preventDefault</span>()<span class="op">;</span></span>
<span id="cb29-1155"><a href="#cb29-1155" aria-hidden="true" tabindex="-1"></a>    e<span class="op">.</span><span class="fu">stopPropagation</span>()<span class="op">;</span></span>
<span id="cb29-1156"><a href="#cb29-1156" aria-hidden="true" tabindex="-1"></a>    target <span class="op">=</span> e<span class="op">.</span><span class="at">target</span><span class="op">;</span></span>
<span id="cb29-1157"><a href="#cb29-1157" aria-hidden="true" tabindex="-1"></a>    initialX <span class="op">=</span> <span class="fu">pointer</span>(e)<span class="op">.</span><span class="at">clientX</span><span class="op">;</span></span>
<span id="cb29-1158"><a href="#cb29-1158" aria-hidden="true" tabindex="-1"></a>    initialV <span class="op">=</span> value<span class="op">.</span><span class="fu">slice</span>()<span class="op">;</span></span>
<span id="cb29-1159"><a href="#cb29-1159" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb29-1160"><a href="#cb29-1160" aria-hidden="true" tabindex="-1"></a>  controls<span class="op">.</span><span class="at">track</span><span class="op">.</span><span class="at">onclick</span> <span class="op">=</span> e <span class="kw">=&gt;</span> {</span>
<span id="cb29-1161"><a href="#cb29-1161" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(dragging) <span class="cf">return</span><span class="op">;</span></span>
<span id="cb29-1162"><a href="#cb29-1162" aria-hidden="true" tabindex="-1"></a>    changed <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb29-1163"><a href="#cb29-1163" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> r <span class="op">=</span> controls<span class="op">.</span><span class="at">zone</span><span class="op">.</span><span class="fu">getBoundingClientRect</span>()<span class="op">;</span></span>
<span id="cb29-1164"><a href="#cb29-1164" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> t <span class="op">=</span> <span class="fu">clamp</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> (<span class="fu">pointer</span>(e)<span class="op">.</span><span class="at">clientX</span> <span class="op">-</span> r<span class="op">.</span><span class="at">left</span>) <span class="op">/</span> r<span class="op">.</span><span class="at">width</span>)<span class="op">;</span></span>
<span id="cb29-1165"><a href="#cb29-1165" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> v <span class="op">=</span> min <span class="op">+</span> t <span class="op">*</span> (max <span class="op">-</span> min)<span class="op">;</span></span>
<span id="cb29-1166"><a href="#cb29-1166" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> [vmin<span class="op">,</span> vmax] <span class="op">=</span> value<span class="op">,</span> d <span class="op">=</span> vmax <span class="op">-</span> vmin<span class="op">;</span></span>
<span id="cb29-1167"><a href="#cb29-1167" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(v <span class="op">&lt;</span> vmin) <span class="fu">setValue</span>(v<span class="op">,</span> v <span class="op">+</span> d)<span class="op">;</span></span>
<span id="cb29-1168"><a href="#cb29-1168" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span>(v <span class="op">&gt;</span> vmax) <span class="fu">setValue</span>(v <span class="op">-</span> d<span class="op">,</span> v)<span class="op">;</span></span>
<span id="cb29-1169"><a href="#cb29-1169" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(changed) <span class="fu">dispatch</span>(<span class="st">'change'</span>)<span class="op">;</span></span>
<span id="cb29-1170"><a href="#cb29-1170" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb29-1171"><a href="#cb29-1171" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> dom<span class="op">;</span></span>
<span id="cb29-1172"><a href="#cb29-1172" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-1173"><a href="#cb29-1173" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">formatDecimal</span>(number) {</span>
<span id="cb29-1174"><a href="#cb29-1174" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> number <span class="op">==</span> <span class="dv">1</span> <span class="op">?</span> number <span class="op">:</span> (<span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(number <span class="op">*</span> <span class="dv">100</span>) <span class="op">/</span> <span class="dv">100</span>)<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">slice</span>(<span class="dv">1</span>)</span>
<span id="cb29-1175"><a href="#cb29-1175" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-1176"><a href="#cb29-1176" aria-hidden="true" tabindex="-1"></a>button <span class="op">=</span> (data<span class="op">,</span> filename <span class="op">=</span> <span class="st">'data.csv'</span>) <span class="kw">=&gt;</span> {</span>
<span id="cb29-1177"><a href="#cb29-1177" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="op">!</span>data) <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="st">'Array of data required as first argument'</span>)<span class="op">;</span></span>
<span id="cb29-1178"><a href="#cb29-1178" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> downloadData<span class="op">;</span></span>
<span id="cb29-1179"><a href="#cb29-1179" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (filename<span class="op">.</span><span class="fu">includes</span>(<span class="st">'.csv'</span>)) {</span>
<span id="cb29-1180"><a href="#cb29-1180" aria-hidden="true" tabindex="-1"></a>    downloadData <span class="op">=</span> <span class="kw">new</span> <span class="bu">Blob</span>([d3<span class="op">.</span><span class="fu">csvFormat</span>(data)]<span class="op">,</span> { <span class="dt">type</span><span class="op">:</span> <span class="st">"text/csv"</span> })<span class="op">;</span></span>
<span id="cb29-1181"><a href="#cb29-1181" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb29-1182"><a href="#cb29-1182" aria-hidden="true" tabindex="-1"></a>    downloadData <span class="op">=</span> <span class="kw">new</span> <span class="bu">Blob</span>([<span class="bu">JSON</span><span class="op">.</span><span class="fu">stringify</span>(data<span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="dv">2</span>)]<span class="op">,</span> {</span>
<span id="cb29-1183"><a href="#cb29-1183" aria-hidden="true" tabindex="-1"></a>      <span class="dt">type</span><span class="op">:</span> <span class="st">"application/json"</span></span>
<span id="cb29-1184"><a href="#cb29-1184" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb29-1185"><a href="#cb29-1185" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb29-1186"><a href="#cb29-1186" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> size <span class="op">=</span> (downloadData<span class="op">.</span><span class="at">size</span> <span class="op">/</span> <span class="dv">1024</span>)<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb29-1187"><a href="#cb29-1187" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> button <span class="op">=</span> DOM<span class="op">.</span><span class="fu">download</span>(</span>
<span id="cb29-1188"><a href="#cb29-1188" aria-hidden="true" tabindex="-1"></a>    downloadData<span class="op">,</span></span>
<span id="cb29-1189"><a href="#cb29-1189" aria-hidden="true" tabindex="-1"></a>    filename<span class="op">,</span></span>
<span id="cb29-1190"><a href="#cb29-1190" aria-hidden="true" tabindex="-1"></a>    <span class="vs">`Download </span><span class="sc">${</span>filename<span class="sc">}</span><span class="vs"> (~</span><span class="sc">${</span>size<span class="sc">}</span><span class="vs"> KB)`</span></span>
<span id="cb29-1191"><a href="#cb29-1191" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb29-1192"><a href="#cb29-1192" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> button<span class="op">;</span></span>
<span id="cb29-1193"><a href="#cb29-1193" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-1194"><a href="#cb29-1194" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">invert</span>(arr) {</span>
<span id="cb29-1195"><a href="#cb29-1195" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> invertDotd <span class="op">?</span> [<span class="op">...</span><span class="bu">Array</span>(<span class="dv">10</span>)<span class="op">.</span><span class="fu">keys</span>()]<span class="op">.</span><span class="fu">map</span>(n <span class="kw">=&gt;</span> <span class="op">!</span>arr<span class="op">.</span><span class="fu">includes</span>(n))<span class="op">.</span><span class="fu">map</span>((x<span class="op">,</span> i) <span class="kw">=&gt;</span> x <span class="op">?</span> i <span class="op">:</span> <span class="kw">null</span>)<span class="op">.</span><span class="fu">filter</span>(i <span class="kw">=&gt;</span> i <span class="op">!==</span> <span class="kw">null</span>) <span class="op">:</span> arr</span>
<span id="cb29-1196"><a href="#cb29-1196" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-1197"><a href="#cb29-1197" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/@chrispahm/toggle-switch-input-button</span></span>
<span id="cb29-1198"><a href="#cb29-1198" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">toggleSwitch</span>(options <span class="op">=</span> { <span class="dt">textOn</span><span class="op">:</span> <span class="st">'True'</span><span class="op">,</span> <span class="dt">textOff</span><span class="op">:</span> <span class="st">'False'</span> }) {</span>
<span id="cb29-1199"><a href="#cb29-1199" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> button <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;div class="button-switch""&gt;&lt;/div&gt;`</span><span class="op">;</span></span>
<span id="cb29-1200"><a href="#cb29-1200" aria-hidden="true" tabindex="-1"></a>  button<span class="op">.</span><span class="at">innerText</span> <span class="op">=</span> options<span class="op">.</span><span class="at">textOn</span><span class="op">;</span></span>
<span id="cb29-1201"><a href="#cb29-1201" aria-hidden="true" tabindex="-1"></a>  button<span class="op">.</span><span class="at">value</span> <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb29-1202"><a href="#cb29-1202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1203"><a href="#cb29-1203" aria-hidden="true" tabindex="-1"></a>  button<span class="op">.</span><span class="at">onclick</span> <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb29-1204"><a href="#cb29-1204" aria-hidden="true" tabindex="-1"></a>    button<span class="op">.</span><span class="at">value</span> <span class="op">=</span> <span class="op">!</span>button<span class="op">.</span><span class="at">value</span><span class="op">;</span></span>
<span id="cb29-1205"><a href="#cb29-1205" aria-hidden="true" tabindex="-1"></a>    button<span class="op">.</span><span class="at">innerText</span> <span class="op">=</span> button<span class="op">.</span><span class="at">value</span> <span class="op">?</span> options<span class="op">.</span><span class="at">textOn</span> <span class="op">:</span> options<span class="op">.</span><span class="at">textOff</span><span class="op">;</span></span>
<span id="cb29-1206"><a href="#cb29-1206" aria-hidden="true" tabindex="-1"></a>    button<span class="op">.</span><span class="fu">dispatchEvent</span>(<span class="kw">new</span> <span class="bu">CustomEvent</span>(<span class="st">"input"</span>))<span class="op">;</span></span>
<span id="cb29-1207"><a href="#cb29-1207" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb29-1208"><a href="#cb29-1208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1209"><a href="#cb29-1209" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addButtonStyle</span>()</span>
<span id="cb29-1210"><a href="#cb29-1210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1211"><a href="#cb29-1211" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> button<span class="op">;</span></span>
<span id="cb29-1212"><a href="#cb29-1212" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-1213"><a href="#cb29-1213" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/@chrispahm/toggle-switch-input-button</span></span>
<span id="cb29-1214"><a href="#cb29-1214" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">addButtonStyle</span>() {</span>
<span id="cb29-1215"><a href="#cb29-1215" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> el <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">'style'</span>)<span class="op">;</span></span>
<span id="cb29-1216"><a href="#cb29-1216" aria-hidden="true" tabindex="-1"></a>  el<span class="op">.</span><span class="fu">setAttribute</span>(<span class="st">'type'</span><span class="op">,</span> <span class="st">'text/css'</span>)<span class="op">;</span></span>
<span id="cb29-1217"><a href="#cb29-1217" aria-hidden="true" tabindex="-1"></a>  <span class="bu">document</span><span class="op">.</span><span class="at">head</span><span class="op">.</span><span class="fu">appendChild</span>(el)<span class="op">;</span></span>
<span id="cb29-1218"><a href="#cb29-1218" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> sheet <span class="op">=</span> el<span class="op">.</span><span class="at">sheet</span><span class="op">;</span></span>
<span id="cb29-1219"><a href="#cb29-1219" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">addRule</span>(rule) {</span>
<span id="cb29-1220"><a href="#cb29-1220" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span> {</span>
<span id="cb29-1221"><a href="#cb29-1221" aria-hidden="true" tabindex="-1"></a>      sheet<span class="op">.</span><span class="fu">insertRule</span>(rule<span class="op">,</span> sheet<span class="op">.</span><span class="at">cssRules</span><span class="op">.</span><span class="at">length</span>)<span class="op">;</span></span>
<span id="cb29-1222"><a href="#cb29-1222" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">catch</span> (e) {</span>
<span id="cb29-1223"><a href="#cb29-1223" aria-hidden="true" tabindex="-1"></a>      <span class="bu">console</span><span class="op">.</span><span class="fu">warn</span>(<span class="st">'Error inserting rule'</span><span class="op">,</span> rule<span class="op">,</span> e)<span class="op">;</span></span>
<span id="cb29-1224"><a href="#cb29-1224" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb29-1225"><a href="#cb29-1225" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb29-1226"><a href="#cb29-1226" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addRule</span>(</span>
<span id="cb29-1227"><a href="#cb29-1227" aria-hidden="true" tabindex="-1"></a>    <span class="st">'.button-switch { -webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;display: inline-block;-webkit-border-radius: 2px;-moz-border-radius: 2px;border-radius: 2px;background-color: #EFEFEF;padding: 0px 7px 0px 7px;text-align: center;border: 1px solid grey;width: auto;color: #1c1c1c;font-size: 13px;font-family: sans-serif;text-decoration: none; }'</span></span>
<span id="cb29-1228"><a href="#cb29-1228" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb29-1229"><a href="#cb29-1229" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addRule</span>(</span>
<span id="cb29-1230"><a href="#cb29-1230" aria-hidden="true" tabindex="-1"></a>    <span class="st">'.button-switch:hover { background-color: #E5E5E5;border: 1px solid #454545; }'</span></span>
<span id="cb29-1231"><a href="#cb29-1231" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb29-1232"><a href="#cb29-1232" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addRule</span>(</span>
<span id="cb29-1233"><a href="#cb29-1233" aria-hidden="true" tabindex="-1"></a>    <span class="st">'.button-switch:active { background-color: #f5f5f5;border: 1px solid grey; }'</span></span>
<span id="cb29-1234"><a href="#cb29-1234" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb29-1235"><a href="#cb29-1235" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-1236"><a href="#cb29-1236" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">setSpreadDotd</span>(dotd) {</span>
<span id="cb29-1237"><a href="#cb29-1237" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> dotdLength <span class="op">=</span> dotd<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb29-1238"><a href="#cb29-1238" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (dotdLength <span class="op">===</span> <span class="dv">10</span>) {<span class="cf">return</span> <span class="st">"&gt;"</span>}</span>
<span id="cb29-1239"><a href="#cb29-1239" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (dotdLength <span class="op">===</span> <span class="dv">0</span>) {<span class="cf">return</span> <span class="st">"&gt;0"</span>}</span>
<span id="cb29-1240"><a href="#cb29-1240" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (dotdLength <span class="op">===</span> <span class="dv">1</span>) {<span class="cf">return</span> <span class="vs">`</span><span class="sc">${</span>dotd[<span class="dv">0</span>]<span class="sc">}</span><span class="vs">&gt;&gt;1&gt;9`</span>}</span>
<span id="cb29-1241"><a href="#cb29-1241" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> steps <span class="op">=</span> dotd<span class="op">.</span><span class="fu">map</span>((x<span class="op">,</span> i) <span class="kw">=&gt;</span> dotd[i <span class="op">+</span> <span class="dv">1</span>] <span class="op">-</span> x)</span>
<span id="cb29-1242"><a href="#cb29-1242" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">filter</span>(i <span class="kw">=&gt;</span> <span class="op">!</span><span class="pp">isNaN</span>(i))<span class="op">,</span></span>
<span id="cb29-1243"><a href="#cb29-1243" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb29-1244"><a href="#cb29-1244" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> split <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb29-1245"><a href="#cb29-1245" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (<span class="kw">const</span> step <span class="kw">of</span> steps) {</span>
<span id="cb29-1246"><a href="#cb29-1246" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (step <span class="op">!==</span> <span class="dv">1</span>) {</span>
<span id="cb29-1247"><a href="#cb29-1247" aria-hidden="true" tabindex="-1"></a>       result<span class="op">.</span><span class="fu">push</span>([split<span class="op">,</span> step <span class="op">-</span> <span class="dv">1</span>])</span>
<span id="cb29-1248"><a href="#cb29-1248" aria-hidden="true" tabindex="-1"></a>       split <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb29-1249"><a href="#cb29-1249" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb29-1250"><a href="#cb29-1250" aria-hidden="true" tabindex="-1"></a>      split <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb29-1251"><a href="#cb29-1251" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb29-1252"><a href="#cb29-1252" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb29-1253"><a href="#cb29-1253" aria-hidden="true" tabindex="-1"></a>  result<span class="op">.</span><span class="fu">push</span>(split)</span>
<span id="cb29-1254"><a href="#cb29-1254" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> flat <span class="op">=</span> []<span class="op">.</span><span class="fu">concat</span>(<span class="op">...</span>result)<span class="op">,</span></span>
<span id="cb29-1255"><a href="#cb29-1255" aria-hidden="true" tabindex="-1"></a>    resultSum <span class="op">=</span> flat<span class="op">.</span><span class="fu">reduce</span>((a<span class="op">,</span> b) <span class="kw">=&gt;</span> a <span class="op">+</span> b<span class="op">,</span> <span class="dv">0</span>)<span class="op">,</span></span>
<span id="cb29-1256"><a href="#cb29-1256" aria-hidden="true" tabindex="-1"></a>    uniq <span class="op">=</span> [<span class="op">...</span><span class="kw">new</span> <span class="bu">Set</span>(flat)]<span class="op">;</span></span>
<span id="cb29-1257"><a href="#cb29-1257" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> [dotd[<span class="dv">0</span>] <span class="op">?</span> dotd[<span class="dv">0</span>] <span class="op">:</span> <span class="kw">null</span><span class="op">,</span> <span class="kw">null</span>]<span class="op">.</span><span class="fu">concat</span>(<span class="bu">JSON</span><span class="op">.</span><span class="fu">stringify</span>(uniq) <span class="op">===</span> <span class="st">"[1]"</span> <span class="op">?</span> [<span class="kw">null</span><span class="op">,</span> <span class="dv">1</span>] <span class="op">:</span></span>
<span id="cb29-1258"><a href="#cb29-1258" aria-hidden="true" tabindex="-1"></a>                               flat<span class="op">.</span><span class="fu">concat</span>(<span class="dv">10</span> <span class="op">-</span> resultSum)<span class="op">.</span><span class="fu">map</span>((x<span class="op">,</span> i) <span class="kw">=&gt;</span> i <span class="op">%</span> <span class="dv">2</span> <span class="op">===</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> x <span class="op">===</span> <span class="dv">1</span> <span class="op">?</span> <span class="kw">null</span> <span class="op">:</span> x))<span class="op">.</span><span class="fu">join</span>(<span class="st">"&gt;"</span>)</span>
<span id="cb29-1259"><a href="#cb29-1259" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-1260"><a href="#cb29-1260" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">setSliceDotd</span>(dotd) {</span>
<span id="cb29-1261"><a href="#cb29-1261" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> dotdLength <span class="op">=</span> dotd<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb29-1262"><a href="#cb29-1262" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (dotdLength <span class="op">===</span> <span class="dv">10</span>) {<span class="cf">return</span> <span class="st">":"</span>}</span>
<span id="cb29-1263"><a href="#cb29-1263" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (dotdLength <span class="op">===</span> <span class="dv">0</span>) {<span class="cf">return</span> <span class="st">":0"</span>}</span>
<span id="cb29-1264"><a href="#cb29-1264" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> steps <span class="op">=</span> dotd<span class="op">.</span><span class="fu">map</span>((x<span class="op">,</span> i) <span class="kw">=&gt;</span> dotd[i <span class="op">+</span> <span class="dv">1</span>] <span class="op">-</span> x)</span>
<span id="cb29-1265"><a href="#cb29-1265" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">filter</span>(i <span class="kw">=&gt;</span> <span class="op">!</span><span class="pp">isNaN</span>(i))<span class="op">,</span></span>
<span id="cb29-1266"><a href="#cb29-1266" aria-hidden="true" tabindex="-1"></a>    stepSum <span class="op">=</span> steps<span class="op">.</span><span class="fu">reduce</span>((a<span class="op">,</span> b) <span class="kw">=&gt;</span> a <span class="op">+</span> b<span class="op">,</span> <span class="dv">0</span>)<span class="op">,</span></span>
<span id="cb29-1267"><a href="#cb29-1267" aria-hidden="true" tabindex="-1"></a>    uniq <span class="op">=</span> [<span class="op">...</span><span class="kw">new</span> <span class="bu">Set</span>(steps<span class="op">.</span><span class="fu">concat</span>(<span class="dv">10</span> <span class="op">-</span> stepSum))]<span class="op">;</span></span>
<span id="cb29-1268"><a href="#cb29-1268" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> [dotd[<span class="dv">0</span>] <span class="op">?</span> dotd[<span class="dv">0</span>] <span class="op">:</span> <span class="kw">null</span><span class="op">,</span> <span class="kw">null</span>]<span class="op">.</span><span class="fu">concat</span>(uniq<span class="op">.</span><span class="at">length</span> <span class="op">===</span> <span class="dv">1</span> <span class="op">?</span> uniq <span class="op">:</span></span>
<span id="cb29-1269"><a href="#cb29-1269" aria-hidden="true" tabindex="-1"></a>                               steps<span class="op">.</span><span class="fu">concat</span>(<span class="dv">10</span> <span class="op">-</span> stepSum)<span class="op">.</span><span class="fu">map</span>(x <span class="kw">=&gt;</span> x <span class="op">===</span> <span class="dv">1</span> <span class="op">?</span> <span class="kw">null</span> <span class="op">:</span> x))<span class="op">.</span><span class="fu">join</span>(<span class="st">":"</span>)<span class="op">;</span></span>
<span id="cb29-1270"><a href="#cb29-1270" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-1271"><a href="#cb29-1271" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">encodeSlice</span>(<span class="op">...</span>args) {</span>
<span id="cb29-1272"><a href="#cb29-1272" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> args<span class="op">.</span><span class="fu">join</span>()<span class="op">.</span><span class="fu">replaceAll</span>(<span class="st">","</span><span class="op">,</span> <span class="st">":"</span>)</span>
<span id="cb29-1273"><a href="#cb29-1273" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-1274"><a href="#cb29-1274" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">decodeSlice</span>(s) {</span>
<span id="cb29-1275"><a href="#cb29-1275" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> [start<span class="op">,</span> stop<span class="op">,</span> <span class="op">...</span>steps] <span class="op">=</span> s<span class="op">.</span><span class="fu">split</span>(<span class="st">":"</span>)<span class="op">.</span><span class="fu">map</span>(i <span class="kw">=&gt;</span> i <span class="op">===</span> <span class="st">""</span> <span class="op">?</span> <span class="kw">null</span> <span class="op">:</span> <span class="bu">Number</span>(i))</span>
<span id="cb29-1276"><a href="#cb29-1276" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> step <span class="op">=</span> steps[<span class="dv">0</span>] <span class="op">==</span> <span class="kw">null</span> <span class="op">?</span> <span class="dv">1</span><span class="op">:</span> steps[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb29-1277"><a href="#cb29-1277" aria-hidden="true" tabindex="-1"></a>  start <span class="op">=</span> start <span class="op">==</span> <span class="kw">null</span> <span class="op">&amp;&amp;</span> step <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">?</span> <span class="dv">0</span> <span class="op">:</span> start <span class="op">==</span> <span class="kw">null</span> <span class="op">&amp;&amp;</span> step <span class="op">&lt;</span> <span class="dv">0</span> <span class="op">?</span> <span class="dv">365</span> <span class="op">:</span> start<span class="op">;</span></span>
<span id="cb29-1278"><a href="#cb29-1278" aria-hidden="true" tabindex="-1"></a>  stop <span class="op">=</span> stop <span class="op">==</span> <span class="kw">null</span> <span class="op">&amp;&amp;</span> step <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">?</span> <span class="dv">366</span> <span class="op">:</span> stop<span class="op">;</span></span>
<span id="cb29-1279"><a href="#cb29-1279" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> [start<span class="op">,</span> stop<span class="op">,</span> step]</span>
<span id="cb29-1280"><a href="#cb29-1280" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-1281"><a href="#cb29-1281" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">decodeSpread</span>(spread) {</span>
<span id="cb29-1282"><a href="#cb29-1282" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> spread<span class="op">.</span><span class="fu">replace</span>(<span class="ss">/</span><span class="sc">^</span><span class="ss">&lt;/</span><span class="op">,</span> <span class="st">"366&lt;"</span>)<span class="op">.</span><span class="fu">replace</span>(<span class="ss">/</span><span class="sc">^</span><span class="ss">&gt;/</span><span class="op">,</span> <span class="st">"0&gt;"</span>)</span>
<span id="cb29-1283"><a href="#cb29-1283" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">split</span>(<span class="ss">/</span><span class="sc">(?</span><span class="ss">=^</span><span class="sc">\d|</span><span class="ss">&lt;</span><span class="sc">|</span><span class="ss">&gt;</span><span class="sc">)</span><span class="ss">/</span>)<span class="op">.</span><span class="fu">map</span>(s <span class="kw">=&gt;</span> s<span class="op">.</span><span class="fu">replace</span>(<span class="st">"&lt;"</span><span class="op">,</span> <span class="st">"-"</span>)</span>
<span id="cb29-1284"><a href="#cb29-1284" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">replace</span>(<span class="st">"&gt;"</span><span class="op">,</span> <span class="st">""</span>))<span class="op">.</span><span class="fu">map</span>(s <span class="kw">=&gt;</span> s <span class="op">===</span> <span class="st">""</span> <span class="op">||</span> <span class="pp">isNaN</span>(s) <span class="op">?</span> <span class="kw">null</span> <span class="op">:</span> <span class="bu">Number</span>(s))</span>
<span id="cb29-1285"><a href="#cb29-1285" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-1286"><a href="#cb29-1286" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">encodeSpread</span>(args) {</span>
<span id="cb29-1287"><a href="#cb29-1287" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> args<span class="op">.</span><span class="fu">map</span>(a <span class="kw">=&gt;</span> <span class="pp">isNaN</span>(a) <span class="op">?</span> <span class="kw">null</span> <span class="op">:</span> a)<span class="op">.</span><span class="fu">join</span>(<span class="st">"&gt;"</span>)<span class="op">.</span><span class="fu">replace</span>(<span class="st">"&gt;-"</span><span class="op">,</span> <span class="st">"&lt;"</span>)</span>
<span id="cb29-1288"><a href="#cb29-1288" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-1289"><a href="#cb29-1289" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">slice</span>(self<span class="op">,</span> start<span class="op">,</span> stop<span class="op">,</span> steps<span class="op">,</span> <span class="op">...</span>args) {</span>
<span id="cb29-1290"><a href="#cb29-1290" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> len <span class="op">=</span> self<span class="op">.</span><span class="at">length</span><span class="op">,</span> result <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb29-1291"><a href="#cb29-1291" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (steps <span class="op">===</span> <span class="dv">0</span> <span class="op">||</span> len <span class="op">===</span> <span class="dv">0</span>) { <span class="cf">return</span> result }<span class="op">;</span></span>
<span id="cb29-1292"><a href="#cb29-1292" aria-hidden="true" tabindex="-1"></a>  steps <span class="op">=</span> (<span class="op">!</span>steps <span class="op">||</span> steps<span class="op">.</span><span class="at">length</span> <span class="op">===</span> <span class="dv">0</span> <span class="op">?</span> [<span class="dv">1</span>] <span class="op">:</span></span>
<span id="cb29-1293"><a href="#cb29-1293" aria-hidden="true" tabindex="-1"></a>    <span class="kw">typeof</span> steps <span class="op">===</span> <span class="st">"number"</span> <span class="op">?</span> [steps] <span class="op">:</span></span>
<span id="cb29-1294"><a href="#cb29-1294" aria-hidden="true" tabindex="-1"></a>    <span class="kw">typeof</span> steps <span class="op">===</span> <span class="st">"string"</span> <span class="op">?</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>(steps<span class="op">,</span> <span class="bu">Number</span>) <span class="op">:</span></span>
<span id="cb29-1295"><a href="#cb29-1295" aria-hidden="true" tabindex="-1"></a>    steps)<span class="op">.</span><span class="fu">concat</span>(args<span class="op">.</span><span class="fu">map</span>(i <span class="kw">=&gt;</span> i <span class="op">==</span> <span class="kw">null</span> <span class="op">?</span> <span class="dv">1</span> <span class="op">:</span> i))<span class="op">;</span></span>
<span id="cb29-1296"><a href="#cb29-1296" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> stepCount <span class="op">=</span> steps<span class="op">.</span><span class="at">length</span><span class="op">,</span></span>
<span id="cb29-1297"><a href="#cb29-1297" aria-hidden="true" tabindex="-1"></a>    stepSum <span class="op">=</span> steps<span class="op">.</span><span class="fu">reduce</span>((a<span class="op">,</span> b) <span class="kw">=&gt;</span> a <span class="op">+</span> b<span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb29-1298"><a href="#cb29-1298" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (stepSum <span class="op">===</span> <span class="dv">0</span>) { <span class="cf">return</span> result }<span class="op">;</span></span>
<span id="cb29-1299"><a href="#cb29-1299" aria-hidden="true" tabindex="-1"></a>  start <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(</span>
<span id="cb29-1300"><a href="#cb29-1300" aria-hidden="true" tabindex="-1"></a>    start <span class="op">==</span> <span class="kw">null</span> <span class="op">&amp;&amp;</span> stepSum <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">?</span> <span class="dv">0</span> <span class="op">:</span></span>
<span id="cb29-1301"><a href="#cb29-1301" aria-hidden="true" tabindex="-1"></a>    start <span class="op">==</span> <span class="kw">null</span> <span class="op">&amp;&amp;</span> stepSum <span class="op">&lt;</span> <span class="dv">0</span> <span class="op">?</span> len <span class="op">-</span> <span class="dv">1</span> <span class="op">:</span></span>
<span id="cb29-1302"><a href="#cb29-1302" aria-hidden="true" tabindex="-1"></a>    start <span class="op">&gt;=</span> len <span class="op">?</span> len <span class="op">-</span> <span class="dv">1</span> <span class="op">:</span></span>
<span id="cb29-1303"><a href="#cb29-1303" aria-hidden="true" tabindex="-1"></a>    start <span class="op">&lt;</span> <span class="dv">0</span> <span class="op">?</span> start <span class="op">+</span> len <span class="op">:</span></span>
<span id="cb29-1304"><a href="#cb29-1304" aria-hidden="true" tabindex="-1"></a>    start<span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb29-1305"><a href="#cb29-1305" aria-hidden="true" tabindex="-1"></a>  stop <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(</span>
<span id="cb29-1306"><a href="#cb29-1306" aria-hidden="true" tabindex="-1"></a>    stop <span class="op">==</span> <span class="kw">null</span> <span class="op">&amp;&amp;</span> stepSum <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">?</span> len <span class="op">:</span></span>
<span id="cb29-1307"><a href="#cb29-1307" aria-hidden="true" tabindex="-1"></a>    stop <span class="op">==</span> <span class="kw">null</span> <span class="op">&amp;&amp;</span> stepSum <span class="op">&lt;</span> <span class="dv">0</span> <span class="op">?</span> <span class="op">-</span><span class="dv">1</span> <span class="op">:</span></span>
<span id="cb29-1308"><a href="#cb29-1308" aria-hidden="true" tabindex="-1"></a>    stop <span class="op">&gt;=</span> len <span class="op">?</span> len <span class="op">:</span></span>
<span id="cb29-1309"><a href="#cb29-1309" aria-hidden="true" tabindex="-1"></a>    stop <span class="op">&lt;</span> <span class="dv">0</span> <span class="op">?</span> stop <span class="op">+</span> len <span class="op">:</span></span>
<span id="cb29-1310"><a href="#cb29-1310" aria-hidden="true" tabindex="-1"></a>    stop<span class="op">,</span> <span class="op">-</span><span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb29-1311"><a href="#cb29-1311" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (</span>
<span id="cb29-1312"><a href="#cb29-1312" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> i <span class="op">=</span> start<span class="op">,</span> counter <span class="op">=</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb29-1313"><a href="#cb29-1313" aria-hidden="true" tabindex="-1"></a>    stepSum <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">?</span> i <span class="op">&lt;</span> stop <span class="op">:</span> i <span class="op">&gt;</span> stop<span class="op">;</span></span>
<span id="cb29-1314"><a href="#cb29-1314" aria-hidden="true" tabindex="-1"></a>    i <span class="op">+=</span> steps[counter]</span>
<span id="cb29-1315"><a href="#cb29-1315" aria-hidden="true" tabindex="-1"></a>  ) {</span>
<span id="cb29-1316"><a href="#cb29-1316" aria-hidden="true" tabindex="-1"></a>    result<span class="op">.</span><span class="fu">push</span>(self[i])<span class="op">;</span></span>
<span id="cb29-1317"><a href="#cb29-1317" aria-hidden="true" tabindex="-1"></a>    counter <span class="op">=</span> (counter <span class="op">+</span> <span class="dv">1</span>) <span class="op">%</span> stepCount<span class="op">;</span></span>
<span id="cb29-1318"><a href="#cb29-1318" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb29-1319"><a href="#cb29-1319" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb29-1320"><a href="#cb29-1320" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-1321"><a href="#cb29-1321" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">spread</span>(self<span class="op">,</span> startOrStop<span class="op">,</span> span<span class="op">,</span> splitsAndSpaces<span class="op">,</span> <span class="op">...</span>args) {</span>
<span id="cb29-1322"><a href="#cb29-1322" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> len <span class="op">=</span> self<span class="op">.</span><span class="at">length</span><span class="op">,</span> result <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb29-1323"><a href="#cb29-1323" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (span <span class="op">===</span> <span class="dv">0</span> <span class="op">||</span> len <span class="op">===</span> <span class="dv">0</span>) { <span class="cf">return</span> result }<span class="op">;</span></span>
<span id="cb29-1324"><a href="#cb29-1324" aria-hidden="true" tabindex="-1"></a>  splitsAndSpaces <span class="op">=</span> (<span class="op">!</span>splitsAndSpaces <span class="op">||</span> splitsAndSpaces<span class="op">.</span><span class="at">length</span> <span class="op">===</span> <span class="dv">0</span> <span class="op">?</span> [<span class="dv">1</span>] <span class="op">:</span></span>
<span id="cb29-1325"><a href="#cb29-1325" aria-hidden="true" tabindex="-1"></a>    <span class="kw">typeof</span> splitsAndSpaces <span class="op">===</span> <span class="st">"number"</span> <span class="op">?</span> [splitsAndSpaces] <span class="op">:</span></span>
<span id="cb29-1326"><a href="#cb29-1326" aria-hidden="true" tabindex="-1"></a>    <span class="kw">typeof</span> splitsAndSpaces <span class="op">===</span> <span class="st">"string"</span> <span class="op">?</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>(splitsAndSpaces<span class="op">,</span> <span class="bu">Number</span>) <span class="op">:</span></span>
<span id="cb29-1327"><a href="#cb29-1327" aria-hidden="true" tabindex="-1"></a>    splitsAndSpaces)<span class="op">.</span><span class="fu">concat</span>(args<span class="op">.</span><span class="fu">map</span>(i <span class="kw">=&gt;</span> i <span class="op">==</span> <span class="kw">null</span> <span class="op">?</span> <span class="dv">1</span> <span class="op">:</span> i))<span class="op">;</span></span>
<span id="cb29-1328"><a href="#cb29-1328" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> splitCount <span class="op">=</span> splitsAndSpaces<span class="op">.</span><span class="at">length</span><span class="op">,</span></span>
<span id="cb29-1329"><a href="#cb29-1329" aria-hidden="true" tabindex="-1"></a>    splitSpaceSum <span class="op">=</span> splitsAndSpaces<span class="op">.</span><span class="fu">reduce</span>((a<span class="op">,</span> b) <span class="kw">=&gt;</span> a <span class="op">+</span> b<span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb29-1330"><a href="#cb29-1330" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (splitSpaceSum <span class="op">&lt;=</span> <span class="dv">0</span>) { <span class="cf">return</span> result }<span class="op">;</span></span>
<span id="cb29-1331"><a href="#cb29-1331" aria-hidden="true" tabindex="-1"></a>  startOrStop <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(</span>
<span id="cb29-1332"><a href="#cb29-1332" aria-hidden="true" tabindex="-1"></a>    startOrStop <span class="op">==</span> <span class="kw">null</span> <span class="op">&amp;&amp;</span> span <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">||</span> startOrStop <span class="op">==</span> <span class="kw">null</span> <span class="op">&amp;&amp;</span> span <span class="op">==</span> <span class="kw">null</span> <span class="op">?</span> <span class="dv">0</span> <span class="op">:</span></span>
<span id="cb29-1333"><a href="#cb29-1333" aria-hidden="true" tabindex="-1"></a>    startOrStop <span class="op">==</span> <span class="kw">null</span> <span class="op">||</span> startOrStop <span class="op">&gt;</span> len <span class="op">&amp;&amp;</span> span <span class="op">&lt;</span> <span class="dv">0</span> <span class="op">?</span> len <span class="op">:</span></span>
<span id="cb29-1334"><a href="#cb29-1334" aria-hidden="true" tabindex="-1"></a>    startOrStop <span class="op">&lt;</span> <span class="dv">0</span> <span class="op">?</span> startOrStop <span class="op">+</span> len <span class="op">:</span></span>
<span id="cb29-1335"><a href="#cb29-1335" aria-hidden="true" tabindex="-1"></a>    startOrStop<span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb29-1336"><a href="#cb29-1336" aria-hidden="true" tabindex="-1"></a>  span <span class="op">=</span> span <span class="op">==</span> <span class="kw">null</span> <span class="op">||</span> startOrStop <span class="op">+</span> span <span class="op">&gt;</span> len <span class="op">?</span> len <span class="op">-</span> startOrStop <span class="op">:</span></span>
<span id="cb29-1337"><a href="#cb29-1337" aria-hidden="true" tabindex="-1"></a>    startOrStop <span class="op">+</span> span <span class="op">&lt;</span> <span class="dv">0</span> <span class="op">?</span> <span class="op">-</span>startOrStop<span class="op">:</span> span<span class="op">;</span></span>
<span id="cb29-1338"><a href="#cb29-1338" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> start <span class="op">=</span> span <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">?</span> startOrStop <span class="op">:</span> startOrStop <span class="op">+</span> span<span class="op">,</span></span>
<span id="cb29-1339"><a href="#cb29-1339" aria-hidden="true" tabindex="-1"></a>    stop <span class="op">=</span> span <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">?</span> startOrStop <span class="op">+</span> span <span class="op">:</span> startOrStop<span class="op">;</span></span>
<span id="cb29-1340"><a href="#cb29-1340" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> start<span class="op">,</span> c <span class="op">=</span> <span class="op">-</span><span class="dv">1</span><span class="op">,</span> arr <span class="op">=</span> []<span class="op">;</span> i <span class="op">&lt;</span> stop<span class="op">;</span> i <span class="op">+=</span> splitsAndSpaces[c]) {</span>
<span id="cb29-1341"><a href="#cb29-1341" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> ((c <span class="op">=</span> (c <span class="op">+</span> <span class="dv">1</span>) <span class="op">%</span> splitCount) <span class="op">%</span> <span class="dv">2</span> <span class="op">===</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> i <span class="op">+</span> splitsAndSpaces[c] <span class="op">&lt;=</span> stop) {</span>
<span id="cb29-1342"><a href="#cb29-1342" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> ((arr <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>({<span class="dt">length</span><span class="op">:</span> splitsAndSpaces[c]}<span class="op">,</span> (_<span class="op">,</span> j) <span class="kw">=&gt;</span> j <span class="op">+</span> i)<span class="op">.</span><span class="fu">map</span>(</span>
<span id="cb29-1343"><a href="#cb29-1343" aria-hidden="true" tabindex="-1"></a>        index <span class="kw">=&gt;</span> self[index])<span class="op">.</span><span class="fu">filter</span>(item <span class="kw">=&gt;</span> item <span class="op">!==</span> <span class="kw">undefined</span>)</span>
<span id="cb29-1344"><a href="#cb29-1344" aria-hidden="true" tabindex="-1"></a>          )<span class="op">.</span><span class="at">length</span> <span class="op">==</span> splitsAndSpaces[c]) { result<span class="op">.</span><span class="fu">push</span>(arr) }</span>
<span id="cb29-1345"><a href="#cb29-1345" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb29-1346"><a href="#cb29-1346" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb29-1347"><a href="#cb29-1347" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb29-1348"><a href="#cb29-1348" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-28-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-28-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-28-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-28-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-28-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-28-6" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-28-7" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-28-8" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-28-9" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-28-10" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-28-11" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-28-12" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-28-13" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-28-14" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-28-15" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-28-16" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-28-17" data-nodetype="declaration">

</div>
</div>
</div>
</div>
</div></section><section id="variables-2" class="level5 appendix"><h2 class="anchored quarto-appendix-heading">Variables</h2><div class="quarto-appendix-contents">
<div class="cell" data-output="all">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb30" data-startfrom="1355" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1354;"><span id="cb30-1355"><a href="#cb30-1355" aria-hidden="true" tabindex="-1"></a>nested <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>({<span class="dt">length</span><span class="op">:</span> intervals<span class="op">.</span><span class="at">length</span>}<span class="op">,</span> (_<span class="op">,</span> i) <span class="kw">=&gt;</span> ([</span>
<span id="cb30-1356"><a href="#cb30-1356" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb30-1357"><a href="#cb30-1357" aria-hidden="true" tabindex="-1"></a>  <span class="dt">label</span><span class="op">:</span> <span class="vs">`</span><span class="sc">${</span>i<span class="sc">}</span><span class="vs"> or </span><span class="sc">${</span>i<span class="op">+</span><span class="dv">5</span><span class="sc">}</span><span class="vs">`</span><span class="op">,</span></span>
<span id="cb30-1358"><a href="#cb30-1358" aria-hidden="true" tabindex="-1"></a>  <span class="dt">duration</span><span class="op">:</span> intervals[i][<span class="dv">1</span>] <span class="op">!==</span> intervals[i][<span class="dv">0</span>] <span class="op">?</span> intervals[i][<span class="dv">0</span>] <span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb30-1359"><a href="#cb30-1359" aria-hidden="true" tabindex="-1"></a>  <span class="dt">group</span><span class="op">:</span> <span class="st">"Rest"</span></span>
<span id="cb30-1360"><a href="#cb30-1360" aria-hidden="true" tabindex="-1"></a>}<span class="op">,</span></span>
<span id="cb30-1361"><a href="#cb30-1361" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb30-1362"><a href="#cb30-1362" aria-hidden="true" tabindex="-1"></a>  <span class="dt">label</span><span class="op">:</span> <span class="vs">`</span><span class="sc">${</span>i<span class="sc">}</span><span class="vs"> or </span><span class="sc">${</span>i<span class="op">+</span><span class="dv">5</span><span class="sc">}</span><span class="vs">`</span><span class="op">,</span></span>
<span id="cb30-1363"><a href="#cb30-1363" aria-hidden="true" tabindex="-1"></a>  <span class="dt">duration</span><span class="op">:</span> intervals[i][<span class="dv">1</span>]<span class="op">-</span>intervals[i][<span class="dv">0</span>]<span class="op">,</span></span>
<span id="cb30-1364"><a href="#cb30-1364" aria-hidden="true" tabindex="-1"></a>  <span class="dt">group</span><span class="op">:</span> <span class="st">"Work"</span></span>
<span id="cb30-1365"><a href="#cb30-1365" aria-hidden="true" tabindex="-1"></a>}<span class="op">,</span></span>
<span id="cb30-1366"><a href="#cb30-1366" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb30-1367"><a href="#cb30-1367" aria-hidden="true" tabindex="-1"></a>  <span class="dt">label</span><span class="op">:</span> <span class="vs">`</span><span class="sc">${</span>i<span class="sc">}</span><span class="vs"> or </span><span class="sc">${</span>i<span class="op">+</span><span class="dv">5</span><span class="sc">}</span><span class="vs">`</span><span class="op">,</span></span>
<span id="cb30-1368"><a href="#cb30-1368" aria-hidden="true" tabindex="-1"></a>  <span class="dt">duration</span><span class="op">:</span> intervals[i][<span class="dv">1</span>] <span class="op">!==</span> intervals[i][<span class="dv">0</span>] <span class="op">?</span> <span class="dv">1</span><span class="op">-</span>intervals[i][<span class="dv">1</span>] <span class="op">:</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb30-1369"><a href="#cb30-1369" aria-hidden="true" tabindex="-1"></a>  <span class="dt">group</span><span class="op">:</span> <span class="st">"Rest"</span></span>
<span id="cb30-1370"><a href="#cb30-1370" aria-hidden="true" tabindex="-1"></a>  }]))</span>
<span id="cb30-1371"><a href="#cb30-1371" aria-hidden="true" tabindex="-1"></a>durations <span class="op">=</span> []<span class="op">.</span><span class="fu">concat</span>(<span class="op">...</span>nested)</span>
<span id="cb30-1372"><a href="#cb30-1372" aria-hidden="true" tabindex="-1"></a>theme_Flat <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb30-1373"><a href="#cb30-1373" aria-hidden="true" tabindex="-1"></a><span class="vs">/* Options */</span></span>
<span id="cb30-1374"><a href="#cb30-1374" aria-hidden="true" tabindex="-1"></a><span class="vs">:scope {</span></span>
<span id="cb30-1375"><a href="#cb30-1375" aria-hidden="true" tabindex="-1"></a><span class="vs">  color: #3b99fc;</span></span>
<span id="cb30-1376"><a href="#cb30-1376" aria-hidden="true" tabindex="-1"></a><span class="vs">  width: 240px;</span></span>
<span id="cb30-1377"><a href="#cb30-1377" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb30-1378"><a href="#cb30-1378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-1379"><a href="#cb30-1379" aria-hidden="true" tabindex="-1"></a><span class="vs">:scope {</span></span>
<span id="cb30-1380"><a href="#cb30-1380" aria-hidden="true" tabindex="-1"></a><span class="vs">  position: relative;</span></span>
<span id="cb30-1381"><a href="#cb30-1381" aria-hidden="true" tabindex="-1"></a><span class="vs">  display: inline-block;</span></span>
<span id="cb30-1382"><a href="#cb30-1382" aria-hidden="true" tabindex="-1"></a><span class="vs">  --thumb-size: 15px;</span></span>
<span id="cb30-1383"><a href="#cb30-1383" aria-hidden="true" tabindex="-1"></a><span class="vs">  --thumb-radius: calc(var(--thumb-size) / 2);</span></span>
<span id="cb30-1384"><a href="#cb30-1384" aria-hidden="true" tabindex="-1"></a><span class="vs">  padding: var(--thumb-radius) 0;</span></span>
<span id="cb30-1385"><a href="#cb30-1385" aria-hidden="true" tabindex="-1"></a><span class="vs">  margin: 2px;</span></span>
<span id="cb30-1386"><a href="#cb30-1386" aria-hidden="true" tabindex="-1"></a><span class="vs">  vertical-align: middle;</span></span>
<span id="cb30-1387"><a href="#cb30-1387" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb30-1388"><a href="#cb30-1388" aria-hidden="true" tabindex="-1"></a><span class="vs">:scope .range-track {</span></span>
<span id="cb30-1389"><a href="#cb30-1389" aria-hidden="true" tabindex="-1"></a><span class="vs">  box-sizing: border-box;</span></span>
<span id="cb30-1390"><a href="#cb30-1390" aria-hidden="true" tabindex="-1"></a><span class="vs">  position: relative;</span></span>
<span id="cb30-1391"><a href="#cb30-1391" aria-hidden="true" tabindex="-1"></a><span class="vs">  height: 7px;</span></span>
<span id="cb30-1392"><a href="#cb30-1392" aria-hidden="true" tabindex="-1"></a><span class="vs">  background-color: hsl(0, 0%, 80%);</span></span>
<span id="cb30-1393"><a href="#cb30-1393" aria-hidden="true" tabindex="-1"></a><span class="vs">  overflow: visible;</span></span>
<span id="cb30-1394"><a href="#cb30-1394" aria-hidden="true" tabindex="-1"></a><span class="vs">  border-radius: 4px;</span></span>
<span id="cb30-1395"><a href="#cb30-1395" aria-hidden="true" tabindex="-1"></a><span class="vs">  padding: 0 var(--thumb-radius);</span></span>
<span id="cb30-1396"><a href="#cb30-1396" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb30-1397"><a href="#cb30-1397" aria-hidden="true" tabindex="-1"></a><span class="vs">:scope .range-track-zone {</span></span>
<span id="cb30-1398"><a href="#cb30-1398" aria-hidden="true" tabindex="-1"></a><span class="vs">  box-sizing: border-box;</span></span>
<span id="cb30-1399"><a href="#cb30-1399" aria-hidden="true" tabindex="-1"></a><span class="vs">  position: relative;</span></span>
<span id="cb30-1400"><a href="#cb30-1400" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb30-1401"><a href="#cb30-1401" aria-hidden="true" tabindex="-1"></a><span class="vs">:scope .range-select {</span></span>
<span id="cb30-1402"><a href="#cb30-1402" aria-hidden="true" tabindex="-1"></a><span class="vs">  box-sizing: border-box;</span></span>
<span id="cb30-1403"><a href="#cb30-1403" aria-hidden="true" tabindex="-1"></a><span class="vs">  position: relative;</span></span>
<span id="cb30-1404"><a href="#cb30-1404" aria-hidden="true" tabindex="-1"></a><span class="vs">  left: var(--range-min);</span></span>
<span id="cb30-1405"><a href="#cb30-1405" aria-hidden="true" tabindex="-1"></a><span class="vs">  width: calc(var(--range-max) - var(--range-min));</span></span>
<span id="cb30-1406"><a href="#cb30-1406" aria-hidden="true" tabindex="-1"></a><span class="vs">  cursor: ew-resize;</span></span>
<span id="cb30-1407"><a href="#cb30-1407" aria-hidden="true" tabindex="-1"></a><span class="vs">  background: currentColor;</span></span>
<span id="cb30-1408"><a href="#cb30-1408" aria-hidden="true" tabindex="-1"></a><span class="vs">  height: 7px;</span></span>
<span id="cb30-1409"><a href="#cb30-1409" aria-hidden="true" tabindex="-1"></a><span class="vs">  border: inherit;</span></span>
<span id="cb30-1410"><a href="#cb30-1410" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb30-1411"><a href="#cb30-1411" aria-hidden="true" tabindex="-1"></a><span class="vs">/* Expands the hotspot area. */</span></span>
<span id="cb30-1412"><a href="#cb30-1412" aria-hidden="true" tabindex="-1"></a><span class="vs">:scope .range-select:before {</span></span>
<span id="cb30-1413"><a href="#cb30-1413" aria-hidden="true" tabindex="-1"></a><span class="vs">  content: "";</span></span>
<span id="cb30-1414"><a href="#cb30-1414" aria-hidden="true" tabindex="-1"></a><span class="vs">  position: absolute;</span></span>
<span id="cb30-1415"><a href="#cb30-1415" aria-hidden="true" tabindex="-1"></a><span class="vs">  width: 100%;</span></span>
<span id="cb30-1416"><a href="#cb30-1416" aria-hidden="true" tabindex="-1"></a><span class="vs">  height: var(--thumb-size);</span></span>
<span id="cb30-1417"><a href="#cb30-1417" aria-hidden="true" tabindex="-1"></a><span class="vs">  left: 0;</span></span>
<span id="cb30-1418"><a href="#cb30-1418" aria-hidden="true" tabindex="-1"></a><span class="vs">  top: calc(2px - var(--thumb-radius));</span></span>
<span id="cb30-1419"><a href="#cb30-1419" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb30-1420"><a href="#cb30-1420" aria-hidden="true" tabindex="-1"></a><span class="vs">:scope .range-select:focus,</span></span>
<span id="cb30-1421"><a href="#cb30-1421" aria-hidden="true" tabindex="-1"></a><span class="vs">:scope .thumb:focus {</span></span>
<span id="cb30-1422"><a href="#cb30-1422" aria-hidden="true" tabindex="-1"></a><span class="vs">  outline: none;</span></span>
<span id="cb30-1423"><a href="#cb30-1423" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb30-1424"><a href="#cb30-1424" aria-hidden="true" tabindex="-1"></a><span class="vs">:scope .thumb {</span></span>
<span id="cb30-1425"><a href="#cb30-1425" aria-hidden="true" tabindex="-1"></a><span class="vs">  box-sizing: border-box;</span></span>
<span id="cb30-1426"><a href="#cb30-1426" aria-hidden="true" tabindex="-1"></a><span class="vs">  position: absolute;</span></span>
<span id="cb30-1427"><a href="#cb30-1427" aria-hidden="true" tabindex="-1"></a><span class="vs">  width: var(--thumb-size);</span></span>
<span id="cb30-1428"><a href="#cb30-1428" aria-hidden="true" tabindex="-1"></a><span class="vs">  height: var(--thumb-size);</span></span>
<span id="cb30-1429"><a href="#cb30-1429" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-1430"><a href="#cb30-1430" aria-hidden="true" tabindex="-1"></a><span class="vs">  background: #fcfcfc;</span></span>
<span id="cb30-1431"><a href="#cb30-1431" aria-hidden="true" tabindex="-1"></a><span class="vs">  top: -4px;</span></span>
<span id="cb30-1432"><a href="#cb30-1432" aria-hidden="true" tabindex="-1"></a><span class="vs">  border-radius: 100%;</span></span>
<span id="cb30-1433"><a href="#cb30-1433" aria-hidden="true" tabindex="-1"></a><span class="vs">  border: 1px solid hsl(0,0%,55%);</span></span>
<span id="cb30-1434"><a href="#cb30-1434" aria-hidden="true" tabindex="-1"></a><span class="vs">  cursor: default;</span></span>
<span id="cb30-1435"><a href="#cb30-1435" aria-hidden="true" tabindex="-1"></a><span class="vs">  margin: 0;</span></span>
<span id="cb30-1436"><a href="#cb30-1436" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb30-1437"><a href="#cb30-1437" aria-hidden="true" tabindex="-1"></a><span class="vs">:scope .thumb:active {</span></span>
<span id="cb30-1438"><a href="#cb30-1438" aria-hidden="true" tabindex="-1"></a><span class="vs">  box-shadow: inset 0 var(--thumb-size) #0002;</span></span>
<span id="cb30-1439"><a href="#cb30-1439" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb30-1440"><a href="#cb30-1440" aria-hidden="true" tabindex="-1"></a><span class="vs">:scope .thumb-min {</span></span>
<span id="cb30-1441"><a href="#cb30-1441" aria-hidden="true" tabindex="-1"></a><span class="vs">  left: calc(-1px - var(--thumb-radius));</span></span>
<span id="cb30-1442"><a href="#cb30-1442" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb30-1443"><a href="#cb30-1443" aria-hidden="true" tabindex="-1"></a><span class="vs">:scope .thumb-max {</span></span>
<span id="cb30-1444"><a href="#cb30-1444" aria-hidden="true" tabindex="-1"></a><span class="vs">  right: calc(-1px - var(--thumb-radius));</span></span>
<span id="cb30-1445"><a href="#cb30-1445" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb30-1446"><a href="#cb30-1446" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span></span>
<span id="cb30-1447"><a href="#cb30-1447" aria-hidden="true" tabindex="-1"></a>schedules <span class="op">=</span> [</span>
<span id="cb30-1448"><a href="#cb30-1448" aria-hidden="true" tabindex="-1"></a>  [[<span class="op">.</span><span class="dv">2</span><span class="op">,</span> <span class="op">.</span><span class="dv">8</span>]<span class="op">,</span> [<span class="op">.</span><span class="dv">2</span><span class="op">,</span> <span class="op">.</span><span class="dv">8</span>]<span class="op">,</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span>]<span class="op">,</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span>]<span class="op">,</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span>]]<span class="op">,</span></span>
<span id="cb30-1449"><a href="#cb30-1449" aria-hidden="true" tabindex="-1"></a>  [[<span class="op">.</span><span class="dv">3</span><span class="op">,</span> <span class="op">.</span><span class="dv">7</span>]<span class="op">,</span> [<span class="op">.</span><span class="dv">3</span><span class="op">,</span> <span class="op">.</span><span class="dv">7</span>]<span class="op">,</span> [<span class="op">.</span><span class="dv">3</span><span class="op">,</span> <span class="op">.</span><span class="dv">7</span>]<span class="op">,</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span>]<span class="op">,</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span>]]<span class="op">,</span></span>
<span id="cb30-1450"><a href="#cb30-1450" aria-hidden="true" tabindex="-1"></a>  [[<span class="op">.</span><span class="dv">35</span><span class="op">,</span> <span class="op">.</span><span class="dv">65</span>]<span class="op">,</span> [<span class="op">.</span><span class="dv">35</span><span class="op">,</span> <span class="op">.</span><span class="dv">65</span>]<span class="op">,</span> [<span class="op">.</span><span class="dv">35</span><span class="op">,</span> <span class="op">.</span><span class="dv">65</span>]<span class="op">,</span> [<span class="op">.</span><span class="dv">35</span><span class="op">,</span> <span class="op">.</span><span class="dv">65</span>]<span class="op">,</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span>]]<span class="op">,</span></span>
<span id="cb30-1451"><a href="#cb30-1451" aria-hidden="true" tabindex="-1"></a>  [[<span class="op">.</span><span class="dv">38</span><span class="op">,</span> <span class="op">.</span><span class="dv">62</span>]<span class="op">,</span> [<span class="op">.</span><span class="dv">38</span><span class="op">,</span> <span class="op">.</span><span class="dv">62</span>]<span class="op">,</span> [<span class="op">.</span><span class="dv">38</span><span class="op">,</span> <span class="op">.</span><span class="dv">62</span>]<span class="op">,</span> [<span class="op">.</span><span class="dv">38</span><span class="op">,</span> <span class="op">.</span><span class="dv">62</span>]<span class="op">,</span> [<span class="op">.</span><span class="dv">38</span><span class="op">,</span> <span class="op">.</span><span class="dv">62</span>]]<span class="op">,</span></span>
<span id="cb30-1452"><a href="#cb30-1452" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb30-1453"><a href="#cb30-1453" aria-hidden="true" tabindex="-1"></a>dates <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>({<span class="dt">length</span><span class="op">:</span> <span class="dv">366</span>}<span class="op">,</span> (_<span class="op">,</span> i) <span class="kw">=&gt;</span> i<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">3</span><span class="op">,</span> <span class="st">"0"</span>))</span>
<span id="cb30-1454"><a href="#cb30-1454" aria-hidden="true" tabindex="-1"></a>sliceArray <span class="op">=</span> <span class="fu">slice</span>(dates<span class="op">,</span> <span class="op">...</span>sliceString<span class="op">.</span><span class="fu">split</span>(<span class="st">":"</span>)<span class="op">.</span><span class="fu">map</span>(i <span class="kw">=&gt;</span> i <span class="op">===</span> <span class="st">""</span> <span class="op">?</span> <span class="kw">null</span> <span class="op">:</span> <span class="bu">Number</span>(i)))</span>
<span id="cb30-1455"><a href="#cb30-1455" aria-hidden="true" tabindex="-1"></a>spreadArray <span class="op">=</span> []<span class="op">.</span><span class="fu">concat</span>(<span class="op">...</span><span class="fu">spread</span>(dates<span class="op">,</span> <span class="op">...</span><span class="fu">decodeSpread</span>(spreadString)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-29-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-29-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-29-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-29-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-29-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-29-6" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-29-7" data-nodetype="declaration">

</div>
</div>
</div>
</div>
</div></section><section id="set-values-1" class="level5 appendix"><h2 class="anchored quarto-appendix-heading">Set values</h2><div class="quarto-appendix-contents">
<div class="cell">
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb31" data-startfrom="1462" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1461;"><span id="cb31-1462"><a href="#cb31-1462" aria-hidden="true" tabindex="-1"></a><span class="kw">set</span>(viewof intervals<span class="op">,</span> schedules[schedule<span class="op">-</span><span class="dv">2</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-30-1" data-nodetype="expression">

</div>
</div>
</div>
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb32" data-startfrom="1463" data-source-offset="-45"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1462;"><span id="cb32-1463"><a href="#cb32-1463" aria-hidden="true" tabindex="-1"></a><span class="kw">set</span>(viewof spreadString<span class="op">,</span> <span class="fu">setSpreadDotd</span>(spreadDotd))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-30-2" data-nodetype="expression">

</div>
</div>
</div>
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb33" data-startfrom="1464" data-source-offset="-97"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1463;"><span id="cb33-1464"><a href="#cb33-1464" aria-hidden="true" tabindex="-1"></a><span class="kw">set</span>(viewof sliceString<span class="op">,</span> <span class="fu">setSliceDotd</span>(sliceDotd))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-30-3" data-nodetype="expression">

</div>
</div>
</div>
<details><summary>Code</summary><div class="sourceCode cell-code" id="cb34" data-startfrom="1465" data-source-offset="-146"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1464;"><span id="cb34-1465"><a href="#cb34-1465" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb34-1466"><a href="#cb34-1466" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (invertDotd <span class="op">?</span> <span class="op">!</span>sliceOrSpread <span class="op">:</span> sliceOrSpread) {</span>
<span id="cb34-1467"><a href="#cb34-1467" aria-hidden="true" tabindex="-1"></a>    <span class="kw">set</span>(viewof sliceDotd<span class="op">,</span> <span class="fu">invert</span>(togglePlot))</span>
<span id="cb34-1468"><a href="#cb34-1468" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb34-1469"><a href="#cb34-1469" aria-hidden="true" tabindex="-1"></a>    <span class="kw">set</span>(viewof spreadDotd<span class="op">,</span> <span class="fu">invert</span>(togglePlot))</span>
<span id="cb34-1470"><a href="#cb34-1470" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb34-1471"><a href="#cb34-1471" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-30-4" data-nodetype="expression">

</div>
</div>
</div>
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>
<ol>
<li id="fn1"><p><code>Decalendar</code>: a calendar system that uses <code>deks</code> instead of months and weeks<a href="#fnref1" class="footnote-back" role="doc-backlink">‚Ü©Ô∏é</a></p></li>
<li id="fn2"><p><code>Declock</code>: a timekeeping system that uses fractional days instead of hours, minutes, and seconds<a href="#fnref2" class="footnote-back" role="doc-backlink">‚Ü©Ô∏é</a></p></li>
<li id="fn3"><p><code>doty</code>: day-of-the-year; an alternative to months, weeks, hours, minutes, and seconds<a href="#fnref3" class="footnote-back" role="doc-backlink">‚Ü©Ô∏é</a></p></li>
<li id="fn4"><p><code>doty</code> date: the integer part of the <code>doty</code>; an alternate to calendar dates and week dates<a href="#fnref4" class="footnote-back" role="doc-backlink">‚Ü©Ô∏é</a></p></li>
<li id="fn5"><p><code>doty</code> time: the fractional part of the <code>doty</code>; an alternate to hours, minutes and seconds<a href="#fnref5" class="footnote-back" role="doc-backlink">‚Ü©Ô∏é</a></p></li>
<li id="fn6"><p><code>dek</code>: a group of 10 days; the first two digits of the <code>Decalendar</code> date; an alternate to month and weeks<a href="#fnref6" class="footnote-back" role="doc-backlink">‚Ü©Ô∏é</a></p></li>
<li id="fn7"><p><code>dotd</code>: one of the 10 days in a <code>dek</code>; the last digit of the <code>Decalendar</code> date; an alternate to the day-of-the-month and day-of-the-week<a href="#fnref7" class="footnote-back" role="doc-backlink">‚Ü©Ô∏é</a></p></li>
<li id="fn8"><p><code>cent</code>: a hundredth (<span class="math inline">\(10^{-2}\)</span>) of a day; the first 2 digits of the <code>doty</code> time; an alternate to quarter hours<a href="#fnref8" class="footnote-back" role="doc-backlink">‚Ü©Ô∏é</a></p></li>
<li id="fn9"><p><code>mil</code>: a thousandth (<span class="math inline">\(10^{-3}\)</span>) of a day; the first 3 digits of the <code>doty</code> time; an alternate to minutes<a href="#fnref9" class="footnote-back" role="doc-backlink">‚Ü©Ô∏é</a></p></li>
<li id="fn10"><p><code>beat</code>: a hundred thousandth (<span class="math inline">\(10^{-5}\)</span>) of a day; the first 5 digits of the <code>doty</code> time; an alternate to seconds<a href="#fnref10" class="footnote-back" role="doc-backlink">‚Ü©Ô∏é</a></p></li>
<li id="fn11"><p>fractional year date: a year and the proportion of that year that has passed; an alternative to <code>Decalendar</code> dates<a href="#fnref11" class="footnote-back" role="doc-backlink">‚Ü©Ô∏é</a></p></li>
<li id="fn12"><p><code>deco</code>: a date and time format consisting of a year and a <code>doty</code> and analogous to ISO 8601 dates<a href="#fnref12" class="footnote-back" role="doc-backlink">‚Ü©Ô∏é</a></p></li>
<li id="fn13"><p><code>pent</code>: a group of 5 days; half of a <code>dek</code><a href="#fnref13" class="footnote-back" role="doc-backlink">‚Ü©Ô∏é</a></p></li>
<li id="fn14"><p><code>pently</code> schedule: one of a set of workday and restday schedules for the 5 days of the <code>pent</code><a href="#fnref14" class="footnote-back" role="doc-backlink">‚Ü©Ô∏é</a></p></li>
</ol></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div id="quarto-reuse" class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">https://creativecommons.org/licenses/by-sa/4.0/</a></div></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{laptev2023,
  author = {Laptev, Martin},
  title = {Decalendar and {Declock}},
  date = {2023},
  url = {https://maptv.github.io/cal},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-laptev2023" class="csl-entry quarto-appendix-citeas" role="listitem">
Laptev, Martin. 2023. <span>‚ÄúDecalendar and Declock.‚Äù</span> 2023. <a href="https://maptv.github.io/cal">https://maptv.github.io/cal</a>.
</div></div></section></div></main><!-- /main column --><script type="ojs-module-contents">
{"contents":[{"methodName":"interpret","cellName":"ojs-cell-1","inline":false,"source":"// https://observablehq.com/@fheyen/barchart-clock\n{\nconst W = width > 1250 ? width * 2 / 3 : width > 1150 ? width * 3 / 4 : width > 1050 ? width * 4 / 5 : width > 950 ? width * 5 / 6 : width > 850 ? width : width > 750 ? width * 1.02 : width > 650 ? width * 1.06 : width > 550 ? width * 1.1 : width > 450 ? width * 1.14 : width * 1.18;\n  const H = 156;\n  const barX = 1;\n  const firstBarY = 1;\n  const svg = d3\n    .create(\"svg\")\n    .attr(\"width\", W)\n    .attr(\"viewBox\", [0, 0, W, H]);\n  const xRange = [0, W - 100];\n  const scaleM = d3.scaleLinear()\n    .domain([0, 10])\n    .range(xRange);\n  const scaleCandB = d3.scaleLinear()\n    .domain([0, 100])\n    .range(xRange);\n  const scaleDek = d3.scaleLinear()\n    .domain([0, 37])\n    .range(xRange);\n  // Background bars to show where 100% lies\n  svg.selectAll('.background')\n    .data(['dek', 'dotd', 'cents', \"mils\", 'beats'])\n    .enter()\n    .append('rect')\n    .attr('class', 'background timeBar')\n    .attr('width', W-100)\n    .attr('y', (d,i)=>i*30+firstBarY)\n  // Dek/Dotd\n  svg\n    .append('rect')\n    .attr('class', 'timeBar')\n    .attr('y', firstBarY)\n    .attr('width', d => scaleDek(Number(dotyDek)+Number(dotyDotd)/10+Number(barCents)/1000))\n  svg\n    .append('rect')\n    .attr('class', 'timeBarFull')\n    .attr('y', firstBarY)\n    .attr('width', d => scaleDek(dotyDek))\n  svg\n    .append('rect')\n    .attr('class', 'timeBar')\n    .attr('y', firstBarY+30)\n    .attr('width', d => scaleM(Number(dotyDotd)+Number(barCents)/100+Number(barMils)/1000))\n  svg\n    .append('rect')\n    .attr('class', 'timeBarFull')\n    .attr('y', firstBarY+30)\n    .attr('width', d => scaleM(dotyDotd))\n  svg.selectAll('.tickDek')\n    .data(d3.range(width > 500 ? 4: 6, 37))\n    .enter()\n    .append('rect')\n    .attr('class', 'tickDek')\n    .attr('x', d=>scaleDek(d)+barX)\n    .attr('y', firstBarY)\n    .attr('height', d=>d%(width > 500 ? 2 : 3)===0? 6:4)\n  // Cent ticks\n  svg.selectAll('.tickDotd')\n    .data(d3.range(width > 500 ? 1: 2, 10))\n    .enter()\n    .append('rect')\n    .attr('class', 'tickDotd')\n    .attr('x', d=>scaleM(d)+barX)\n    .attr('y', firstBarY+49)\n    .attr('height', 6)\n  svg.selectAll('.tickLabel')\n    .data(d3.range(width > 500 ? 4: 6, width > 500 ? 37: 35, width > 500 ? 2: 3))\n    .enter()\n    .append('text')\n    .attr('class', 'tickLabel')\n    .attr('x', d=>scaleDek(d)+barX+.5)\n    .attr('y', firstBarY+22)\n    .text(d=>d)\n  // Cents/Mils\n  svg\n    .append('rect')\n    .attr('class', 'timeBar')\n    .attr('y', firstBarY+60)\n    .attr('width', d => scaleCandB(Number(barCents)+Number(barMils)/10+Number(barBeats)/1000))\n  svg\n    .append('rect')\n    .attr('class', 'timeBarFull')\n    .attr('y', firstBarY+60)\n    .attr('width', d => scaleCandB(barCents))\n  svg\n    .append('rect')\n    .attr('class', 'timeBar')\n    .attr('y', firstBarY+90)\n    .attr('width', d => scaleM(Number(barMils)+Number(barBeats)/100+Number(barMb)/100000))\n  svg\n    .append('rect')\n    .attr('class', 'timeBarFull')\n    .attr('y', firstBarY+90)\n    .attr('width', d => scaleM(barMils))\n  // Cent ticks\n  svg.selectAll('.tickC')\n    .data(d3.range(width > 500 ? 10 : 20, 100))\n    .enter()\n    .append('rect')\n    .attr('class', 'tickC')\n    .attr('x', d=>scaleM(d/10)+barX)\n    .attr('y', firstBarY+60)\n    .attr('height', d=>d%2===0? 8:5)\n  svg.selectAll('.tickC1')\n    .data(d3.range(width > 500 ? 10 : 20, 100))\n    .enter()\n    .append('rect')\n    .attr('class', 'tickC1')\n    .attr('x', d=>scaleM(d/10)+barX)\n    .attr('y', d=>d%2===0? firstBarY+77:firstBarY+80)\n    .attr('height', d=>d%2===0? 8:5)\n  // Mil ticks\n  svg.selectAll('.tickM')\n    .data(d3.range(width > 500 ? 1 : 2, 10))\n    .enter()\n    .append('rect')\n    .attr('class', 'tickM')\n    .attr('x', d=>scaleM(d)+barX)\n    .attr('y', firstBarY+90)\n    .attr('height', 6)\n  svg.selectAll('.tickM1')\n    .data(d3.range(width > 500 ? 1 : 2, 10))\n    .enter()\n    .append('rect')\n    .attr('class', 'tickM1')\n    .attr('x', d=>scaleM(d)+barX)\n    .attr('y', firstBarY+92.5)\n    .attr('height', 2.5)\n  svg.selectAll('.tickLabel1')\n    .data(d3.range(width > 500 ? 1 : 2, 10))\n    .enter()\n    .append('text')\n    .attr('class', 'tickLabel1')\n    .attr('x', d=>scaleM(d)+barX+.5)\n    .attr('y', firstBarY+47)\n    .text(d=>d)\n  svg.selectAll('.tickLabel2')\n    .data(d3.range(width > 500 ? 1 : 2, 10))\n    .enter()\n    .append('text')\n    .attr('class', 'tickLabel2')\n    .attr('x', d=>scaleM(d)+barX+.5)\n    .attr('y', firstBarY+112)\n    .text(d=>d)\n  // Beats\n  svg\n    .append('rect')\n    .attr('class', 'timeBar')\n    .attr('y', firstBarY+120)\n    .attr('width', d => scaleCandB(Number(barBeats)+Number(barMb)/1000))\n  svg\n    .append('rect')\n    .attr('class', 'timeBarFull')\n    .attr('y', firstBarY+120)\n    .attr('width', d => scaleCandB(barBeats))\n  // Beat ticks\n  svg.selectAll('.tickB')\n    .data(d3.range(width > 500 ? 10 : 20, 100))\n    .enter()\n    .append('rect')\n    .attr('class', 'tickB')\n    .attr('x', d=>scaleM(d/10)+barX)\n    .attr('y', firstBarY+120)\n    .attr('height', d=>d%2===0? 9:6)\n  // Labels\n  svg.selectAll('.timeLabel')\n    .data([`${dotyDek}Êó¨`, `${dotyDotd}Êó•`, `${barCents}%`, `${barMils}‚Ä∞`, `${barBeats}‚ô´`])\n    .enter()\n    .append('text')\n    .attr('class', 'timeLabel')\n    .attr('x', barX+2)\n    .attr('y', (d,i)=>i*30+firstBarY+20)\n    .text(d=>d)\n  return svg.node();\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-2","inline":false,"source":"html`<style>\n  text {\n    fill: #000;\n    font-family: sans-serif;\n    font-size: 20px;\n    text-anchor: middle;\n  }\n  .timeLabel {\n    text-anchor: start;\n  }\n  .timeBar, .timeBarFull {\n    x: 1px;\n    height: 25px;\n    rx: 5px;\n    stroke: #aaa;\n  }\n  .timeBar {\n    fill: #e8e8e8;\n  }\n  .timeBarFull {\n    fill: #ccffff;\n  }\n  .background {\n    fill: white;\n  }\n  .tickDek, .tickDotd, .tickDotd1, .tickC, .tickC1, .tickM, .tickM1, .tickB {\n    stroke: none;\n    fill: #666;\n    width: 1px;\n  }\n</style>`\n"},{"methodName":"interpret","cellName":"ojs-cell-3","inline":false,"source":"viewof inputDoty = Inputs.range([0, 365], {value: 306, step: 1, label: \"doty\"});\n\nviewof year = transformInput(\n    Inputs.range([0, .999], {step: .001, label: \"year\"}),\n    {bind: viewof inputDoty, transform: (x => x / 365), invert: (x => x * 365)}\n);\n\nviewof monthInput = transformInput(\n    Inputs.range([1, 12], {step: 1, label: \"month\"}),\n    {bind: viewof inputDoty, transform: doty2month, invert: month2doty}\n);\n\nviewof dotmInput = transformInput(\n    Inputs.range([1, 31], {step: 1, label: \"dotm\"}),\n    {bind: viewof inputDoty, transform: doty2dotm, invert: (x => Math.floor(( 153 * (\n        viewof monthInput.value > 2\n        ? viewof monthInput.value - 3\n        : viewof monthInput.value + 9) + 2\n    ) / 5 + x - 1\n))});\n"},{"methodName":"interpret","cellName":"ojs-cell-4","inline":false,"source":"viewof scrubberDoty = Scrubber(numbers, {autoplay: false, alternate: true, delay: 86.4, loopDelay: 864})\n"},{"methodName":"interpret","cellName":"ojs-cell-5","inline":false,"source":"// https://observablehq.com/@observablehq/synchronized-inputs\nfunction set(input, value) {\n  input.value = value;\n  input.dispatchEvent(new Event(\"input\", {bubbles: true}));\n}\n// https://observablehq.com/@mbostock/scrubber\nfunction Scrubber(values, {\n  format = value => value,\n  initial = 0,\n  direction = 1,\n  delay = null,\n  autoplay = true,\n  loop = true,\n  loopDelay = null,\n  alternate = false\n} = {}) {\n  values = Array.from(values);\n  const form = html`<form style=\"font: 12px var(--sans-serif); font-variant-numeric: tabular-nums; display: flex; height: 33px; align-items: center;\">\n  <button name=b type=button style=\"background-color:#002ead;color:#fff;border-radius:10px;margin-left:.4em;width: 5em;\"></button>\n  <label style=\"display: flex; align-items: center;\">\n    <input name=i type=range min=0 max=${values.length - 1} value=${initial} step=1 style=\"display: none;\">\n    <output name=o style=\"display: none;\"></output>\n  </label>\n</form>`;\n  let frame = null;\n  let timer = null;\n  let interval = null;\n  function start() {\n    form.b.textContent = \"Pause\";\n    if (delay === null) frame = requestAnimationFrame(tick);\n    else interval = setInterval(tick, delay);\n  }\n  function stop() {\n    form.b.textContent = \"Play\";\n    if (frame !== null) cancelAnimationFrame(frame), frame = null;\n    if (timer !== null) clearTimeout(timer), timer = null;\n    if (interval !== null) clearInterval(interval), interval = null;\n  }\n  function running() {\n    return frame !== null || timer !== null || interval !== null;\n  }\n  function tick() {\n    if (form.i.valueAsNumber === (direction > 0 ? values.length - 1 : direction < 0 ? 0 : NaN)) {\n      if (!loop) return stop();\n      if (alternate) direction = -direction;\n      if (loopDelay !== null) {\n        if (frame !== null) cancelAnimationFrame(frame), frame = null;\n        if (interval !== null) clearInterval(interval), interval = null;\n        timer = setTimeout(() => (step(), start()), loopDelay);\n        return;\n      }\n    }\n    if (delay === null) frame = requestAnimationFrame(tick);\n    step();\n  }\n  function step() {\n    form.i.valueAsNumber = (form.i.valueAsNumber + direction + values.length) % values.length;\n    form.i.dispatchEvent(new CustomEvent(\"input\", {bubbles: true}));\n  }\n  form.i.oninput = event => {\n    if (event && event.isTrusted && running()) stop();\n    form.value = values[form.i.valueAsNumber];\n    form.o.value = format(form.value, form.i.valueAsNumber, values);\n  };\n  form.b.onclick = () => {\n    if (running()) return stop();\n    direction = alternate && form.i.valueAsNumber === values.length - 1 ? -1 : 1;\n    form.i.valueAsNumber = (form.i.valueAsNumber + direction) % values.length;\n    form.i.dispatchEvent(new CustomEvent(\"input\", {bubbles: true}));\n    start();\n  };\n  form.i.oninput();\n  if (autoplay) start();\n  else stop();\n  Inputs.disposal(form).then(stop);\n  return form;\n}\n// https://observablehq.com/@juang1744/transform-input/1\ntransformInput = function(target, {bind: source, transform = identity, involutory = false, invert = involutory ? transform : inverse(transform)} = {}){\n  if (source === undefined) {\n    source = target;\n    target = html`<div>${source}</div>`;\n  }\n  function sourceInputHandler() {\n    target.removeEventListener(\"input\", targetInputHandler);\n    setTransform(target).to(transform(source.value)).andDispatchEvent();\n    target.addEventListener(\"input\", targetInputHandler);\n  }\n  function targetInputHandler() {\n    source.removeEventListener(\"input\", sourceInputHandler);\n    setTransform(source).to(invert(target.value)).andDispatchEvent();\n    source.addEventListener(\"input\", sourceInputHandler);\n  }\n  source.addEventListener(\"input\", sourceInputHandler);\n  target.addEventListener(\"input\", targetInputHandler);\n  invalidation.then(() => {\n    source.removeEventListener(\"input\", sourceInputHandler);\n    target.removeEventListener(\"input\", targetInputHandler);\n  });\n\n  sourceInputHandler();\n  return target;\n}\nsetTransform = (input) => ({to: (value) => (input.value = value, {andDispatchEvent: (event = new Event(\"input\")) => input.dispatchEvent(event)})});\nfunction inverse(f) {\n  switch (f) {\n    case identity:  return identity;\n    case Math.sqrt: return square;\n    case Math.log:  return Math.exp;\n    case Math.exp:  return Math.log;\n    default:        return (x => solve(f, x, x));\n  }\n  function solve(f, y, x = 0) {\n    const dx = 1e-6;\n    let steps = 100, deltax, fx, dfx;\n    do {\n      fx = f(x)\n      dfx = (f(x + dx) - fx) || dx;\n      deltax = dx * (fx - y)/dfx\n      x -= deltax;\n    } while (Math.abs(deltax) > dx && --steps > 0);\n    return steps === 0 ? NaN : x;\n  }\n\n  function square(x) {\n    return x * x;\n  }\n}\nfunction identity(x) {\n  return x;\n}\n// https://observablehq.com/@observablehq/text-color-annotations-in-markdown#textcolor\nfunction setStyle(content, style = {}) {\n  function yiq(color) {\n    const {r, g, b} = d3.rgb(color);\n    return (r * 299 + g * 587 + b * 114) / 1000 / 255; // returns values between 0 and 1\n  }\n  const {\n    background,\n    color = yiq(background) >= 0.6 ? \"#111\" : \"white\",\n    padding = \"0 1px\",\n    borderRadius = \"4px\",\n    fontWeight = 900,\n    fontSize = \"1em\",\n    ...rest\n  } = typeof style === \"string\" ? {background: style} : style;\n  return htl.html`<span style=${{\n    background,\n    color,\n    padding,\n    borderRadius,\n    fontWeight,\n    ...rest\n  }}>${content}</span>`;\n}\n// http://howardhinnant.github.io/date_algorithms.html#civil_from_days\nfunction dote2doty(days = 719468) {\n    const era = Math.floor((days >= 0 ? days : days - 146096) / 146097),\n        dotc = days - era * 146097,\n        yotc = Math.floor((dotc - Math.floor(dotc / 1460) + Math.floor(dotc / 36524) - Math.floor(dotc / 146096)) / 365);\n    return [yotc + era * 400, dotc + Math.floor(yotc / 100) - yotc * 365 - Math.floor(yotc / 4)];\n}\nfunction unix2doty(ms = 0) {\n  return dote2doty(ms / 86400000 + 719468)\n}\n// https://howardhinnant.github.io/date_algorithms.html#days_from_civil\nfunction doty2dote(year = 1969, doty = 0, zone = 0) {\n    const cycle = Math.floor((year >= 0 ? year : year - 399) / 400),\n    yote = year - cycle * 400;\n    return cycle * 146097 + yote * 365 + Math.floor(yote / 4) - Math.floor(yote / 100) + doty - zone\n}\nfunction doty2deco(yearDoty = [1969, 306], zone = 0) {\n    const yd = dote2doty(doty2dote(yearDoty[0], Math.floor(yearDoty[1])));\n    return `${yd[0]}+${(yd[1]).toString().padStart(3, \"0\")}${\n        yearDoty[1].toString().includes(\".\") ? \".\" + (\n            (yearDoty[1] > 0) ? (yearDoty[1] - zone).toString().split(\".\").pop()\n            : [...(yearDoty[1] - zone).toString().split(\".\").pop()].map(\n                (e, i, a) => (i + 1 === a.length) ? 10 - e : 9 - e\n            ).join(\"\")\n        ) : \"\"\n    }`\n}\nfunction unix2deco(ms = 0) {\n    return doty2deco(unix2doty(ms));\n};\n// http://howardhinnant.github.io/date_algorithms.html#days_from_civil\nfunction greg2doty(month = 1, day = 1) {\n    return Math.floor(\n        (153 * (month > 2 ? month - 3 : month + 9) + 2) / 5 + day - 1\n)}\n// http://howardhinnant.github.io/date_algorithms.html#civil_from_days\nfunction doty2greg(doty = 0) {\n    const m = Math.floor((5 * doty + 2) / 153);\n    return [Math.floor(m < 10 ? m + 3 : m - 9), doty - Math.floor((153 * m + 2) / 5) + 1];\n}\nfunction doty2toty(doty = 306) {\n    doty = Math.floor(doty)\n    return (205 <= doty && doty < 295) ? [\"FallüçÅ\", \"Springüåº\"] :\n        (110 <= doty && doty < 205) ? [\"Summer‚òÄÔ∏è\", \"Winter‚ùÑÔ∏è\"] :\n        (20 <= doty && doty < 110) ? [\"Springüåº\", \"FallüçÅ\"] :\n        (0 <= doty && doty < 20) || (295 <= doty && doty <= 365)\n        ? [\"Winter‚ùÑÔ∏è\", \"Summer‚òÄÔ∏è\"] : \"Unknown\"\n}\nfunction doty2zodi(doty = 306) {\n    doty = Math.floor(doty)\n    return (20 <= doty && doty < 50) ? \"Aries‚ôàÔ∏è\" :\n     (50 <= doty && doty < 81) ? \"Taurus‚ôâÔ∏è\" :\n     (81 <= doty && doty < 112) ? \"Gemini‚ôäÔ∏è\" :\n     (112 <= doty && doty < 144) ? \"Cancer‚ôãÔ∏è\" :\n     (144 <= doty && doty < 175) ? \"Leo‚ôåÔ∏è\" :\n     (175 <= doty && doty < 206) ? \"Virgo‚ôçÔ∏è\" :\n     (206 <= doty && doty < 236) ? \"Libra‚ôéÔ∏è\" :\n     (236 <= doty && doty < 266) ? \"Scorpio‚ôèÔ∏è\" :\n     (266 <= doty && doty < 296) ? \"Sagittarius‚ôêÔ∏è\" :\n     (296 <= doty && doty < 325) ? \"Capricorn‚ôëÔ∏è\" :\n     (325 <= doty && doty < 355) ? \"Aquarius‚ôíÔ∏è\" :\n     (355 <= doty && doty <= 365) || (0 <= doty && doty < 20)\n     ? \"Pisces‚ôìÔ∏è\" : \"Unknown\"\n}\nfunction doty2month(doty = 0) {\n    const m = Math.floor((5 * doty + 2) / 153);\n    return Math.floor(m < 10 ? m + 3 : m - 9);\n}\nfunction month2doty(month = 1) {\n    return Math.floor(\n        (153 * (month > 2 ? month - 3 : month + 9) + 2) / 5\n)}\nfunction doty2dotm(doty = 0) {\n    const m = Math.floor((5 * doty + 2) / 153);\n    return doty - Math.floor((153 * m + 2) / 5) + 1;\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-6","inline":false,"source":"width\nunix = {\n  while(true) {\n    yield Date.now();\n  }\n}\ntick = {\n  let i = 0;\n  while (true) {\n    yield Promises.tick(864, ++i);\n  }\n}\ntickDate = Math.floor(tick / 1e5)\ntickTime = tick % 1e5\ntickDelimiter = (tickDate > 0) ? \".\" : \"\"\nbarTime = unix2dote(unix).toString().split(\".\")[1].slice(0, 8)\nbarCents = barTime.slice(0, 2)\nbarMils = barTime[2]\nbarBeats = barTime.slice(3, 5)\nbarMb = barTime.slice(5)\ndeco = unix2deco(unix).slice(0, 14)\ndoty = deco.slice(5)\ndotyDate = doty.slice(0, 3)\ndotyTime = doty.slice(4)\ndotyDek = doty.slice(0, 2)\ndotyDotd = doty[2]\niso = {\n  while(true) {\n    yield new Date().toISOString()\n  }\n}\nisoDate = iso.slice(5, 10)\nisoTime = iso.slice(11, 19)\nseason = doty2toty(dotyDate)\nzodiac = doty2zodi(dotyDate)\ninputDotySeason = doty2toty(inputDoty)\ninputDotyZodiac = doty2zodi(inputDoty)\nnumbers = Array.from({length: 366}, (_, i) => i)\n"},{"methodName":"interpret","cellName":"ojs-cell-7","inline":false,"source":"styledDotyDate = setStyle(dotyDate, d3.schemePaired[1])\nstyledDotyTime = setStyle(dotyTime, d3.schemePaired[2])\nstyledTickTime = setStyle(tickTime, d3.schemePaired[2])\nstyledDek = setStyle(dotyDek, d3.schemePaired[0])\nstyledDotd = setStyle(dotyDotd, d3.schemePaired[9])\nstyledCent = setStyle(dotyTime.slice(0, 2), d3.schemePaired[7])\nstyledMil = setStyle(dotyTime[2], d3.schemePaired[6])\nstyledBeat = setStyle(dotyTime.slice(3, 5), d3.schemePaired[11])\n"},{"methodName":"interpret","cellName":"ojs-cell-8","inline":false,"source":"set(viewof inputDoty, scrubberDoty)\n"},{"methodName":"interpret","cellName":"ojs-cell-9","inline":false,"source":"set(viewof decoOutput, `1969+${scrubberDeco.toString().padStart(3, \"0\")}`)\n"},{"methodName":"interpret","cellName":"ojs-cell-10","inline":false,"source":"viewof inputDatetime = Inputs.datetime({label: \"Datetime\", value: \"1970-01-01T00:00\"})\n"},{"methodName":"interpret","cellName":"ojs-cell-11","inline":false,"source":"viewof yd = Inputs.form([\n  Inputs.number({label: \"year\", value: \"1969\"}),\n  Inputs.number({label: \"doty\", value: \"306\"})\n])\n"},{"methodName":"interpret","cellName":"ojs-cell-12","inline":false,"source":"viewof decoOutput = transformInput(\n  Inputs.text({label: \"deco\", placeholder: \"year+day.ddd\", value: \"1969+306\"}),\n  {bind: viewof yd, transform: doty2deco, invert: deco2doty});\n"},{"methodName":"interpret","cellName":"ojs-cell-13","inline":false,"source":"viewof scrubberDeco = Scrubber(numbers, {autoplay: false, alternate: true, delay: 86.4, loopDelay: 864})\n"},{"methodName":"interpret","cellName":"ojs-cell-14","inline":false,"source":"function zone2hour(zone = \"Z\") {\n    return (zone = zone.toUpperCase()) == \"Z\" ? 0\n        : zone > \"@\" && zone < \"J\" ? zone.charCodeAt() - 64\n        : zone > \"J\" && zone < \"N\" ? zone.charCodeAt() - 65\n        : zone < \"Z\" && zone > \"M\" ? -(zone.charCodeAt() - 77)\n        : zone;\n}\nfunction deco2doty(timestamp = \"1969+306.00000Z\") {\n    const arr = timestamp.toString().split(/(?=[+-]|[a-zA-Z])/, 3);\n    switch (arr.length) {\n        case 1: return [unix2doty(Date.now())[0], parseFloat(arr[0]), 0];\n        case 2: return (/^[a-zA-Z]+$/.test(arr[1]))\n            ? [unix2doty(Date.now())[0], parseFloat(arr[0]), zone2hour(arr[1]) / 24]\n            : [parseFloat(arr[0]), parseFloat(arr[1]), 0];\n    };\n    return [parseFloat(arr[0]), parseFloat(arr[1]), /^[a-zA-Z]+$/.test(arr[2])\n        ? zone2hour(arr[2]) / 24\n        : parseFloat(arr[2].replace(/([+-])/, \"$1\\.\"))];\n}\nfunction deco2deco(timestamp = \"1969+306.00000Z\") {\n    return doty2deco(deco2doty(timestamp))\n}\nfunction doty2doty(year = 1969, doty = 0, zone = 0) {\n    return dote2doty(doty2dote(year, doty, zone));\n}\nfunction doty2unix(year = 1969, doty = 306, zone = 0) {\n    return (doty2dote(year, doty, zone) - 719468) * 86400000;\n}\nfunction doty2isoc(year = 1969, doty = 306, zone = 0) {\n    return new Date(doty2unix(year, doty, zone)).toISOString().split(\".\")[0]\n}\nfunction deco2isoc(timestamp = \"1969+306.00000Z\") {\n    return doty2isoc(...deco2doty(timestamp))\n}\nfunction unix2dote(ms = 0) {\n  return ms / 86400000 + 719468;\n}\nfunction dote2year(days = 719468) {\n    const era = Math.floor((days >= 0 ? days : days - 146096) / 146097),\n        dotc = days - era * 146097,\n        yotc = (dotc - Math.floor(dotc / 1460) + Math.floor(dotc / 36524) - Math.floor(dotc / 146096)) / 365;\n    return yotc + era * 400;\n}\nfunction doty2year(year = 1969, doty = 306, zone = 0) {\n    return dote2year(doty2dote(year, doty, zone));\n}\nfunction unix2year(ms = 0) {\n    return dote2year(unix2dote(ms));\n};\n"},{"methodName":"interpret","cellName":"ojs-cell-15","inline":false,"source":"tzOffsetInMs = inputDatetime.getTimezoneOffset() * 60000\nutcDatetime = inputDatetime - tzOffsetInMs\noutputDatetimeDeco = unix2deco(utcDatetime)\ndtDoty = outputDatetimeDeco.split(\"+\")[1]\ndtDotyDateRaw = dtDoty.split(\".\")[0]\ndtDotyTimeRaw = dtDoty.split(\".\")[1].slice(0, 5)\noutputDatetimeYear = unix2year(utcDatetime).toString().slice(0, 8)\ndtDotyTimeDelimiter = dtDotyTimeRaw ? \".\" : \"\"\noutputDecoYear = doty2year(...yd).toString().slice(0, 8)\noutputIsoc = doty2isoc(...yd)\nyearDate = Math.ceil(unix2year(unix) * 1e3) / 1e3\n"},{"methodName":"interpret","cellName":"ojs-cell-16","inline":false,"source":"dtYear = setStyle(outputDatetimeDeco.split(\"+\")[0], d3.schemePaired[10])\ndtDotyDate = setStyle(dtDotyDateRaw, d3.schemePaired[1])\ndtDotyTime = dtDotyTimeRaw ? setStyle(dtDotyTimeRaw, d3.schemePaired[2]) : \"\"\nstyledIsocYear = setStyle(outputIsoc.split(/(?=-)/)[0], d3.schemePaired[10])\nstyledIsocMd = setStyle(outputIsoc.slice(outputIsoc.split(/(?=-)/)[0].length+1,outputIsoc.split(/(?=-)/)[0].length+6), d3.schemePaired[5])\nstyledIsocTime = setStyle(outputIsoc.slice(outputIsoc.split(/(?=-)/)[0].length+7), d3.schemePaired[4])\nstyledOutputDatetimeYear = setStyle(outputDatetimeYear, d3.schemePaired[10])\nstyledOutputDecoYear = setStyle(outputDecoYear, d3.schemePaired[10])\n"},{"methodName":"interpret","cellName":"ojs-cell-17","inline":false,"source":"viewof intervals = Inputs.form([\n  interval([0, 1], {step: .01, value: [.3, .7], label: '0 or 5', width: 195, format: ([start, end]) => start === end ? \"\" : `${formatDecimal(start)}:${formatDecimal(end)}`}),\n  interval([0, 1], {step: .01, value: [.3, .7], label: '1 or 6', width: 195, format: ([start, end]) => start === end ? \"\" : `${formatDecimal(start)}:${formatDecimal(end)}`}),\n  interval([0, 1], {step: .01, value: [.3, .7], label: '2 or 7', width: 195, format: ([start, end]) => start === end ? \"\" : `${formatDecimal(start)}:${formatDecimal(end)}`}),\n  interval([0, 1], {step: .01, value: [0, 0], label: '3 or 8', width: 195, format: ([start, end]) => start === end ? \"\" : `${formatDecimal(start)}:${formatDecimal(end)}`}),\n  interval([0, 1], {step: .01, value: [0, 0], label: '4 or 9', width: 195, format: ([start, end]) => start === end ? \"\" : `${formatDecimal(start)}:${formatDecimal(end)}`}),\n])\n"},{"methodName":"interpret","cellName":"ojs-cell-18","inline":false,"source":"viewof schedule = Inputs.radio([2, 3, 4, 5], {label: \"Schedule\", value: 3})\n\nviewof filename = Inputs.text({label: \"Filename\", placeholder: \"Enter the filename\", value: `schedule${schedule}.csv`})\n\nbutton(durations, filename)\n"},{"methodName":"interpret","cellName":"ojs-cell-19","inline":false,"source":"\n// https://observablehq.com/@dec/pent\nPlot.plot({\n  x: {label: null},\n  color: {scheme: \"Set1\", legend: \"swatches\", reverse: true},\n  y: {label: null, domain: [1, 0], tickPadding: 18},\n  marks: [\n  Plot.barY(durations, {x: \"label\", y: \"duration\", fill: \"group\"}),\n  Plot.textY(\n      durations,\n      Plot.stackY(\n        Plot.groupX(\n          { y: \"first\", text: \"first\" },\n          {\n            x: \"label\",\n            z: \"group\",\n            y: \"duration\",\n            text: (d) => (d.duration < .0001 ? null : formatDecimal(d.duration)),\n            fill: \"white\",\n            stroke: \"white\",\n            fontSize: 32,\n          }\n        )\n      )\n    ),\n  ]})\n"},{"methodName":"interpret","cellName":"ojs-cell-20","inline":false,"source":"viewof sliceDotd = Inputs.checkbox([...Array(10).keys()], {label: \"slice dotd\", value: [1, 6]})\n"},{"methodName":"interpret","cellName":"ojs-cell-21","inline":false,"source":"viewof spreadDotd = Inputs.checkbox([...Array(10).keys()], {label: \"spread dotd\", value: [1, 6]})\n"},{"methodName":"interpret","cellName":"ojs-cell-22","inline":false,"source":"viewof sliceString = transformInput(\n  Inputs.text({label: \"slice string\", placeholder: \"Enter slice string\", value: \"0:366\"}),\n{bind: viewof sliceInputs, transform: encodeSlice, invert: decodeSlice});\nviewof sliceInputs = Inputs.form([\n    Inputs.number([-366, 366], {step: 1, label: \"start\", value: 1, placeholder: \"Enter start index\"}),\n    Inputs.number([-366, 366], {step: 1, label: \"stop\", value: 366, placeholder: \"Enter stop index\"}),\n    Inputs.number([-366, 366], {step: 1, label: \"step\", value: 5, placeholder: \"Enter step size\"}),\n])\n"},{"methodName":"interpret","cellName":"ojs-cell-23","inline":false,"source":"viewof spreadString = transformInput(\n  Inputs.text({label: \"spread string\", placeholder: \"Enter spread string\", value: \"0>366>3>2\"}),\n{bind: viewof spreadInputs, transform: encodeSpread, invert: decodeSpread});\nviewof spreadInputs = Inputs.form([\n    Inputs.number([-366, 366], {step: 1, label: \"start\", value: 0, placeholder: \"Enter start index\"}),\n    Inputs.number([-366, 366], {step: 1, label: \"span\", value: 366, placeholder: \"Enter span size\"}),\n    Inputs.number([-366, 366], {step: 1, label: \"split\", value: 3, placeholder: \"Enter split size\"}),\n    Inputs.number([-366, 366], {step: 1, label: \"space\", value: 2, placeholder: \"Enter space size\"}),\n])\n"},{"methodName":"interpret","cellName":"ojs-cell-24","inline":false,"source":"viewof togglePlot = Inputs.button([\n  [invertDotd ? \"None\" : \"All\", value => [...Array(10).keys()]],\n  [invertDotd ? \"Even\" : \"Odd\", value => [1, 3, 5, 7, 9]],\n  [invertDotd ? html`<s>Prime</s>` : \"Prime\", value => [2, 3, 5, 7]],\n  [invertDotd ? html`<s>Composite</s>` : \"Composite\", value => [4, 6, 8, 9]],\n  [invertDotd ? html`<s>Schedule2</s>` : \"Schedule2\", value => [0, 1, 5, 6]],\n  [invertDotd ? html`<s>Schedule3</s>` : \"Schedule3\", value => [0, 1, 2, 5, 6, 7]],\n  [invertDotd ? html`<s>Schedule4</s>` : \"Schedule4\", value => [0, 1, 2, 3, 5, 6, 7, 8]],\n], {value: [], label: \"select dotd\"})\n"},{"methodName":"interpret","cellName":"ojs-cell-25","inline":false,"source":"viewof invertDotd = Inputs.toggle({label: \"invert buttons\"})\n"},{"methodName":"interpret","cellName":"ojs-cell-26","inline":false,"source":"viewof sliceOrSpread = toggleSwitch({textOn: invertDotd ? \"Spread\" : 'Slice' , textOff: invertDotd ? \"Slice\" : 'Spread'})\n"},{"methodName":"interpret","cellName":"ojs-cell-27","inline":false,"source":"// https://observablehq.com/@dec/dotd\nPlot.plot({\n  padding: 0,\n  x: {axis: \"top\", label: null},\n  y: {label: null, tickPadding: 12},\n  marks: [\n    Plot.cell(dates, {x: d => d[2], y: d => d.slice(0, 2), fill: d =>\n      sliceArray.includes(d) && spreadArray.includes(d) ? \"green\" :\n      sliceArray.includes(d) && !spreadArray.includes(d) ? \"blue\" :\n      !sliceArray.includes(d) && spreadArray.includes(d) ? \"orange\" : \"grey\", inset: 0.5}),\n    Plot.text(dates, {x: d => d[2], y: d => d.slice(0, 2), fill: \"white\", stroke: \"white\", fontSize: 20})\n  ]\n})\n"},{"methodName":"interpret","cellName":"ojs-cell-28","inline":false,"source":"// https://observablehq.com/@mootari/range-slider\nfunction interval(range = [], options = {}) {\n  const [min = 0, max = 1] = range;\n  const {\n    step = .001,\n    label = null,\n    value = [min, max],\n    format = ([start, end]) => `${start} ‚Ä¶ ${end}`,\n    color,\n    width,\n    theme,\n  } = options;\n  const __ns__ = DOM.uid('scope').id;\n  const css = `\n#${__ns__} {\n  font: 13px/1.2 var(--sans-serif);\n  display: flex;\n  align-items: baseline;\n  flex-wrap: wrap;\n  max-width: 100%;\n  width: auto;\n}\n@media only screen and (min-width: 30em) {\n  #${__ns__} {\n    flex-wrap: nowrap;\n    width: 360px;\n  }\n}\n#${__ns__} .label {\n  width: 99px;\n  padding: 5px 0 4px 0;\n  margin-right: .5px;\n  flex-shrink: 0;\n}\n#${__ns__} .form {\n  display: flex;\n  width: 100%;\n}\n#${__ns__} .range {\n  flex-shrink: 1;\n  width: 100%;\n}\n#${__ns__} .range-slider {\n  width: 100%;\n}\n  `;\n  const $range = rangeInput({min, max, value: [value[0], value[1]], step, color, width, theme});\n  const $output = html`<output>`;\n  const $view = html`<div id=${__ns__}>\n${label == null ? '' : html`<div class=\"label\">${label}`}\n<div class=form>\n  <div class=range>\n    ${$range}<div class=range-output style=\"display: inline-block;\">${$output}</div>\n  </div>\n</div>\n${html`<style>${css}`}\n  `;\n  const update = () => {\n    const content = format([$range.value[0], $range.value[1]]);\n    if(typeof content === 'string') $output.value = content;\n    else {\n      while($output.lastChild) $output.lastChild.remove();\n      $output.appendChild(content);\n    }\n  };\n  $range.oninput = update;\n  update();\n  return Object.defineProperty($view, 'value', {\n    get: () => $range.value,\n    set: ([a, b]) => {\n      $range.value = [a, b];\n      update();\n    },\n  });\n}\ncssLength = v => v == null ? null : typeof v === 'number' ? `${v}px` : `${v}`\nfunction randomScope(prefix = 'scope-') {\n  return prefix + (performance.now() + Math.random()).toString(32).replace('.', '-');\n}\nfunction rangeInput(options = {}) {\n  const {\n    min = 0,\n    max = 100,\n    step = 'any',\n    value: defaultValue = [min, max],\n    color,\n    width,\n    theme = theme_Flat,\n  } = options;\n  const controls = {};\n  const scope = randomScope();\n  const clamp = (a, b, v) => v < a ? a : v > b ? b : v;\n  const html = htl.html;\n  // Will be used to sanitize values while avoiding floating point issues.\n  const input = html`<input type=range ${{min, max, step}}>`;\n  const dom = html`<div class=${`${scope} range-slider`} style=${{\n    color,\n    width: cssLength(width),\n  }}>\n  ${controls.track = html`<div class=\"range-track\">\n    ${controls.zone = html`<div class=\"range-track-zone\">\n      ${controls.range = html`<div class=\"range-select\" tabindex=0>\n        ${controls.min = html`<div class=\"thumb thumb-min\" tabindex=0>`}\n        ${controls.max = html`<div class=\"thumb thumb-max\" tabindex=0>`}\n      `}\n    `}\n  `}\n  ${html`<style>${theme.replace(/:scope\\b/g, '.'+scope)}`}\n</div>`;\n  let value = [], changed = false;\n  Object.defineProperty(dom, 'value', {\n    get: () => [...value],\n    set: ([a, b]) => {\n      value = sanitize(a, b);\n      updateRange();\n    },\n  });\n  const sanitize = (a, b) => {\n    a = isNaN(a) ? min : ((input.value = a), input.valueAsNumber);\n    b = isNaN(b) ? max : ((input.value = b), input.valueAsNumber);\n    return [Math.min(a, b), Math.max(a, b)];\n  }\n  const updateRange = () => {\n    const ratio = v => (v - min) / (max - min);\n    dom.style.setProperty('--range-min', `${ratio(value[0]) * 100}%`);\n    dom.style.setProperty('--range-max', `${ratio(value[1]) * 100}%`);\n  };\n  const dispatch = name => {\n    dom.dispatchEvent(new Event(name, {bubbles: true}));\n  };\n  const setValue = (vmin, vmax) => {\n    const [pmin, pmax] = value;\n    value = sanitize(vmin, vmax);\n    updateRange();\n    // Only dispatch if values have changed.\n    if(pmin === value[0] && pmax === value[1]) return;\n    dispatch('input');\n    changed = true;\n  };\n  setValue(...defaultValue);\n  // Mousemove handlers.\n  const handlers = new Map([\n    [controls.min, (dt, ov) => {\n      const v = clamp(min, ov[1], ov[0] + dt * (max - min));\n      setValue(v, ov[1]);\n    }],\n    [controls.max, (dt, ov) => {\n      const v = clamp(ov[0], max, ov[1] + dt * (max - min));\n      setValue(ov[0], v);\n    }],\n    [controls.range, (dt, ov) => {\n      const d = ov[1] - ov[0];\n      const v = clamp(min, max - d, ov[0] + dt * (max - min));\n      setValue(v, v + d);\n    }],\n  ]);\n  // Returns client offset object.\n  const pointer = e => e.touches ? e.touches[0] : e;\n  // Note: Chrome defaults \"passive\" for touch events to true.\n  const on  = (e, fn) => e.split(' ').map(e => document.addEventListener(e, fn, {passive: false}));\n  const off = (e, fn) => e.split(' ').map(e => document.removeEventListener(e, fn, {passive: false}));\n  let initialX, initialV, target, dragging = false;\n  function handleDrag(e) {\n    // Gracefully handle exit and reentry of the viewport.\n    if(!e.buttons && !e.touches) {\n      handleDragStop();\n      return;\n    }\n    dragging = true;\n    const w = controls.zone.getBoundingClientRect().width;\n    e.preventDefault();\n    handlers.get(target)((pointer(e).clientX - initialX) / w, initialV);\n  }\n  function handleDragStop(e) {\n    off('mousemove touchmove', handleDrag);\n    off('mouseup touchend', handleDragStop);\n    if(changed) dispatch('change');\n  }\n  invalidation.then(handleDragStop);\n  dom.ontouchstart = dom.onmousedown = e => {\n    dragging = false;\n    changed = false;\n    if(!handlers.has(e.target)) return;\n    on('mousemove touchmove', handleDrag);\n    on('mouseup touchend', handleDragStop);\n    e.preventDefault();\n    e.stopPropagation();\n    target = e.target;\n    initialX = pointer(e).clientX;\n    initialV = value.slice();\n  };\n  controls.track.onclick = e => {\n    if(dragging) return;\n    changed = false;\n    const r = controls.zone.getBoundingClientRect();\n    const t = clamp(0, 1, (pointer(e).clientX - r.left) / r.width);\n    const v = min + t * (max - min);\n    const [vmin, vmax] = value, d = vmax - vmin;\n    if(v < vmin) setValue(v, v + d);\n    else if(v > vmax) setValue(v - d, v);\n    if(changed) dispatch('change');\n  };\n  return dom;\n}\nfunction formatDecimal(number) {\n  return number == 1 ? number : (Math.round(number * 100) / 100).toString().slice(1)\n}\nbutton = (data, filename = 'data.csv') => {\n  if (!data) throw new Error('Array of data required as first argument');\n  let downloadData;\n  if (filename.includes('.csv')) {\n    downloadData = new Blob([d3.csvFormat(data)], { type: \"text/csv\" });\n  } else {\n    downloadData = new Blob([JSON.stringify(data, null, 2)], {\n      type: \"application/json\"\n    });\n  }\n  const size = (downloadData.size / 1024).toFixed(0);\n  const button = DOM.download(\n    downloadData,\n    filename,\n    `Download ${filename} (~${size} KB)`\n  );\n  return button;\n}\nfunction invert(arr) {\n  return invertDotd ? [...Array(10).keys()].map(n => !arr.includes(n)).map((x, i) => x ? i : null).filter(i => i !== null) : arr\n}\n// https://observablehq.com/@chrispahm/toggle-switch-input-button\nfunction toggleSwitch(options = { textOn: 'True', textOff: 'False' }) {\n  const button = html`<div class=\"button-switch\"\"></div>`;\n  button.innerText = options.textOn;\n  button.value = true;\n\n  button.onclick = () => {\n    button.value = !button.value;\n    button.innerText = button.value ? options.textOn : options.textOff;\n    button.dispatchEvent(new CustomEvent(\"input\"));\n  };\n\n  addButtonStyle()\n\n  return button;\n}\n// https://observablehq.com/@chrispahm/toggle-switch-input-button\nfunction addButtonStyle() {\n  var el = document.createElement('style');\n  el.setAttribute('type', 'text/css');\n  document.head.appendChild(el);\n  var sheet = el.sheet;\n  function addRule(rule) {\n    try {\n      sheet.insertRule(rule, sheet.cssRules.length);\n    } catch (e) {\n      console.warn('Error inserting rule', rule, e);\n    }\n  }\n  addRule(\n    '.button-switch { -webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;display: inline-block;-webkit-border-radius: 2px;-moz-border-radius: 2px;border-radius: 2px;background-color: #EFEFEF;padding: 0px 7px 0px 7px;text-align: center;border: 1px solid grey;width: auto;color: #1c1c1c;font-size: 13px;font-family: sans-serif;text-decoration: none; }'\n  );\n  addRule(\n    '.button-switch:hover { background-color: #E5E5E5;border: 1px solid #454545; }'\n  );\n  addRule(\n    '.button-switch:active { background-color: #f5f5f5;border: 1px solid grey; }'\n  );\n}\nfunction setSpreadDotd(dotd) {\n  const dotdLength = dotd.length;\n  if (dotdLength === 10) {return \">\"}\n  if (dotdLength === 0) {return \">0\"}\n  if (dotdLength === 1) {return `${dotd[0]}>>1>9`}\n  const steps = dotd.map((x, i) => dotd[i + 1] - x)\n    .filter(i => !isNaN(i)),\n    result = [];\n  let split = 1;\n  for (const step of steps) {\n    if (step !== 1) {\n       result.push([split, step - 1])\n       split = 1\n    } else {\n      split += 1\n    }\n  }\n  result.push(split)\n  const flat = [].concat(...result),\n    resultSum = flat.reduce((a, b) => a + b, 0),\n    uniq = [...new Set(flat)];\n  return [dotd[0] ? dotd[0] : null, null].concat(JSON.stringify(uniq) === \"[1]\" ? [null, 1] :\n                               flat.concat(10 - resultSum).map((x, i) => i % 2 === 0 && x === 1 ? null : x)).join(\">\")\n}\nfunction setSliceDotd(dotd) {\n  const dotdLength = dotd.length;\n  if (dotdLength === 10) {return \":\"}\n  if (dotdLength === 0) {return \":0\"}\n  const steps = dotd.map((x, i) => dotd[i + 1] - x)\n    .filter(i => !isNaN(i)),\n    stepSum = steps.reduce((a, b) => a + b, 0),\n    uniq = [...new Set(steps.concat(10 - stepSum))];\n  return [dotd[0] ? dotd[0] : null, null].concat(uniq.length === 1 ? uniq :\n                               steps.concat(10 - stepSum).map(x => x === 1 ? null : x)).join(\":\");\n}\nfunction encodeSlice(...args) {\n  return args.join().replaceAll(\",\", \":\")\n}\nfunction decodeSlice(s) {\n  let [start, stop, ...steps] = s.split(\":\").map(i => i === \"\" ? null : Number(i))\n  const step = steps[0] == null ? 1: steps[0];\n  start = start == null && step >= 0 ? 0 : start == null && step < 0 ? 365 : start;\n  stop = stop == null && step >= 0 ? 366 : stop;\n  return [start, stop, step]\n}\nfunction decodeSpread(spread) {\n  return spread.replace(/^</, \"366<\").replace(/^>/, \"0>\")\n    .split(/(?=^\\d|<|>)/).map(s => s.replace(\"<\", \"-\")\n    .replace(\">\", \"\")).map(s => s === \"\" || isNaN(s) ? null : Number(s))\n}\nfunction encodeSpread(args) {\n  return args.map(a => isNaN(a) ? null : a).join(\">\").replace(\">-\", \"<\")\n}\nfunction slice(self, start, stop, steps, ...args) {\n  const len = self.length, result = [];\n  if (steps === 0 || len === 0) { return result };\n  steps = (!steps || steps.length === 0 ? [1] :\n    typeof steps === \"number\" ? [steps] :\n    typeof steps === \"string\" ? Array.from(steps, Number) :\n    steps).concat(args.map(i => i == null ? 1 : i));\n  const stepCount = steps.length,\n    stepSum = steps.reduce((a, b) => a + b, 0);\n  if (stepSum === 0) { return result };\n  start = Math.max(\n    start == null && stepSum > 0 ? 0 :\n    start == null && stepSum < 0 ? len - 1 :\n    start >= len ? len - 1 :\n    start < 0 ? start + len :\n    start, 0);\n  stop = Math.max(\n    stop == null && stepSum > 0 ? len :\n    stop == null && stepSum < 0 ? -1 :\n    stop >= len ? len :\n    stop < 0 ? stop + len :\n    stop, -1);\n  for (\n    let i = start, counter = -1;\n    stepSum > 0 ? i < stop : i > stop;\n    i += steps[counter]\n  ) {\n    result.push(self[i]);\n    counter = (counter + 1) % stepCount;\n  };\n  return result;\n}\nfunction spread(self, startOrStop, span, splitsAndSpaces, ...args) {\n  const len = self.length, result = [];\n  if (span === 0 || len === 0) { return result };\n  splitsAndSpaces = (!splitsAndSpaces || splitsAndSpaces.length === 0 ? [1] :\n    typeof splitsAndSpaces === \"number\" ? [splitsAndSpaces] :\n    typeof splitsAndSpaces === \"string\" ? Array.from(splitsAndSpaces, Number) :\n    splitsAndSpaces).concat(args.map(i => i == null ? 1 : i));\n    const splitCount = splitsAndSpaces.length,\n    splitSpaceSum = splitsAndSpaces.reduce((a, b) => a + b, 0);\n  if (splitSpaceSum <= 0) { return result };\n  startOrStop = Math.max(\n    startOrStop == null && span > 0 || startOrStop == null && span == null ? 0 :\n    startOrStop == null || startOrStop > len && span < 0 ? len :\n    startOrStop < 0 ? startOrStop + len :\n    startOrStop, 0);\n  span = span == null || startOrStop + span > len ? len - startOrStop :\n    startOrStop + span < 0 ? -startOrStop: span;\n  const start = span > 0 ? startOrStop : startOrStop + span,\n    stop = span > 0 ? startOrStop + span : startOrStop;\n  for (let i = start, c = -1, arr = []; i < stop; i += splitsAndSpaces[c]) {\n    if ((c = (c + 1) % splitCount) % 2 === 0 && i + splitsAndSpaces[c] <= stop) {\n      if ((arr = Array.from({length: splitsAndSpaces[c]}, (_, j) => j + i).map(\n        index => self[index]).filter(item => item !== undefined)\n          ).length == splitsAndSpaces[c]) { result.push(arr) }\n    }\n  };\n  return result;\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-29","inline":false,"source":"nested = Array.from({length: intervals.length}, (_, i) => ([\n  {\n  label: `${i} or ${i+5}`,\n  duration: intervals[i][1] !== intervals[i][0] ? intervals[i][0] : 1,\n  group: \"Rest\"\n},\n  {\n  label: `${i} or ${i+5}`,\n  duration: intervals[i][1]-intervals[i][0],\n  group: \"Work\"\n},\n  {\n  label: `${i} or ${i+5}`,\n  duration: intervals[i][1] !== intervals[i][0] ? 1-intervals[i][1] : null,\n  group: \"Rest\"\n  }]))\ndurations = [].concat(...nested)\ntheme_Flat = `\n/* Options */\n:scope {\n  color: #3b99fc;\n  width: 240px;\n}\n\n:scope {\n  position: relative;\n  display: inline-block;\n  --thumb-size: 15px;\n  --thumb-radius: calc(var(--thumb-size) / 2);\n  padding: var(--thumb-radius) 0;\n  margin: 2px;\n  vertical-align: middle;\n}\n:scope .range-track {\n  box-sizing: border-box;\n  position: relative;\n  height: 7px;\n  background-color: hsl(0, 0%, 80%);\n  overflow: visible;\n  border-radius: 4px;\n  padding: 0 var(--thumb-radius);\n}\n:scope .range-track-zone {\n  box-sizing: border-box;\n  position: relative;\n}\n:scope .range-select {\n  box-sizing: border-box;\n  position: relative;\n  left: var(--range-min);\n  width: calc(var(--range-max) - var(--range-min));\n  cursor: ew-resize;\n  background: currentColor;\n  height: 7px;\n  border: inherit;\n}\n/* Expands the hotspot area. */\n:scope .range-select:before {\n  content: \"\";\n  position: absolute;\n  width: 100%;\n  height: var(--thumb-size);\n  left: 0;\n  top: calc(2px - var(--thumb-radius));\n}\n:scope .range-select:focus,\n:scope .thumb:focus {\n  outline: none;\n}\n:scope .thumb {\n  box-sizing: border-box;\n  position: absolute;\n  width: var(--thumb-size);\n  height: var(--thumb-size);\n\n  background: #fcfcfc;\n  top: -4px;\n  border-radius: 100%;\n  border: 1px solid hsl(0,0%,55%);\n  cursor: default;\n  margin: 0;\n}\n:scope .thumb:active {\n  box-shadow: inset 0 var(--thumb-size) #0002;\n}\n:scope .thumb-min {\n  left: calc(-1px - var(--thumb-radius));\n}\n:scope .thumb-max {\n  right: calc(-1px - var(--thumb-radius));\n}\n`\nschedules = [\n  [[.2, .8], [.2, .8], [0, 0], [0, 0], [0, 0]],\n  [[.3, .7], [.3, .7], [.3, .7], [0, 0], [0, 0]],\n  [[.35, .65], [.35, .65], [.35, .65], [.35, .65], [0, 0]],\n  [[.38, .62], [.38, .62], [.38, .62], [.38, .62], [.38, .62]],\n]\ndates = Array.from({length: 366}, (_, i) => i.toString().padStart(3, \"0\"))\nsliceArray = slice(dates, ...sliceString.split(\":\").map(i => i === \"\" ? null : Number(i)))\nspreadArray = [].concat(...spread(dates, ...decodeSpread(spreadString)))\n"},{"methodName":"interpret","cellName":"ojs-cell-30","inline":false,"source":"set(viewof intervals, schedules[schedule-2])\nset(viewof spreadString, setSpreadDotd(spreadDotd))\nset(viewof sliceString, setSliceDotd(sliceDotd))\n{\n  if (invertDotd ? !sliceOrSpread : sliceOrSpread) {\n    set(viewof sliceDotd, invert(togglePlot))\n  } else {\n    set(viewof spreadDotd, invert(togglePlot))\n  }\n}\n\n"},{"methodName":"interpretQuiet","source":"shinyInput('inputDoty')"},{"methodName":"interpretQuiet","source":"shinyInput('year')"},{"methodName":"interpretQuiet","source":"shinyInput('monthInput')"},{"methodName":"interpretQuiet","source":"shinyInput('dotmInput')"},{"methodName":"interpretQuiet","source":"shinyInput('scrubberDoty')"},{"methodName":"interpretQuiet","source":"shinyInput('inputDatetime')"},{"methodName":"interpretQuiet","source":"shinyInput('yd')"},{"methodName":"interpretQuiet","source":"shinyInput('decoOutput')"},{"methodName":"interpretQuiet","source":"shinyInput('scrubberDeco')"},{"methodName":"interpretQuiet","source":"shinyInput('intervals')"},{"methodName":"interpretQuiet","source":"shinyInput('schedule')"},{"methodName":"interpretQuiet","source":"shinyInput('filename')"},{"methodName":"interpretQuiet","source":"shinyInput('sliceDotd')"},{"methodName":"interpretQuiet","source":"shinyInput('spreadDotd')"},{"methodName":"interpretQuiet","source":"shinyInput('sliceString')"},{"methodName":"interpretQuiet","source":"shinyInput('sliceInputs')"},{"methodName":"interpretQuiet","source":"shinyInput('spreadString')"},{"methodName":"interpretQuiet","source":"shinyInput('spreadInputs')"},{"methodName":"interpretQuiet","source":"shinyInput('togglePlot')"},{"methodName":"interpretQuiet","source":"shinyInput('invertDotd')"},{"methodName":"interpretQuiet","source":"shinyInput('sliceOrSpread')"}]}
</script><script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../../..";
window._ojs.paths.runtimeToRoot = "../../..";
window._ojs.paths.docToRoot = "";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
          // default icon
          link.classList.add("external");
      }
    }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb176" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb176-2"><a href="#cb176-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Decalendar and Declock"</span></span>
<span id="cb176-3"><a href="#cb176-3" aria-hidden="true" tabindex="-1"></a><span class="an">license:</span><span class="co"> "CC BY-SA"</span></span>
<span id="cb176-4"><a href="#cb176-4" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span></span>
<span id="cb176-5"><a href="#cb176-5" aria-hidden="true" tabindex="-1"></a><span class="co">  - name: Martin Laptev</span></span>
<span id="cb176-6"><a href="#cb176-6" aria-hidden="true" tabindex="-1"></a><span class="co">    url: https://maptv.github.io</span></span>
<span id="cb176-7"><a href="#cb176-7" aria-hidden="true" tabindex="-1"></a><span class="an">citation:</span></span>
<span id="cb176-8"><a href="#cb176-8" aria-hidden="true" tabindex="-1"></a><span class="co">  url: https://maptv.github.io/cal</span></span>
<span id="cb176-9"><a href="#cb176-9" aria-hidden="true" tabindex="-1"></a><span class="co">  issued: 2023</span></span>
<span id="cb176-10"><a href="#cb176-10" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb176-11"><a href="#cb176-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-12"><a href="#cb176-12" aria-hidden="true" tabindex="-1"></a><span class="fu"># Introduction {#sec-intro}</span></span>
<span id="cb176-13"><a href="#cb176-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-14"><a href="#cb176-14" aria-hidden="true" tabindex="-1"></a><span class="fu">## Day-of-the-year {#sec-intro-doty}</span></span>
<span id="cb176-15"><a href="#cb176-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-16"><a href="#cb176-16" aria-hidden="true" tabindex="-1"></a><span class="in">`Decalendar`</span><span class="ot">[^decalendar]</span> is a <span class="co">[</span><span class="ot">decimal</span><span class="co">](https://en.wikipedia.org/wiki/Decimal)</span> calendarüóìÔ∏èsystem and <span class="in">`Declock`</span><span class="ot">[^declock]</span> is a decimal timekeeping‚è≥system. Instead of months, weeks, hours, minutes, and seconds, <span class="in">`Decalendar`</span> and <span class="in">`Declock`</span> use a number called the day-of-the-year (<span class="in">`doty`</span>)<span class="ot">[^doty]</span>. @fig-bar-doty displays the current <span class="in">`doty`</span> (\${styledDotyDate}.\${styledDotyTime}) as a bar chart. The <span class="co">[</span><span class="ot">integer part</span><span class="co">](https://en.wikipedia.org/wiki/Decimal#:~:text=The%20integer%20part%20or%20integral%20part%20of%20a%20decimal%20numeral%20is%20the%20integer%20written%20to%20the%20left%20of%20the%20decimal%20separator)</span> of the <span class="in">`doty`</span> is the <span class="in">`Decalendar`</span> date<span class="ot">[^date]</span> (\${setStyle(dotyDate, d3.schemePaired<span class="sc">\[</span>1<span class="sc">\]</span>)}) and the <span class="co">[</span><span class="ot">fractional part</span><span class="co">](https://en.wikipedia.org/wiki/Decimal#:~:text=The%20part%20from%20the%20decimal%20separator%20to%20the%20right%20is%20the%20fractional%20part%2C%20which%20equals%20the%20difference%20between%20the%20numeral%20and%20its%20integer%20part.)</span> is the <span class="in">`Declock`</span> time<span class="ot">[^time]</span> (\${setStyle(dotyTime, d3.schemePaired<span class="sc">\[</span>2<span class="sc">\]</span>)}).</span>
<span id="cb176-17"><a href="#cb176-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-18"><a href="#cb176-18" aria-hidden="true" tabindex="-1"></a><span class="ot">[^decalendar]: </span><span class="in">`Decalendar`</span>: a calendar system that uses <span class="in">`deks`</span> instead of months and weeks</span>
<span id="cb176-19"><a href="#cb176-19" aria-hidden="true" tabindex="-1"></a><span class="ot">[^declock]: </span><span class="in">`Declock`</span>: a timekeeping system that uses fractional days instead of hours, minutes, and seconds</span>
<span id="cb176-20"><a href="#cb176-20" aria-hidden="true" tabindex="-1"></a><span class="ot">[^doty]: </span><span class="in">`doty`</span>: day-of-the-year; an alternative to months, weeks, hours, minutes, and seconds</span>
<span id="cb176-21"><a href="#cb176-21" aria-hidden="true" tabindex="-1"></a><span class="ot">[^date]: </span><span class="in">`doty`</span> date: the integer part of the <span class="in">`doty`</span>; an alternate to calendar dates and week dates</span>
<span id="cb176-22"><a href="#cb176-22" aria-hidden="true" tabindex="-1"></a><span class="ot">[^time]: </span><span class="in">`doty`</span> time: the fractional part of the <span class="in">`doty`</span>; an alternate to hours, minutes and seconds</span>
<span id="cb176-23"><a href="#cb176-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-24"><a href="#cb176-24" aria-hidden="true" tabindex="-1"></a>The top two bars in @fig-bar-doty (Êó¨ and Êó•) show the two components of the <span class="in">`Decalendar`</span> date (\${setStyle(dotyDate, d3.schemePaired<span class="sc">\[</span>1<span class="sc">\]</span>)}): the <span class="in">`dek`</span><span class="ot">[^dek]</span>  (\${styledDek}) and the day-of-the-<span class="in">`dek`</span><span class="ot">[^dotd]</span> (\${styledDotd}). A <span class="in">`dek`</span> is a group of 10 days that fulfills the role of months and weeks in <span class="in">`Decalendar`</span>. Therefore, the <span class="in">`dek`</span> and the day-of-the-<span class="in">`dek`</span> (<span class="in">`dotd`</span>) in <span class="in">`Decalendar`</span> dates are analogous to the month and day-of-the-month (<span class="in">`dotm`</span>) in <span class="co">[</span><span class="ot">calendar dates</span><span class="co">](https://en.wikipedia.org/wiki/ISO_8601#Calendar_dates)</span> (<span class="in">`mm-dd`</span>) and the week and day-of-the-week (<span class="in">`dotw`</span>) in <span class="co">[</span><span class="ot">week dates</span><span class="co">](https://en.wikipedia.org/wiki/ISO_8601#Week_dates)</span> (<span class="in">`Www-d`</span>).</span>
<span id="cb176-25"><a href="#cb176-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-26"><a href="#cb176-26" aria-hidden="true" tabindex="-1"></a><span class="ot">[^dek]: </span><span class="in">`dek`</span>: a group of 10 days; the first two digits of the <span class="in">`Decalendar`</span> date; an alternate to month and weeks</span>
<span id="cb176-27"><a href="#cb176-27" aria-hidden="true" tabindex="-1"></a><span class="ot">[^dotd]: </span><span class="in">`dotd`</span>: one of the 10 days in a <span class="in">`dek`</span>; the last digit of the <span class="in">`Decalendar`</span> date; an alternate to the day-of-the-month and day-of-the-week</span>
<span id="cb176-28"><a href="#cb176-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-29"><a href="#cb176-29" aria-hidden="true" tabindex="-1"></a>The bottom three bars in @fig-bar-doty (%, ‚Ä∞, and ‚ô´) show components of the <span class="in">`Declock`</span> time (\${setStyle(dotyTime, d3.schemePaired<span class="sc">\[</span>2<span class="sc">\]</span>)}):</span>
<span id="cb176-30"><a href="#cb176-30" aria-hidden="true" tabindex="-1"></a><span class="in">`cents`</span><span class="ot">[^cent]</span> (\${styledCent}), <span class="in">`mils`</span><span class="ot">[^mil]</span> (\${styledMil}), and <span class="in">`beats`</span><span class="ot">[^beat]</span> (\${styledBeat}). A <span class="in">`cent`</span> is 1% of the day, which is a little less than a quarter hour. A <span class="in">`mil`</span> (<span class="in">`‚Ä∞`</span>) is a tenth of a <span class="in">`cent`</span>, which is close to a minute and a half. A <span class="in">`beat`</span> is 1% of a <span class="in">`mil`</span>, which is almost as long as a second, and can be thought of as a heart‚ù§Ô∏èbeat or musicalüéµ<span class="co">[</span><span class="ot">beat</span><span class="co">]</span>(https://en.wikipedia.org/wiki/Beat_(music)#:~:text=the%20beat%20is%20the%20basic%20unit%20of%20time) with a constant <span class="co">[</span><span class="ot">rate</span><span class="co">](https://en.wikipedia.org/wiki/Heart_rate#:~:text=The%20American%20Heart%20Association%20states%20the%20normal%20resting%20adult%20human%20heart%20rate%20is%2060%2D100%20bpm.)</span> or <span class="co">[</span><span class="ot">tempo</span><span class="co">](https://en.wikipedia.org/wiki/Tempo#Basic_tempo_markings:~:text=Adagietto%20%E2%80%93%20slower%20than,56%E2%80%93108%C2%A0bpm)</span> of 69.4ÃÖ beats per minute. In addition to displaying time on clocksüï∞Ô∏èand‚åöÔ∏èwatches, <span class="in">`beats`</span> can be used to measure durations, such as the time since this webpage was loaded: \${styledTickTime}.</span>
<span id="cb176-31"><a href="#cb176-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-32"><a href="#cb176-32" aria-hidden="true" tabindex="-1"></a><span class="ot">[^cent]: </span><span class="in">`cent`</span>: a hundredth ($10^{-2}$) of a day; the first 2 digits of the <span class="in">`doty`</span> time; an alternate to quarter hours</span>
<span id="cb176-33"><a href="#cb176-33" aria-hidden="true" tabindex="-1"></a><span class="ot">[^mil]: </span><span class="in">`mil`</span>: a thousandth ($10^{-3}$) of a day; the first 3 digits of the <span class="in">`doty`</span> time; an alternate to minutes</span>
<span id="cb176-34"><a href="#cb176-34" aria-hidden="true" tabindex="-1"></a><span class="ot">[^beat]: </span><span class="in">`beat`</span>: a hundred thousandth ($10^{-5}$) of a day; the first 5 digits of the <span class="in">`doty`</span> time; an alternate to seconds</span>
<span id="cb176-35"><a href="#cb176-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-38"><a href="#cb176-38" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb176-39"><a href="#cb176-39" aria-hidden="true" tabindex="-1"></a><span class="co">//| echo: false</span></span>
<span id="cb176-40"><a href="#cb176-40" aria-hidden="true" tabindex="-1"></a><span class="co">//| label: fig-bar-doty</span></span>
<span id="cb176-41"><a href="#cb176-41" aria-hidden="true" tabindex="-1"></a><span class="co">//| fig-cap: "Doty bar chart"</span></span>
<span id="cb176-42"><a href="#cb176-42" aria-hidden="true" tabindex="-1"></a><span class="co">//| fig-align: "center"</span></span>
<span id="cb176-43"><a href="#cb176-43" aria-hidden="true" tabindex="-1"></a><span class="co">//| column: body</span></span>
<span id="cb176-44"><a href="#cb176-44" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/@fheyen/barchart-clock</span></span>
<span id="cb176-45"><a href="#cb176-45" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb176-46"><a href="#cb176-46" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> W <span class="op">=</span> width <span class="op">&gt;</span> <span class="dv">1250</span> <span class="op">?</span> width <span class="op">*</span> <span class="dv">2</span> <span class="op">/</span> <span class="dv">3</span> <span class="op">:</span> width <span class="op">&gt;</span> <span class="dv">1150</span> <span class="op">?</span> width <span class="op">*</span> <span class="dv">3</span> <span class="op">/</span> <span class="dv">4</span> <span class="op">:</span> width <span class="op">&gt;</span> <span class="dv">1050</span> <span class="op">?</span> width <span class="op">*</span> <span class="dv">4</span> <span class="op">/</span> <span class="dv">5</span> <span class="op">:</span> width <span class="op">&gt;</span> <span class="dv">950</span> <span class="op">?</span> width <span class="op">*</span> <span class="dv">5</span> <span class="op">/</span> <span class="dv">6</span> <span class="op">:</span> width <span class="op">&gt;</span> <span class="dv">850</span> <span class="op">?</span> width <span class="op">:</span> width <span class="op">&gt;</span> <span class="dv">750</span> <span class="op">?</span> width <span class="op">*</span> <span class="fl">1.02</span> <span class="op">:</span> width <span class="op">&gt;</span> <span class="dv">650</span> <span class="op">?</span> width <span class="op">*</span> <span class="fl">1.06</span> <span class="op">:</span> width <span class="op">&gt;</span> <span class="dv">550</span> <span class="op">?</span> width <span class="op">*</span> <span class="fl">1.1</span> <span class="op">:</span> width <span class="op">&gt;</span> <span class="dv">450</span> <span class="op">?</span> width <span class="op">*</span> <span class="fl">1.14</span> <span class="op">:</span> width <span class="op">*</span> <span class="fl">1.18</span><span class="op">;</span></span>
<span id="cb176-47"><a href="#cb176-47" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> H <span class="op">=</span> <span class="dv">156</span><span class="op">;</span></span>
<span id="cb176-48"><a href="#cb176-48" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> barX <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb176-49"><a href="#cb176-49" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> firstBarY <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb176-50"><a href="#cb176-50" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> svg <span class="op">=</span> d3</span>
<span id="cb176-51"><a href="#cb176-51" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">create</span>(<span class="st">"svg"</span>)</span>
<span id="cb176-52"><a href="#cb176-52" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"width"</span><span class="op">,</span> W)</span>
<span id="cb176-53"><a href="#cb176-53" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"viewBox"</span><span class="op">,</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> W<span class="op">,</span> H])<span class="op">;</span></span>
<span id="cb176-54"><a href="#cb176-54" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> xRange <span class="op">=</span> [<span class="dv">0</span><span class="op">,</span> W <span class="op">-</span> <span class="dv">100</span>]<span class="op">;</span></span>
<span id="cb176-55"><a href="#cb176-55" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> scaleM <span class="op">=</span> d3<span class="op">.</span><span class="fu">scaleLinear</span>()</span>
<span id="cb176-56"><a href="#cb176-56" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">domain</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">10</span>])</span>
<span id="cb176-57"><a href="#cb176-57" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">range</span>(xRange)<span class="op">;</span></span>
<span id="cb176-58"><a href="#cb176-58" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> scaleCandB <span class="op">=</span> d3<span class="op">.</span><span class="fu">scaleLinear</span>()</span>
<span id="cb176-59"><a href="#cb176-59" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">domain</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">100</span>])</span>
<span id="cb176-60"><a href="#cb176-60" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">range</span>(xRange)<span class="op">;</span></span>
<span id="cb176-61"><a href="#cb176-61" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> scaleDek <span class="op">=</span> d3<span class="op">.</span><span class="fu">scaleLinear</span>()</span>
<span id="cb176-62"><a href="#cb176-62" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">domain</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">37</span>])</span>
<span id="cb176-63"><a href="#cb176-63" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">range</span>(xRange)<span class="op">;</span></span>
<span id="cb176-64"><a href="#cb176-64" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Background bars to show where 100% lies</span></span>
<span id="cb176-65"><a href="#cb176-65" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">'.background'</span>)</span>
<span id="cb176-66"><a href="#cb176-66" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">data</span>([<span class="st">'dek'</span><span class="op">,</span> <span class="st">'dotd'</span><span class="op">,</span> <span class="st">'cents'</span><span class="op">,</span> <span class="st">"mils"</span><span class="op">,</span> <span class="st">'beats'</span>])</span>
<span id="cb176-67"><a href="#cb176-67" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">enter</span>()</span>
<span id="cb176-68"><a href="#cb176-68" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'rect'</span>)</span>
<span id="cb176-69"><a href="#cb176-69" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'background timeBar'</span>)</span>
<span id="cb176-70"><a href="#cb176-70" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'width'</span><span class="op">,</span> W<span class="op">-</span><span class="dv">100</span>)</span>
<span id="cb176-71"><a href="#cb176-71" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> (d<span class="op">,</span>i)<span class="kw">=&gt;</span>i<span class="op">*</span><span class="dv">30</span><span class="op">+</span>firstBarY)</span>
<span id="cb176-72"><a href="#cb176-72" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Dek/Dotd</span></span>
<span id="cb176-73"><a href="#cb176-73" aria-hidden="true" tabindex="-1"></a>  svg</span>
<span id="cb176-74"><a href="#cb176-74" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'rect'</span>)</span>
<span id="cb176-75"><a href="#cb176-75" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'timeBar'</span>)</span>
<span id="cb176-76"><a href="#cb176-76" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY)</span>
<span id="cb176-77"><a href="#cb176-77" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'width'</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">scaleDek</span>(<span class="bu">Number</span>(dotyDek)<span class="op">+</span><span class="bu">Number</span>(dotyDotd)<span class="op">/</span><span class="dv">10</span><span class="op">+</span><span class="bu">Number</span>(barCents)<span class="op">/</span><span class="dv">1000</span>))</span>
<span id="cb176-78"><a href="#cb176-78" aria-hidden="true" tabindex="-1"></a>  svg</span>
<span id="cb176-79"><a href="#cb176-79" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'rect'</span>)</span>
<span id="cb176-80"><a href="#cb176-80" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'timeBarFull'</span>)</span>
<span id="cb176-81"><a href="#cb176-81" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY)</span>
<span id="cb176-82"><a href="#cb176-82" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'width'</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">scaleDek</span>(dotyDek))</span>
<span id="cb176-83"><a href="#cb176-83" aria-hidden="true" tabindex="-1"></a>  svg</span>
<span id="cb176-84"><a href="#cb176-84" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'rect'</span>)</span>
<span id="cb176-85"><a href="#cb176-85" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'timeBar'</span>)</span>
<span id="cb176-86"><a href="#cb176-86" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY<span class="op">+</span><span class="dv">30</span>)</span>
<span id="cb176-87"><a href="#cb176-87" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'width'</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">scaleM</span>(<span class="bu">Number</span>(dotyDotd)<span class="op">+</span><span class="bu">Number</span>(barCents)<span class="op">/</span><span class="dv">100</span><span class="op">+</span><span class="bu">Number</span>(barMils)<span class="op">/</span><span class="dv">1000</span>))</span>
<span id="cb176-88"><a href="#cb176-88" aria-hidden="true" tabindex="-1"></a>  svg</span>
<span id="cb176-89"><a href="#cb176-89" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'rect'</span>)</span>
<span id="cb176-90"><a href="#cb176-90" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'timeBarFull'</span>)</span>
<span id="cb176-91"><a href="#cb176-91" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY<span class="op">+</span><span class="dv">30</span>)</span>
<span id="cb176-92"><a href="#cb176-92" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'width'</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">scaleM</span>(dotyDotd))</span>
<span id="cb176-93"><a href="#cb176-93" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">'.tickDek'</span>)</span>
<span id="cb176-94"><a href="#cb176-94" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">data</span>(d3<span class="op">.</span><span class="fu">range</span>(width <span class="op">&gt;</span> <span class="dv">500</span> <span class="op">?</span> <span class="dv">4</span><span class="op">:</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">37</span>))</span>
<span id="cb176-95"><a href="#cb176-95" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">enter</span>()</span>
<span id="cb176-96"><a href="#cb176-96" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'rect'</span>)</span>
<span id="cb176-97"><a href="#cb176-97" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'tickDek'</span>)</span>
<span id="cb176-98"><a href="#cb176-98" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'x'</span><span class="op">,</span> d<span class="kw">=&gt;</span><span class="fu">scaleDek</span>(d)<span class="op">+</span>barX)</span>
<span id="cb176-99"><a href="#cb176-99" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY)</span>
<span id="cb176-100"><a href="#cb176-100" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'height'</span><span class="op">,</span> d<span class="kw">=&gt;</span>d<span class="op">%</span>(width <span class="op">&gt;</span> <span class="dv">500</span> <span class="op">?</span> <span class="dv">2</span> <span class="op">:</span> <span class="dv">3</span>)<span class="op">===</span><span class="dv">0</span><span class="op">?</span> <span class="dv">6</span><span class="op">:</span><span class="dv">4</span>)</span>
<span id="cb176-101"><a href="#cb176-101" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Cent ticks</span></span>
<span id="cb176-102"><a href="#cb176-102" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">'.tickDotd'</span>)</span>
<span id="cb176-103"><a href="#cb176-103" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">data</span>(d3<span class="op">.</span><span class="fu">range</span>(width <span class="op">&gt;</span> <span class="dv">500</span> <span class="op">?</span> <span class="dv">1</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">10</span>))</span>
<span id="cb176-104"><a href="#cb176-104" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">enter</span>()</span>
<span id="cb176-105"><a href="#cb176-105" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'rect'</span>)</span>
<span id="cb176-106"><a href="#cb176-106" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'tickDotd'</span>)</span>
<span id="cb176-107"><a href="#cb176-107" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'x'</span><span class="op">,</span> d<span class="kw">=&gt;</span><span class="fu">scaleM</span>(d)<span class="op">+</span>barX)</span>
<span id="cb176-108"><a href="#cb176-108" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY<span class="op">+</span><span class="dv">49</span>)</span>
<span id="cb176-109"><a href="#cb176-109" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'height'</span><span class="op">,</span> <span class="dv">6</span>)</span>
<span id="cb176-110"><a href="#cb176-110" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">'.tickLabel'</span>)</span>
<span id="cb176-111"><a href="#cb176-111" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">data</span>(d3<span class="op">.</span><span class="fu">range</span>(width <span class="op">&gt;</span> <span class="dv">500</span> <span class="op">?</span> <span class="dv">4</span><span class="op">:</span> <span class="dv">6</span><span class="op">,</span> width <span class="op">&gt;</span> <span class="dv">500</span> <span class="op">?</span> <span class="dv">37</span><span class="op">:</span> <span class="dv">35</span><span class="op">,</span> width <span class="op">&gt;</span> <span class="dv">500</span> <span class="op">?</span> <span class="dv">2</span><span class="op">:</span> <span class="dv">3</span>))</span>
<span id="cb176-112"><a href="#cb176-112" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">enter</span>()</span>
<span id="cb176-113"><a href="#cb176-113" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'text'</span>)</span>
<span id="cb176-114"><a href="#cb176-114" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'tickLabel'</span>)</span>
<span id="cb176-115"><a href="#cb176-115" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'x'</span><span class="op">,</span> d<span class="kw">=&gt;</span><span class="fu">scaleDek</span>(d)<span class="op">+</span>barX<span class="op">+.</span><span class="dv">5</span>)</span>
<span id="cb176-116"><a href="#cb176-116" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY<span class="op">+</span><span class="dv">22</span>)</span>
<span id="cb176-117"><a href="#cb176-117" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">text</span>(d<span class="kw">=&gt;</span>d)</span>
<span id="cb176-118"><a href="#cb176-118" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Cents/Mils</span></span>
<span id="cb176-119"><a href="#cb176-119" aria-hidden="true" tabindex="-1"></a>  svg</span>
<span id="cb176-120"><a href="#cb176-120" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'rect'</span>)</span>
<span id="cb176-121"><a href="#cb176-121" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'timeBar'</span>)</span>
<span id="cb176-122"><a href="#cb176-122" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY<span class="op">+</span><span class="dv">60</span>)</span>
<span id="cb176-123"><a href="#cb176-123" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'width'</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">scaleCandB</span>(<span class="bu">Number</span>(barCents)<span class="op">+</span><span class="bu">Number</span>(barMils)<span class="op">/</span><span class="dv">10</span><span class="op">+</span><span class="bu">Number</span>(barBeats)<span class="op">/</span><span class="dv">1000</span>))</span>
<span id="cb176-124"><a href="#cb176-124" aria-hidden="true" tabindex="-1"></a>  svg</span>
<span id="cb176-125"><a href="#cb176-125" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'rect'</span>)</span>
<span id="cb176-126"><a href="#cb176-126" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'timeBarFull'</span>)</span>
<span id="cb176-127"><a href="#cb176-127" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY<span class="op">+</span><span class="dv">60</span>)</span>
<span id="cb176-128"><a href="#cb176-128" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'width'</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">scaleCandB</span>(barCents))</span>
<span id="cb176-129"><a href="#cb176-129" aria-hidden="true" tabindex="-1"></a>  svg</span>
<span id="cb176-130"><a href="#cb176-130" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'rect'</span>)</span>
<span id="cb176-131"><a href="#cb176-131" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'timeBar'</span>)</span>
<span id="cb176-132"><a href="#cb176-132" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY<span class="op">+</span><span class="dv">90</span>)</span>
<span id="cb176-133"><a href="#cb176-133" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'width'</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">scaleM</span>(<span class="bu">Number</span>(barMils)<span class="op">+</span><span class="bu">Number</span>(barBeats)<span class="op">/</span><span class="dv">100</span><span class="op">+</span><span class="bu">Number</span>(barMb)<span class="op">/</span><span class="dv">100000</span>))</span>
<span id="cb176-134"><a href="#cb176-134" aria-hidden="true" tabindex="-1"></a>  svg</span>
<span id="cb176-135"><a href="#cb176-135" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'rect'</span>)</span>
<span id="cb176-136"><a href="#cb176-136" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'timeBarFull'</span>)</span>
<span id="cb176-137"><a href="#cb176-137" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY<span class="op">+</span><span class="dv">90</span>)</span>
<span id="cb176-138"><a href="#cb176-138" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'width'</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">scaleM</span>(barMils))</span>
<span id="cb176-139"><a href="#cb176-139" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Cent ticks</span></span>
<span id="cb176-140"><a href="#cb176-140" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">'.tickC'</span>)</span>
<span id="cb176-141"><a href="#cb176-141" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">data</span>(d3<span class="op">.</span><span class="fu">range</span>(width <span class="op">&gt;</span> <span class="dv">500</span> <span class="op">?</span> <span class="dv">10</span> <span class="op">:</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">100</span>))</span>
<span id="cb176-142"><a href="#cb176-142" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">enter</span>()</span>
<span id="cb176-143"><a href="#cb176-143" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'rect'</span>)</span>
<span id="cb176-144"><a href="#cb176-144" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'tickC'</span>)</span>
<span id="cb176-145"><a href="#cb176-145" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'x'</span><span class="op">,</span> d<span class="kw">=&gt;</span><span class="fu">scaleM</span>(d<span class="op">/</span><span class="dv">10</span>)<span class="op">+</span>barX)</span>
<span id="cb176-146"><a href="#cb176-146" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY<span class="op">+</span><span class="dv">60</span>)</span>
<span id="cb176-147"><a href="#cb176-147" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'height'</span><span class="op">,</span> d<span class="kw">=&gt;</span>d<span class="op">%</span><span class="dv">2</span><span class="op">===</span><span class="dv">0</span><span class="op">?</span> <span class="dv">8</span><span class="op">:</span><span class="dv">5</span>)</span>
<span id="cb176-148"><a href="#cb176-148" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">'.tickC1'</span>)</span>
<span id="cb176-149"><a href="#cb176-149" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">data</span>(d3<span class="op">.</span><span class="fu">range</span>(width <span class="op">&gt;</span> <span class="dv">500</span> <span class="op">?</span> <span class="dv">10</span> <span class="op">:</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">100</span>))</span>
<span id="cb176-150"><a href="#cb176-150" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">enter</span>()</span>
<span id="cb176-151"><a href="#cb176-151" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'rect'</span>)</span>
<span id="cb176-152"><a href="#cb176-152" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'tickC1'</span>)</span>
<span id="cb176-153"><a href="#cb176-153" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'x'</span><span class="op">,</span> d<span class="kw">=&gt;</span><span class="fu">scaleM</span>(d<span class="op">/</span><span class="dv">10</span>)<span class="op">+</span>barX)</span>
<span id="cb176-154"><a href="#cb176-154" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> d<span class="kw">=&gt;</span>d<span class="op">%</span><span class="dv">2</span><span class="op">===</span><span class="dv">0</span><span class="op">?</span> firstBarY<span class="op">+</span><span class="dv">77</span><span class="op">:</span>firstBarY<span class="op">+</span><span class="dv">80</span>)</span>
<span id="cb176-155"><a href="#cb176-155" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'height'</span><span class="op">,</span> d<span class="kw">=&gt;</span>d<span class="op">%</span><span class="dv">2</span><span class="op">===</span><span class="dv">0</span><span class="op">?</span> <span class="dv">8</span><span class="op">:</span><span class="dv">5</span>)</span>
<span id="cb176-156"><a href="#cb176-156" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Mil ticks</span></span>
<span id="cb176-157"><a href="#cb176-157" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">'.tickM'</span>)</span>
<span id="cb176-158"><a href="#cb176-158" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">data</span>(d3<span class="op">.</span><span class="fu">range</span>(width <span class="op">&gt;</span> <span class="dv">500</span> <span class="op">?</span> <span class="dv">1</span> <span class="op">:</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">10</span>))</span>
<span id="cb176-159"><a href="#cb176-159" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">enter</span>()</span>
<span id="cb176-160"><a href="#cb176-160" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'rect'</span>)</span>
<span id="cb176-161"><a href="#cb176-161" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'tickM'</span>)</span>
<span id="cb176-162"><a href="#cb176-162" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'x'</span><span class="op">,</span> d<span class="kw">=&gt;</span><span class="fu">scaleM</span>(d)<span class="op">+</span>barX)</span>
<span id="cb176-163"><a href="#cb176-163" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY<span class="op">+</span><span class="dv">90</span>)</span>
<span id="cb176-164"><a href="#cb176-164" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'height'</span><span class="op">,</span> <span class="dv">6</span>)</span>
<span id="cb176-165"><a href="#cb176-165" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">'.tickM1'</span>)</span>
<span id="cb176-166"><a href="#cb176-166" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">data</span>(d3<span class="op">.</span><span class="fu">range</span>(width <span class="op">&gt;</span> <span class="dv">500</span> <span class="op">?</span> <span class="dv">1</span> <span class="op">:</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">10</span>))</span>
<span id="cb176-167"><a href="#cb176-167" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">enter</span>()</span>
<span id="cb176-168"><a href="#cb176-168" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'rect'</span>)</span>
<span id="cb176-169"><a href="#cb176-169" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'tickM1'</span>)</span>
<span id="cb176-170"><a href="#cb176-170" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'x'</span><span class="op">,</span> d<span class="kw">=&gt;</span><span class="fu">scaleM</span>(d)<span class="op">+</span>barX)</span>
<span id="cb176-171"><a href="#cb176-171" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY<span class="op">+</span><span class="fl">92.5</span>)</span>
<span id="cb176-172"><a href="#cb176-172" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'height'</span><span class="op">,</span> <span class="fl">2.5</span>)</span>
<span id="cb176-173"><a href="#cb176-173" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">'.tickLabel1'</span>)</span>
<span id="cb176-174"><a href="#cb176-174" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">data</span>(d3<span class="op">.</span><span class="fu">range</span>(width <span class="op">&gt;</span> <span class="dv">500</span> <span class="op">?</span> <span class="dv">1</span> <span class="op">:</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">10</span>))</span>
<span id="cb176-175"><a href="#cb176-175" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">enter</span>()</span>
<span id="cb176-176"><a href="#cb176-176" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'text'</span>)</span>
<span id="cb176-177"><a href="#cb176-177" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'tickLabel1'</span>)</span>
<span id="cb176-178"><a href="#cb176-178" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'x'</span><span class="op">,</span> d<span class="kw">=&gt;</span><span class="fu">scaleM</span>(d)<span class="op">+</span>barX<span class="op">+.</span><span class="dv">5</span>)</span>
<span id="cb176-179"><a href="#cb176-179" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY<span class="op">+</span><span class="dv">47</span>)</span>
<span id="cb176-180"><a href="#cb176-180" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">text</span>(d<span class="kw">=&gt;</span>d)</span>
<span id="cb176-181"><a href="#cb176-181" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">'.tickLabel2'</span>)</span>
<span id="cb176-182"><a href="#cb176-182" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">data</span>(d3<span class="op">.</span><span class="fu">range</span>(width <span class="op">&gt;</span> <span class="dv">500</span> <span class="op">?</span> <span class="dv">1</span> <span class="op">:</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">10</span>))</span>
<span id="cb176-183"><a href="#cb176-183" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">enter</span>()</span>
<span id="cb176-184"><a href="#cb176-184" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'text'</span>)</span>
<span id="cb176-185"><a href="#cb176-185" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'tickLabel2'</span>)</span>
<span id="cb176-186"><a href="#cb176-186" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'x'</span><span class="op">,</span> d<span class="kw">=&gt;</span><span class="fu">scaleM</span>(d)<span class="op">+</span>barX<span class="op">+.</span><span class="dv">5</span>)</span>
<span id="cb176-187"><a href="#cb176-187" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY<span class="op">+</span><span class="dv">112</span>)</span>
<span id="cb176-188"><a href="#cb176-188" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">text</span>(d<span class="kw">=&gt;</span>d)</span>
<span id="cb176-189"><a href="#cb176-189" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Beats</span></span>
<span id="cb176-190"><a href="#cb176-190" aria-hidden="true" tabindex="-1"></a>  svg</span>
<span id="cb176-191"><a href="#cb176-191" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'rect'</span>)</span>
<span id="cb176-192"><a href="#cb176-192" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'timeBar'</span>)</span>
<span id="cb176-193"><a href="#cb176-193" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY<span class="op">+</span><span class="dv">120</span>)</span>
<span id="cb176-194"><a href="#cb176-194" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'width'</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">scaleCandB</span>(<span class="bu">Number</span>(barBeats)<span class="op">+</span><span class="bu">Number</span>(barMb)<span class="op">/</span><span class="dv">1000</span>))</span>
<span id="cb176-195"><a href="#cb176-195" aria-hidden="true" tabindex="-1"></a>  svg</span>
<span id="cb176-196"><a href="#cb176-196" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'rect'</span>)</span>
<span id="cb176-197"><a href="#cb176-197" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'timeBarFull'</span>)</span>
<span id="cb176-198"><a href="#cb176-198" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY<span class="op">+</span><span class="dv">120</span>)</span>
<span id="cb176-199"><a href="#cb176-199" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'width'</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">scaleCandB</span>(barBeats))</span>
<span id="cb176-200"><a href="#cb176-200" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Beat ticks</span></span>
<span id="cb176-201"><a href="#cb176-201" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">'.tickB'</span>)</span>
<span id="cb176-202"><a href="#cb176-202" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">data</span>(d3<span class="op">.</span><span class="fu">range</span>(width <span class="op">&gt;</span> <span class="dv">500</span> <span class="op">?</span> <span class="dv">10</span> <span class="op">:</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">100</span>))</span>
<span id="cb176-203"><a href="#cb176-203" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">enter</span>()</span>
<span id="cb176-204"><a href="#cb176-204" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'rect'</span>)</span>
<span id="cb176-205"><a href="#cb176-205" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'tickB'</span>)</span>
<span id="cb176-206"><a href="#cb176-206" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'x'</span><span class="op">,</span> d<span class="kw">=&gt;</span><span class="fu">scaleM</span>(d<span class="op">/</span><span class="dv">10</span>)<span class="op">+</span>barX)</span>
<span id="cb176-207"><a href="#cb176-207" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> firstBarY<span class="op">+</span><span class="dv">120</span>)</span>
<span id="cb176-208"><a href="#cb176-208" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'height'</span><span class="op">,</span> d<span class="kw">=&gt;</span>d<span class="op">%</span><span class="dv">2</span><span class="op">===</span><span class="dv">0</span><span class="op">?</span> <span class="dv">9</span><span class="op">:</span><span class="dv">6</span>)</span>
<span id="cb176-209"><a href="#cb176-209" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Labels</span></span>
<span id="cb176-210"><a href="#cb176-210" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">'.timeLabel'</span>)</span>
<span id="cb176-211"><a href="#cb176-211" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">data</span>([<span class="vs">`</span><span class="sc">${</span>dotyDek<span class="sc">}</span><span class="vs">Êó¨`</span><span class="op">,</span> <span class="vs">`</span><span class="sc">${</span>dotyDotd<span class="sc">}</span><span class="vs">Êó•`</span><span class="op">,</span> <span class="vs">`</span><span class="sc">${</span>barCents<span class="sc">}</span><span class="vs">%`</span><span class="op">,</span> <span class="vs">`</span><span class="sc">${</span>barMils<span class="sc">}</span><span class="vs">‚Ä∞`</span><span class="op">,</span> <span class="vs">`</span><span class="sc">${</span>barBeats<span class="sc">}</span><span class="vs">‚ô´`</span>])</span>
<span id="cb176-212"><a href="#cb176-212" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">enter</span>()</span>
<span id="cb176-213"><a href="#cb176-213" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'text'</span>)</span>
<span id="cb176-214"><a href="#cb176-214" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'class'</span><span class="op">,</span> <span class="st">'timeLabel'</span>)</span>
<span id="cb176-215"><a href="#cb176-215" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'x'</span><span class="op">,</span> barX<span class="op">+</span><span class="dv">2</span>)</span>
<span id="cb176-216"><a href="#cb176-216" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'y'</span><span class="op">,</span> (d<span class="op">,</span>i)<span class="kw">=&gt;</span>i<span class="op">*</span><span class="dv">30</span><span class="op">+</span>firstBarY<span class="op">+</span><span class="dv">20</span>)</span>
<span id="cb176-217"><a href="#cb176-217" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">text</span>(d<span class="kw">=&gt;</span>d)</span>
<span id="cb176-218"><a href="#cb176-218" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> svg<span class="op">.</span><span class="fu">node</span>()<span class="op">;</span></span>
<span id="cb176-219"><a href="#cb176-219" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-220"><a href="#cb176-220" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb176-221"><a href="#cb176-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-224"><a href="#cb176-224" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb176-225"><a href="#cb176-225" aria-hidden="true" tabindex="-1"></a><span class="co">//| echo: false</span></span>
<span id="cb176-226"><a href="#cb176-226" aria-hidden="true" tabindex="-1"></a><span class="fu">html</span><span class="vs">`&lt;style&gt;</span></span>
<span id="cb176-227"><a href="#cb176-227" aria-hidden="true" tabindex="-1"></a><span class="vs">  text {</span></span>
<span id="cb176-228"><a href="#cb176-228" aria-hidden="true" tabindex="-1"></a><span class="vs">    fill: #000;</span></span>
<span id="cb176-229"><a href="#cb176-229" aria-hidden="true" tabindex="-1"></a><span class="vs">    font-family: sans-serif;</span></span>
<span id="cb176-230"><a href="#cb176-230" aria-hidden="true" tabindex="-1"></a><span class="vs">    font-size: 20px;</span></span>
<span id="cb176-231"><a href="#cb176-231" aria-hidden="true" tabindex="-1"></a><span class="vs">    text-anchor: middle;</span></span>
<span id="cb176-232"><a href="#cb176-232" aria-hidden="true" tabindex="-1"></a><span class="vs">  }</span></span>
<span id="cb176-233"><a href="#cb176-233" aria-hidden="true" tabindex="-1"></a><span class="vs">  .timeLabel {</span></span>
<span id="cb176-234"><a href="#cb176-234" aria-hidden="true" tabindex="-1"></a><span class="vs">    text-anchor: start;</span></span>
<span id="cb176-235"><a href="#cb176-235" aria-hidden="true" tabindex="-1"></a><span class="vs">  }</span></span>
<span id="cb176-236"><a href="#cb176-236" aria-hidden="true" tabindex="-1"></a><span class="vs">  .timeBar, .timeBarFull {</span></span>
<span id="cb176-237"><a href="#cb176-237" aria-hidden="true" tabindex="-1"></a><span class="vs">    x: 1px;</span></span>
<span id="cb176-238"><a href="#cb176-238" aria-hidden="true" tabindex="-1"></a><span class="vs">    height: 25px;</span></span>
<span id="cb176-239"><a href="#cb176-239" aria-hidden="true" tabindex="-1"></a><span class="vs">    rx: 5px;</span></span>
<span id="cb176-240"><a href="#cb176-240" aria-hidden="true" tabindex="-1"></a><span class="vs">    stroke: #aaa;</span></span>
<span id="cb176-241"><a href="#cb176-241" aria-hidden="true" tabindex="-1"></a><span class="vs">  }</span></span>
<span id="cb176-242"><a href="#cb176-242" aria-hidden="true" tabindex="-1"></a><span class="vs">  .timeBar {</span></span>
<span id="cb176-243"><a href="#cb176-243" aria-hidden="true" tabindex="-1"></a><span class="vs">    fill: #e8e8e8;</span></span>
<span id="cb176-244"><a href="#cb176-244" aria-hidden="true" tabindex="-1"></a><span class="vs">  }</span></span>
<span id="cb176-245"><a href="#cb176-245" aria-hidden="true" tabindex="-1"></a><span class="vs">  .timeBarFull {</span></span>
<span id="cb176-246"><a href="#cb176-246" aria-hidden="true" tabindex="-1"></a><span class="vs">    fill: #ccffff;</span></span>
<span id="cb176-247"><a href="#cb176-247" aria-hidden="true" tabindex="-1"></a><span class="vs">  }</span></span>
<span id="cb176-248"><a href="#cb176-248" aria-hidden="true" tabindex="-1"></a><span class="vs">  .background {</span></span>
<span id="cb176-249"><a href="#cb176-249" aria-hidden="true" tabindex="-1"></a><span class="vs">    fill: white;</span></span>
<span id="cb176-250"><a href="#cb176-250" aria-hidden="true" tabindex="-1"></a><span class="vs">  }</span></span>
<span id="cb176-251"><a href="#cb176-251" aria-hidden="true" tabindex="-1"></a><span class="vs">  .tickDek, .tickDotd, .tickDotd1, .tickC, .tickC1, .tickM, .tickM1, .tickB {</span></span>
<span id="cb176-252"><a href="#cb176-252" aria-hidden="true" tabindex="-1"></a><span class="vs">    stroke: none;</span></span>
<span id="cb176-253"><a href="#cb176-253" aria-hidden="true" tabindex="-1"></a><span class="vs">    fill: #666;</span></span>
<span id="cb176-254"><a href="#cb176-254" aria-hidden="true" tabindex="-1"></a><span class="vs">    width: 1px;</span></span>
<span id="cb176-255"><a href="#cb176-255" aria-hidden="true" tabindex="-1"></a><span class="vs">  }</span></span>
<span id="cb176-256"><a href="#cb176-256" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/style&gt;`</span></span>
<span id="cb176-257"><a href="#cb176-257" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb176-258"><a href="#cb176-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-259"><a href="#cb176-259" aria-hidden="true" tabindex="-1"></a>As an alternative to <span class="in">`doty`</span> dates, <span class="in">`Decalendar`</span> can express dates in fractional years, which are similar to the <span class="co">[</span><span class="ot">fractional days</span><span class="co">](https://en.wikipedia.org/wiki/Decimal_time#Fractional_days)</span> used in <span class="in">`doty`</span> times. Fractional year dates<span class="ot">[^year]</span> can be combined with years into one number and are useful for marking periods of 73 days in the <span class="in">`Decalendar`</span> year. Every 73 days, the <span class="in">`Decalendar`</span> fractional year date increases by .2 (‚Öï). The current <span class="in">`Decalendar`</span> fractional year date is \${setStyle(yearDate.toString().slice(4), d3.schemePaired<span class="sc">\[</span>10<span class="sc">\]</span>)}.</span>
<span id="cb176-260"><a href="#cb176-260" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-261"><a href="#cb176-261" aria-hidden="true" tabindex="-1"></a><span class="ot">[^year]: </span>fractional year date: a year and the proportion of that year that has passed; an alternative to <span class="in">`Decalendar`</span> dates</span>
<span id="cb176-262"><a href="#cb176-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-263"><a href="#cb176-263" aria-hidden="true" tabindex="-1"></a>Now it's your turn! Move the slidersüéöÔ∏èin @exm-intro-doty to adjust the <span class="in">`doty`</span>, fractional year, month, and <span class="in">`dotm`</span> values and see the corresponding 1) Northern Hemisphere season, 2) Southern Hemisphere season, and 3) Zodiac sign in @lst-intro-doty. Try selecting a special date, like your birthdayüéÇ! You can also press the Play‚ñ∂Ô∏èbutton and then sit back and watch the sliders cycleüîÑback and forth from the start to the end of the <span class="in">`Decalendar`</span> year. The sliders cycle through an entire year in 36.5 <span class="in">`beats`</span>, a million times fasterüèéÔ∏èthan the actual speed of time!</span>
<span id="cb176-264"><a href="#cb176-264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-265"><a href="#cb176-265" aria-hidden="true" tabindex="-1"></a>::: {#exm-intro-doty}</span>
<span id="cb176-266"><a href="#cb176-266" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-267"><a href="#cb176-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-268"><a href="#cb176-268" aria-hidden="true" tabindex="-1"></a>::: {.grid}</span>
<span id="cb176-269"><a href="#cb176-269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-270"><a href="#cb176-270" aria-hidden="true" tabindex="-1"></a>::: {.g-col-6}</span>
<span id="cb176-273"><a href="#cb176-273" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb176-274"><a href="#cb176-274" aria-hidden="true" tabindex="-1"></a><span class="co">//| echo: false</span></span>
<span id="cb176-275"><a href="#cb176-275" aria-hidden="true" tabindex="-1"></a>viewof inputDoty <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">365</span>]<span class="op">,</span> {<span class="dt">value</span><span class="op">:</span> <span class="dv">306</span><span class="op">,</span> <span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"doty"</span>})<span class="op">;</span></span>
<span id="cb176-276"><a href="#cb176-276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-277"><a href="#cb176-277" aria-hidden="true" tabindex="-1"></a>viewof year <span class="op">=</span> <span class="fu">transformInput</span>(</span>
<span id="cb176-278"><a href="#cb176-278" aria-hidden="true" tabindex="-1"></a>    Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="op">.</span><span class="dv">999</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="op">.</span><span class="bn">001</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"year"</span>})<span class="op">,</span></span>
<span id="cb176-279"><a href="#cb176-279" aria-hidden="true" tabindex="-1"></a>    {<span class="dt">bind</span><span class="op">:</span> viewof inputDoty<span class="op">,</span> <span class="dt">transform</span><span class="op">:</span> (x <span class="kw">=&gt;</span> x <span class="op">/</span> <span class="dv">365</span>)<span class="op">,</span> <span class="dt">invert</span><span class="op">:</span> (x <span class="kw">=&gt;</span> x <span class="op">*</span> <span class="dv">365</span>)}</span>
<span id="cb176-280"><a href="#cb176-280" aria-hidden="true" tabindex="-1"></a>)<span class="op">;</span></span>
<span id="cb176-281"><a href="#cb176-281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-282"><a href="#cb176-282" aria-hidden="true" tabindex="-1"></a>viewof monthInput <span class="op">=</span> <span class="fu">transformInput</span>(</span>
<span id="cb176-283"><a href="#cb176-283" aria-hidden="true" tabindex="-1"></a>    Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">1</span><span class="op">,</span> <span class="dv">12</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"month"</span>})<span class="op">,</span></span>
<span id="cb176-284"><a href="#cb176-284" aria-hidden="true" tabindex="-1"></a>    {<span class="dt">bind</span><span class="op">:</span> viewof inputDoty<span class="op">,</span> <span class="dt">transform</span><span class="op">:</span> doty2month<span class="op">,</span> <span class="dt">invert</span><span class="op">:</span> month2doty}</span>
<span id="cb176-285"><a href="#cb176-285" aria-hidden="true" tabindex="-1"></a>)<span class="op">;</span></span>
<span id="cb176-286"><a href="#cb176-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-287"><a href="#cb176-287" aria-hidden="true" tabindex="-1"></a>viewof dotmInput <span class="op">=</span> <span class="fu">transformInput</span>(</span>
<span id="cb176-288"><a href="#cb176-288" aria-hidden="true" tabindex="-1"></a>    Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">1</span><span class="op">,</span> <span class="dv">31</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"dotm"</span>})<span class="op">,</span></span>
<span id="cb176-289"><a href="#cb176-289" aria-hidden="true" tabindex="-1"></a>    {<span class="dt">bind</span><span class="op">:</span> viewof inputDoty<span class="op">,</span> <span class="dt">transform</span><span class="op">:</span> doty2dotm<span class="op">,</span> <span class="dt">invert</span><span class="op">:</span> (x <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(( <span class="dv">153</span> <span class="op">*</span> (</span>
<span id="cb176-290"><a href="#cb176-290" aria-hidden="true" tabindex="-1"></a>        viewof monthInput<span class="op">.</span><span class="at">value</span> <span class="op">&gt;</span> <span class="dv">2</span></span>
<span id="cb176-291"><a href="#cb176-291" aria-hidden="true" tabindex="-1"></a>        <span class="op">?</span> viewof monthInput<span class="op">.</span><span class="at">value</span> <span class="op">-</span> <span class="dv">3</span></span>
<span id="cb176-292"><a href="#cb176-292" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> viewof monthInput<span class="op">.</span><span class="at">value</span> <span class="op">+</span> <span class="dv">9</span>) <span class="op">+</span> <span class="dv">2</span></span>
<span id="cb176-293"><a href="#cb176-293" aria-hidden="true" tabindex="-1"></a>    ) <span class="op">/</span> <span class="dv">5</span> <span class="op">+</span> x <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb176-294"><a href="#cb176-294" aria-hidden="true" tabindex="-1"></a>))})<span class="op">;</span></span>
<span id="cb176-295"><a href="#cb176-295" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb176-296"><a href="#cb176-296" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-297"><a href="#cb176-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-298"><a href="#cb176-298" aria-hidden="true" tabindex="-1"></a>::: {.g-col-6}</span>
<span id="cb176-299"><a href="#cb176-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-300"><a href="#cb176-300" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>\${inputDotySeason<span class="sc">\[</span>0<span class="sc">\]</span>}</span>
<span id="cb176-301"><a href="#cb176-301" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>\${inputDotySeason<span class="sc">\[</span>1<span class="sc">\]</span>}</span>
<span id="cb176-302"><a href="#cb176-302" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>\${inputDotyZodiac}</span>
<span id="cb176-303"><a href="#cb176-303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-306"><a href="#cb176-306" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb176-307"><a href="#cb176-307" aria-hidden="true" tabindex="-1"></a><span class="co">//| echo: false</span></span>
<span id="cb176-308"><a href="#cb176-308" aria-hidden="true" tabindex="-1"></a>viewof scrubberDoty <span class="op">=</span> <span class="fu">Scrubber</span>(numbers<span class="op">,</span> {<span class="dt">autoplay</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span> <span class="dt">alternate</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">delay</span><span class="op">:</span> <span class="fl">86.4</span><span class="op">,</span> <span class="dt">loopDelay</span><span class="op">:</span> <span class="dv">864</span>})</span>
<span id="cb176-309"><a href="#cb176-309" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb176-310"><a href="#cb176-310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-311"><a href="#cb176-311" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-312"><a href="#cb176-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-313"><a href="#cb176-313" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-314"><a href="#cb176-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-315"><a href="#cb176-315" aria-hidden="true" tabindex="-1"></a>::: {.column-margin}</span>
<span id="cb176-316"><a href="#cb176-316" aria-hidden="true" tabindex="-1"></a><span class="in">```{#lst-intro-doty lst-cap="Date to season conversion"}</span></span>
<span id="cb176-317"><a href="#cb176-317" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb176-318"><a href="#cb176-318" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-319"><a href="#cb176-319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-320"><a href="#cb176-320" aria-hidden="true" tabindex="-1"></a><span class="fu">#### `Doty` Observable code {#sec-ojs-code-doty .appendix}</span></span>
<span id="cb176-321"><a href="#cb176-321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-322"><a href="#cb176-322" aria-hidden="true" tabindex="-1"></a><span class="fu">##### Functions {.appendix}</span></span>
<span id="cb176-323"><a href="#cb176-323" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-326"><a href="#cb176-326" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb176-327"><a href="#cb176-327" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/@observablehq/synchronized-inputs</span></span>
<span id="cb176-328"><a href="#cb176-328" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">set</span>(input<span class="op">,</span> value) {</span>
<span id="cb176-329"><a href="#cb176-329" aria-hidden="true" tabindex="-1"></a>  input<span class="op">.</span><span class="at">value</span> <span class="op">=</span> value<span class="op">;</span></span>
<span id="cb176-330"><a href="#cb176-330" aria-hidden="true" tabindex="-1"></a>  input<span class="op">.</span><span class="fu">dispatchEvent</span>(<span class="kw">new</span> <span class="bu">Event</span>(<span class="st">"input"</span><span class="op">,</span> {<span class="dt">bubbles</span><span class="op">:</span> <span class="kw">true</span>}))<span class="op">;</span></span>
<span id="cb176-331"><a href="#cb176-331" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-332"><a href="#cb176-332" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/@mbostock/scrubber</span></span>
<span id="cb176-333"><a href="#cb176-333" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">Scrubber</span>(values<span class="op">,</span> {</span>
<span id="cb176-334"><a href="#cb176-334" aria-hidden="true" tabindex="-1"></a>  format <span class="op">=</span> value <span class="kw">=&gt;</span> value<span class="op">,</span></span>
<span id="cb176-335"><a href="#cb176-335" aria-hidden="true" tabindex="-1"></a>  initial <span class="op">=</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb176-336"><a href="#cb176-336" aria-hidden="true" tabindex="-1"></a>  direction <span class="op">=</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb176-337"><a href="#cb176-337" aria-hidden="true" tabindex="-1"></a>  delay <span class="op">=</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb176-338"><a href="#cb176-338" aria-hidden="true" tabindex="-1"></a>  autoplay <span class="op">=</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb176-339"><a href="#cb176-339" aria-hidden="true" tabindex="-1"></a>  loop <span class="op">=</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb176-340"><a href="#cb176-340" aria-hidden="true" tabindex="-1"></a>  loopDelay <span class="op">=</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb176-341"><a href="#cb176-341" aria-hidden="true" tabindex="-1"></a>  alternate <span class="op">=</span> <span class="kw">false</span></span>
<span id="cb176-342"><a href="#cb176-342" aria-hidden="true" tabindex="-1"></a>} <span class="op">=</span> {}) {</span>
<span id="cb176-343"><a href="#cb176-343" aria-hidden="true" tabindex="-1"></a>  values <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>(values)<span class="op">;</span></span>
<span id="cb176-344"><a href="#cb176-344" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> form <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;form style="font: 12px var(--sans-serif); font-variant-numeric: tabular-nums; display: flex; height: 33px; align-items: center;"&gt;</span></span>
<span id="cb176-345"><a href="#cb176-345" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;button name=b type=button style="background-color:#002ead;color:#fff;border-radius:10px;margin-left:.4em;width: 5em;"&gt;&lt;/button&gt;</span></span>
<span id="cb176-346"><a href="#cb176-346" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;label style="display: flex; align-items: center;"&gt;</span></span>
<span id="cb176-347"><a href="#cb176-347" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;input name=i type=range min=0 max=</span><span class="sc">${</span>values<span class="op">.</span><span class="at">length</span> <span class="op">-</span> <span class="dv">1</span><span class="sc">}</span><span class="vs"> value=</span><span class="sc">${</span>initial<span class="sc">}</span><span class="vs"> step=1 style="display: none;"&gt;</span></span>
<span id="cb176-348"><a href="#cb176-348" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;output name=o style="display: none;"&gt;&lt;/output&gt;</span></span>
<span id="cb176-349"><a href="#cb176-349" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/label&gt;</span></span>
<span id="cb176-350"><a href="#cb176-350" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/form&gt;`</span><span class="op">;</span></span>
<span id="cb176-351"><a href="#cb176-351" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> frame <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb176-352"><a href="#cb176-352" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> timer <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb176-353"><a href="#cb176-353" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> interval <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb176-354"><a href="#cb176-354" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">start</span>() {</span>
<span id="cb176-355"><a href="#cb176-355" aria-hidden="true" tabindex="-1"></a>    form<span class="op">.</span><span class="at">b</span><span class="op">.</span><span class="at">textContent</span> <span class="op">=</span> <span class="st">"Pause"</span><span class="op">;</span></span>
<span id="cb176-356"><a href="#cb176-356" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (delay <span class="op">===</span> <span class="kw">null</span>) frame <span class="op">=</span> <span class="fu">requestAnimationFrame</span>(tick)<span class="op">;</span></span>
<span id="cb176-357"><a href="#cb176-357" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> interval <span class="op">=</span> <span class="pp">setInterval</span>(tick<span class="op">,</span> delay)<span class="op">;</span></span>
<span id="cb176-358"><a href="#cb176-358" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb176-359"><a href="#cb176-359" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">stop</span>() {</span>
<span id="cb176-360"><a href="#cb176-360" aria-hidden="true" tabindex="-1"></a>    form<span class="op">.</span><span class="at">b</span><span class="op">.</span><span class="at">textContent</span> <span class="op">=</span> <span class="st">"Play"</span><span class="op">;</span></span>
<span id="cb176-361"><a href="#cb176-361" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (frame <span class="op">!==</span> <span class="kw">null</span>) <span class="fu">cancelAnimationFrame</span>(frame)<span class="op">,</span> frame <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb176-362"><a href="#cb176-362" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (timer <span class="op">!==</span> <span class="kw">null</span>) <span class="pp">clearTimeout</span>(timer)<span class="op">,</span> timer <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb176-363"><a href="#cb176-363" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (interval <span class="op">!==</span> <span class="kw">null</span>) <span class="pp">clearInterval</span>(interval)<span class="op">,</span> interval <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb176-364"><a href="#cb176-364" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb176-365"><a href="#cb176-365" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">running</span>() {</span>
<span id="cb176-366"><a href="#cb176-366" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> frame <span class="op">!==</span> <span class="kw">null</span> <span class="op">||</span> timer <span class="op">!==</span> <span class="kw">null</span> <span class="op">||</span> interval <span class="op">!==</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb176-367"><a href="#cb176-367" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb176-368"><a href="#cb176-368" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">tick</span>() {</span>
<span id="cb176-369"><a href="#cb176-369" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="at">valueAsNumber</span> <span class="op">===</span> (direction <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">?</span> values<span class="op">.</span><span class="at">length</span> <span class="op">-</span> <span class="dv">1</span> <span class="op">:</span> direction <span class="op">&lt;</span> <span class="dv">0</span> <span class="op">?</span> <span class="dv">0</span> <span class="op">:</span> <span class="kw">NaN</span>)) {</span>
<span id="cb176-370"><a href="#cb176-370" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="op">!</span>loop) <span class="cf">return</span> <span class="fu">stop</span>()<span class="op">;</span></span>
<span id="cb176-371"><a href="#cb176-371" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (alternate) direction <span class="op">=</span> <span class="op">-</span>direction<span class="op">;</span></span>
<span id="cb176-372"><a href="#cb176-372" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (loopDelay <span class="op">!==</span> <span class="kw">null</span>) {</span>
<span id="cb176-373"><a href="#cb176-373" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (frame <span class="op">!==</span> <span class="kw">null</span>) <span class="fu">cancelAnimationFrame</span>(frame)<span class="op">,</span> frame <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb176-374"><a href="#cb176-374" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (interval <span class="op">!==</span> <span class="kw">null</span>) <span class="pp">clearInterval</span>(interval)<span class="op">,</span> interval <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb176-375"><a href="#cb176-375" aria-hidden="true" tabindex="-1"></a>        timer <span class="op">=</span> <span class="pp">setTimeout</span>(() <span class="kw">=&gt;</span> (<span class="fu">step</span>()<span class="op">,</span> <span class="fu">start</span>())<span class="op">,</span> loopDelay)<span class="op">;</span></span>
<span id="cb176-376"><a href="#cb176-376" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span><span class="op">;</span></span>
<span id="cb176-377"><a href="#cb176-377" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb176-378"><a href="#cb176-378" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb176-379"><a href="#cb176-379" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (delay <span class="op">===</span> <span class="kw">null</span>) frame <span class="op">=</span> <span class="fu">requestAnimationFrame</span>(tick)<span class="op">;</span></span>
<span id="cb176-380"><a href="#cb176-380" aria-hidden="true" tabindex="-1"></a>    <span class="fu">step</span>()<span class="op">;</span></span>
<span id="cb176-381"><a href="#cb176-381" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb176-382"><a href="#cb176-382" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">step</span>() {</span>
<span id="cb176-383"><a href="#cb176-383" aria-hidden="true" tabindex="-1"></a>    form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="at">valueAsNumber</span> <span class="op">=</span> (form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="at">valueAsNumber</span> <span class="op">+</span> direction <span class="op">+</span> values<span class="op">.</span><span class="at">length</span>) <span class="op">%</span> values<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb176-384"><a href="#cb176-384" aria-hidden="true" tabindex="-1"></a>    form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="fu">dispatchEvent</span>(<span class="kw">new</span> <span class="bu">CustomEvent</span>(<span class="st">"input"</span><span class="op">,</span> {<span class="dt">bubbles</span><span class="op">:</span> <span class="kw">true</span>}))<span class="op">;</span></span>
<span id="cb176-385"><a href="#cb176-385" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb176-386"><a href="#cb176-386" aria-hidden="true" tabindex="-1"></a>  form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="at">oninput</span> <span class="op">=</span> <span class="bu">event</span> <span class="kw">=&gt;</span> {</span>
<span id="cb176-387"><a href="#cb176-387" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="bu">event</span> <span class="op">&amp;&amp;</span> <span class="bu">event</span><span class="op">.</span><span class="at">isTrusted</span> <span class="op">&amp;&amp;</span> <span class="fu">running</span>()) <span class="fu">stop</span>()<span class="op">;</span></span>
<span id="cb176-388"><a href="#cb176-388" aria-hidden="true" tabindex="-1"></a>    form<span class="op">.</span><span class="at">value</span> <span class="op">=</span> values[form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="at">valueAsNumber</span>]<span class="op">;</span></span>
<span id="cb176-389"><a href="#cb176-389" aria-hidden="true" tabindex="-1"></a>    form<span class="op">.</span><span class="at">o</span><span class="op">.</span><span class="at">value</span> <span class="op">=</span> <span class="fu">format</span>(form<span class="op">.</span><span class="at">value</span><span class="op">,</span> form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="at">valueAsNumber</span><span class="op">,</span> values)<span class="op">;</span></span>
<span id="cb176-390"><a href="#cb176-390" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb176-391"><a href="#cb176-391" aria-hidden="true" tabindex="-1"></a>  form<span class="op">.</span><span class="at">b</span><span class="op">.</span><span class="at">onclick</span> <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb176-392"><a href="#cb176-392" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">running</span>()) <span class="cf">return</span> <span class="fu">stop</span>()<span class="op">;</span></span>
<span id="cb176-393"><a href="#cb176-393" aria-hidden="true" tabindex="-1"></a>    direction <span class="op">=</span> alternate <span class="op">&amp;&amp;</span> form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="at">valueAsNumber</span> <span class="op">===</span> values<span class="op">.</span><span class="at">length</span> <span class="op">-</span> <span class="dv">1</span> <span class="op">?</span> <span class="op">-</span><span class="dv">1</span> <span class="op">:</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb176-394"><a href="#cb176-394" aria-hidden="true" tabindex="-1"></a>    form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="at">valueAsNumber</span> <span class="op">=</span> (form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="at">valueAsNumber</span> <span class="op">+</span> direction) <span class="op">%</span> values<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb176-395"><a href="#cb176-395" aria-hidden="true" tabindex="-1"></a>    form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="fu">dispatchEvent</span>(<span class="kw">new</span> <span class="bu">CustomEvent</span>(<span class="st">"input"</span><span class="op">,</span> {<span class="dt">bubbles</span><span class="op">:</span> <span class="kw">true</span>}))<span class="op">;</span></span>
<span id="cb176-396"><a href="#cb176-396" aria-hidden="true" tabindex="-1"></a>    <span class="fu">start</span>()<span class="op">;</span></span>
<span id="cb176-397"><a href="#cb176-397" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb176-398"><a href="#cb176-398" aria-hidden="true" tabindex="-1"></a>  form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="fu">oninput</span>()<span class="op">;</span></span>
<span id="cb176-399"><a href="#cb176-399" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (autoplay) <span class="fu">start</span>()<span class="op">;</span></span>
<span id="cb176-400"><a href="#cb176-400" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span> <span class="fu">stop</span>()<span class="op">;</span></span>
<span id="cb176-401"><a href="#cb176-401" aria-hidden="true" tabindex="-1"></a>  Inputs<span class="op">.</span><span class="fu">disposal</span>(form)<span class="op">.</span><span class="fu">then</span>(stop)<span class="op">;</span></span>
<span id="cb176-402"><a href="#cb176-402" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> form<span class="op">;</span></span>
<span id="cb176-403"><a href="#cb176-403" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-404"><a href="#cb176-404" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/@juang1744/transform-input/1</span></span>
<span id="cb176-405"><a href="#cb176-405" aria-hidden="true" tabindex="-1"></a>transformInput <span class="op">=</span> <span class="kw">function</span>(target<span class="op">,</span> {<span class="dt">bind</span><span class="op">:</span> source<span class="op">,</span> transform <span class="op">=</span> identity<span class="op">,</span> involutory <span class="op">=</span> <span class="kw">false</span><span class="op">,</span> invert <span class="op">=</span> involutory <span class="op">?</span> transform <span class="op">:</span> <span class="fu">inverse</span>(transform)} <span class="op">=</span> {}){</span>
<span id="cb176-406"><a href="#cb176-406" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (source <span class="op">===</span> <span class="kw">undefined</span>) {</span>
<span id="cb176-407"><a href="#cb176-407" aria-hidden="true" tabindex="-1"></a>    source <span class="op">=</span> target<span class="op">;</span></span>
<span id="cb176-408"><a href="#cb176-408" aria-hidden="true" tabindex="-1"></a>    target <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;div&gt;</span><span class="sc">${</span>source<span class="sc">}</span><span class="vs">&lt;/div&gt;`</span><span class="op">;</span></span>
<span id="cb176-409"><a href="#cb176-409" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb176-410"><a href="#cb176-410" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">sourceInputHandler</span>() {</span>
<span id="cb176-411"><a href="#cb176-411" aria-hidden="true" tabindex="-1"></a>    target<span class="op">.</span><span class="fu">removeEventListener</span>(<span class="st">"input"</span><span class="op">,</span> targetInputHandler)<span class="op">;</span></span>
<span id="cb176-412"><a href="#cb176-412" aria-hidden="true" tabindex="-1"></a>    <span class="fu">setTransform</span>(target)<span class="op">.</span><span class="fu">to</span>(<span class="fu">transform</span>(source<span class="op">.</span><span class="at">value</span>))<span class="op">.</span><span class="fu">andDispatchEvent</span>()<span class="op">;</span></span>
<span id="cb176-413"><a href="#cb176-413" aria-hidden="true" tabindex="-1"></a>    target<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"input"</span><span class="op">,</span> targetInputHandler)<span class="op">;</span></span>
<span id="cb176-414"><a href="#cb176-414" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb176-415"><a href="#cb176-415" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">targetInputHandler</span>() {</span>
<span id="cb176-416"><a href="#cb176-416" aria-hidden="true" tabindex="-1"></a>    source<span class="op">.</span><span class="fu">removeEventListener</span>(<span class="st">"input"</span><span class="op">,</span> sourceInputHandler)<span class="op">;</span></span>
<span id="cb176-417"><a href="#cb176-417" aria-hidden="true" tabindex="-1"></a>    <span class="fu">setTransform</span>(source)<span class="op">.</span><span class="fu">to</span>(<span class="fu">invert</span>(target<span class="op">.</span><span class="at">value</span>))<span class="op">.</span><span class="fu">andDispatchEvent</span>()<span class="op">;</span></span>
<span id="cb176-418"><a href="#cb176-418" aria-hidden="true" tabindex="-1"></a>    source<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"input"</span><span class="op">,</span> sourceInputHandler)<span class="op">;</span></span>
<span id="cb176-419"><a href="#cb176-419" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb176-420"><a href="#cb176-420" aria-hidden="true" tabindex="-1"></a>  source<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"input"</span><span class="op">,</span> sourceInputHandler)<span class="op">;</span></span>
<span id="cb176-421"><a href="#cb176-421" aria-hidden="true" tabindex="-1"></a>  target<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"input"</span><span class="op">,</span> targetInputHandler)<span class="op">;</span></span>
<span id="cb176-422"><a href="#cb176-422" aria-hidden="true" tabindex="-1"></a>  invalidation<span class="op">.</span><span class="fu">then</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb176-423"><a href="#cb176-423" aria-hidden="true" tabindex="-1"></a>    source<span class="op">.</span><span class="fu">removeEventListener</span>(<span class="st">"input"</span><span class="op">,</span> sourceInputHandler)<span class="op">;</span></span>
<span id="cb176-424"><a href="#cb176-424" aria-hidden="true" tabindex="-1"></a>    target<span class="op">.</span><span class="fu">removeEventListener</span>(<span class="st">"input"</span><span class="op">,</span> targetInputHandler)<span class="op">;</span></span>
<span id="cb176-425"><a href="#cb176-425" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb176-426"><a href="#cb176-426" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-427"><a href="#cb176-427" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sourceInputHandler</span>()<span class="op">;</span></span>
<span id="cb176-428"><a href="#cb176-428" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> target<span class="op">;</span></span>
<span id="cb176-429"><a href="#cb176-429" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-430"><a href="#cb176-430" aria-hidden="true" tabindex="-1"></a>setTransform <span class="op">=</span> (input) <span class="kw">=&gt;</span> ({<span class="dt">to</span><span class="op">:</span> (value) <span class="kw">=&gt;</span> (input<span class="op">.</span><span class="at">value</span> <span class="op">=</span> value<span class="op">,</span> {<span class="dt">andDispatchEvent</span><span class="op">:</span> (<span class="bu">event</span> <span class="op">=</span> <span class="kw">new</span> <span class="bu">Event</span>(<span class="st">"input"</span>)) <span class="kw">=&gt;</span> input<span class="op">.</span><span class="fu">dispatchEvent</span>(<span class="bu">event</span>)})})<span class="op">;</span></span>
<span id="cb176-431"><a href="#cb176-431" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">inverse</span>(f) {</span>
<span id="cb176-432"><a href="#cb176-432" aria-hidden="true" tabindex="-1"></a>  <span class="cf">switch</span> (f) {</span>
<span id="cb176-433"><a href="#cb176-433" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="dt">identity</span><span class="op">:</span>  <span class="cf">return</span> identity<span class="op">;</span></span>
<span id="cb176-434"><a href="#cb176-434" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sqrt</span><span class="op">:</span> <span class="cf">return</span> square<span class="op">;</span></span>
<span id="cb176-435"><a href="#cb176-435" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">log</span><span class="op">:</span>  <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">exp</span><span class="op">;</span></span>
<span id="cb176-436"><a href="#cb176-436" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">exp</span><span class="op">:</span>  <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">log</span><span class="op">;</span></span>
<span id="cb176-437"><a href="#cb176-437" aria-hidden="true" tabindex="-1"></a>    <span class="cf">default</span><span class="op">:</span>        <span class="cf">return</span> (x <span class="kw">=&gt;</span> <span class="fu">solve</span>(f<span class="op">,</span> x<span class="op">,</span> x))<span class="op">;</span></span>
<span id="cb176-438"><a href="#cb176-438" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb176-439"><a href="#cb176-439" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">solve</span>(f<span class="op">,</span> y<span class="op">,</span> x <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb176-440"><a href="#cb176-440" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> dx <span class="op">=</span> <span class="fl">1e-6</span><span class="op">;</span></span>
<span id="cb176-441"><a href="#cb176-441" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> steps <span class="op">=</span> <span class="dv">100</span><span class="op">,</span> deltax<span class="op">,</span> fx<span class="op">,</span> dfx<span class="op">;</span></span>
<span id="cb176-442"><a href="#cb176-442" aria-hidden="true" tabindex="-1"></a>    <span class="cf">do</span> {</span>
<span id="cb176-443"><a href="#cb176-443" aria-hidden="true" tabindex="-1"></a>      fx <span class="op">=</span> <span class="fu">f</span>(x)</span>
<span id="cb176-444"><a href="#cb176-444" aria-hidden="true" tabindex="-1"></a>      dfx <span class="op">=</span> (<span class="fu">f</span>(x <span class="op">+</span> dx) <span class="op">-</span> fx) <span class="op">||</span> dx<span class="op">;</span></span>
<span id="cb176-445"><a href="#cb176-445" aria-hidden="true" tabindex="-1"></a>      deltax <span class="op">=</span> dx <span class="op">*</span> (fx <span class="op">-</span> y)<span class="op">/</span>dfx</span>
<span id="cb176-446"><a href="#cb176-446" aria-hidden="true" tabindex="-1"></a>      x <span class="op">-=</span> deltax<span class="op">;</span></span>
<span id="cb176-447"><a href="#cb176-447" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">while</span> (<span class="bu">Math</span><span class="op">.</span><span class="fu">abs</span>(deltax) <span class="op">&gt;</span> dx <span class="op">&amp;&amp;</span> <span class="op">--</span>steps <span class="op">&gt;</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb176-448"><a href="#cb176-448" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> steps <span class="op">===</span> <span class="dv">0</span> <span class="op">?</span> <span class="kw">NaN</span> <span class="op">:</span> x<span class="op">;</span></span>
<span id="cb176-449"><a href="#cb176-449" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb176-450"><a href="#cb176-450" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-451"><a href="#cb176-451" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">square</span>(x) {</span>
<span id="cb176-452"><a href="#cb176-452" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">*</span> x<span class="op">;</span></span>
<span id="cb176-453"><a href="#cb176-453" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb176-454"><a href="#cb176-454" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-455"><a href="#cb176-455" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">identity</span>(x) {</span>
<span id="cb176-456"><a href="#cb176-456" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> x<span class="op">;</span></span>
<span id="cb176-457"><a href="#cb176-457" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-458"><a href="#cb176-458" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/@observablehq/text-color-annotations-in-markdown#textcolor</span></span>
<span id="cb176-459"><a href="#cb176-459" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">setStyle</span>(content<span class="op">,</span> style <span class="op">=</span> {}) {</span>
<span id="cb176-460"><a href="#cb176-460" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">yiq</span>(color) {</span>
<span id="cb176-461"><a href="#cb176-461" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> {r<span class="op">,</span> g<span class="op">,</span> b} <span class="op">=</span> d3<span class="op">.</span><span class="fu">rgb</span>(color)<span class="op">;</span></span>
<span id="cb176-462"><a href="#cb176-462" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (r <span class="op">*</span> <span class="dv">299</span> <span class="op">+</span> g <span class="op">*</span> <span class="dv">587</span> <span class="op">+</span> b <span class="op">*</span> <span class="dv">114</span>) <span class="op">/</span> <span class="dv">1000</span> <span class="op">/</span> <span class="dv">255</span><span class="op">;</span> <span class="co">// returns values between 0 and 1</span></span>
<span id="cb176-463"><a href="#cb176-463" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb176-464"><a href="#cb176-464" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> {</span>
<span id="cb176-465"><a href="#cb176-465" aria-hidden="true" tabindex="-1"></a>    background<span class="op">,</span></span>
<span id="cb176-466"><a href="#cb176-466" aria-hidden="true" tabindex="-1"></a>    color <span class="op">=</span> <span class="fu">yiq</span>(background) <span class="op">&gt;=</span> <span class="fl">0.6</span> <span class="op">?</span> <span class="st">"#111"</span> <span class="op">:</span> <span class="st">"white"</span><span class="op">,</span></span>
<span id="cb176-467"><a href="#cb176-467" aria-hidden="true" tabindex="-1"></a>    padding <span class="op">=</span> <span class="st">"0 1px"</span><span class="op">,</span></span>
<span id="cb176-468"><a href="#cb176-468" aria-hidden="true" tabindex="-1"></a>    borderRadius <span class="op">=</span> <span class="st">"4px"</span><span class="op">,</span></span>
<span id="cb176-469"><a href="#cb176-469" aria-hidden="true" tabindex="-1"></a>    fontWeight <span class="op">=</span> <span class="dv">900</span><span class="op">,</span></span>
<span id="cb176-470"><a href="#cb176-470" aria-hidden="true" tabindex="-1"></a>    fontSize <span class="op">=</span> <span class="st">"1em"</span><span class="op">,</span></span>
<span id="cb176-471"><a href="#cb176-471" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span>rest</span>
<span id="cb176-472"><a href="#cb176-472" aria-hidden="true" tabindex="-1"></a>  } <span class="op">=</span> <span class="kw">typeof</span> style <span class="op">===</span> <span class="st">"string"</span> <span class="op">?</span> {<span class="dt">background</span><span class="op">:</span> style} <span class="op">:</span> style<span class="op">;</span></span>
<span id="cb176-473"><a href="#cb176-473" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> htl<span class="op">.</span><span class="fu">html</span><span class="vs">`&lt;span style=</span><span class="sc">${</span>{</span>
<span id="cb176-474"><a href="#cb176-474" aria-hidden="true" tabindex="-1"></a>    background<span class="op">,</span></span>
<span id="cb176-475"><a href="#cb176-475" aria-hidden="true" tabindex="-1"></a>    color<span class="op">,</span></span>
<span id="cb176-476"><a href="#cb176-476" aria-hidden="true" tabindex="-1"></a>    padding<span class="op">,</span></span>
<span id="cb176-477"><a href="#cb176-477" aria-hidden="true" tabindex="-1"></a>    borderRadius<span class="op">,</span></span>
<span id="cb176-478"><a href="#cb176-478" aria-hidden="true" tabindex="-1"></a>    fontWeight<span class="op">,</span></span>
<span id="cb176-479"><a href="#cb176-479" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span>rest</span>
<span id="cb176-480"><a href="#cb176-480" aria-hidden="true" tabindex="-1"></a>  }<span class="sc">}</span><span class="vs">&gt;</span><span class="sc">${</span>content<span class="sc">}</span><span class="vs">&lt;/span&gt;`</span><span class="op">;</span></span>
<span id="cb176-481"><a href="#cb176-481" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-482"><a href="#cb176-482" aria-hidden="true" tabindex="-1"></a><span class="co">// http://howardhinnant.github.io/date_algorithms.html#civil_from_days</span></span>
<span id="cb176-483"><a href="#cb176-483" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">dote2doty</span>(days <span class="op">=</span> <span class="dv">719468</span>) {</span>
<span id="cb176-484"><a href="#cb176-484" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> era <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((days <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">?</span> days <span class="op">:</span> days <span class="op">-</span> <span class="dv">146096</span>) <span class="op">/</span> <span class="dv">146097</span>)<span class="op">,</span></span>
<span id="cb176-485"><a href="#cb176-485" aria-hidden="true" tabindex="-1"></a>        dotc <span class="op">=</span> days <span class="op">-</span> era <span class="op">*</span> <span class="dv">146097</span><span class="op">,</span></span>
<span id="cb176-486"><a href="#cb176-486" aria-hidden="true" tabindex="-1"></a>        yotc <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((dotc <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(dotc <span class="op">/</span> <span class="dv">1460</span>) <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(dotc <span class="op">/</span> <span class="dv">36524</span>) <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(dotc <span class="op">/</span> <span class="dv">146096</span>)) <span class="op">/</span> <span class="dv">365</span>)<span class="op">;</span></span>
<span id="cb176-487"><a href="#cb176-487" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [yotc <span class="op">+</span> era <span class="op">*</span> <span class="dv">400</span><span class="op">,</span> dotc <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(yotc <span class="op">/</span> <span class="dv">100</span>) <span class="op">-</span> yotc <span class="op">*</span> <span class="dv">365</span> <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(yotc <span class="op">/</span> <span class="dv">4</span>)]<span class="op">;</span></span>
<span id="cb176-488"><a href="#cb176-488" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-489"><a href="#cb176-489" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">unix2doty</span>(ms <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb176-490"><a href="#cb176-490" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="fu">dote2doty</span>(ms <span class="op">/</span> <span class="dv">86400000</span> <span class="op">+</span> <span class="dv">719468</span>)</span>
<span id="cb176-491"><a href="#cb176-491" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-492"><a href="#cb176-492" aria-hidden="true" tabindex="-1"></a><span class="co">// https://howardhinnant.github.io/date_algorithms.html#days_from_civil</span></span>
<span id="cb176-493"><a href="#cb176-493" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2dote</span>(year <span class="op">=</span> <span class="dv">1969</span><span class="op">,</span> doty <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> zone <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb176-494"><a href="#cb176-494" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> cycle <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((year <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">?</span> year <span class="op">:</span> year <span class="op">-</span> <span class="dv">399</span>) <span class="op">/</span> <span class="dv">400</span>)<span class="op">,</span></span>
<span id="cb176-495"><a href="#cb176-495" aria-hidden="true" tabindex="-1"></a>    yote <span class="op">=</span> year <span class="op">-</span> cycle <span class="op">*</span> <span class="dv">400</span><span class="op">;</span></span>
<span id="cb176-496"><a href="#cb176-496" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> cycle <span class="op">*</span> <span class="dv">146097</span> <span class="op">+</span> yote <span class="op">*</span> <span class="dv">365</span> <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(yote <span class="op">/</span> <span class="dv">4</span>) <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(yote <span class="op">/</span> <span class="dv">100</span>) <span class="op">+</span> doty <span class="op">-</span> zone</span>
<span id="cb176-497"><a href="#cb176-497" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-498"><a href="#cb176-498" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2deco</span>(yearDoty <span class="op">=</span> [<span class="dv">1969</span><span class="op">,</span> <span class="dv">306</span>]<span class="op">,</span> zone <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb176-499"><a href="#cb176-499" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> yd <span class="op">=</span> <span class="fu">dote2doty</span>(<span class="fu">doty2dote</span>(yearDoty[<span class="dv">0</span>]<span class="op">,</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(yearDoty[<span class="dv">1</span>])))<span class="op">;</span></span>
<span id="cb176-500"><a href="#cb176-500" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`</span><span class="sc">${</span>yd[<span class="dv">0</span>]<span class="sc">}</span><span class="vs">+</span><span class="sc">${</span>(yd[<span class="dv">1</span>])<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">3</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}${</span></span>
<span id="cb176-501"><a href="#cb176-501" aria-hidden="true" tabindex="-1"></a>        yearDoty[<span class="dv">1</span>]<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">includes</span>(<span class="st">"."</span>) <span class="op">?</span> <span class="st">"."</span> <span class="op">+</span> (</span>
<span id="cb176-502"><a href="#cb176-502" aria-hidden="true" tabindex="-1"></a>            (yearDoty[<span class="dv">1</span>] <span class="op">&gt;</span> <span class="dv">0</span>) <span class="op">?</span> (yearDoty[<span class="dv">1</span>] <span class="op">-</span> zone)<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">split</span>(<span class="st">"."</span>)<span class="op">.</span><span class="fu">pop</span>()</span>
<span id="cb176-503"><a href="#cb176-503" aria-hidden="true" tabindex="-1"></a>            <span class="op">:</span> [<span class="op">...</span>(yearDoty[<span class="dv">1</span>] <span class="op">-</span> zone)<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">split</span>(<span class="st">"."</span>)<span class="op">.</span><span class="fu">pop</span>()]<span class="op">.</span><span class="fu">map</span>(</span>
<span id="cb176-504"><a href="#cb176-504" aria-hidden="true" tabindex="-1"></a>                (e<span class="op">,</span> i<span class="op">,</span> a) <span class="kw">=&gt;</span> (i <span class="op">+</span> <span class="dv">1</span> <span class="op">===</span> a<span class="op">.</span><span class="at">length</span>) <span class="op">?</span> <span class="dv">10</span> <span class="op">-</span> e <span class="op">:</span> <span class="dv">9</span> <span class="op">-</span> e</span>
<span id="cb176-505"><a href="#cb176-505" aria-hidden="true" tabindex="-1"></a>            )<span class="op">.</span><span class="fu">join</span>(<span class="st">""</span>)</span>
<span id="cb176-506"><a href="#cb176-506" aria-hidden="true" tabindex="-1"></a>        ) <span class="op">:</span> <span class="st">""</span></span>
<span id="cb176-507"><a href="#cb176-507" aria-hidden="true" tabindex="-1"></a>    <span class="sc">}</span><span class="vs">`</span></span>
<span id="cb176-508"><a href="#cb176-508" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-509"><a href="#cb176-509" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">unix2deco</span>(ms <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb176-510"><a href="#cb176-510" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">doty2deco</span>(<span class="fu">unix2doty</span>(ms))<span class="op">;</span></span>
<span id="cb176-511"><a href="#cb176-511" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb176-512"><a href="#cb176-512" aria-hidden="true" tabindex="-1"></a><span class="co">// http://howardhinnant.github.io/date_algorithms.html#days_from_civil</span></span>
<span id="cb176-513"><a href="#cb176-513" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">greg2doty</span>(month <span class="op">=</span> <span class="dv">1</span><span class="op">,</span> day <span class="op">=</span> <span class="dv">1</span>) {</span>
<span id="cb176-514"><a href="#cb176-514" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(</span>
<span id="cb176-515"><a href="#cb176-515" aria-hidden="true" tabindex="-1"></a>        (<span class="dv">153</span> <span class="op">*</span> (month <span class="op">&gt;</span> <span class="dv">2</span> <span class="op">?</span> month <span class="op">-</span> <span class="dv">3</span> <span class="op">:</span> month <span class="op">+</span> <span class="dv">9</span>) <span class="op">+</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">5</span> <span class="op">+</span> day <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb176-516"><a href="#cb176-516" aria-hidden="true" tabindex="-1"></a>)}</span>
<span id="cb176-517"><a href="#cb176-517" aria-hidden="true" tabindex="-1"></a><span class="co">// http://howardhinnant.github.io/date_algorithms.html#civil_from_days</span></span>
<span id="cb176-518"><a href="#cb176-518" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2greg</span>(doty <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb176-519"><a href="#cb176-519" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> m <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((<span class="dv">5</span> <span class="op">*</span> doty <span class="op">+</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">153</span>)<span class="op">;</span></span>
<span id="cb176-520"><a href="#cb176-520" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [<span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(m <span class="op">&lt;</span> <span class="dv">10</span> <span class="op">?</span> m <span class="op">+</span> <span class="dv">3</span> <span class="op">:</span> m <span class="op">-</span> <span class="dv">9</span>)<span class="op">,</span> doty <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((<span class="dv">153</span> <span class="op">*</span> m <span class="op">+</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">5</span>) <span class="op">+</span> <span class="dv">1</span>]<span class="op">;</span></span>
<span id="cb176-521"><a href="#cb176-521" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-522"><a href="#cb176-522" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2toty</span>(doty <span class="op">=</span> <span class="dv">306</span>) {</span>
<span id="cb176-523"><a href="#cb176-523" aria-hidden="true" tabindex="-1"></a>    doty <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(doty)</span>
<span id="cb176-524"><a href="#cb176-524" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (<span class="dv">205</span> <span class="op">&lt;=</span> doty <span class="op">&amp;&amp;</span> doty <span class="op">&lt;</span> <span class="dv">295</span>) <span class="op">?</span> [<span class="st">"FallüçÅ"</span><span class="op">,</span> <span class="st">"Springüåº"</span>] <span class="op">:</span></span>
<span id="cb176-525"><a href="#cb176-525" aria-hidden="true" tabindex="-1"></a>        (<span class="dv">110</span> <span class="op">&lt;=</span> doty <span class="op">&amp;&amp;</span> doty <span class="op">&lt;</span> <span class="dv">205</span>) <span class="op">?</span> [<span class="st">"Summer‚òÄÔ∏è"</span><span class="op">,</span> <span class="st">"Winter‚ùÑÔ∏è"</span>] <span class="op">:</span></span>
<span id="cb176-526"><a href="#cb176-526" aria-hidden="true" tabindex="-1"></a>        (<span class="dv">20</span> <span class="op">&lt;=</span> doty <span class="op">&amp;&amp;</span> doty <span class="op">&lt;</span> <span class="dv">110</span>) <span class="op">?</span> [<span class="st">"Springüåº"</span><span class="op">,</span> <span class="st">"FallüçÅ"</span>] <span class="op">:</span></span>
<span id="cb176-527"><a href="#cb176-527" aria-hidden="true" tabindex="-1"></a>        (<span class="dv">0</span> <span class="op">&lt;=</span> doty <span class="op">&amp;&amp;</span> doty <span class="op">&lt;</span> <span class="dv">20</span>) <span class="op">||</span> (<span class="dv">295</span> <span class="op">&lt;=</span> doty <span class="op">&amp;&amp;</span> doty <span class="op">&lt;=</span> <span class="dv">365</span>)</span>
<span id="cb176-528"><a href="#cb176-528" aria-hidden="true" tabindex="-1"></a>        <span class="op">?</span> [<span class="st">"Winter‚ùÑÔ∏è"</span><span class="op">,</span> <span class="st">"Summer‚òÄÔ∏è"</span>] <span class="op">:</span> <span class="st">"Unknown"</span></span>
<span id="cb176-529"><a href="#cb176-529" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-530"><a href="#cb176-530" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2zodi</span>(doty <span class="op">=</span> <span class="dv">306</span>) {</span>
<span id="cb176-531"><a href="#cb176-531" aria-hidden="true" tabindex="-1"></a>    doty <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(doty)</span>
<span id="cb176-532"><a href="#cb176-532" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (<span class="dv">20</span> <span class="op">&lt;=</span> doty <span class="op">&amp;&amp;</span> doty <span class="op">&lt;</span> <span class="dv">50</span>) <span class="op">?</span> <span class="st">"Aries‚ôàÔ∏è"</span> <span class="op">:</span></span>
<span id="cb176-533"><a href="#cb176-533" aria-hidden="true" tabindex="-1"></a>     (<span class="dv">50</span> <span class="op">&lt;=</span> doty <span class="op">&amp;&amp;</span> doty <span class="op">&lt;</span> <span class="dv">81</span>) <span class="op">?</span> <span class="st">"Taurus‚ôâÔ∏è"</span> <span class="op">:</span></span>
<span id="cb176-534"><a href="#cb176-534" aria-hidden="true" tabindex="-1"></a>     (<span class="dv">81</span> <span class="op">&lt;=</span> doty <span class="op">&amp;&amp;</span> doty <span class="op">&lt;</span> <span class="dv">112</span>) <span class="op">?</span> <span class="st">"Gemini‚ôäÔ∏è"</span> <span class="op">:</span></span>
<span id="cb176-535"><a href="#cb176-535" aria-hidden="true" tabindex="-1"></a>     (<span class="dv">112</span> <span class="op">&lt;=</span> doty <span class="op">&amp;&amp;</span> doty <span class="op">&lt;</span> <span class="dv">144</span>) <span class="op">?</span> <span class="st">"Cancer‚ôãÔ∏è"</span> <span class="op">:</span></span>
<span id="cb176-536"><a href="#cb176-536" aria-hidden="true" tabindex="-1"></a>     (<span class="dv">144</span> <span class="op">&lt;=</span> doty <span class="op">&amp;&amp;</span> doty <span class="op">&lt;</span> <span class="dv">175</span>) <span class="op">?</span> <span class="st">"Leo‚ôåÔ∏è"</span> <span class="op">:</span></span>
<span id="cb176-537"><a href="#cb176-537" aria-hidden="true" tabindex="-1"></a>     (<span class="dv">175</span> <span class="op">&lt;=</span> doty <span class="op">&amp;&amp;</span> doty <span class="op">&lt;</span> <span class="dv">206</span>) <span class="op">?</span> <span class="st">"Virgo‚ôçÔ∏è"</span> <span class="op">:</span></span>
<span id="cb176-538"><a href="#cb176-538" aria-hidden="true" tabindex="-1"></a>     (<span class="dv">206</span> <span class="op">&lt;=</span> doty <span class="op">&amp;&amp;</span> doty <span class="op">&lt;</span> <span class="dv">236</span>) <span class="op">?</span> <span class="st">"Libra‚ôéÔ∏è"</span> <span class="op">:</span></span>
<span id="cb176-539"><a href="#cb176-539" aria-hidden="true" tabindex="-1"></a>     (<span class="dv">236</span> <span class="op">&lt;=</span> doty <span class="op">&amp;&amp;</span> doty <span class="op">&lt;</span> <span class="dv">266</span>) <span class="op">?</span> <span class="st">"Scorpio‚ôèÔ∏è"</span> <span class="op">:</span></span>
<span id="cb176-540"><a href="#cb176-540" aria-hidden="true" tabindex="-1"></a>     (<span class="dv">266</span> <span class="op">&lt;=</span> doty <span class="op">&amp;&amp;</span> doty <span class="op">&lt;</span> <span class="dv">296</span>) <span class="op">?</span> <span class="st">"Sagittarius‚ôêÔ∏è"</span> <span class="op">:</span></span>
<span id="cb176-541"><a href="#cb176-541" aria-hidden="true" tabindex="-1"></a>     (<span class="dv">296</span> <span class="op">&lt;=</span> doty <span class="op">&amp;&amp;</span> doty <span class="op">&lt;</span> <span class="dv">325</span>) <span class="op">?</span> <span class="st">"Capricorn‚ôëÔ∏è"</span> <span class="op">:</span></span>
<span id="cb176-542"><a href="#cb176-542" aria-hidden="true" tabindex="-1"></a>     (<span class="dv">325</span> <span class="op">&lt;=</span> doty <span class="op">&amp;&amp;</span> doty <span class="op">&lt;</span> <span class="dv">355</span>) <span class="op">?</span> <span class="st">"Aquarius‚ôíÔ∏è"</span> <span class="op">:</span></span>
<span id="cb176-543"><a href="#cb176-543" aria-hidden="true" tabindex="-1"></a>     (<span class="dv">355</span> <span class="op">&lt;=</span> doty <span class="op">&amp;&amp;</span> doty <span class="op">&lt;=</span> <span class="dv">365</span>) <span class="op">||</span> (<span class="dv">0</span> <span class="op">&lt;=</span> doty <span class="op">&amp;&amp;</span> doty <span class="op">&lt;</span> <span class="dv">20</span>)</span>
<span id="cb176-544"><a href="#cb176-544" aria-hidden="true" tabindex="-1"></a>     <span class="op">?</span> <span class="st">"Pisces‚ôìÔ∏è"</span> <span class="op">:</span> <span class="st">"Unknown"</span></span>
<span id="cb176-545"><a href="#cb176-545" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-546"><a href="#cb176-546" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2month</span>(doty <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb176-547"><a href="#cb176-547" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> m <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((<span class="dv">5</span> <span class="op">*</span> doty <span class="op">+</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">153</span>)<span class="op">;</span></span>
<span id="cb176-548"><a href="#cb176-548" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(m <span class="op">&lt;</span> <span class="dv">10</span> <span class="op">?</span> m <span class="op">+</span> <span class="dv">3</span> <span class="op">:</span> m <span class="op">-</span> <span class="dv">9</span>)<span class="op">;</span></span>
<span id="cb176-549"><a href="#cb176-549" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-550"><a href="#cb176-550" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">month2doty</span>(month <span class="op">=</span> <span class="dv">1</span>) {</span>
<span id="cb176-551"><a href="#cb176-551" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(</span>
<span id="cb176-552"><a href="#cb176-552" aria-hidden="true" tabindex="-1"></a>        (<span class="dv">153</span> <span class="op">*</span> (month <span class="op">&gt;</span> <span class="dv">2</span> <span class="op">?</span> month <span class="op">-</span> <span class="dv">3</span> <span class="op">:</span> month <span class="op">+</span> <span class="dv">9</span>) <span class="op">+</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">5</span></span>
<span id="cb176-553"><a href="#cb176-553" aria-hidden="true" tabindex="-1"></a>)}</span>
<span id="cb176-554"><a href="#cb176-554" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2dotm</span>(doty <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb176-555"><a href="#cb176-555" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> m <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((<span class="dv">5</span> <span class="op">*</span> doty <span class="op">+</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">153</span>)<span class="op">;</span></span>
<span id="cb176-556"><a href="#cb176-556" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> doty <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((<span class="dv">153</span> <span class="op">*</span> m <span class="op">+</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">5</span>) <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb176-557"><a href="#cb176-557" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-558"><a href="#cb176-558" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb176-559"><a href="#cb176-559" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-560"><a href="#cb176-560" aria-hidden="true" tabindex="-1"></a><span class="fu">##### Variables {.appendix}</span></span>
<span id="cb176-561"><a href="#cb176-561" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-564"><a href="#cb176-564" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb176-565"><a href="#cb176-565" aria-hidden="true" tabindex="-1"></a><span class="co">//| output: all</span></span>
<span id="cb176-566"><a href="#cb176-566" aria-hidden="true" tabindex="-1"></a>width</span>
<span id="cb176-567"><a href="#cb176-567" aria-hidden="true" tabindex="-1"></a>unix <span class="op">=</span> {</span>
<span id="cb176-568"><a href="#cb176-568" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span>(<span class="kw">true</span>) {</span>
<span id="cb176-569"><a href="#cb176-569" aria-hidden="true" tabindex="-1"></a>    <span class="kw">yield</span> <span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>()<span class="op">;</span></span>
<span id="cb176-570"><a href="#cb176-570" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb176-571"><a href="#cb176-571" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-572"><a href="#cb176-572" aria-hidden="true" tabindex="-1"></a>tick <span class="op">=</span> {</span>
<span id="cb176-573"><a href="#cb176-573" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb176-574"><a href="#cb176-574" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span> (<span class="kw">true</span>) {</span>
<span id="cb176-575"><a href="#cb176-575" aria-hidden="true" tabindex="-1"></a>    <span class="kw">yield</span> Promises<span class="op">.</span><span class="fu">tick</span>(<span class="dv">864</span><span class="op">,</span> <span class="op">++</span>i)<span class="op">;</span></span>
<span id="cb176-576"><a href="#cb176-576" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb176-577"><a href="#cb176-577" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-578"><a href="#cb176-578" aria-hidden="true" tabindex="-1"></a>tickDate <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(tick <span class="op">/</span> <span class="fl">1e5</span>)</span>
<span id="cb176-579"><a href="#cb176-579" aria-hidden="true" tabindex="-1"></a>tickTime <span class="op">=</span> tick <span class="op">%</span> <span class="fl">1e5</span></span>
<span id="cb176-580"><a href="#cb176-580" aria-hidden="true" tabindex="-1"></a>tickDelimiter <span class="op">=</span> (tickDate <span class="op">&gt;</span> <span class="dv">0</span>) <span class="op">?</span> <span class="st">"."</span> <span class="op">:</span> <span class="st">""</span></span>
<span id="cb176-581"><a href="#cb176-581" aria-hidden="true" tabindex="-1"></a>barTime <span class="op">=</span> <span class="fu">unix2dote</span>(unix)<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">split</span>(<span class="st">"."</span>)[<span class="dv">1</span>]<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">8</span>)</span>
<span id="cb176-582"><a href="#cb176-582" aria-hidden="true" tabindex="-1"></a>barCents <span class="op">=</span> barTime<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">2</span>)</span>
<span id="cb176-583"><a href="#cb176-583" aria-hidden="true" tabindex="-1"></a>barMils <span class="op">=</span> barTime[<span class="dv">2</span>]</span>
<span id="cb176-584"><a href="#cb176-584" aria-hidden="true" tabindex="-1"></a>barBeats <span class="op">=</span> barTime<span class="op">.</span><span class="fu">slice</span>(<span class="dv">3</span><span class="op">,</span> <span class="dv">5</span>)</span>
<span id="cb176-585"><a href="#cb176-585" aria-hidden="true" tabindex="-1"></a>barMb <span class="op">=</span> barTime<span class="op">.</span><span class="fu">slice</span>(<span class="dv">5</span>)</span>
<span id="cb176-586"><a href="#cb176-586" aria-hidden="true" tabindex="-1"></a>deco <span class="op">=</span> <span class="fu">unix2deco</span>(unix)<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">14</span>)</span>
<span id="cb176-587"><a href="#cb176-587" aria-hidden="true" tabindex="-1"></a>doty <span class="op">=</span> deco<span class="op">.</span><span class="fu">slice</span>(<span class="dv">5</span>)</span>
<span id="cb176-588"><a href="#cb176-588" aria-hidden="true" tabindex="-1"></a>dotyDate <span class="op">=</span> doty<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">3</span>)</span>
<span id="cb176-589"><a href="#cb176-589" aria-hidden="true" tabindex="-1"></a>dotyTime <span class="op">=</span> doty<span class="op">.</span><span class="fu">slice</span>(<span class="dv">4</span>)</span>
<span id="cb176-590"><a href="#cb176-590" aria-hidden="true" tabindex="-1"></a>dotyDek <span class="op">=</span> doty<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">2</span>)</span>
<span id="cb176-591"><a href="#cb176-591" aria-hidden="true" tabindex="-1"></a>dotyDotd <span class="op">=</span> doty[<span class="dv">2</span>]</span>
<span id="cb176-592"><a href="#cb176-592" aria-hidden="true" tabindex="-1"></a>iso <span class="op">=</span> {</span>
<span id="cb176-593"><a href="#cb176-593" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span>(<span class="kw">true</span>) {</span>
<span id="cb176-594"><a href="#cb176-594" aria-hidden="true" tabindex="-1"></a>    <span class="kw">yield</span> <span class="kw">new</span> <span class="bu">Date</span>()<span class="op">.</span><span class="fu">toISOString</span>()</span>
<span id="cb176-595"><a href="#cb176-595" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb176-596"><a href="#cb176-596" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-597"><a href="#cb176-597" aria-hidden="true" tabindex="-1"></a>isoDate <span class="op">=</span> iso<span class="op">.</span><span class="fu">slice</span>(<span class="dv">5</span><span class="op">,</span> <span class="dv">10</span>)</span>
<span id="cb176-598"><a href="#cb176-598" aria-hidden="true" tabindex="-1"></a>isoTime <span class="op">=</span> iso<span class="op">.</span><span class="fu">slice</span>(<span class="dv">11</span><span class="op">,</span> <span class="dv">19</span>)</span>
<span id="cb176-599"><a href="#cb176-599" aria-hidden="true" tabindex="-1"></a>season <span class="op">=</span> <span class="fu">doty2toty</span>(dotyDate)</span>
<span id="cb176-600"><a href="#cb176-600" aria-hidden="true" tabindex="-1"></a>zodiac <span class="op">=</span> <span class="fu">doty2zodi</span>(dotyDate)</span>
<span id="cb176-601"><a href="#cb176-601" aria-hidden="true" tabindex="-1"></a>inputDotySeason <span class="op">=</span> <span class="fu">doty2toty</span>(inputDoty)</span>
<span id="cb176-602"><a href="#cb176-602" aria-hidden="true" tabindex="-1"></a>inputDotyZodiac <span class="op">=</span> <span class="fu">doty2zodi</span>(inputDoty)</span>
<span id="cb176-603"><a href="#cb176-603" aria-hidden="true" tabindex="-1"></a>numbers <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>({<span class="dt">length</span><span class="op">:</span> <span class="dv">366</span>}<span class="op">,</span> (_<span class="op">,</span> i) <span class="kw">=&gt;</span> i)</span>
<span id="cb176-604"><a href="#cb176-604" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb176-605"><a href="#cb176-605" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-608"><a href="#cb176-608" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb176-609"><a href="#cb176-609" aria-hidden="true" tabindex="-1"></a>styledDotyDate <span class="op">=</span> <span class="fu">setStyle</span>(dotyDate<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">1</span>])</span>
<span id="cb176-610"><a href="#cb176-610" aria-hidden="true" tabindex="-1"></a>styledDotyTime <span class="op">=</span> <span class="fu">setStyle</span>(dotyTime<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">2</span>])</span>
<span id="cb176-611"><a href="#cb176-611" aria-hidden="true" tabindex="-1"></a>styledTickTime <span class="op">=</span> <span class="fu">setStyle</span>(tickTime<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">2</span>])</span>
<span id="cb176-612"><a href="#cb176-612" aria-hidden="true" tabindex="-1"></a>styledDek <span class="op">=</span> <span class="fu">setStyle</span>(dotyDek<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">0</span>])</span>
<span id="cb176-613"><a href="#cb176-613" aria-hidden="true" tabindex="-1"></a>styledDotd <span class="op">=</span> <span class="fu">setStyle</span>(dotyDotd<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">9</span>])</span>
<span id="cb176-614"><a href="#cb176-614" aria-hidden="true" tabindex="-1"></a>styledCent <span class="op">=</span> <span class="fu">setStyle</span>(dotyTime<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">7</span>])</span>
<span id="cb176-615"><a href="#cb176-615" aria-hidden="true" tabindex="-1"></a>styledMil <span class="op">=</span> <span class="fu">setStyle</span>(dotyTime[<span class="dv">2</span>]<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">6</span>])</span>
<span id="cb176-616"><a href="#cb176-616" aria-hidden="true" tabindex="-1"></a>styledBeat <span class="op">=</span> <span class="fu">setStyle</span>(dotyTime<span class="op">.</span><span class="fu">slice</span>(<span class="dv">3</span><span class="op">,</span> <span class="dv">5</span>)<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">11</span>])</span>
<span id="cb176-617"><a href="#cb176-617" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb176-618"><a href="#cb176-618" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-619"><a href="#cb176-619" aria-hidden="true" tabindex="-1"></a><span class="fu">##### Set values {.appendix}</span></span>
<span id="cb176-620"><a href="#cb176-620" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-623"><a href="#cb176-623" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb176-624"><a href="#cb176-624" aria-hidden="true" tabindex="-1"></a><span class="co">//| echo: false</span></span>
<span id="cb176-625"><a href="#cb176-625" aria-hidden="true" tabindex="-1"></a><span class="kw">set</span>(viewof inputDoty<span class="op">,</span> scrubberDoty)</span>
<span id="cb176-626"><a href="#cb176-626" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb176-627"><a href="#cb176-627" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-630"><a href="#cb176-630" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb176-631"><a href="#cb176-631" aria-hidden="true" tabindex="-1"></a><span class="co">//| echo: false</span></span>
<span id="cb176-632"><a href="#cb176-632" aria-hidden="true" tabindex="-1"></a><span class="kw">set</span>(viewof decoOutput<span class="op">,</span> <span class="vs">`1969+</span><span class="sc">${</span>scrubberDeco<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">3</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}</span><span class="vs">`</span>)</span>
<span id="cb176-633"><a href="#cb176-633" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb176-634"><a href="#cb176-634" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-635"><a href="#cb176-635" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-636"><a href="#cb176-636" aria-hidden="true" tabindex="-1"></a><span class="fu">## Year {#sec-intro-year}</span></span>
<span id="cb176-637"><a href="#cb176-637" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-638"><a href="#cb176-638" aria-hidden="true" tabindex="-1"></a><span class="in">`Doty`</span> dates (<span class="in">`day`</span>) and <span class="co">[</span><span class="ot">timestamps</span><span class="co">](https://en.wikipedia.org/wiki/Timestamp#:~:text=A%20timestamp%20is%20a%20sequence%20of%20characters%20or%20encoded%20information%20identifying%20when%20a%20certain%20event%20occurred%2C%20usually%20giving%20date%20and%20time%20of%20day%2C%20sometimes%20accurate%20to%20a%20small%20fraction%20of%20a%20second.)</span> (<span class="in">`day.stamp`</span>) do not include years and thus can be reused from year to year. When a <span class="in">`doty`</span> is combined with a year, it forms a <span class="in">`Decalendar`</span> <span class="in">`ordinal`</span><span class="ot">[^deco]</span> (<span class="in">`deco`</span>) and represents a specific date (<span class="in">`year+day`</span>) or time (<span class="in">`year+day.stamp`</span>) in a specific year, instead of than a date (<span class="in">`day`</span>) or time (<span class="in">`day.stamp`</span>) that occurs every year or every leap year. Using the <span class="co">[</span><span class="ot">Observable</span><span class="co">](https://observablehq.com/about)</span> <span class="co">[</span><span class="ot">datetime input</span><span class="co">](https://observablehq.com/@observablehq/input-date#cell-111)</span> in @exm-intro-date, you can select a year, month, <span class="in">`dotm`</span>, hour, and minute to see the equivalent 1) <span class="in">`deco`</span> timestamp (<span class="in">`year+day.clock`</span>) and 2) year date (<span class="in">`year.yyy`</span>) in @lst-intro-date.</span>
<span id="cb176-639"><a href="#cb176-639" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-640"><a href="#cb176-640" aria-hidden="true" tabindex="-1"></a><span class="ot">[^deco]: </span><span class="in">`deco`</span>: a date and time format consisting of a year and a <span class="in">`doty`</span> and analogous to ISO 8601 dates</span>
<span id="cb176-641"><a href="#cb176-641" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-642"><a href="#cb176-642" aria-hidden="true" tabindex="-1"></a>::: {#exm-intro-date}</span>
<span id="cb176-643"><a href="#cb176-643" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-644"><a href="#cb176-644" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-645"><a href="#cb176-645" aria-hidden="true" tabindex="-1"></a>::: {.grid}</span>
<span id="cb176-646"><a href="#cb176-646" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-647"><a href="#cb176-647" aria-hidden="true" tabindex="-1"></a>::: {.g-col-6}</span>
<span id="cb176-650"><a href="#cb176-650" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb176-651"><a href="#cb176-651" aria-hidden="true" tabindex="-1"></a><span class="co">//| echo: false</span></span>
<span id="cb176-652"><a href="#cb176-652" aria-hidden="true" tabindex="-1"></a>viewof inputDatetime <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">datetime</span>({<span class="dt">label</span><span class="op">:</span> <span class="st">"Datetime"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"1970-01-01T00:00"</span>})</span>
<span id="cb176-653"><a href="#cb176-653" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb176-654"><a href="#cb176-654" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-655"><a href="#cb176-655" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-656"><a href="#cb176-656" aria-hidden="true" tabindex="-1"></a>::: {.g-col-6}</span>
<span id="cb176-657"><a href="#cb176-657" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-658"><a href="#cb176-658" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>\${dtYear}+\${dtDotyDate}\${dtDotyTimeDelimiter}\${dtDotyTime}</span>
<span id="cb176-659"><a href="#cb176-659" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>\${styledOutputDatetimeYear}</span>
<span id="cb176-660"><a href="#cb176-660" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-661"><a href="#cb176-661" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-662"><a href="#cb176-662" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-663"><a href="#cb176-663" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-664"><a href="#cb176-664" aria-hidden="true" tabindex="-1"></a>::: {.column-margin}</span>
<span id="cb176-665"><a href="#cb176-665" aria-hidden="true" tabindex="-1"></a><span class="in">```{#lst-intro-date lst-cap="Date and time conversion" cap-location=margin}</span></span>
<span id="cb176-666"><a href="#cb176-666" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb176-667"><a href="#cb176-667" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-668"><a href="#cb176-668" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-669"><a href="#cb176-669" aria-hidden="true" tabindex="-1"></a>In @exm-intro-deco, you can enter numeric year and <span class="in">`doty`</span> values or type in a free-form <span class="in">`deco`</span> to see the resulting 1) <span class="co">[</span><span class="ot">ISO 8601 timestamp</span><span class="co">](https://en.wikipedia.org/wiki/ISO_8601#Combined_date_and_time_representations)</span> (<span class="in">`year-mm-ddThh:mm:ss`</span>) and 2) year date in @lst-intro-deco. @exm-intro-deco also has a Play‚ñ∂Ô∏èbutton in that cycles from <span class="in">`Day`</span> <span class="in">`0`</span> to <span class="in">`Day`</span> <span class="in">`365`</span> of <span class="in">`Year`</span> <span class="in">`1969`</span>. The cycle goes up to <span class="in">`Day`</span> <span class="in">`0`</span> of <span class="in">`Year`</span> <span class="in">`1970`</span>, because <span class="in">`Year`</span> <span class="in">`1969`</span> is a common year and does not have a <span class="in">`Day`</span> <span class="in">`365`</span>.</span>
<span id="cb176-670"><a href="#cb176-670" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-671"><a href="#cb176-671" aria-hidden="true" tabindex="-1"></a>Interacting with the <span class="co">[</span><span class="ot">number</span><span class="co">](https://observablehq.com/@observablehq/input-range#m)</span> inputs in @exm-intro-deco, standardizes the <span class="in">`deco`</span> in the <span class="co">[</span><span class="ot">text</span><span class="co">](https://observablehq.com/@observablehq/input-text)</span> input to ensure years are integers and <span class="in">`doty`</span> values are positive numbers below 366. Nevertheless, all of the inputs in @exm-intro-deco support negative and fractional year and <span class="in">`doty`</span> values. Negative <span class="in">`doty`</span> values <span class="co">[</span><span class="ot">shift</span><span class="co">](https://en.wikipedia.org/wiki/Shift_operator)</span> dates backward in time from the start of a given year into a previous year. Similarly, negative years shift dates backward starting from <span class="in">`Year`</span> <span class="in">`0`</span>, which is 1 BCE (Before the <span class="co">[</span><span class="ot">Common Era</span><span class="co">](https://en.wikipedia.org/wiki/Common_Era)</span>).</span>
<span id="cb176-672"><a href="#cb176-672" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-673"><a href="#cb176-673" aria-hidden="true" tabindex="-1"></a>::: {#exm-intro-deco}</span>
<span id="cb176-674"><a href="#cb176-674" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-675"><a href="#cb176-675" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-676"><a href="#cb176-676" aria-hidden="true" tabindex="-1"></a>::: {.grid}</span>
<span id="cb176-677"><a href="#cb176-677" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-678"><a href="#cb176-678" aria-hidden="true" tabindex="-1"></a>::: {.g-col-6}</span>
<span id="cb176-681"><a href="#cb176-681" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb176-682"><a href="#cb176-682" aria-hidden="true" tabindex="-1"></a><span class="co">//| echo: false</span></span>
<span id="cb176-683"><a href="#cb176-683" aria-hidden="true" tabindex="-1"></a>viewof yd <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">form</span>([</span>
<span id="cb176-684"><a href="#cb176-684" aria-hidden="true" tabindex="-1"></a>  Inputs<span class="op">.</span><span class="fu">number</span>({<span class="dt">label</span><span class="op">:</span> <span class="st">"year"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"1969"</span>})<span class="op">,</span></span>
<span id="cb176-685"><a href="#cb176-685" aria-hidden="true" tabindex="-1"></a>  Inputs<span class="op">.</span><span class="fu">number</span>({<span class="dt">label</span><span class="op">:</span> <span class="st">"doty"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"306"</span>})</span>
<span id="cb176-686"><a href="#cb176-686" aria-hidden="true" tabindex="-1"></a>])</span>
<span id="cb176-687"><a href="#cb176-687" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb176-688"><a href="#cb176-688" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-691"><a href="#cb176-691" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb176-692"><a href="#cb176-692" aria-hidden="true" tabindex="-1"></a><span class="co">//| echo: false</span></span>
<span id="cb176-693"><a href="#cb176-693" aria-hidden="true" tabindex="-1"></a>viewof decoOutput <span class="op">=</span> <span class="fu">transformInput</span>(</span>
<span id="cb176-694"><a href="#cb176-694" aria-hidden="true" tabindex="-1"></a>  Inputs<span class="op">.</span><span class="fu">text</span>({<span class="dt">label</span><span class="op">:</span> <span class="st">"deco"</span><span class="op">,</span> <span class="dt">placeholder</span><span class="op">:</span> <span class="st">"year+day.ddd"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"1969+306"</span>})<span class="op">,</span></span>
<span id="cb176-695"><a href="#cb176-695" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">bind</span><span class="op">:</span> viewof yd<span class="op">,</span> <span class="dt">transform</span><span class="op">:</span> doty2deco<span class="op">,</span> <span class="dt">invert</span><span class="op">:</span> deco2doty})<span class="op">;</span></span>
<span id="cb176-696"><a href="#cb176-696" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb176-697"><a href="#cb176-697" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-698"><a href="#cb176-698" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-699"><a href="#cb176-699" aria-hidden="true" tabindex="-1"></a>::: {.g-col-6}</span>
<span id="cb176-700"><a href="#cb176-700" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-701"><a href="#cb176-701" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>\${styledIsocYear}-\${styledIsocMd}T\${styledIsocTime}</span>
<span id="cb176-702"><a href="#cb176-702" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>\${styledOutputDecoYear}</span>
<span id="cb176-703"><a href="#cb176-703" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-706"><a href="#cb176-706" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb176-707"><a href="#cb176-707" aria-hidden="true" tabindex="-1"></a><span class="co">//| echo: false</span></span>
<span id="cb176-708"><a href="#cb176-708" aria-hidden="true" tabindex="-1"></a>viewof scrubberDeco <span class="op">=</span> <span class="fu">Scrubber</span>(numbers<span class="op">,</span> {<span class="dt">autoplay</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span> <span class="dt">alternate</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">delay</span><span class="op">:</span> <span class="fl">86.4</span><span class="op">,</span> <span class="dt">loopDelay</span><span class="op">:</span> <span class="dv">864</span>})</span>
<span id="cb176-709"><a href="#cb176-709" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb176-710"><a href="#cb176-710" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-711"><a href="#cb176-711" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-712"><a href="#cb176-712" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-713"><a href="#cb176-713" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-714"><a href="#cb176-714" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-715"><a href="#cb176-715" aria-hidden="true" tabindex="-1"></a>::: {.column-margin}</span>
<span id="cb176-716"><a href="#cb176-716" aria-hidden="true" tabindex="-1"></a><span class="in">```{#lst-intro-deco lst-cap="Deco timestamp conversion" cap-location=margin}</span></span>
<span id="cb176-717"><a href="#cb176-717" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb176-718"><a href="#cb176-718" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-719"><a href="#cb176-719" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-720"><a href="#cb176-720" aria-hidden="true" tabindex="-1"></a><span class="fu">#### `Deco` Observable code {#sec-ojs-code-deco .appendix}</span></span>
<span id="cb176-721"><a href="#cb176-721" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-722"><a href="#cb176-722" aria-hidden="true" tabindex="-1"></a><span class="fu">##### Functions {.appendix}</span></span>
<span id="cb176-723"><a href="#cb176-723" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-726"><a href="#cb176-726" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb176-727"><a href="#cb176-727" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">zone2hour</span>(zone <span class="op">=</span> <span class="st">"Z"</span>) {</span>
<span id="cb176-728"><a href="#cb176-728" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (zone <span class="op">=</span> zone<span class="op">.</span><span class="fu">toUpperCase</span>()) <span class="op">==</span> <span class="st">"Z"</span> <span class="op">?</span> <span class="dv">0</span></span>
<span id="cb176-729"><a href="#cb176-729" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> zone <span class="op">&gt;</span> <span class="st">"@"</span> <span class="op">&amp;&amp;</span> zone <span class="op">&lt;</span> <span class="st">"J"</span> <span class="op">?</span> zone<span class="op">.</span><span class="fu">charCodeAt</span>() <span class="op">-</span> <span class="dv">64</span></span>
<span id="cb176-730"><a href="#cb176-730" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> zone <span class="op">&gt;</span> <span class="st">"J"</span> <span class="op">&amp;&amp;</span> zone <span class="op">&lt;</span> <span class="st">"N"</span> <span class="op">?</span> zone<span class="op">.</span><span class="fu">charCodeAt</span>() <span class="op">-</span> <span class="dv">65</span></span>
<span id="cb176-731"><a href="#cb176-731" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> zone <span class="op">&lt;</span> <span class="st">"Z"</span> <span class="op">&amp;&amp;</span> zone <span class="op">&gt;</span> <span class="st">"M"</span> <span class="op">?</span> <span class="op">-</span>(zone<span class="op">.</span><span class="fu">charCodeAt</span>() <span class="op">-</span> <span class="dv">77</span>)</span>
<span id="cb176-732"><a href="#cb176-732" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> zone<span class="op">;</span></span>
<span id="cb176-733"><a href="#cb176-733" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-734"><a href="#cb176-734" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">deco2doty</span>(timestamp <span class="op">=</span> <span class="st">"1969+306.00000Z"</span>) {</span>
<span id="cb176-735"><a href="#cb176-735" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> arr <span class="op">=</span> timestamp<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">split</span>(<span class="ss">/</span><span class="sc">(?</span><span class="ss">=</span><span class="sc">[+-]|[a-zA-Z])</span><span class="ss">/</span><span class="op">,</span> <span class="dv">3</span>)<span class="op">;</span></span>
<span id="cb176-736"><a href="#cb176-736" aria-hidden="true" tabindex="-1"></a>    <span class="cf">switch</span> (arr<span class="op">.</span><span class="at">length</span>) {</span>
<span id="cb176-737"><a href="#cb176-737" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="dv">1</span><span class="op">:</span> <span class="cf">return</span> [<span class="fu">unix2doty</span>(<span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>())[<span class="dv">0</span>]<span class="op">,</span> <span class="pp">parseFloat</span>(arr[<span class="dv">0</span>])<span class="op">,</span> <span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb176-738"><a href="#cb176-738" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="dv">2</span><span class="op">:</span> <span class="cf">return</span> (<span class="ss">/</span><span class="sc">^[a-zA-Z]+$</span><span class="ss">/</span><span class="op">.</span><span class="fu">test</span>(arr[<span class="dv">1</span>]))</span>
<span id="cb176-739"><a href="#cb176-739" aria-hidden="true" tabindex="-1"></a>            <span class="op">?</span> [<span class="fu">unix2doty</span>(<span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>())[<span class="dv">0</span>]<span class="op">,</span> <span class="pp">parseFloat</span>(arr[<span class="dv">0</span>])<span class="op">,</span> <span class="fu">zone2hour</span>(arr[<span class="dv">1</span>]) <span class="op">/</span> <span class="dv">24</span>]</span>
<span id="cb176-740"><a href="#cb176-740" aria-hidden="true" tabindex="-1"></a>            <span class="op">:</span> [<span class="pp">parseFloat</span>(arr[<span class="dv">0</span>])<span class="op">,</span> <span class="pp">parseFloat</span>(arr[<span class="dv">1</span>])<span class="op">,</span> <span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb176-741"><a href="#cb176-741" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb176-742"><a href="#cb176-742" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [<span class="pp">parseFloat</span>(arr[<span class="dv">0</span>])<span class="op">,</span> <span class="pp">parseFloat</span>(arr[<span class="dv">1</span>])<span class="op">,</span> <span class="ss">/</span><span class="sc">^[a-zA-Z]+$</span><span class="ss">/</span><span class="op">.</span><span class="fu">test</span>(arr[<span class="dv">2</span>])</span>
<span id="cb176-743"><a href="#cb176-743" aria-hidden="true" tabindex="-1"></a>        <span class="op">?</span> <span class="fu">zone2hour</span>(arr[<span class="dv">2</span>]) <span class="op">/</span> <span class="dv">24</span></span>
<span id="cb176-744"><a href="#cb176-744" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> <span class="pp">parseFloat</span>(arr[<span class="dv">2</span>]<span class="op">.</span><span class="fu">replace</span>(<span class="ss">/</span><span class="sc">([+-])</span><span class="ss">/</span><span class="op">,</span> <span class="st">"$1</span><span class="sc">\.</span><span class="st">"</span>))]<span class="op">;</span></span>
<span id="cb176-745"><a href="#cb176-745" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-746"><a href="#cb176-746" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">deco2deco</span>(timestamp <span class="op">=</span> <span class="st">"1969+306.00000Z"</span>) {</span>
<span id="cb176-747"><a href="#cb176-747" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">doty2deco</span>(<span class="fu">deco2doty</span>(timestamp))</span>
<span id="cb176-748"><a href="#cb176-748" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-749"><a href="#cb176-749" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2doty</span>(year <span class="op">=</span> <span class="dv">1969</span><span class="op">,</span> doty <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> zone <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb176-750"><a href="#cb176-750" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">dote2doty</span>(<span class="fu">doty2dote</span>(year<span class="op">,</span> doty<span class="op">,</span> zone))<span class="op">;</span></span>
<span id="cb176-751"><a href="#cb176-751" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-752"><a href="#cb176-752" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2unix</span>(year <span class="op">=</span> <span class="dv">1969</span><span class="op">,</span> doty <span class="op">=</span> <span class="dv">306</span><span class="op">,</span> zone <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb176-753"><a href="#cb176-753" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (<span class="fu">doty2dote</span>(year<span class="op">,</span> doty<span class="op">,</span> zone) <span class="op">-</span> <span class="dv">719468</span>) <span class="op">*</span> <span class="dv">86400000</span><span class="op">;</span></span>
<span id="cb176-754"><a href="#cb176-754" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-755"><a href="#cb176-755" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2isoc</span>(year <span class="op">=</span> <span class="dv">1969</span><span class="op">,</span> doty <span class="op">=</span> <span class="dv">306</span><span class="op">,</span> zone <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb176-756"><a href="#cb176-756" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">new</span> <span class="bu">Date</span>(<span class="fu">doty2unix</span>(year<span class="op">,</span> doty<span class="op">,</span> zone))<span class="op">.</span><span class="fu">toISOString</span>()<span class="op">.</span><span class="fu">split</span>(<span class="st">"."</span>)[<span class="dv">0</span>]</span>
<span id="cb176-757"><a href="#cb176-757" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-758"><a href="#cb176-758" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">deco2isoc</span>(timestamp <span class="op">=</span> <span class="st">"1969+306.00000Z"</span>) {</span>
<span id="cb176-759"><a href="#cb176-759" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">doty2isoc</span>(<span class="op">...</span><span class="fu">deco2doty</span>(timestamp))</span>
<span id="cb176-760"><a href="#cb176-760" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-761"><a href="#cb176-761" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">unix2dote</span>(ms <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb176-762"><a href="#cb176-762" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> ms <span class="op">/</span> <span class="dv">86400000</span> <span class="op">+</span> <span class="dv">719468</span><span class="op">;</span></span>
<span id="cb176-763"><a href="#cb176-763" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-764"><a href="#cb176-764" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">dote2year</span>(days <span class="op">=</span> <span class="dv">719468</span>) {</span>
<span id="cb176-765"><a href="#cb176-765" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> era <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((days <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">?</span> days <span class="op">:</span> days <span class="op">-</span> <span class="dv">146096</span>) <span class="op">/</span> <span class="dv">146097</span>)<span class="op">,</span></span>
<span id="cb176-766"><a href="#cb176-766" aria-hidden="true" tabindex="-1"></a>        dotc <span class="op">=</span> days <span class="op">-</span> era <span class="op">*</span> <span class="dv">146097</span><span class="op">,</span></span>
<span id="cb176-767"><a href="#cb176-767" aria-hidden="true" tabindex="-1"></a>        yotc <span class="op">=</span> (dotc <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(dotc <span class="op">/</span> <span class="dv">1460</span>) <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(dotc <span class="op">/</span> <span class="dv">36524</span>) <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(dotc <span class="op">/</span> <span class="dv">146096</span>)) <span class="op">/</span> <span class="dv">365</span><span class="op">;</span></span>
<span id="cb176-768"><a href="#cb176-768" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> yotc <span class="op">+</span> era <span class="op">*</span> <span class="dv">400</span><span class="op">;</span></span>
<span id="cb176-769"><a href="#cb176-769" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-770"><a href="#cb176-770" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2year</span>(year <span class="op">=</span> <span class="dv">1969</span><span class="op">,</span> doty <span class="op">=</span> <span class="dv">306</span><span class="op">,</span> zone <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb176-771"><a href="#cb176-771" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">dote2year</span>(<span class="fu">doty2dote</span>(year<span class="op">,</span> doty<span class="op">,</span> zone))<span class="op">;</span></span>
<span id="cb176-772"><a href="#cb176-772" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-773"><a href="#cb176-773" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">unix2year</span>(ms <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb176-774"><a href="#cb176-774" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">dote2year</span>(<span class="fu">unix2dote</span>(ms))<span class="op">;</span></span>
<span id="cb176-775"><a href="#cb176-775" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb176-776"><a href="#cb176-776" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb176-777"><a href="#cb176-777" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-778"><a href="#cb176-778" aria-hidden="true" tabindex="-1"></a><span class="fu">##### Variables {.appendix}</span></span>
<span id="cb176-779"><a href="#cb176-779" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-782"><a href="#cb176-782" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb176-783"><a href="#cb176-783" aria-hidden="true" tabindex="-1"></a><span class="co">//| output: all</span></span>
<span id="cb176-784"><a href="#cb176-784" aria-hidden="true" tabindex="-1"></a>tzOffsetInMs <span class="op">=</span> inputDatetime<span class="op">.</span><span class="fu">getTimezoneOffset</span>() <span class="op">*</span> <span class="dv">60000</span></span>
<span id="cb176-785"><a href="#cb176-785" aria-hidden="true" tabindex="-1"></a>utcDatetime <span class="op">=</span> inputDatetime <span class="op">-</span> tzOffsetInMs</span>
<span id="cb176-786"><a href="#cb176-786" aria-hidden="true" tabindex="-1"></a>outputDatetimeDeco <span class="op">=</span> <span class="fu">unix2deco</span>(utcDatetime)</span>
<span id="cb176-787"><a href="#cb176-787" aria-hidden="true" tabindex="-1"></a>dtDoty <span class="op">=</span> outputDatetimeDeco<span class="op">.</span><span class="fu">split</span>(<span class="st">"+"</span>)[<span class="dv">1</span>]</span>
<span id="cb176-788"><a href="#cb176-788" aria-hidden="true" tabindex="-1"></a>dtDotyDateRaw <span class="op">=</span> dtDoty<span class="op">.</span><span class="fu">split</span>(<span class="st">"."</span>)[<span class="dv">0</span>]</span>
<span id="cb176-789"><a href="#cb176-789" aria-hidden="true" tabindex="-1"></a>dtDotyTimeRaw <span class="op">=</span> dtDoty<span class="op">.</span><span class="fu">split</span>(<span class="st">"."</span>)[<span class="dv">1</span>]<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">5</span>)</span>
<span id="cb176-790"><a href="#cb176-790" aria-hidden="true" tabindex="-1"></a>outputDatetimeYear <span class="op">=</span> <span class="fu">unix2year</span>(utcDatetime)<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">8</span>)</span>
<span id="cb176-791"><a href="#cb176-791" aria-hidden="true" tabindex="-1"></a>dtDotyTimeDelimiter <span class="op">=</span> dtDotyTimeRaw <span class="op">?</span> <span class="st">"."</span> <span class="op">:</span> <span class="st">""</span></span>
<span id="cb176-792"><a href="#cb176-792" aria-hidden="true" tabindex="-1"></a>outputDecoYear <span class="op">=</span> <span class="fu">doty2year</span>(<span class="op">...</span>yd)<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">8</span>)</span>
<span id="cb176-793"><a href="#cb176-793" aria-hidden="true" tabindex="-1"></a>outputIsoc <span class="op">=</span> <span class="fu">doty2isoc</span>(<span class="op">...</span>yd)</span>
<span id="cb176-794"><a href="#cb176-794" aria-hidden="true" tabindex="-1"></a>yearDate <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">ceil</span>(<span class="fu">unix2year</span>(unix) <span class="op">*</span> <span class="fl">1e3</span>) <span class="op">/</span> <span class="fl">1e3</span></span>
<span id="cb176-795"><a href="#cb176-795" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb176-796"><a href="#cb176-796" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-799"><a href="#cb176-799" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb176-800"><a href="#cb176-800" aria-hidden="true" tabindex="-1"></a>dtYear <span class="op">=</span> <span class="fu">setStyle</span>(outputDatetimeDeco<span class="op">.</span><span class="fu">split</span>(<span class="st">"+"</span>)[<span class="dv">0</span>]<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">10</span>])</span>
<span id="cb176-801"><a href="#cb176-801" aria-hidden="true" tabindex="-1"></a>dtDotyDate <span class="op">=</span> <span class="fu">setStyle</span>(dtDotyDateRaw<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">1</span>])</span>
<span id="cb176-802"><a href="#cb176-802" aria-hidden="true" tabindex="-1"></a>dtDotyTime <span class="op">=</span> dtDotyTimeRaw <span class="op">?</span> <span class="fu">setStyle</span>(dtDotyTimeRaw<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">2</span>]) <span class="op">:</span> <span class="st">""</span></span>
<span id="cb176-803"><a href="#cb176-803" aria-hidden="true" tabindex="-1"></a>styledIsocYear <span class="op">=</span> <span class="fu">setStyle</span>(outputIsoc<span class="op">.</span><span class="fu">split</span>(<span class="ss">/</span><span class="sc">(?</span><span class="ss">=-</span><span class="sc">)</span><span class="ss">/</span>)[<span class="dv">0</span>]<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">10</span>])</span>
<span id="cb176-804"><a href="#cb176-804" aria-hidden="true" tabindex="-1"></a>styledIsocMd <span class="op">=</span> <span class="fu">setStyle</span>(outputIsoc<span class="op">.</span><span class="fu">slice</span>(outputIsoc<span class="op">.</span><span class="fu">split</span>(<span class="ss">/</span><span class="sc">(?</span><span class="ss">=-</span><span class="sc">)</span><span class="ss">/</span>)[<span class="dv">0</span>]<span class="op">.</span><span class="at">length</span><span class="op">+</span><span class="dv">1</span><span class="op">,</span>outputIsoc<span class="op">.</span><span class="fu">split</span>(<span class="ss">/</span><span class="sc">(?</span><span class="ss">=-</span><span class="sc">)</span><span class="ss">/</span>)[<span class="dv">0</span>]<span class="op">.</span><span class="at">length</span><span class="op">+</span><span class="dv">6</span>)<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">5</span>])</span>
<span id="cb176-805"><a href="#cb176-805" aria-hidden="true" tabindex="-1"></a>styledIsocTime <span class="op">=</span> <span class="fu">setStyle</span>(outputIsoc<span class="op">.</span><span class="fu">slice</span>(outputIsoc<span class="op">.</span><span class="fu">split</span>(<span class="ss">/</span><span class="sc">(?</span><span class="ss">=-</span><span class="sc">)</span><span class="ss">/</span>)[<span class="dv">0</span>]<span class="op">.</span><span class="at">length</span><span class="op">+</span><span class="dv">7</span>)<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">4</span>])</span>
<span id="cb176-806"><a href="#cb176-806" aria-hidden="true" tabindex="-1"></a>styledOutputDatetimeYear <span class="op">=</span> <span class="fu">setStyle</span>(outputDatetimeYear<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">10</span>])</span>
<span id="cb176-807"><a href="#cb176-807" aria-hidden="true" tabindex="-1"></a>styledOutputDecoYear <span class="op">=</span> <span class="fu">setStyle</span>(outputDecoYear<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">10</span>])</span>
<span id="cb176-808"><a href="#cb176-808" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb176-809"><a href="#cb176-809" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-810"><a href="#cb176-810" aria-hidden="true" tabindex="-1"></a><span class="fu">## Dek {#sec-intro-dek}</span></span>
<span id="cb176-811"><a href="#cb176-811" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-812"><a href="#cb176-812" aria-hidden="true" tabindex="-1"></a>As mentioned in @sec-intro-doty, <span class="in">`deks`</span> function as both months and weeks in <span class="in">`Decalendar`</span>. A <span class="in">`dek`</span> consists of 2 groups of 5 days called <span class="in">`pents`</span><span class="ot">[^pent]</span>. Each <span class="in">`pent`</span> can follow a sequence of workdays and restdays called a <span class="in">`pently`</span> schedule<span class="ot">[^sched]</span>. @fig-schedules compares the typical weekly schedule and the <span class="in">`Schedule`</span> <span class="in">`3`</span> <span class="in">`pently`</span> schedule. Like other <span class="in">`pently`</span> schedules, <span class="in">`Schedule`</span> <span class="in">`3`</span> is named after the number of workdays it contains. The 3 workdays in <span class="in">`Schedule`</span> <span class="in">`3`</span> are followed by a 2-day <span class="in">`pentend`</span>, the <span class="in">`Decalender`</span> equivalent of a weekend.</span>
<span id="cb176-813"><a href="#cb176-813" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-814"><a href="#cb176-814" aria-hidden="true" tabindex="-1"></a><span class="ot">[^pent]: </span><span class="in">`pent`</span>: a group of 5 days; half of a <span class="in">`dek`</span></span>
<span id="cb176-815"><a href="#cb176-815" aria-hidden="true" tabindex="-1"></a><span class="ot">[^sched]: </span><span class="in">`pently`</span> schedule: one of a set of workday and restday schedules for the 5 days of the <span class="in">`pent`</span></span>
<span id="cb176-816"><a href="#cb176-816" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-817"><a href="#cb176-817" aria-hidden="true" tabindex="-1"></a>Unlike <span class="in">`Schedule`</span> <span class="in">`3`</span> and the other <span class="in">`pently`</span> schedules, the weekly schedule is asymmetric and divides up workdays into proportions that are easier to express as fractions: 3/8 (.375), 1/3 (.3ÃÖ), and 7/24 (0.2916ÃÖ). In contrast, <span class="in">`pently`</span> schedules divides each workday into simple, symmetrical proportions that are never <span class="co">[</span><span class="ot">repeating decimal</span><span class="co">](https://en.wikipedia.org/wiki/Repeating_decimal)</span> numbers. The <span class="in">`Schedule`</span> <span class="in">`3`</span> workday is longer the typical 9-to-5, but the longer workday is compensated by more frequent restdays.</span>
<span id="cb176-818"><a href="#cb176-818" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-819"><a href="#cb176-819" aria-hidden="true" tabindex="-1"></a>{{&lt; embed schedules.ipynb#fig-schedules &gt;}}</span>
<span id="cb176-820"><a href="#cb176-820" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-821"><a href="#cb176-821" aria-hidden="true" tabindex="-1"></a>@exm-intro-pent provides the opportunity to explore all four of the <span class="in">`pently`</span> schedules. <span class="in">`Schedule`</span> <span class="in">`3`</span> is the default <span class="in">`pently`</span> schedule, and should be followed unless there is a compelling reason to do otherwise. Despite having different numbers of workdays, all <span class="in">`pently`</span> schedules keep the amount of spent at work constant at 1.2 days (120 <span class="in">`cents`</span>) per <span class="in">`pent`</span>. Every <span class="in">`pently`</span> schedule also splits up workdays symmetrically so that the time before work is equal to the time after work. You can select which schedule to view in @exm-intro-pent using the <span class="co">[</span><span class="ot">Observable</span><span class="co">](https://observablehq.com/about)</span> <span class="co">[</span><span class="ot">radio inputs</span><span class="co">](https://observablehq.com/@observablehq/input-radio)</span>. @sec-sched provides more information on <span class="in">`Schedule`</span> <span class="in">`3`</span> and the other <span class="in">`pently`</span> schedules.</span>
<span id="cb176-822"><a href="#cb176-822" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-823"><a href="#cb176-823" aria-hidden="true" tabindex="-1"></a>You can also use the <span class="co">[</span><span class="ot">interval sliders</span><span class="co">](https://observablehq.com/@mootari/range-slider)</span> to create a custom schedule and the Download‚¨áÔ∏èbutton to obtain the schedule data. Each interval is summarized by a <span class="in">`Declock`</span> <span class="in">`slice`</span> shown next to its slider. <span class="in">`Decalendar`</span> and <span class="in">`Declock`</span> <span class="in">`slices`</span> are inspired by <span class="co">[</span><span class="ot">array slicing</span><span class="co">](https://en.wikipedia.org/wiki/Array_slicing#:~:text=In%20computer%20programming%2C%20array%20slicing%20is%20an%20operation%20that%20extracts%20a%20subset%20of%20elements%20from%20an%20array%20and%20packages%20them%20as%20another%20array)</span> in computer programming and are used to represent date and time intervals. The <span class="in">`slice`</span> that summarizes the <span class="in">`Schedule`</span> <span class="in">`3`</span> workday is <span class="in">`.3:.7`</span>, where .3 (7.2 hours) is the <span class="in">`start`</span> and .7 (16.8 hours) is the <span class="in">`stop`</span>. Additional details regarding <span class="in">`slices`</span> and other ways to express intervals are available in @sec-slice.</span>
<span id="cb176-824"><a href="#cb176-824" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-825"><a href="#cb176-825" aria-hidden="true" tabindex="-1"></a>::: {#exm-intro-pent}</span>
<span id="cb176-826"><a href="#cb176-826" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-827"><a href="#cb176-827" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-828"><a href="#cb176-828" aria-hidden="true" tabindex="-1"></a>::: {.grid}</span>
<span id="cb176-829"><a href="#cb176-829" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-830"><a href="#cb176-830" aria-hidden="true" tabindex="-1"></a>::: {.g-col-6}</span>
<span id="cb176-833"><a href="#cb176-833" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb176-834"><a href="#cb176-834" aria-hidden="true" tabindex="-1"></a><span class="co">//| echo: false</span></span>
<span id="cb176-835"><a href="#cb176-835" aria-hidden="true" tabindex="-1"></a>viewof intervals <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">form</span>([</span>
<span id="cb176-836"><a href="#cb176-836" aria-hidden="true" tabindex="-1"></a>  <span class="fu">interval</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="op">.</span><span class="bn">01</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> [<span class="op">.</span><span class="dv">3</span><span class="op">,</span> <span class="op">.</span><span class="dv">7</span>]<span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">'0 or 5'</span><span class="op">,</span> <span class="dt">width</span><span class="op">:</span> <span class="dv">195</span><span class="op">,</span> <span class="dt">format</span><span class="op">:</span> ([start<span class="op">,</span> end]) <span class="kw">=&gt;</span> start <span class="op">===</span> end <span class="op">?</span> <span class="st">""</span> <span class="op">:</span> <span class="vs">`</span><span class="sc">${</span><span class="fu">formatDecimal</span>(start)<span class="sc">}</span><span class="vs">:</span><span class="sc">${</span><span class="fu">formatDecimal</span>(end)<span class="sc">}</span><span class="vs">`</span>})<span class="op">,</span></span>
<span id="cb176-837"><a href="#cb176-837" aria-hidden="true" tabindex="-1"></a>  <span class="fu">interval</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="op">.</span><span class="bn">01</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> [<span class="op">.</span><span class="dv">3</span><span class="op">,</span> <span class="op">.</span><span class="dv">7</span>]<span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">'1 or 6'</span><span class="op">,</span> <span class="dt">width</span><span class="op">:</span> <span class="dv">195</span><span class="op">,</span> <span class="dt">format</span><span class="op">:</span> ([start<span class="op">,</span> end]) <span class="kw">=&gt;</span> start <span class="op">===</span> end <span class="op">?</span> <span class="st">""</span> <span class="op">:</span> <span class="vs">`</span><span class="sc">${</span><span class="fu">formatDecimal</span>(start)<span class="sc">}</span><span class="vs">:</span><span class="sc">${</span><span class="fu">formatDecimal</span>(end)<span class="sc">}</span><span class="vs">`</span>})<span class="op">,</span></span>
<span id="cb176-838"><a href="#cb176-838" aria-hidden="true" tabindex="-1"></a>  <span class="fu">interval</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="op">.</span><span class="bn">01</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> [<span class="op">.</span><span class="dv">3</span><span class="op">,</span> <span class="op">.</span><span class="dv">7</span>]<span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">'2 or 7'</span><span class="op">,</span> <span class="dt">width</span><span class="op">:</span> <span class="dv">195</span><span class="op">,</span> <span class="dt">format</span><span class="op">:</span> ([start<span class="op">,</span> end]) <span class="kw">=&gt;</span> start <span class="op">===</span> end <span class="op">?</span> <span class="st">""</span> <span class="op">:</span> <span class="vs">`</span><span class="sc">${</span><span class="fu">formatDecimal</span>(start)<span class="sc">}</span><span class="vs">:</span><span class="sc">${</span><span class="fu">formatDecimal</span>(end)<span class="sc">}</span><span class="vs">`</span>})<span class="op">,</span></span>
<span id="cb176-839"><a href="#cb176-839" aria-hidden="true" tabindex="-1"></a>  <span class="fu">interval</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="op">.</span><span class="bn">01</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span>]<span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">'3 or 8'</span><span class="op">,</span> <span class="dt">width</span><span class="op">:</span> <span class="dv">195</span><span class="op">,</span> <span class="dt">format</span><span class="op">:</span> ([start<span class="op">,</span> end]) <span class="kw">=&gt;</span> start <span class="op">===</span> end <span class="op">?</span> <span class="st">""</span> <span class="op">:</span> <span class="vs">`</span><span class="sc">${</span><span class="fu">formatDecimal</span>(start)<span class="sc">}</span><span class="vs">:</span><span class="sc">${</span><span class="fu">formatDecimal</span>(end)<span class="sc">}</span><span class="vs">`</span>})<span class="op">,</span></span>
<span id="cb176-840"><a href="#cb176-840" aria-hidden="true" tabindex="-1"></a>  <span class="fu">interval</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="op">.</span><span class="bn">01</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span>]<span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">'4 or 9'</span><span class="op">,</span> <span class="dt">width</span><span class="op">:</span> <span class="dv">195</span><span class="op">,</span> <span class="dt">format</span><span class="op">:</span> ([start<span class="op">,</span> end]) <span class="kw">=&gt;</span> start <span class="op">===</span> end <span class="op">?</span> <span class="st">""</span> <span class="op">:</span> <span class="vs">`</span><span class="sc">${</span><span class="fu">formatDecimal</span>(start)<span class="sc">}</span><span class="vs">:</span><span class="sc">${</span><span class="fu">formatDecimal</span>(end)<span class="sc">}</span><span class="vs">`</span>})<span class="op">,</span></span>
<span id="cb176-841"><a href="#cb176-841" aria-hidden="true" tabindex="-1"></a>])</span>
<span id="cb176-842"><a href="#cb176-842" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb176-843"><a href="#cb176-843" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-844"><a href="#cb176-844" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-845"><a href="#cb176-845" aria-hidden="true" tabindex="-1"></a>::: {.g-col-6}</span>
<span id="cb176-848"><a href="#cb176-848" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb176-849"><a href="#cb176-849" aria-hidden="true" tabindex="-1"></a><span class="co">//| echo: false</span></span>
<span id="cb176-850"><a href="#cb176-850" aria-hidden="true" tabindex="-1"></a>viewof schedule <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">radio</span>([<span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span>]<span class="op">,</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Schedule"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">3</span>})</span>
<span id="cb176-851"><a href="#cb176-851" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-852"><a href="#cb176-852" aria-hidden="true" tabindex="-1"></a>viewof filename <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">text</span>({<span class="dt">label</span><span class="op">:</span> <span class="st">"Filename"</span><span class="op">,</span> <span class="dt">placeholder</span><span class="op">:</span> <span class="st">"Enter the filename"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="vs">`schedule</span><span class="sc">${</span>schedule<span class="sc">}</span><span class="vs">.csv`</span>})</span>
<span id="cb176-853"><a href="#cb176-853" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-854"><a href="#cb176-854" aria-hidden="true" tabindex="-1"></a><span class="fu">button</span>(durations<span class="op">,</span> filename)</span>
<span id="cb176-855"><a href="#cb176-855" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb176-856"><a href="#cb176-856" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-857"><a href="#cb176-857" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-858"><a href="#cb176-858" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-859"><a href="#cb176-859" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-860"><a href="#cb176-860" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-863"><a href="#cb176-863" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb176-864"><a href="#cb176-864" aria-hidden="true" tabindex="-1"></a><span class="co">//| echo: false</span></span>
<span id="cb176-865"><a href="#cb176-865" aria-hidden="true" tabindex="-1"></a><span class="co">//| label: fig-intro-dek</span></span>
<span id="cb176-866"><a href="#cb176-866" aria-hidden="true" tabindex="-1"></a><span class="co">//| fig-cap: "Pently schedule explorer"</span></span>
<span id="cb176-867"><a href="#cb176-867" aria-hidden="true" tabindex="-1"></a><span class="co">//| fig-cap-location: margin</span></span>
<span id="cb176-868"><a href="#cb176-868" aria-hidden="true" tabindex="-1"></a><span class="co">//| fig-align: center</span></span>
<span id="cb176-869"><a href="#cb176-869" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-870"><a href="#cb176-870" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/@dec/pent</span></span>
<span id="cb176-871"><a href="#cb176-871" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb176-872"><a href="#cb176-872" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="kw">null</span>}<span class="op">,</span></span>
<span id="cb176-873"><a href="#cb176-873" aria-hidden="true" tabindex="-1"></a>  <span class="dt">color</span><span class="op">:</span> {<span class="dt">scheme</span><span class="op">:</span> <span class="st">"Set1"</span><span class="op">,</span> <span class="dt">legend</span><span class="op">:</span> <span class="st">"swatches"</span><span class="op">,</span> <span class="dt">reverse</span><span class="op">:</span> <span class="kw">true</span>}<span class="op">,</span></span>
<span id="cb176-874"><a href="#cb176-874" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span> <span class="dt">domain</span><span class="op">:</span> [<span class="dv">1</span><span class="op">,</span> <span class="dv">0</span>]<span class="op">,</span> <span class="dt">tickPadding</span><span class="op">:</span> <span class="dv">18</span>}<span class="op">,</span></span>
<span id="cb176-875"><a href="#cb176-875" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb176-876"><a href="#cb176-876" aria-hidden="true" tabindex="-1"></a>  Plot<span class="op">.</span><span class="fu">barY</span>(durations<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"label"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"duration"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"group"</span>})<span class="op">,</span></span>
<span id="cb176-877"><a href="#cb176-877" aria-hidden="true" tabindex="-1"></a>  Plot<span class="op">.</span><span class="fu">textY</span>(</span>
<span id="cb176-878"><a href="#cb176-878" aria-hidden="true" tabindex="-1"></a>      durations<span class="op">,</span></span>
<span id="cb176-879"><a href="#cb176-879" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">stackY</span>(</span>
<span id="cb176-880"><a href="#cb176-880" aria-hidden="true" tabindex="-1"></a>        Plot<span class="op">.</span><span class="fu">groupX</span>(</span>
<span id="cb176-881"><a href="#cb176-881" aria-hidden="true" tabindex="-1"></a>          { <span class="dt">y</span><span class="op">:</span> <span class="st">"first"</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"first"</span> }<span class="op">,</span></span>
<span id="cb176-882"><a href="#cb176-882" aria-hidden="true" tabindex="-1"></a>          {</span>
<span id="cb176-883"><a href="#cb176-883" aria-hidden="true" tabindex="-1"></a>            <span class="dt">x</span><span class="op">:</span> <span class="st">"label"</span><span class="op">,</span></span>
<span id="cb176-884"><a href="#cb176-884" aria-hidden="true" tabindex="-1"></a>            <span class="dt">z</span><span class="op">:</span> <span class="st">"group"</span><span class="op">,</span></span>
<span id="cb176-885"><a href="#cb176-885" aria-hidden="true" tabindex="-1"></a>            <span class="dt">y</span><span class="op">:</span> <span class="st">"duration"</span><span class="op">,</span></span>
<span id="cb176-886"><a href="#cb176-886" aria-hidden="true" tabindex="-1"></a>            <span class="dt">text</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> (d<span class="op">.</span><span class="at">duration</span> <span class="op">&lt;</span> <span class="op">.</span><span class="bn">0001</span> <span class="op">?</span> <span class="kw">null</span> <span class="op">:</span> <span class="fu">formatDecimal</span>(d<span class="op">.</span><span class="at">duration</span>))<span class="op">,</span></span>
<span id="cb176-887"><a href="#cb176-887" aria-hidden="true" tabindex="-1"></a>            <span class="dt">fill</span><span class="op">:</span> <span class="st">"white"</span><span class="op">,</span></span>
<span id="cb176-888"><a href="#cb176-888" aria-hidden="true" tabindex="-1"></a>            <span class="dt">stroke</span><span class="op">:</span> <span class="st">"white"</span><span class="op">,</span></span>
<span id="cb176-889"><a href="#cb176-889" aria-hidden="true" tabindex="-1"></a>            <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">32</span><span class="op">,</span></span>
<span id="cb176-890"><a href="#cb176-890" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb176-891"><a href="#cb176-891" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb176-892"><a href="#cb176-892" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb176-893"><a href="#cb176-893" aria-hidden="true" tabindex="-1"></a>    )<span class="op">,</span></span>
<span id="cb176-894"><a href="#cb176-894" aria-hidden="true" tabindex="-1"></a>  ]})</span>
<span id="cb176-895"><a href="#cb176-895" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb176-896"><a href="#cb176-896" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-897"><a href="#cb176-897" aria-hidden="true" tabindex="-1"></a><span class="in">`Slices`</span> can be used to select <span class="in">`Declock`</span> time intervals, as in @exm-intro-pent above, or <span class="in">`Decalendar`</span> date intervals, as in @exm-intro-dotd below. <span class="in">`Decalendar`</span> date intervals can represent events take place over multiple days. In addition to <span class="in">`slices`</span>, <span class="in">`Decalendar`</span> and <span class="in">`Declock`</span> intervals can also be chosen using <span class="in">`spreads`</span>. Use the <span class="co">[</span><span class="ot">Observable</span><span class="co">](https://observablehq.com/about)</span> <span class="co">[</span><span class="ot">button</span><span class="co">](https://observablehq.com/@observablehq/input-button)</span> and <span class="co">[</span><span class="ot">checkbox</span><span class="co">](https://observablehq.com/@observablehq/input-checkbox)</span> inputs in @exm-intro-dotd to display different <span class="in">`dotd`</span> combinations in @fig-intro-dotd. @fig-intro-dotd shows dates selected by a <span class="in">`slice`</span> in <span class="co">[</span><span class="ot">blue</span><span class="co">]</span>{.blue}, dates selected by a <span class="in">`spread`</span> in <span class="co">[</span><span class="ot">orange</span><span class="co">]</span>{.orange}, dates selected by both in <span class="co">[</span><span class="ot">green</span><span class="co">]</span>{.green}, and dates selected by neither in <span class="co">[</span><span class="ot">gray</span><span class="co">]</span>{.gray}. @sec-slice and @sec-spread build on the practical introduction to <span class="in">`slices`</span> and <span class="in">`spreads`</span> provided by @exm-intro-dotd.</span>
<span id="cb176-898"><a href="#cb176-898" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-899"><a href="#cb176-899" aria-hidden="true" tabindex="-1"></a>The @exm-intro-dotd button and checkbox inputs will modify the associated <span class="in">`slice`</span> and <span class="in">`spread`</span> text and numeric inputs as needed to select the desired days-of-the-<span class="in">`dek`</span>. The numeric inputs for <span class="in">`slices`</span> are the <span class="in">`start`</span>üé¨index, the <span class="in">`stop`</span>üõëindex, and the <span class="in">`step`</span>üë£size, which are separated by colons (<span class="in">`start:stop:step`</span>) when combined into a <span class="in">`slice`</span>. Similarly, the numeric inputs for <span class="in">`spreads`</span> are the <span class="in">`start`</span>üé¨orüõë<span class="in">`stop`</span> index, the <span class="in">`span`</span>ü™Ωsize, the <span class="in">`split`</span> size, and the <span class="in">`space`</span> size, which are typically delimited by greater-than signs (<span class="in">`start&gt;span&gt;split&gt;space`</span>) or a mix of greater-than and less-than signs (<span class="in">`stop&lt;span&gt;split&gt;space`</span>).</span>
<span id="cb176-900"><a href="#cb176-900" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-901"><a href="#cb176-901" aria-hidden="true" tabindex="-1"></a>The numeric inputs in @exm-intro-dotd cannot capture the full power of <span class="in">`spreads`</span> and <span class="in">`slices`</span>, because <span class="in">`slices`</span> can have any number of <span class="in">`steps`</span> and, likewise, <span class="in">`spreads`</span> can have any number of alternating <span class="in">`split`</span> and <span class="in">`space`</span> sizes. We can select all even or odd days-of-the-<span class="in">`dek`</span> using a <span class="in">`slice`</span> with a single <span class="in">`step`</span> (<span class="in">`::2`</span> or <span class="in">`1::2`</span>) or a <span class="in">`spread`</span> with one <span class="in">`split`</span>-<span class="in">`space`</span> pair (<span class="in">`&gt;&gt;&gt;1`</span> or <span class="in">`1&gt;&gt;&gt;1`</span>). More complex patterns, such as prime or composite days-of-the-<span class="in">`dek`</span>, require multiple <span class="in">`step`</span> sizes for <span class="in">`slices`</span> (<span class="in">`2:::2:2:5`</span> or <span class="in">`4::2:2::5`</span>) or multiple <span class="in">`split`</span>-<span class="in">`space`</span> pairs (<span class="in">`2&gt;&gt;2&gt;1&gt;&gt;1&gt;&gt;4`</span> or <span class="in">`4&gt;&gt;&gt;1&gt;&gt;1&gt;2&gt;4`</span>).</span>
<span id="cb176-902"><a href="#cb176-902" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-903"><a href="#cb176-903" aria-hidden="true" tabindex="-1"></a>::: {#exm-intro-dotd}</span>
<span id="cb176-904"><a href="#cb176-904" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-905"><a href="#cb176-905" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-908"><a href="#cb176-908" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb176-909"><a href="#cb176-909" aria-hidden="true" tabindex="-1"></a><span class="co">//| echo: false</span></span>
<span id="cb176-910"><a href="#cb176-910" aria-hidden="true" tabindex="-1"></a>viewof sliceDotd <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">checkbox</span>([<span class="op">...</span><span class="bu">Array</span>(<span class="dv">10</span>)<span class="op">.</span><span class="fu">keys</span>()]<span class="op">,</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"slice dotd"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> [<span class="dv">1</span><span class="op">,</span> <span class="dv">6</span>]})</span>
<span id="cb176-911"><a href="#cb176-911" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb176-912"><a href="#cb176-912" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-915"><a href="#cb176-915" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb176-916"><a href="#cb176-916" aria-hidden="true" tabindex="-1"></a><span class="co">//| echo: false</span></span>
<span id="cb176-917"><a href="#cb176-917" aria-hidden="true" tabindex="-1"></a>viewof spreadDotd <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">checkbox</span>([<span class="op">...</span><span class="bu">Array</span>(<span class="dv">10</span>)<span class="op">.</span><span class="fu">keys</span>()]<span class="op">,</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"spread dotd"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> [<span class="dv">1</span><span class="op">,</span> <span class="dv">6</span>]})</span>
<span id="cb176-918"><a href="#cb176-918" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb176-919"><a href="#cb176-919" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-920"><a href="#cb176-920" aria-hidden="true" tabindex="-1"></a>::: {.grid}</span>
<span id="cb176-921"><a href="#cb176-921" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-922"><a href="#cb176-922" aria-hidden="true" tabindex="-1"></a>::: {.g-col-6}</span>
<span id="cb176-925"><a href="#cb176-925" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb176-926"><a href="#cb176-926" aria-hidden="true" tabindex="-1"></a><span class="co">//| echo: false</span></span>
<span id="cb176-927"><a href="#cb176-927" aria-hidden="true" tabindex="-1"></a>viewof sliceString <span class="op">=</span> <span class="fu">transformInput</span>(</span>
<span id="cb176-928"><a href="#cb176-928" aria-hidden="true" tabindex="-1"></a>  Inputs<span class="op">.</span><span class="fu">text</span>({<span class="dt">label</span><span class="op">:</span> <span class="st">"slice string"</span><span class="op">,</span> <span class="dt">placeholder</span><span class="op">:</span> <span class="st">"Enter slice string"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"0:366"</span>})<span class="op">,</span></span>
<span id="cb176-929"><a href="#cb176-929" aria-hidden="true" tabindex="-1"></a>{<span class="dt">bind</span><span class="op">:</span> viewof sliceInputs<span class="op">,</span> <span class="dt">transform</span><span class="op">:</span> encodeSlice<span class="op">,</span> <span class="dt">invert</span><span class="op">:</span> decodeSlice})<span class="op">;</span></span>
<span id="cb176-930"><a href="#cb176-930" aria-hidden="true" tabindex="-1"></a>viewof sliceInputs <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">form</span>([</span>
<span id="cb176-931"><a href="#cb176-931" aria-hidden="true" tabindex="-1"></a>    Inputs<span class="op">.</span><span class="fu">number</span>([<span class="op">-</span><span class="dv">366</span><span class="op">,</span> <span class="dv">366</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"start"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">placeholder</span><span class="op">:</span> <span class="st">"Enter start index"</span>})<span class="op">,</span></span>
<span id="cb176-932"><a href="#cb176-932" aria-hidden="true" tabindex="-1"></a>    Inputs<span class="op">.</span><span class="fu">number</span>([<span class="op">-</span><span class="dv">366</span><span class="op">,</span> <span class="dv">366</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"stop"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">366</span><span class="op">,</span> <span class="dt">placeholder</span><span class="op">:</span> <span class="st">"Enter stop index"</span>})<span class="op">,</span></span>
<span id="cb176-933"><a href="#cb176-933" aria-hidden="true" tabindex="-1"></a>    Inputs<span class="op">.</span><span class="fu">number</span>([<span class="op">-</span><span class="dv">366</span><span class="op">,</span> <span class="dv">366</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"step"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span> <span class="dt">placeholder</span><span class="op">:</span> <span class="st">"Enter step size"</span>})<span class="op">,</span></span>
<span id="cb176-934"><a href="#cb176-934" aria-hidden="true" tabindex="-1"></a>])</span>
<span id="cb176-935"><a href="#cb176-935" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb176-936"><a href="#cb176-936" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-937"><a href="#cb176-937" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-938"><a href="#cb176-938" aria-hidden="true" tabindex="-1"></a>::: {.g-col-6}</span>
<span id="cb176-941"><a href="#cb176-941" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb176-942"><a href="#cb176-942" aria-hidden="true" tabindex="-1"></a><span class="co">//| echo: false</span></span>
<span id="cb176-943"><a href="#cb176-943" aria-hidden="true" tabindex="-1"></a>viewof spreadString <span class="op">=</span> <span class="fu">transformInput</span>(</span>
<span id="cb176-944"><a href="#cb176-944" aria-hidden="true" tabindex="-1"></a>  Inputs<span class="op">.</span><span class="fu">text</span>({<span class="dt">label</span><span class="op">:</span> <span class="st">"spread string"</span><span class="op">,</span> <span class="dt">placeholder</span><span class="op">:</span> <span class="st">"Enter spread string"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"0&gt;366&gt;3&gt;2"</span>})<span class="op">,</span></span>
<span id="cb176-945"><a href="#cb176-945" aria-hidden="true" tabindex="-1"></a>{<span class="dt">bind</span><span class="op">:</span> viewof spreadInputs<span class="op">,</span> <span class="dt">transform</span><span class="op">:</span> encodeSpread<span class="op">,</span> <span class="dt">invert</span><span class="op">:</span> decodeSpread})<span class="op">;</span></span>
<span id="cb176-946"><a href="#cb176-946" aria-hidden="true" tabindex="-1"></a>viewof spreadInputs <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">form</span>([</span>
<span id="cb176-947"><a href="#cb176-947" aria-hidden="true" tabindex="-1"></a>    Inputs<span class="op">.</span><span class="fu">number</span>([<span class="op">-</span><span class="dv">366</span><span class="op">,</span> <span class="dv">366</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"start"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">placeholder</span><span class="op">:</span> <span class="st">"Enter start index"</span>})<span class="op">,</span></span>
<span id="cb176-948"><a href="#cb176-948" aria-hidden="true" tabindex="-1"></a>    Inputs<span class="op">.</span><span class="fu">number</span>([<span class="op">-</span><span class="dv">366</span><span class="op">,</span> <span class="dv">366</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"span"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">366</span><span class="op">,</span> <span class="dt">placeholder</span><span class="op">:</span> <span class="st">"Enter span size"</span>})<span class="op">,</span></span>
<span id="cb176-949"><a href="#cb176-949" aria-hidden="true" tabindex="-1"></a>    Inputs<span class="op">.</span><span class="fu">number</span>([<span class="op">-</span><span class="dv">366</span><span class="op">,</span> <span class="dv">366</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"split"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">3</span><span class="op">,</span> <span class="dt">placeholder</span><span class="op">:</span> <span class="st">"Enter split size"</span>})<span class="op">,</span></span>
<span id="cb176-950"><a href="#cb176-950" aria-hidden="true" tabindex="-1"></a>    Inputs<span class="op">.</span><span class="fu">number</span>([<span class="op">-</span><span class="dv">366</span><span class="op">,</span> <span class="dv">366</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"space"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span> <span class="dt">placeholder</span><span class="op">:</span> <span class="st">"Enter space size"</span>})<span class="op">,</span></span>
<span id="cb176-951"><a href="#cb176-951" aria-hidden="true" tabindex="-1"></a>])</span>
<span id="cb176-952"><a href="#cb176-952" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb176-953"><a href="#cb176-953" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-954"><a href="#cb176-954" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-955"><a href="#cb176-955" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-956"><a href="#cb176-956" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-959"><a href="#cb176-959" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb176-960"><a href="#cb176-960" aria-hidden="true" tabindex="-1"></a><span class="co">//| echo: false</span></span>
<span id="cb176-961"><a href="#cb176-961" aria-hidden="true" tabindex="-1"></a>viewof togglePlot <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">button</span>([</span>
<span id="cb176-962"><a href="#cb176-962" aria-hidden="true" tabindex="-1"></a>  [invertDotd <span class="op">?</span> <span class="st">"None"</span> <span class="op">:</span> <span class="st">"All"</span><span class="op">,</span> value <span class="kw">=&gt;</span> [<span class="op">...</span><span class="bu">Array</span>(<span class="dv">10</span>)<span class="op">.</span><span class="fu">keys</span>()]]<span class="op">,</span></span>
<span id="cb176-963"><a href="#cb176-963" aria-hidden="true" tabindex="-1"></a>  [invertDotd <span class="op">?</span> <span class="st">"Even"</span> <span class="op">:</span> <span class="st">"Odd"</span><span class="op">,</span> value <span class="kw">=&gt;</span> [<span class="dv">1</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">9</span>]]<span class="op">,</span></span>
<span id="cb176-964"><a href="#cb176-964" aria-hidden="true" tabindex="-1"></a>  [invertDotd <span class="op">?</span> <span class="fu">html</span><span class="vs">`&lt;s&gt;Prime&lt;/s&gt;`</span> <span class="op">:</span> <span class="st">"Prime"</span><span class="op">,</span> value <span class="kw">=&gt;</span> [<span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">7</span>]]<span class="op">,</span></span>
<span id="cb176-965"><a href="#cb176-965" aria-hidden="true" tabindex="-1"></a>  [invertDotd <span class="op">?</span> <span class="fu">html</span><span class="vs">`&lt;s&gt;Composite&lt;/s&gt;`</span> <span class="op">:</span> <span class="st">"Composite"</span><span class="op">,</span> value <span class="kw">=&gt;</span> [<span class="dv">4</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">9</span>]]<span class="op">,</span></span>
<span id="cb176-966"><a href="#cb176-966" aria-hidden="true" tabindex="-1"></a>  [invertDotd <span class="op">?</span> <span class="fu">html</span><span class="vs">`&lt;s&gt;Schedule2&lt;/s&gt;`</span> <span class="op">:</span> <span class="st">"Schedule2"</span><span class="op">,</span> value <span class="kw">=&gt;</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span>]]<span class="op">,</span></span>
<span id="cb176-967"><a href="#cb176-967" aria-hidden="true" tabindex="-1"></a>  [invertDotd <span class="op">?</span> <span class="fu">html</span><span class="vs">`&lt;s&gt;Schedule3&lt;/s&gt;`</span> <span class="op">:</span> <span class="st">"Schedule3"</span><span class="op">,</span> value <span class="kw">=&gt;</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">7</span>]]<span class="op">,</span></span>
<span id="cb176-968"><a href="#cb176-968" aria-hidden="true" tabindex="-1"></a>  [invertDotd <span class="op">?</span> <span class="fu">html</span><span class="vs">`&lt;s&gt;Schedule4&lt;/s&gt;`</span> <span class="op">:</span> <span class="st">"Schedule4"</span><span class="op">,</span> value <span class="kw">=&gt;</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">8</span>]]<span class="op">,</span></span>
<span id="cb176-969"><a href="#cb176-969" aria-hidden="true" tabindex="-1"></a>]<span class="op">,</span> {<span class="dt">value</span><span class="op">:</span> []<span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"select dotd"</span>})</span>
<span id="cb176-970"><a href="#cb176-970" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb176-971"><a href="#cb176-971" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-972"><a href="#cb176-972" aria-hidden="true" tabindex="-1"></a>::: {.grid}</span>
<span id="cb176-973"><a href="#cb176-973" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-974"><a href="#cb176-974" aria-hidden="true" tabindex="-1"></a>::: {.g-col-6}</span>
<span id="cb176-977"><a href="#cb176-977" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb176-978"><a href="#cb176-978" aria-hidden="true" tabindex="-1"></a><span class="co">//| echo: false</span></span>
<span id="cb176-979"><a href="#cb176-979" aria-hidden="true" tabindex="-1"></a>viewof invertDotd <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">toggle</span>({<span class="dt">label</span><span class="op">:</span> <span class="st">"invert buttons"</span>})</span>
<span id="cb176-980"><a href="#cb176-980" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb176-981"><a href="#cb176-981" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-982"><a href="#cb176-982" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-983"><a href="#cb176-983" aria-hidden="true" tabindex="-1"></a>::: {.g-col-6}</span>
<span id="cb176-986"><a href="#cb176-986" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb176-987"><a href="#cb176-987" aria-hidden="true" tabindex="-1"></a><span class="co">//| echo: false</span></span>
<span id="cb176-988"><a href="#cb176-988" aria-hidden="true" tabindex="-1"></a>viewof sliceOrSpread <span class="op">=</span> <span class="fu">toggleSwitch</span>({<span class="dt">textOn</span><span class="op">:</span> invertDotd <span class="op">?</span> <span class="st">"Spread"</span> <span class="op">:</span> <span class="st">'Slice'</span> <span class="op">,</span> <span class="dt">textOff</span><span class="op">:</span> invertDotd <span class="op">?</span> <span class="st">"Slice"</span> <span class="op">:</span> <span class="st">'Spread'</span>})</span>
<span id="cb176-989"><a href="#cb176-989" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb176-990"><a href="#cb176-990" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-991"><a href="#cb176-991" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-992"><a href="#cb176-992" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-993"><a href="#cb176-993" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-994"><a href="#cb176-994" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-997"><a href="#cb176-997" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb176-998"><a href="#cb176-998" aria-hidden="true" tabindex="-1"></a><span class="co">//| echo: false</span></span>
<span id="cb176-999"><a href="#cb176-999" aria-hidden="true" tabindex="-1"></a><span class="co">//| label: fig-intro-dotd</span></span>
<span id="cb176-1000"><a href="#cb176-1000" aria-hidden="true" tabindex="-1"></a><span class="co">//| fig-cap: "Decalendar date selector"</span></span>
<span id="cb176-1001"><a href="#cb176-1001" aria-hidden="true" tabindex="-1"></a><span class="co">//| fig-cap-location: margin</span></span>
<span id="cb176-1002"><a href="#cb176-1002" aria-hidden="true" tabindex="-1"></a><span class="co">//| fig-align: center</span></span>
<span id="cb176-1003"><a href="#cb176-1003" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/@dec/dotd</span></span>
<span id="cb176-1004"><a href="#cb176-1004" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb176-1005"><a href="#cb176-1005" aria-hidden="true" tabindex="-1"></a>  <span class="dt">padding</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb176-1006"><a href="#cb176-1006" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> {<span class="dt">axis</span><span class="op">:</span> <span class="st">"top"</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="kw">null</span>}<span class="op">,</span></span>
<span id="cb176-1007"><a href="#cb176-1007" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span> <span class="dt">tickPadding</span><span class="op">:</span> <span class="dv">12</span>}<span class="op">,</span></span>
<span id="cb176-1008"><a href="#cb176-1008" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb176-1009"><a href="#cb176-1009" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">cell</span>(dates<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> d <span class="kw">=&gt;</span> d[<span class="dv">2</span>]<span class="op">,</span> <span class="dt">y</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> d <span class="kw">=&gt;</span></span>
<span id="cb176-1010"><a href="#cb176-1010" aria-hidden="true" tabindex="-1"></a>      sliceArray<span class="op">.</span><span class="fu">includes</span>(d) <span class="op">&amp;&amp;</span> spreadArray<span class="op">.</span><span class="fu">includes</span>(d) <span class="op">?</span> <span class="st">"green"</span> <span class="op">:</span></span>
<span id="cb176-1011"><a href="#cb176-1011" aria-hidden="true" tabindex="-1"></a>      sliceArray<span class="op">.</span><span class="fu">includes</span>(d) <span class="op">&amp;&amp;</span> <span class="op">!</span>spreadArray<span class="op">.</span><span class="fu">includes</span>(d) <span class="op">?</span> <span class="st">"blue"</span> <span class="op">:</span></span>
<span id="cb176-1012"><a href="#cb176-1012" aria-hidden="true" tabindex="-1"></a>      <span class="op">!</span>sliceArray<span class="op">.</span><span class="fu">includes</span>(d) <span class="op">&amp;&amp;</span> spreadArray<span class="op">.</span><span class="fu">includes</span>(d) <span class="op">?</span> <span class="st">"orange"</span> <span class="op">:</span> <span class="st">"grey"</span><span class="op">,</span> <span class="dt">inset</span><span class="op">:</span> <span class="fl">0.5</span>})<span class="op">,</span></span>
<span id="cb176-1013"><a href="#cb176-1013" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">text</span>(dates<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> d <span class="kw">=&gt;</span> d[<span class="dv">2</span>]<span class="op">,</span> <span class="dt">y</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"white"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"white"</span><span class="op">,</span> <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">20</span>})</span>
<span id="cb176-1014"><a href="#cb176-1014" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb176-1015"><a href="#cb176-1015" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb176-1016"><a href="#cb176-1016" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb176-1017"><a href="#cb176-1017" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1018"><a href="#cb176-1018" aria-hidden="true" tabindex="-1"></a><span class="fu">#### `Dek` Observable code {#sec-ojs-code-dek .appendix}</span></span>
<span id="cb176-1019"><a href="#cb176-1019" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1020"><a href="#cb176-1020" aria-hidden="true" tabindex="-1"></a><span class="fu">##### Functions {.appendix}</span></span>
<span id="cb176-1021"><a href="#cb176-1021" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1024"><a href="#cb176-1024" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb176-1025"><a href="#cb176-1025" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/@mootari/range-slider</span></span>
<span id="cb176-1026"><a href="#cb176-1026" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">interval</span>(range <span class="op">=</span> []<span class="op">,</span> options <span class="op">=</span> {}) {</span>
<span id="cb176-1027"><a href="#cb176-1027" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> [min <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> max <span class="op">=</span> <span class="dv">1</span>] <span class="op">=</span> range<span class="op">;</span></span>
<span id="cb176-1028"><a href="#cb176-1028" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> {</span>
<span id="cb176-1029"><a href="#cb176-1029" aria-hidden="true" tabindex="-1"></a>    step <span class="op">=</span> <span class="op">.</span><span class="bn">001</span><span class="op">,</span></span>
<span id="cb176-1030"><a href="#cb176-1030" aria-hidden="true" tabindex="-1"></a>    label <span class="op">=</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb176-1031"><a href="#cb176-1031" aria-hidden="true" tabindex="-1"></a>    value <span class="op">=</span> [min<span class="op">,</span> max]<span class="op">,</span></span>
<span id="cb176-1032"><a href="#cb176-1032" aria-hidden="true" tabindex="-1"></a>    format <span class="op">=</span> ([start<span class="op">,</span> end]) <span class="kw">=&gt;</span> <span class="vs">`</span><span class="sc">${</span>start<span class="sc">}</span><span class="vs"> ‚Ä¶ </span><span class="sc">${</span>end<span class="sc">}</span><span class="vs">`</span><span class="op">,</span></span>
<span id="cb176-1033"><a href="#cb176-1033" aria-hidden="true" tabindex="-1"></a>    color<span class="op">,</span></span>
<span id="cb176-1034"><a href="#cb176-1034" aria-hidden="true" tabindex="-1"></a>    width<span class="op">,</span></span>
<span id="cb176-1035"><a href="#cb176-1035" aria-hidden="true" tabindex="-1"></a>    theme<span class="op">,</span></span>
<span id="cb176-1036"><a href="#cb176-1036" aria-hidden="true" tabindex="-1"></a>  } <span class="op">=</span> options<span class="op">;</span></span>
<span id="cb176-1037"><a href="#cb176-1037" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> __ns__ <span class="op">=</span> DOM<span class="op">.</span><span class="fu">uid</span>(<span class="st">'scope'</span>)<span class="op">.</span><span class="at">id</span><span class="op">;</span></span>
<span id="cb176-1038"><a href="#cb176-1038" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> css <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb176-1039"><a href="#cb176-1039" aria-hidden="true" tabindex="-1"></a><span class="vs">#</span><span class="sc">${</span>__ns__<span class="sc">}</span><span class="vs"> {</span></span>
<span id="cb176-1040"><a href="#cb176-1040" aria-hidden="true" tabindex="-1"></a><span class="vs">  font: 13px/1.2 var(--sans-serif);</span></span>
<span id="cb176-1041"><a href="#cb176-1041" aria-hidden="true" tabindex="-1"></a><span class="vs">  display: flex;</span></span>
<span id="cb176-1042"><a href="#cb176-1042" aria-hidden="true" tabindex="-1"></a><span class="vs">  align-items: baseline;</span></span>
<span id="cb176-1043"><a href="#cb176-1043" aria-hidden="true" tabindex="-1"></a><span class="vs">  flex-wrap: wrap;</span></span>
<span id="cb176-1044"><a href="#cb176-1044" aria-hidden="true" tabindex="-1"></a><span class="vs">  max-width: 100%;</span></span>
<span id="cb176-1045"><a href="#cb176-1045" aria-hidden="true" tabindex="-1"></a><span class="vs">  width: auto;</span></span>
<span id="cb176-1046"><a href="#cb176-1046" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb176-1047"><a href="#cb176-1047" aria-hidden="true" tabindex="-1"></a><span class="vs">@media only screen and (min-width: 30em) {</span></span>
<span id="cb176-1048"><a href="#cb176-1048" aria-hidden="true" tabindex="-1"></a><span class="vs">  #</span><span class="sc">${</span>__ns__<span class="sc">}</span><span class="vs"> {</span></span>
<span id="cb176-1049"><a href="#cb176-1049" aria-hidden="true" tabindex="-1"></a><span class="vs">    flex-wrap: nowrap;</span></span>
<span id="cb176-1050"><a href="#cb176-1050" aria-hidden="true" tabindex="-1"></a><span class="vs">    width: 360px;</span></span>
<span id="cb176-1051"><a href="#cb176-1051" aria-hidden="true" tabindex="-1"></a><span class="vs">  }</span></span>
<span id="cb176-1052"><a href="#cb176-1052" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb176-1053"><a href="#cb176-1053" aria-hidden="true" tabindex="-1"></a><span class="vs">#</span><span class="sc">${</span>__ns__<span class="sc">}</span><span class="vs"> .label {</span></span>
<span id="cb176-1054"><a href="#cb176-1054" aria-hidden="true" tabindex="-1"></a><span class="vs">  width: 99px;</span></span>
<span id="cb176-1055"><a href="#cb176-1055" aria-hidden="true" tabindex="-1"></a><span class="vs">  padding: 5px 0 4px 0;</span></span>
<span id="cb176-1056"><a href="#cb176-1056" aria-hidden="true" tabindex="-1"></a><span class="vs">  margin-right: .5px;</span></span>
<span id="cb176-1057"><a href="#cb176-1057" aria-hidden="true" tabindex="-1"></a><span class="vs">  flex-shrink: 0;</span></span>
<span id="cb176-1058"><a href="#cb176-1058" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb176-1059"><a href="#cb176-1059" aria-hidden="true" tabindex="-1"></a><span class="vs">#</span><span class="sc">${</span>__ns__<span class="sc">}</span><span class="vs"> .form {</span></span>
<span id="cb176-1060"><a href="#cb176-1060" aria-hidden="true" tabindex="-1"></a><span class="vs">  display: flex;</span></span>
<span id="cb176-1061"><a href="#cb176-1061" aria-hidden="true" tabindex="-1"></a><span class="vs">  width: 100%;</span></span>
<span id="cb176-1062"><a href="#cb176-1062" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb176-1063"><a href="#cb176-1063" aria-hidden="true" tabindex="-1"></a><span class="vs">#</span><span class="sc">${</span>__ns__<span class="sc">}</span><span class="vs"> .range {</span></span>
<span id="cb176-1064"><a href="#cb176-1064" aria-hidden="true" tabindex="-1"></a><span class="vs">  flex-shrink: 1;</span></span>
<span id="cb176-1065"><a href="#cb176-1065" aria-hidden="true" tabindex="-1"></a><span class="vs">  width: 100%;</span></span>
<span id="cb176-1066"><a href="#cb176-1066" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb176-1067"><a href="#cb176-1067" aria-hidden="true" tabindex="-1"></a><span class="vs">#</span><span class="sc">${</span>__ns__<span class="sc">}</span><span class="vs"> .range-slider {</span></span>
<span id="cb176-1068"><a href="#cb176-1068" aria-hidden="true" tabindex="-1"></a><span class="vs">  width: 100%;</span></span>
<span id="cb176-1069"><a href="#cb176-1069" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb176-1070"><a href="#cb176-1070" aria-hidden="true" tabindex="-1"></a><span class="vs">  `</span><span class="op">;</span></span>
<span id="cb176-1071"><a href="#cb176-1071" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> $range <span class="op">=</span> <span class="fu">rangeInput</span>({min<span class="op">,</span> max<span class="op">,</span> <span class="dt">value</span><span class="op">:</span> [value[<span class="dv">0</span>]<span class="op">,</span> value[<span class="dv">1</span>]]<span class="op">,</span> step<span class="op">,</span> color<span class="op">,</span> width<span class="op">,</span> theme})<span class="op">;</span></span>
<span id="cb176-1072"><a href="#cb176-1072" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> $output <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;output&gt;`</span><span class="op">;</span></span>
<span id="cb176-1073"><a href="#cb176-1073" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> $view <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;div id=</span><span class="sc">${</span>__ns__<span class="sc">}</span><span class="vs">&gt;</span></span>
<span id="cb176-1074"><a href="#cb176-1074" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span>label <span class="op">==</span> <span class="kw">null</span> <span class="op">?</span> <span class="st">''</span> <span class="op">:</span> <span class="fu">html</span><span class="vs">`&lt;div class="label"&gt;</span><span class="sc">${</span>label<span class="sc">}</span><span class="vs">`</span><span class="sc">}</span></span>
<span id="cb176-1075"><a href="#cb176-1075" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;div class=form&gt;</span></span>
<span id="cb176-1076"><a href="#cb176-1076" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;div class=range&gt;</span></span>
<span id="cb176-1077"><a href="#cb176-1077" aria-hidden="true" tabindex="-1"></a><span class="vs">    </span><span class="sc">${</span>$range<span class="sc">}</span><span class="vs">&lt;div class=range-output style="display: inline-block;"&gt;</span><span class="sc">${</span>$output<span class="sc">}</span><span class="vs">&lt;/div&gt;</span></span>
<span id="cb176-1078"><a href="#cb176-1078" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/div&gt;</span></span>
<span id="cb176-1079"><a href="#cb176-1079" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb176-1080"><a href="#cb176-1080" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span><span class="fu">html</span><span class="vs">`&lt;style&gt;</span><span class="sc">${</span>css<span class="sc">}</span><span class="vs">`</span><span class="sc">}</span></span>
<span id="cb176-1081"><a href="#cb176-1081" aria-hidden="true" tabindex="-1"></a><span class="vs">  `</span><span class="op">;</span></span>
<span id="cb176-1082"><a href="#cb176-1082" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> update <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb176-1083"><a href="#cb176-1083" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> content <span class="op">=</span> <span class="fu">format</span>([$range<span class="op">.</span><span class="at">value</span>[<span class="dv">0</span>]<span class="op">,</span> $range<span class="op">.</span><span class="at">value</span>[<span class="dv">1</span>]])<span class="op">;</span></span>
<span id="cb176-1084"><a href="#cb176-1084" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="kw">typeof</span> content <span class="op">===</span> <span class="st">'string'</span>) $output<span class="op">.</span><span class="at">value</span> <span class="op">=</span> content<span class="op">;</span></span>
<span id="cb176-1085"><a href="#cb176-1085" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> {</span>
<span id="cb176-1086"><a href="#cb176-1086" aria-hidden="true" tabindex="-1"></a>      <span class="cf">while</span>($output<span class="op">.</span><span class="at">lastChild</span>) $output<span class="op">.</span><span class="at">lastChild</span><span class="op">.</span><span class="fu">remove</span>()<span class="op">;</span></span>
<span id="cb176-1087"><a href="#cb176-1087" aria-hidden="true" tabindex="-1"></a>      $output<span class="op">.</span><span class="fu">appendChild</span>(content)<span class="op">;</span></span>
<span id="cb176-1088"><a href="#cb176-1088" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb176-1089"><a href="#cb176-1089" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb176-1090"><a href="#cb176-1090" aria-hidden="true" tabindex="-1"></a>  $range<span class="op">.</span><span class="at">oninput</span> <span class="op">=</span> update<span class="op">;</span></span>
<span id="cb176-1091"><a href="#cb176-1091" aria-hidden="true" tabindex="-1"></a>  <span class="fu">update</span>()<span class="op">;</span></span>
<span id="cb176-1092"><a href="#cb176-1092" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">defineProperty</span>($view<span class="op">,</span> <span class="st">'value'</span><span class="op">,</span> {</span>
<span id="cb176-1093"><a href="#cb176-1093" aria-hidden="true" tabindex="-1"></a>    <span class="kw">get</span><span class="op">:</span> () <span class="kw">=&gt;</span> $range<span class="op">.</span><span class="at">value</span><span class="op">,</span></span>
<span id="cb176-1094"><a href="#cb176-1094" aria-hidden="true" tabindex="-1"></a>    <span class="kw">set</span><span class="op">:</span> ([a<span class="op">,</span> b]) <span class="kw">=&gt;</span> {</span>
<span id="cb176-1095"><a href="#cb176-1095" aria-hidden="true" tabindex="-1"></a>      $range<span class="op">.</span><span class="at">value</span> <span class="op">=</span> [a<span class="op">,</span> b]<span class="op">;</span></span>
<span id="cb176-1096"><a href="#cb176-1096" aria-hidden="true" tabindex="-1"></a>      <span class="fu">update</span>()<span class="op">;</span></span>
<span id="cb176-1097"><a href="#cb176-1097" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb176-1098"><a href="#cb176-1098" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb176-1099"><a href="#cb176-1099" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-1100"><a href="#cb176-1100" aria-hidden="true" tabindex="-1"></a>cssLength <span class="op">=</span> v <span class="kw">=&gt;</span> v <span class="op">==</span> <span class="kw">null</span> <span class="op">?</span> <span class="kw">null</span> <span class="op">:</span> <span class="kw">typeof</span> v <span class="op">===</span> <span class="st">'number'</span> <span class="op">?</span> <span class="vs">`</span><span class="sc">${</span>v<span class="sc">}</span><span class="vs">px`</span> <span class="op">:</span> <span class="vs">`</span><span class="sc">${</span>v<span class="sc">}</span><span class="vs">`</span></span>
<span id="cb176-1101"><a href="#cb176-1101" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">randomScope</span>(prefix <span class="op">=</span> <span class="st">'scope-'</span>) {</span>
<span id="cb176-1102"><a href="#cb176-1102" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> prefix <span class="op">+</span> (<span class="bu">performance</span><span class="op">.</span><span class="fu">now</span>() <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">random</span>())<span class="op">.</span><span class="fu">toString</span>(<span class="dv">32</span>)<span class="op">.</span><span class="fu">replace</span>(<span class="st">'.'</span><span class="op">,</span> <span class="st">'-'</span>)<span class="op">;</span></span>
<span id="cb176-1103"><a href="#cb176-1103" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-1104"><a href="#cb176-1104" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">rangeInput</span>(options <span class="op">=</span> {}) {</span>
<span id="cb176-1105"><a href="#cb176-1105" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> {</span>
<span id="cb176-1106"><a href="#cb176-1106" aria-hidden="true" tabindex="-1"></a>    min <span class="op">=</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb176-1107"><a href="#cb176-1107" aria-hidden="true" tabindex="-1"></a>    max <span class="op">=</span> <span class="dv">100</span><span class="op">,</span></span>
<span id="cb176-1108"><a href="#cb176-1108" aria-hidden="true" tabindex="-1"></a>    step <span class="op">=</span> <span class="st">'any'</span><span class="op">,</span></span>
<span id="cb176-1109"><a href="#cb176-1109" aria-hidden="true" tabindex="-1"></a>    <span class="dt">value</span><span class="op">:</span> defaultValue <span class="op">=</span> [min<span class="op">,</span> max]<span class="op">,</span></span>
<span id="cb176-1110"><a href="#cb176-1110" aria-hidden="true" tabindex="-1"></a>    color<span class="op">,</span></span>
<span id="cb176-1111"><a href="#cb176-1111" aria-hidden="true" tabindex="-1"></a>    width<span class="op">,</span></span>
<span id="cb176-1112"><a href="#cb176-1112" aria-hidden="true" tabindex="-1"></a>    theme <span class="op">=</span> theme_Flat<span class="op">,</span></span>
<span id="cb176-1113"><a href="#cb176-1113" aria-hidden="true" tabindex="-1"></a>  } <span class="op">=</span> options<span class="op">;</span></span>
<span id="cb176-1114"><a href="#cb176-1114" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> controls <span class="op">=</span> {}<span class="op">;</span></span>
<span id="cb176-1115"><a href="#cb176-1115" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> scope <span class="op">=</span> <span class="fu">randomScope</span>()<span class="op">;</span></span>
<span id="cb176-1116"><a href="#cb176-1116" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> clamp <span class="op">=</span> (a<span class="op">,</span> b<span class="op">,</span> v) <span class="kw">=&gt;</span> v <span class="op">&lt;</span> a <span class="op">?</span> a <span class="op">:</span> v <span class="op">&gt;</span> b <span class="op">?</span> b <span class="op">:</span> v<span class="op">;</span></span>
<span id="cb176-1117"><a href="#cb176-1117" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> html <span class="op">=</span> htl<span class="op">.</span><span class="at">html</span><span class="op">;</span></span>
<span id="cb176-1118"><a href="#cb176-1118" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Will be used to sanitize values while avoiding floating point issues.</span></span>
<span id="cb176-1119"><a href="#cb176-1119" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> input <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;input type=range </span><span class="sc">${</span>{min<span class="op">,</span> max<span class="op">,</span> step}<span class="sc">}</span><span class="vs">&gt;`</span><span class="op">;</span></span>
<span id="cb176-1120"><a href="#cb176-1120" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> dom <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;div class=</span><span class="sc">${</span><span class="vs">`</span><span class="sc">${</span>scope<span class="sc">}</span><span class="vs"> range-slider`</span><span class="sc">}</span><span class="vs"> style=</span><span class="sc">${</span>{</span>
<span id="cb176-1121"><a href="#cb176-1121" aria-hidden="true" tabindex="-1"></a>    color<span class="op">,</span></span>
<span id="cb176-1122"><a href="#cb176-1122" aria-hidden="true" tabindex="-1"></a>    <span class="dt">width</span><span class="op">:</span> <span class="fu">cssLength</span>(width)<span class="op">,</span></span>
<span id="cb176-1123"><a href="#cb176-1123" aria-hidden="true" tabindex="-1"></a>  }<span class="sc">}</span><span class="vs">&gt;</span></span>
<span id="cb176-1124"><a href="#cb176-1124" aria-hidden="true" tabindex="-1"></a><span class="vs">  </span><span class="sc">${</span>controls<span class="op">.</span><span class="at">track</span> <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;div class="range-track"&gt;</span></span>
<span id="cb176-1125"><a href="#cb176-1125" aria-hidden="true" tabindex="-1"></a><span class="vs">    </span><span class="sc">${</span>controls<span class="op">.</span><span class="at">zone</span> <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;div class="range-track-zone"&gt;</span></span>
<span id="cb176-1126"><a href="#cb176-1126" aria-hidden="true" tabindex="-1"></a><span class="vs">      </span><span class="sc">${</span>controls<span class="op">.</span><span class="at">range</span> <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;div class="range-select" tabindex=0&gt;</span></span>
<span id="cb176-1127"><a href="#cb176-1127" aria-hidden="true" tabindex="-1"></a><span class="vs">        </span><span class="sc">${</span>controls<span class="op">.</span><span class="at">min</span> <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;div class="thumb thumb-min" tabindex=0&gt;`</span><span class="sc">}</span></span>
<span id="cb176-1128"><a href="#cb176-1128" aria-hidden="true" tabindex="-1"></a><span class="vs">        </span><span class="sc">${</span>controls<span class="op">.</span><span class="at">max</span> <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;div class="thumb thumb-max" tabindex=0&gt;`</span><span class="sc">}</span></span>
<span id="cb176-1129"><a href="#cb176-1129" aria-hidden="true" tabindex="-1"></a><span class="vs">      `</span><span class="sc">}</span></span>
<span id="cb176-1130"><a href="#cb176-1130" aria-hidden="true" tabindex="-1"></a><span class="vs">    `</span><span class="sc">}</span></span>
<span id="cb176-1131"><a href="#cb176-1131" aria-hidden="true" tabindex="-1"></a><span class="vs">  `</span><span class="sc">}</span></span>
<span id="cb176-1132"><a href="#cb176-1132" aria-hidden="true" tabindex="-1"></a><span class="vs">  </span><span class="sc">${</span><span class="fu">html</span><span class="vs">`&lt;style&gt;</span><span class="sc">${</span>theme<span class="op">.</span><span class="fu">replace</span>(<span class="ss">/:scope</span><span class="sc">\b</span><span class="ss">/g</span><span class="op">,</span> <span class="st">'.'</span><span class="op">+</span>scope)<span class="sc">}</span><span class="vs">`</span><span class="sc">}</span></span>
<span id="cb176-1133"><a href="#cb176-1133" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/div&gt;`</span><span class="op">;</span></span>
<span id="cb176-1134"><a href="#cb176-1134" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> value <span class="op">=</span> []<span class="op">,</span> changed <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb176-1135"><a href="#cb176-1135" aria-hidden="true" tabindex="-1"></a>  <span class="bu">Object</span><span class="op">.</span><span class="fu">defineProperty</span>(dom<span class="op">,</span> <span class="st">'value'</span><span class="op">,</span> {</span>
<span id="cb176-1136"><a href="#cb176-1136" aria-hidden="true" tabindex="-1"></a>    <span class="kw">get</span><span class="op">:</span> () <span class="kw">=&gt;</span> [<span class="op">...</span>value]<span class="op">,</span></span>
<span id="cb176-1137"><a href="#cb176-1137" aria-hidden="true" tabindex="-1"></a>    <span class="kw">set</span><span class="op">:</span> ([a<span class="op">,</span> b]) <span class="kw">=&gt;</span> {</span>
<span id="cb176-1138"><a href="#cb176-1138" aria-hidden="true" tabindex="-1"></a>      value <span class="op">=</span> <span class="fu">sanitize</span>(a<span class="op">,</span> b)<span class="op">;</span></span>
<span id="cb176-1139"><a href="#cb176-1139" aria-hidden="true" tabindex="-1"></a>      <span class="fu">updateRange</span>()<span class="op">;</span></span>
<span id="cb176-1140"><a href="#cb176-1140" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb176-1141"><a href="#cb176-1141" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb176-1142"><a href="#cb176-1142" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> sanitize <span class="op">=</span> (a<span class="op">,</span> b) <span class="kw">=&gt;</span> {</span>
<span id="cb176-1143"><a href="#cb176-1143" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> <span class="pp">isNaN</span>(a) <span class="op">?</span> min <span class="op">:</span> ((input<span class="op">.</span><span class="at">value</span> <span class="op">=</span> a)<span class="op">,</span> input<span class="op">.</span><span class="at">valueAsNumber</span>)<span class="op">;</span></span>
<span id="cb176-1144"><a href="#cb176-1144" aria-hidden="true" tabindex="-1"></a>    b <span class="op">=</span> <span class="pp">isNaN</span>(b) <span class="op">?</span> max <span class="op">:</span> ((input<span class="op">.</span><span class="at">value</span> <span class="op">=</span> b)<span class="op">,</span> input<span class="op">.</span><span class="at">valueAsNumber</span>)<span class="op">;</span></span>
<span id="cb176-1145"><a href="#cb176-1145" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [<span class="bu">Math</span><span class="op">.</span><span class="fu">min</span>(a<span class="op">,</span> b)<span class="op">,</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(a<span class="op">,</span> b)]<span class="op">;</span></span>
<span id="cb176-1146"><a href="#cb176-1146" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb176-1147"><a href="#cb176-1147" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> updateRange <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb176-1148"><a href="#cb176-1148" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> ratio <span class="op">=</span> v <span class="kw">=&gt;</span> (v <span class="op">-</span> min) <span class="op">/</span> (max <span class="op">-</span> min)<span class="op">;</span></span>
<span id="cb176-1149"><a href="#cb176-1149" aria-hidden="true" tabindex="-1"></a>    dom<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="fu">setProperty</span>(<span class="st">'--range-min'</span><span class="op">,</span> <span class="vs">`</span><span class="sc">${</span><span class="fu">ratio</span>(value[<span class="dv">0</span>]) <span class="op">*</span> <span class="dv">100</span><span class="sc">}</span><span class="vs">%`</span>)<span class="op">;</span></span>
<span id="cb176-1150"><a href="#cb176-1150" aria-hidden="true" tabindex="-1"></a>    dom<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="fu">setProperty</span>(<span class="st">'--range-max'</span><span class="op">,</span> <span class="vs">`</span><span class="sc">${</span><span class="fu">ratio</span>(value[<span class="dv">1</span>]) <span class="op">*</span> <span class="dv">100</span><span class="sc">}</span><span class="vs">%`</span>)<span class="op">;</span></span>
<span id="cb176-1151"><a href="#cb176-1151" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb176-1152"><a href="#cb176-1152" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> dispatch <span class="op">=</span> name <span class="kw">=&gt;</span> {</span>
<span id="cb176-1153"><a href="#cb176-1153" aria-hidden="true" tabindex="-1"></a>    dom<span class="op">.</span><span class="fu">dispatchEvent</span>(<span class="kw">new</span> <span class="bu">Event</span>(name<span class="op">,</span> {<span class="dt">bubbles</span><span class="op">:</span> <span class="kw">true</span>}))<span class="op">;</span></span>
<span id="cb176-1154"><a href="#cb176-1154" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb176-1155"><a href="#cb176-1155" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> setValue <span class="op">=</span> (vmin<span class="op">,</span> vmax) <span class="kw">=&gt;</span> {</span>
<span id="cb176-1156"><a href="#cb176-1156" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> [pmin<span class="op">,</span> pmax] <span class="op">=</span> value<span class="op">;</span></span>
<span id="cb176-1157"><a href="#cb176-1157" aria-hidden="true" tabindex="-1"></a>    value <span class="op">=</span> <span class="fu">sanitize</span>(vmin<span class="op">,</span> vmax)<span class="op">;</span></span>
<span id="cb176-1158"><a href="#cb176-1158" aria-hidden="true" tabindex="-1"></a>    <span class="fu">updateRange</span>()<span class="op">;</span></span>
<span id="cb176-1159"><a href="#cb176-1159" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Only dispatch if values have changed.</span></span>
<span id="cb176-1160"><a href="#cb176-1160" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(pmin <span class="op">===</span> value[<span class="dv">0</span>] <span class="op">&amp;&amp;</span> pmax <span class="op">===</span> value[<span class="dv">1</span>]) <span class="cf">return</span><span class="op">;</span></span>
<span id="cb176-1161"><a href="#cb176-1161" aria-hidden="true" tabindex="-1"></a>    <span class="fu">dispatch</span>(<span class="st">'input'</span>)<span class="op">;</span></span>
<span id="cb176-1162"><a href="#cb176-1162" aria-hidden="true" tabindex="-1"></a>    changed <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb176-1163"><a href="#cb176-1163" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb176-1164"><a href="#cb176-1164" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setValue</span>(<span class="op">...</span>defaultValue)<span class="op">;</span></span>
<span id="cb176-1165"><a href="#cb176-1165" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Mousemove handlers.</span></span>
<span id="cb176-1166"><a href="#cb176-1166" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> handlers <span class="op">=</span> <span class="kw">new</span> <span class="bu">Map</span>([</span>
<span id="cb176-1167"><a href="#cb176-1167" aria-hidden="true" tabindex="-1"></a>    [controls<span class="op">.</span><span class="at">min</span><span class="op">,</span> (dt<span class="op">,</span> ov) <span class="kw">=&gt;</span> {</span>
<span id="cb176-1168"><a href="#cb176-1168" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> v <span class="op">=</span> <span class="fu">clamp</span>(min<span class="op">,</span> ov[<span class="dv">1</span>]<span class="op">,</span> ov[<span class="dv">0</span>] <span class="op">+</span> dt <span class="op">*</span> (max <span class="op">-</span> min))<span class="op">;</span></span>
<span id="cb176-1169"><a href="#cb176-1169" aria-hidden="true" tabindex="-1"></a>      <span class="fu">setValue</span>(v<span class="op">,</span> ov[<span class="dv">1</span>])<span class="op">;</span></span>
<span id="cb176-1170"><a href="#cb176-1170" aria-hidden="true" tabindex="-1"></a>    }]<span class="op">,</span></span>
<span id="cb176-1171"><a href="#cb176-1171" aria-hidden="true" tabindex="-1"></a>    [controls<span class="op">.</span><span class="at">max</span><span class="op">,</span> (dt<span class="op">,</span> ov) <span class="kw">=&gt;</span> {</span>
<span id="cb176-1172"><a href="#cb176-1172" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> v <span class="op">=</span> <span class="fu">clamp</span>(ov[<span class="dv">0</span>]<span class="op">,</span> max<span class="op">,</span> ov[<span class="dv">1</span>] <span class="op">+</span> dt <span class="op">*</span> (max <span class="op">-</span> min))<span class="op">;</span></span>
<span id="cb176-1173"><a href="#cb176-1173" aria-hidden="true" tabindex="-1"></a>      <span class="fu">setValue</span>(ov[<span class="dv">0</span>]<span class="op">,</span> v)<span class="op">;</span></span>
<span id="cb176-1174"><a href="#cb176-1174" aria-hidden="true" tabindex="-1"></a>    }]<span class="op">,</span></span>
<span id="cb176-1175"><a href="#cb176-1175" aria-hidden="true" tabindex="-1"></a>    [controls<span class="op">.</span><span class="at">range</span><span class="op">,</span> (dt<span class="op">,</span> ov) <span class="kw">=&gt;</span> {</span>
<span id="cb176-1176"><a href="#cb176-1176" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> d <span class="op">=</span> ov[<span class="dv">1</span>] <span class="op">-</span> ov[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb176-1177"><a href="#cb176-1177" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> v <span class="op">=</span> <span class="fu">clamp</span>(min<span class="op">,</span> max <span class="op">-</span> d<span class="op">,</span> ov[<span class="dv">0</span>] <span class="op">+</span> dt <span class="op">*</span> (max <span class="op">-</span> min))<span class="op">;</span></span>
<span id="cb176-1178"><a href="#cb176-1178" aria-hidden="true" tabindex="-1"></a>      <span class="fu">setValue</span>(v<span class="op">,</span> v <span class="op">+</span> d)<span class="op">;</span></span>
<span id="cb176-1179"><a href="#cb176-1179" aria-hidden="true" tabindex="-1"></a>    }]<span class="op">,</span></span>
<span id="cb176-1180"><a href="#cb176-1180" aria-hidden="true" tabindex="-1"></a>  ])<span class="op">;</span></span>
<span id="cb176-1181"><a href="#cb176-1181" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Returns client offset object.</span></span>
<span id="cb176-1182"><a href="#cb176-1182" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> pointer <span class="op">=</span> e <span class="kw">=&gt;</span> e<span class="op">.</span><span class="at">touches</span> <span class="op">?</span> e<span class="op">.</span><span class="at">touches</span>[<span class="dv">0</span>] <span class="op">:</span> e<span class="op">;</span></span>
<span id="cb176-1183"><a href="#cb176-1183" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Note: Chrome defaults "passive" for touch events to true.</span></span>
<span id="cb176-1184"><a href="#cb176-1184" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> on  <span class="op">=</span> (e<span class="op">,</span> fn) <span class="kw">=&gt;</span> e<span class="op">.</span><span class="fu">split</span>(<span class="st">' '</span>)<span class="op">.</span><span class="fu">map</span>(e <span class="kw">=&gt;</span> <span class="bu">document</span><span class="op">.</span><span class="fu">addEventListener</span>(e<span class="op">,</span> fn<span class="op">,</span> {<span class="dt">passive</span><span class="op">:</span> <span class="kw">false</span>}))<span class="op">;</span></span>
<span id="cb176-1185"><a href="#cb176-1185" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> off <span class="op">=</span> (e<span class="op">,</span> fn) <span class="kw">=&gt;</span> e<span class="op">.</span><span class="fu">split</span>(<span class="st">' '</span>)<span class="op">.</span><span class="fu">map</span>(e <span class="kw">=&gt;</span> <span class="bu">document</span><span class="op">.</span><span class="fu">removeEventListener</span>(e<span class="op">,</span> fn<span class="op">,</span> {<span class="dt">passive</span><span class="op">:</span> <span class="kw">false</span>}))<span class="op">;</span></span>
<span id="cb176-1186"><a href="#cb176-1186" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> initialX<span class="op">,</span> initialV<span class="op">,</span> target<span class="op">,</span> dragging <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb176-1187"><a href="#cb176-1187" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">handleDrag</span>(e) {</span>
<span id="cb176-1188"><a href="#cb176-1188" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Gracefully handle exit and reentry of the viewport.</span></span>
<span id="cb176-1189"><a href="#cb176-1189" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="op">!</span>e<span class="op">.</span><span class="at">buttons</span> <span class="op">&amp;&amp;</span> <span class="op">!</span>e<span class="op">.</span><span class="at">touches</span>) {</span>
<span id="cb176-1190"><a href="#cb176-1190" aria-hidden="true" tabindex="-1"></a>      <span class="fu">handleDragStop</span>()<span class="op">;</span></span>
<span id="cb176-1191"><a href="#cb176-1191" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span><span class="op">;</span></span>
<span id="cb176-1192"><a href="#cb176-1192" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb176-1193"><a href="#cb176-1193" aria-hidden="true" tabindex="-1"></a>    dragging <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb176-1194"><a href="#cb176-1194" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> w <span class="op">=</span> controls<span class="op">.</span><span class="at">zone</span><span class="op">.</span><span class="fu">getBoundingClientRect</span>()<span class="op">.</span><span class="at">width</span><span class="op">;</span></span>
<span id="cb176-1195"><a href="#cb176-1195" aria-hidden="true" tabindex="-1"></a>    e<span class="op">.</span><span class="fu">preventDefault</span>()<span class="op">;</span></span>
<span id="cb176-1196"><a href="#cb176-1196" aria-hidden="true" tabindex="-1"></a>    handlers<span class="op">.</span><span class="fu">get</span>(target)((<span class="fu">pointer</span>(e)<span class="op">.</span><span class="at">clientX</span> <span class="op">-</span> initialX) <span class="op">/</span> w<span class="op">,</span> initialV)<span class="op">;</span></span>
<span id="cb176-1197"><a href="#cb176-1197" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb176-1198"><a href="#cb176-1198" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">handleDragStop</span>(e) {</span>
<span id="cb176-1199"><a href="#cb176-1199" aria-hidden="true" tabindex="-1"></a>    <span class="fu">off</span>(<span class="st">'mousemove touchmove'</span><span class="op">,</span> handleDrag)<span class="op">;</span></span>
<span id="cb176-1200"><a href="#cb176-1200" aria-hidden="true" tabindex="-1"></a>    <span class="fu">off</span>(<span class="st">'mouseup touchend'</span><span class="op">,</span> handleDragStop)<span class="op">;</span></span>
<span id="cb176-1201"><a href="#cb176-1201" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(changed) <span class="fu">dispatch</span>(<span class="st">'change'</span>)<span class="op">;</span></span>
<span id="cb176-1202"><a href="#cb176-1202" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb176-1203"><a href="#cb176-1203" aria-hidden="true" tabindex="-1"></a>  invalidation<span class="op">.</span><span class="fu">then</span>(handleDragStop)<span class="op">;</span></span>
<span id="cb176-1204"><a href="#cb176-1204" aria-hidden="true" tabindex="-1"></a>  dom<span class="op">.</span><span class="at">ontouchstart</span> <span class="op">=</span> dom<span class="op">.</span><span class="at">onmousedown</span> <span class="op">=</span> e <span class="kw">=&gt;</span> {</span>
<span id="cb176-1205"><a href="#cb176-1205" aria-hidden="true" tabindex="-1"></a>    dragging <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb176-1206"><a href="#cb176-1206" aria-hidden="true" tabindex="-1"></a>    changed <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb176-1207"><a href="#cb176-1207" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="op">!</span>handlers<span class="op">.</span><span class="fu">has</span>(e<span class="op">.</span><span class="at">target</span>)) <span class="cf">return</span><span class="op">;</span></span>
<span id="cb176-1208"><a href="#cb176-1208" aria-hidden="true" tabindex="-1"></a>    <span class="fu">on</span>(<span class="st">'mousemove touchmove'</span><span class="op">,</span> handleDrag)<span class="op">;</span></span>
<span id="cb176-1209"><a href="#cb176-1209" aria-hidden="true" tabindex="-1"></a>    <span class="fu">on</span>(<span class="st">'mouseup touchend'</span><span class="op">,</span> handleDragStop)<span class="op">;</span></span>
<span id="cb176-1210"><a href="#cb176-1210" aria-hidden="true" tabindex="-1"></a>    e<span class="op">.</span><span class="fu">preventDefault</span>()<span class="op">;</span></span>
<span id="cb176-1211"><a href="#cb176-1211" aria-hidden="true" tabindex="-1"></a>    e<span class="op">.</span><span class="fu">stopPropagation</span>()<span class="op">;</span></span>
<span id="cb176-1212"><a href="#cb176-1212" aria-hidden="true" tabindex="-1"></a>    target <span class="op">=</span> e<span class="op">.</span><span class="at">target</span><span class="op">;</span></span>
<span id="cb176-1213"><a href="#cb176-1213" aria-hidden="true" tabindex="-1"></a>    initialX <span class="op">=</span> <span class="fu">pointer</span>(e)<span class="op">.</span><span class="at">clientX</span><span class="op">;</span></span>
<span id="cb176-1214"><a href="#cb176-1214" aria-hidden="true" tabindex="-1"></a>    initialV <span class="op">=</span> value<span class="op">.</span><span class="fu">slice</span>()<span class="op">;</span></span>
<span id="cb176-1215"><a href="#cb176-1215" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb176-1216"><a href="#cb176-1216" aria-hidden="true" tabindex="-1"></a>  controls<span class="op">.</span><span class="at">track</span><span class="op">.</span><span class="at">onclick</span> <span class="op">=</span> e <span class="kw">=&gt;</span> {</span>
<span id="cb176-1217"><a href="#cb176-1217" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(dragging) <span class="cf">return</span><span class="op">;</span></span>
<span id="cb176-1218"><a href="#cb176-1218" aria-hidden="true" tabindex="-1"></a>    changed <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb176-1219"><a href="#cb176-1219" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> r <span class="op">=</span> controls<span class="op">.</span><span class="at">zone</span><span class="op">.</span><span class="fu">getBoundingClientRect</span>()<span class="op">;</span></span>
<span id="cb176-1220"><a href="#cb176-1220" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> t <span class="op">=</span> <span class="fu">clamp</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> (<span class="fu">pointer</span>(e)<span class="op">.</span><span class="at">clientX</span> <span class="op">-</span> r<span class="op">.</span><span class="at">left</span>) <span class="op">/</span> r<span class="op">.</span><span class="at">width</span>)<span class="op">;</span></span>
<span id="cb176-1221"><a href="#cb176-1221" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> v <span class="op">=</span> min <span class="op">+</span> t <span class="op">*</span> (max <span class="op">-</span> min)<span class="op">;</span></span>
<span id="cb176-1222"><a href="#cb176-1222" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> [vmin<span class="op">,</span> vmax] <span class="op">=</span> value<span class="op">,</span> d <span class="op">=</span> vmax <span class="op">-</span> vmin<span class="op">;</span></span>
<span id="cb176-1223"><a href="#cb176-1223" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(v <span class="op">&lt;</span> vmin) <span class="fu">setValue</span>(v<span class="op">,</span> v <span class="op">+</span> d)<span class="op">;</span></span>
<span id="cb176-1224"><a href="#cb176-1224" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span>(v <span class="op">&gt;</span> vmax) <span class="fu">setValue</span>(v <span class="op">-</span> d<span class="op">,</span> v)<span class="op">;</span></span>
<span id="cb176-1225"><a href="#cb176-1225" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(changed) <span class="fu">dispatch</span>(<span class="st">'change'</span>)<span class="op">;</span></span>
<span id="cb176-1226"><a href="#cb176-1226" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb176-1227"><a href="#cb176-1227" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> dom<span class="op">;</span></span>
<span id="cb176-1228"><a href="#cb176-1228" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-1229"><a href="#cb176-1229" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">formatDecimal</span>(number) {</span>
<span id="cb176-1230"><a href="#cb176-1230" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> number <span class="op">==</span> <span class="dv">1</span> <span class="op">?</span> number <span class="op">:</span> (<span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(number <span class="op">*</span> <span class="dv">100</span>) <span class="op">/</span> <span class="dv">100</span>)<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">slice</span>(<span class="dv">1</span>)</span>
<span id="cb176-1231"><a href="#cb176-1231" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-1232"><a href="#cb176-1232" aria-hidden="true" tabindex="-1"></a>button <span class="op">=</span> (data<span class="op">,</span> filename <span class="op">=</span> <span class="st">'data.csv'</span>) <span class="kw">=&gt;</span> {</span>
<span id="cb176-1233"><a href="#cb176-1233" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="op">!</span>data) <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="st">'Array of data required as first argument'</span>)<span class="op">;</span></span>
<span id="cb176-1234"><a href="#cb176-1234" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> downloadData<span class="op">;</span></span>
<span id="cb176-1235"><a href="#cb176-1235" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (filename<span class="op">.</span><span class="fu">includes</span>(<span class="st">'.csv'</span>)) {</span>
<span id="cb176-1236"><a href="#cb176-1236" aria-hidden="true" tabindex="-1"></a>    downloadData <span class="op">=</span> <span class="kw">new</span> <span class="bu">Blob</span>([d3<span class="op">.</span><span class="fu">csvFormat</span>(data)]<span class="op">,</span> { <span class="dt">type</span><span class="op">:</span> <span class="st">"text/csv"</span> })<span class="op">;</span></span>
<span id="cb176-1237"><a href="#cb176-1237" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb176-1238"><a href="#cb176-1238" aria-hidden="true" tabindex="-1"></a>    downloadData <span class="op">=</span> <span class="kw">new</span> <span class="bu">Blob</span>([<span class="bu">JSON</span><span class="op">.</span><span class="fu">stringify</span>(data<span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="dv">2</span>)]<span class="op">,</span> {</span>
<span id="cb176-1239"><a href="#cb176-1239" aria-hidden="true" tabindex="-1"></a>      <span class="dt">type</span><span class="op">:</span> <span class="st">"application/json"</span></span>
<span id="cb176-1240"><a href="#cb176-1240" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb176-1241"><a href="#cb176-1241" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb176-1242"><a href="#cb176-1242" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> size <span class="op">=</span> (downloadData<span class="op">.</span><span class="at">size</span> <span class="op">/</span> <span class="dv">1024</span>)<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb176-1243"><a href="#cb176-1243" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> button <span class="op">=</span> DOM<span class="op">.</span><span class="fu">download</span>(</span>
<span id="cb176-1244"><a href="#cb176-1244" aria-hidden="true" tabindex="-1"></a>    downloadData<span class="op">,</span></span>
<span id="cb176-1245"><a href="#cb176-1245" aria-hidden="true" tabindex="-1"></a>    filename<span class="op">,</span></span>
<span id="cb176-1246"><a href="#cb176-1246" aria-hidden="true" tabindex="-1"></a>    <span class="vs">`Download </span><span class="sc">${</span>filename<span class="sc">}</span><span class="vs"> (~</span><span class="sc">${</span>size<span class="sc">}</span><span class="vs"> KB)`</span></span>
<span id="cb176-1247"><a href="#cb176-1247" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb176-1248"><a href="#cb176-1248" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> button<span class="op">;</span></span>
<span id="cb176-1249"><a href="#cb176-1249" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-1250"><a href="#cb176-1250" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">invert</span>(arr) {</span>
<span id="cb176-1251"><a href="#cb176-1251" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> invertDotd <span class="op">?</span> [<span class="op">...</span><span class="bu">Array</span>(<span class="dv">10</span>)<span class="op">.</span><span class="fu">keys</span>()]<span class="op">.</span><span class="fu">map</span>(n <span class="kw">=&gt;</span> <span class="op">!</span>arr<span class="op">.</span><span class="fu">includes</span>(n))<span class="op">.</span><span class="fu">map</span>((x<span class="op">,</span> i) <span class="kw">=&gt;</span> x <span class="op">?</span> i <span class="op">:</span> <span class="kw">null</span>)<span class="op">.</span><span class="fu">filter</span>(i <span class="kw">=&gt;</span> i <span class="op">!==</span> <span class="kw">null</span>) <span class="op">:</span> arr</span>
<span id="cb176-1252"><a href="#cb176-1252" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-1253"><a href="#cb176-1253" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/@chrispahm/toggle-switch-input-button</span></span>
<span id="cb176-1254"><a href="#cb176-1254" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">toggleSwitch</span>(options <span class="op">=</span> { <span class="dt">textOn</span><span class="op">:</span> <span class="st">'True'</span><span class="op">,</span> <span class="dt">textOff</span><span class="op">:</span> <span class="st">'False'</span> }) {</span>
<span id="cb176-1255"><a href="#cb176-1255" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> button <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;div class="button-switch""&gt;&lt;/div&gt;`</span><span class="op">;</span></span>
<span id="cb176-1256"><a href="#cb176-1256" aria-hidden="true" tabindex="-1"></a>  button<span class="op">.</span><span class="at">innerText</span> <span class="op">=</span> options<span class="op">.</span><span class="at">textOn</span><span class="op">;</span></span>
<span id="cb176-1257"><a href="#cb176-1257" aria-hidden="true" tabindex="-1"></a>  button<span class="op">.</span><span class="at">value</span> <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb176-1258"><a href="#cb176-1258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1259"><a href="#cb176-1259" aria-hidden="true" tabindex="-1"></a>  button<span class="op">.</span><span class="at">onclick</span> <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb176-1260"><a href="#cb176-1260" aria-hidden="true" tabindex="-1"></a>    button<span class="op">.</span><span class="at">value</span> <span class="op">=</span> <span class="op">!</span>button<span class="op">.</span><span class="at">value</span><span class="op">;</span></span>
<span id="cb176-1261"><a href="#cb176-1261" aria-hidden="true" tabindex="-1"></a>    button<span class="op">.</span><span class="at">innerText</span> <span class="op">=</span> button<span class="op">.</span><span class="at">value</span> <span class="op">?</span> options<span class="op">.</span><span class="at">textOn</span> <span class="op">:</span> options<span class="op">.</span><span class="at">textOff</span><span class="op">;</span></span>
<span id="cb176-1262"><a href="#cb176-1262" aria-hidden="true" tabindex="-1"></a>    button<span class="op">.</span><span class="fu">dispatchEvent</span>(<span class="kw">new</span> <span class="bu">CustomEvent</span>(<span class="st">"input"</span>))<span class="op">;</span></span>
<span id="cb176-1263"><a href="#cb176-1263" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb176-1264"><a href="#cb176-1264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1265"><a href="#cb176-1265" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addButtonStyle</span>()</span>
<span id="cb176-1266"><a href="#cb176-1266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1267"><a href="#cb176-1267" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> button<span class="op">;</span></span>
<span id="cb176-1268"><a href="#cb176-1268" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-1269"><a href="#cb176-1269" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/@chrispahm/toggle-switch-input-button</span></span>
<span id="cb176-1270"><a href="#cb176-1270" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">addButtonStyle</span>() {</span>
<span id="cb176-1271"><a href="#cb176-1271" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> el <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">'style'</span>)<span class="op">;</span></span>
<span id="cb176-1272"><a href="#cb176-1272" aria-hidden="true" tabindex="-1"></a>  el<span class="op">.</span><span class="fu">setAttribute</span>(<span class="st">'type'</span><span class="op">,</span> <span class="st">'text/css'</span>)<span class="op">;</span></span>
<span id="cb176-1273"><a href="#cb176-1273" aria-hidden="true" tabindex="-1"></a>  <span class="bu">document</span><span class="op">.</span><span class="at">head</span><span class="op">.</span><span class="fu">appendChild</span>(el)<span class="op">;</span></span>
<span id="cb176-1274"><a href="#cb176-1274" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> sheet <span class="op">=</span> el<span class="op">.</span><span class="at">sheet</span><span class="op">;</span></span>
<span id="cb176-1275"><a href="#cb176-1275" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">addRule</span>(rule) {</span>
<span id="cb176-1276"><a href="#cb176-1276" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span> {</span>
<span id="cb176-1277"><a href="#cb176-1277" aria-hidden="true" tabindex="-1"></a>      sheet<span class="op">.</span><span class="fu">insertRule</span>(rule<span class="op">,</span> sheet<span class="op">.</span><span class="at">cssRules</span><span class="op">.</span><span class="at">length</span>)<span class="op">;</span></span>
<span id="cb176-1278"><a href="#cb176-1278" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">catch</span> (e) {</span>
<span id="cb176-1279"><a href="#cb176-1279" aria-hidden="true" tabindex="-1"></a>      <span class="bu">console</span><span class="op">.</span><span class="fu">warn</span>(<span class="st">'Error inserting rule'</span><span class="op">,</span> rule<span class="op">,</span> e)<span class="op">;</span></span>
<span id="cb176-1280"><a href="#cb176-1280" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb176-1281"><a href="#cb176-1281" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb176-1282"><a href="#cb176-1282" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addRule</span>(</span>
<span id="cb176-1283"><a href="#cb176-1283" aria-hidden="true" tabindex="-1"></a>    <span class="st">'.button-switch { -webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;display: inline-block;-webkit-border-radius: 2px;-moz-border-radius: 2px;border-radius: 2px;background-color: #EFEFEF;padding: 0px 7px 0px 7px;text-align: center;border: 1px solid grey;width: auto;color: #1c1c1c;font-size: 13px;font-family: sans-serif;text-decoration: none; }'</span></span>
<span id="cb176-1284"><a href="#cb176-1284" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb176-1285"><a href="#cb176-1285" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addRule</span>(</span>
<span id="cb176-1286"><a href="#cb176-1286" aria-hidden="true" tabindex="-1"></a>    <span class="st">'.button-switch:hover { background-color: #E5E5E5;border: 1px solid #454545; }'</span></span>
<span id="cb176-1287"><a href="#cb176-1287" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb176-1288"><a href="#cb176-1288" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addRule</span>(</span>
<span id="cb176-1289"><a href="#cb176-1289" aria-hidden="true" tabindex="-1"></a>    <span class="st">'.button-switch:active { background-color: #f5f5f5;border: 1px solid grey; }'</span></span>
<span id="cb176-1290"><a href="#cb176-1290" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb176-1291"><a href="#cb176-1291" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-1292"><a href="#cb176-1292" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">setSpreadDotd</span>(dotd) {</span>
<span id="cb176-1293"><a href="#cb176-1293" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> dotdLength <span class="op">=</span> dotd<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb176-1294"><a href="#cb176-1294" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (dotdLength <span class="op">===</span> <span class="dv">10</span>) {<span class="cf">return</span> <span class="st">"&gt;"</span>}</span>
<span id="cb176-1295"><a href="#cb176-1295" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (dotdLength <span class="op">===</span> <span class="dv">0</span>) {<span class="cf">return</span> <span class="st">"&gt;0"</span>}</span>
<span id="cb176-1296"><a href="#cb176-1296" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (dotdLength <span class="op">===</span> <span class="dv">1</span>) {<span class="cf">return</span> <span class="vs">`</span><span class="sc">${</span>dotd[<span class="dv">0</span>]<span class="sc">}</span><span class="vs">&gt;&gt;1&gt;9`</span>}</span>
<span id="cb176-1297"><a href="#cb176-1297" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> steps <span class="op">=</span> dotd<span class="op">.</span><span class="fu">map</span>((x<span class="op">,</span> i) <span class="kw">=&gt;</span> dotd[i <span class="op">+</span> <span class="dv">1</span>] <span class="op">-</span> x)</span>
<span id="cb176-1298"><a href="#cb176-1298" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">filter</span>(i <span class="kw">=&gt;</span> <span class="op">!</span><span class="pp">isNaN</span>(i))<span class="op">,</span></span>
<span id="cb176-1299"><a href="#cb176-1299" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb176-1300"><a href="#cb176-1300" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> split <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb176-1301"><a href="#cb176-1301" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (<span class="kw">const</span> step <span class="kw">of</span> steps) {</span>
<span id="cb176-1302"><a href="#cb176-1302" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (step <span class="op">!==</span> <span class="dv">1</span>) {</span>
<span id="cb176-1303"><a href="#cb176-1303" aria-hidden="true" tabindex="-1"></a>       result<span class="op">.</span><span class="fu">push</span>([split<span class="op">,</span> step <span class="op">-</span> <span class="dv">1</span>])</span>
<span id="cb176-1304"><a href="#cb176-1304" aria-hidden="true" tabindex="-1"></a>       split <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb176-1305"><a href="#cb176-1305" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb176-1306"><a href="#cb176-1306" aria-hidden="true" tabindex="-1"></a>      split <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb176-1307"><a href="#cb176-1307" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb176-1308"><a href="#cb176-1308" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb176-1309"><a href="#cb176-1309" aria-hidden="true" tabindex="-1"></a>  result<span class="op">.</span><span class="fu">push</span>(split)</span>
<span id="cb176-1310"><a href="#cb176-1310" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> flat <span class="op">=</span> []<span class="op">.</span><span class="fu">concat</span>(<span class="op">...</span>result)<span class="op">,</span></span>
<span id="cb176-1311"><a href="#cb176-1311" aria-hidden="true" tabindex="-1"></a>    resultSum <span class="op">=</span> flat<span class="op">.</span><span class="fu">reduce</span>((a<span class="op">,</span> b) <span class="kw">=&gt;</span> a <span class="op">+</span> b<span class="op">,</span> <span class="dv">0</span>)<span class="op">,</span></span>
<span id="cb176-1312"><a href="#cb176-1312" aria-hidden="true" tabindex="-1"></a>    uniq <span class="op">=</span> [<span class="op">...</span><span class="kw">new</span> <span class="bu">Set</span>(flat)]<span class="op">;</span></span>
<span id="cb176-1313"><a href="#cb176-1313" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> [dotd[<span class="dv">0</span>] <span class="op">?</span> dotd[<span class="dv">0</span>] <span class="op">:</span> <span class="kw">null</span><span class="op">,</span> <span class="kw">null</span>]<span class="op">.</span><span class="fu">concat</span>(<span class="bu">JSON</span><span class="op">.</span><span class="fu">stringify</span>(uniq) <span class="op">===</span> <span class="st">"[1]"</span> <span class="op">?</span> [<span class="kw">null</span><span class="op">,</span> <span class="dv">1</span>] <span class="op">:</span></span>
<span id="cb176-1314"><a href="#cb176-1314" aria-hidden="true" tabindex="-1"></a>                               flat<span class="op">.</span><span class="fu">concat</span>(<span class="dv">10</span> <span class="op">-</span> resultSum)<span class="op">.</span><span class="fu">map</span>((x<span class="op">,</span> i) <span class="kw">=&gt;</span> i <span class="op">%</span> <span class="dv">2</span> <span class="op">===</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> x <span class="op">===</span> <span class="dv">1</span> <span class="op">?</span> <span class="kw">null</span> <span class="op">:</span> x))<span class="op">.</span><span class="fu">join</span>(<span class="st">"&gt;"</span>)</span>
<span id="cb176-1315"><a href="#cb176-1315" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-1316"><a href="#cb176-1316" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">setSliceDotd</span>(dotd) {</span>
<span id="cb176-1317"><a href="#cb176-1317" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> dotdLength <span class="op">=</span> dotd<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb176-1318"><a href="#cb176-1318" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (dotdLength <span class="op">===</span> <span class="dv">10</span>) {<span class="cf">return</span> <span class="st">":"</span>}</span>
<span id="cb176-1319"><a href="#cb176-1319" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (dotdLength <span class="op">===</span> <span class="dv">0</span>) {<span class="cf">return</span> <span class="st">":0"</span>}</span>
<span id="cb176-1320"><a href="#cb176-1320" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> steps <span class="op">=</span> dotd<span class="op">.</span><span class="fu">map</span>((x<span class="op">,</span> i) <span class="kw">=&gt;</span> dotd[i <span class="op">+</span> <span class="dv">1</span>] <span class="op">-</span> x)</span>
<span id="cb176-1321"><a href="#cb176-1321" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">filter</span>(i <span class="kw">=&gt;</span> <span class="op">!</span><span class="pp">isNaN</span>(i))<span class="op">,</span></span>
<span id="cb176-1322"><a href="#cb176-1322" aria-hidden="true" tabindex="-1"></a>    stepSum <span class="op">=</span> steps<span class="op">.</span><span class="fu">reduce</span>((a<span class="op">,</span> b) <span class="kw">=&gt;</span> a <span class="op">+</span> b<span class="op">,</span> <span class="dv">0</span>)<span class="op">,</span></span>
<span id="cb176-1323"><a href="#cb176-1323" aria-hidden="true" tabindex="-1"></a>    uniq <span class="op">=</span> [<span class="op">...</span><span class="kw">new</span> <span class="bu">Set</span>(steps<span class="op">.</span><span class="fu">concat</span>(<span class="dv">10</span> <span class="op">-</span> stepSum))]<span class="op">;</span></span>
<span id="cb176-1324"><a href="#cb176-1324" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> [dotd[<span class="dv">0</span>] <span class="op">?</span> dotd[<span class="dv">0</span>] <span class="op">:</span> <span class="kw">null</span><span class="op">,</span> <span class="kw">null</span>]<span class="op">.</span><span class="fu">concat</span>(uniq<span class="op">.</span><span class="at">length</span> <span class="op">===</span> <span class="dv">1</span> <span class="op">?</span> uniq <span class="op">:</span></span>
<span id="cb176-1325"><a href="#cb176-1325" aria-hidden="true" tabindex="-1"></a>                               steps<span class="op">.</span><span class="fu">concat</span>(<span class="dv">10</span> <span class="op">-</span> stepSum)<span class="op">.</span><span class="fu">map</span>(x <span class="kw">=&gt;</span> x <span class="op">===</span> <span class="dv">1</span> <span class="op">?</span> <span class="kw">null</span> <span class="op">:</span> x))<span class="op">.</span><span class="fu">join</span>(<span class="st">":"</span>)<span class="op">;</span></span>
<span id="cb176-1326"><a href="#cb176-1326" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-1327"><a href="#cb176-1327" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">encodeSlice</span>(<span class="op">...</span>args) {</span>
<span id="cb176-1328"><a href="#cb176-1328" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> args<span class="op">.</span><span class="fu">join</span>()<span class="op">.</span><span class="fu">replaceAll</span>(<span class="st">","</span><span class="op">,</span> <span class="st">":"</span>)</span>
<span id="cb176-1329"><a href="#cb176-1329" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-1330"><a href="#cb176-1330" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">decodeSlice</span>(s) {</span>
<span id="cb176-1331"><a href="#cb176-1331" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> [start<span class="op">,</span> stop<span class="op">,</span> <span class="op">...</span>steps] <span class="op">=</span> s<span class="op">.</span><span class="fu">split</span>(<span class="st">":"</span>)<span class="op">.</span><span class="fu">map</span>(i <span class="kw">=&gt;</span> i <span class="op">===</span> <span class="st">""</span> <span class="op">?</span> <span class="kw">null</span> <span class="op">:</span> <span class="bu">Number</span>(i))</span>
<span id="cb176-1332"><a href="#cb176-1332" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> step <span class="op">=</span> steps[<span class="dv">0</span>] <span class="op">==</span> <span class="kw">null</span> <span class="op">?</span> <span class="dv">1</span><span class="op">:</span> steps[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb176-1333"><a href="#cb176-1333" aria-hidden="true" tabindex="-1"></a>  start <span class="op">=</span> start <span class="op">==</span> <span class="kw">null</span> <span class="op">&amp;&amp;</span> step <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">?</span> <span class="dv">0</span> <span class="op">:</span> start <span class="op">==</span> <span class="kw">null</span> <span class="op">&amp;&amp;</span> step <span class="op">&lt;</span> <span class="dv">0</span> <span class="op">?</span> <span class="dv">365</span> <span class="op">:</span> start<span class="op">;</span></span>
<span id="cb176-1334"><a href="#cb176-1334" aria-hidden="true" tabindex="-1"></a>  stop <span class="op">=</span> stop <span class="op">==</span> <span class="kw">null</span> <span class="op">&amp;&amp;</span> step <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">?</span> <span class="dv">366</span> <span class="op">:</span> stop<span class="op">;</span></span>
<span id="cb176-1335"><a href="#cb176-1335" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> [start<span class="op">,</span> stop<span class="op">,</span> step]</span>
<span id="cb176-1336"><a href="#cb176-1336" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-1337"><a href="#cb176-1337" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">decodeSpread</span>(spread) {</span>
<span id="cb176-1338"><a href="#cb176-1338" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> spread<span class="op">.</span><span class="fu">replace</span>(<span class="ss">/</span><span class="sc">^</span><span class="ss">&lt;/</span><span class="op">,</span> <span class="st">"366&lt;"</span>)<span class="op">.</span><span class="fu">replace</span>(<span class="ss">/</span><span class="sc">^</span><span class="ss">&gt;/</span><span class="op">,</span> <span class="st">"0&gt;"</span>)</span>
<span id="cb176-1339"><a href="#cb176-1339" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">split</span>(<span class="ss">/</span><span class="sc">(?</span><span class="ss">=^</span><span class="sc">\d|</span><span class="ss">&lt;</span><span class="sc">|</span><span class="ss">&gt;</span><span class="sc">)</span><span class="ss">/</span>)<span class="op">.</span><span class="fu">map</span>(s <span class="kw">=&gt;</span> s<span class="op">.</span><span class="fu">replace</span>(<span class="st">"&lt;"</span><span class="op">,</span> <span class="st">"-"</span>)</span>
<span id="cb176-1340"><a href="#cb176-1340" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">replace</span>(<span class="st">"&gt;"</span><span class="op">,</span> <span class="st">""</span>))<span class="op">.</span><span class="fu">map</span>(s <span class="kw">=&gt;</span> s <span class="op">===</span> <span class="st">""</span> <span class="op">||</span> <span class="pp">isNaN</span>(s) <span class="op">?</span> <span class="kw">null</span> <span class="op">:</span> <span class="bu">Number</span>(s))</span>
<span id="cb176-1341"><a href="#cb176-1341" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-1342"><a href="#cb176-1342" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">encodeSpread</span>(args) {</span>
<span id="cb176-1343"><a href="#cb176-1343" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> args<span class="op">.</span><span class="fu">map</span>(a <span class="kw">=&gt;</span> <span class="pp">isNaN</span>(a) <span class="op">?</span> <span class="kw">null</span> <span class="op">:</span> a)<span class="op">.</span><span class="fu">join</span>(<span class="st">"&gt;"</span>)<span class="op">.</span><span class="fu">replace</span>(<span class="st">"&gt;-"</span><span class="op">,</span> <span class="st">"&lt;"</span>)</span>
<span id="cb176-1344"><a href="#cb176-1344" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-1345"><a href="#cb176-1345" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">slice</span>(self<span class="op">,</span> start<span class="op">,</span> stop<span class="op">,</span> steps<span class="op">,</span> <span class="op">...</span>args) {</span>
<span id="cb176-1346"><a href="#cb176-1346" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> len <span class="op">=</span> self<span class="op">.</span><span class="at">length</span><span class="op">,</span> result <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb176-1347"><a href="#cb176-1347" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (steps <span class="op">===</span> <span class="dv">0</span> <span class="op">||</span> len <span class="op">===</span> <span class="dv">0</span>) { <span class="cf">return</span> result }<span class="op">;</span></span>
<span id="cb176-1348"><a href="#cb176-1348" aria-hidden="true" tabindex="-1"></a>  steps <span class="op">=</span> (<span class="op">!</span>steps <span class="op">||</span> steps<span class="op">.</span><span class="at">length</span> <span class="op">===</span> <span class="dv">0</span> <span class="op">?</span> [<span class="dv">1</span>] <span class="op">:</span></span>
<span id="cb176-1349"><a href="#cb176-1349" aria-hidden="true" tabindex="-1"></a>    <span class="kw">typeof</span> steps <span class="op">===</span> <span class="st">"number"</span> <span class="op">?</span> [steps] <span class="op">:</span></span>
<span id="cb176-1350"><a href="#cb176-1350" aria-hidden="true" tabindex="-1"></a>    <span class="kw">typeof</span> steps <span class="op">===</span> <span class="st">"string"</span> <span class="op">?</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>(steps<span class="op">,</span> <span class="bu">Number</span>) <span class="op">:</span></span>
<span id="cb176-1351"><a href="#cb176-1351" aria-hidden="true" tabindex="-1"></a>    steps)<span class="op">.</span><span class="fu">concat</span>(args<span class="op">.</span><span class="fu">map</span>(i <span class="kw">=&gt;</span> i <span class="op">==</span> <span class="kw">null</span> <span class="op">?</span> <span class="dv">1</span> <span class="op">:</span> i))<span class="op">;</span></span>
<span id="cb176-1352"><a href="#cb176-1352" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> stepCount <span class="op">=</span> steps<span class="op">.</span><span class="at">length</span><span class="op">,</span></span>
<span id="cb176-1353"><a href="#cb176-1353" aria-hidden="true" tabindex="-1"></a>    stepSum <span class="op">=</span> steps<span class="op">.</span><span class="fu">reduce</span>((a<span class="op">,</span> b) <span class="kw">=&gt;</span> a <span class="op">+</span> b<span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb176-1354"><a href="#cb176-1354" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (stepSum <span class="op">===</span> <span class="dv">0</span>) { <span class="cf">return</span> result }<span class="op">;</span></span>
<span id="cb176-1355"><a href="#cb176-1355" aria-hidden="true" tabindex="-1"></a>  start <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(</span>
<span id="cb176-1356"><a href="#cb176-1356" aria-hidden="true" tabindex="-1"></a>    start <span class="op">==</span> <span class="kw">null</span> <span class="op">&amp;&amp;</span> stepSum <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">?</span> <span class="dv">0</span> <span class="op">:</span></span>
<span id="cb176-1357"><a href="#cb176-1357" aria-hidden="true" tabindex="-1"></a>    start <span class="op">==</span> <span class="kw">null</span> <span class="op">&amp;&amp;</span> stepSum <span class="op">&lt;</span> <span class="dv">0</span> <span class="op">?</span> len <span class="op">-</span> <span class="dv">1</span> <span class="op">:</span></span>
<span id="cb176-1358"><a href="#cb176-1358" aria-hidden="true" tabindex="-1"></a>    start <span class="op">&gt;=</span> len <span class="op">?</span> len <span class="op">-</span> <span class="dv">1</span> <span class="op">:</span></span>
<span id="cb176-1359"><a href="#cb176-1359" aria-hidden="true" tabindex="-1"></a>    start <span class="op">&lt;</span> <span class="dv">0</span> <span class="op">?</span> start <span class="op">+</span> len <span class="op">:</span></span>
<span id="cb176-1360"><a href="#cb176-1360" aria-hidden="true" tabindex="-1"></a>    start<span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb176-1361"><a href="#cb176-1361" aria-hidden="true" tabindex="-1"></a>  stop <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(</span>
<span id="cb176-1362"><a href="#cb176-1362" aria-hidden="true" tabindex="-1"></a>    stop <span class="op">==</span> <span class="kw">null</span> <span class="op">&amp;&amp;</span> stepSum <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">?</span> len <span class="op">:</span></span>
<span id="cb176-1363"><a href="#cb176-1363" aria-hidden="true" tabindex="-1"></a>    stop <span class="op">==</span> <span class="kw">null</span> <span class="op">&amp;&amp;</span> stepSum <span class="op">&lt;</span> <span class="dv">0</span> <span class="op">?</span> <span class="op">-</span><span class="dv">1</span> <span class="op">:</span></span>
<span id="cb176-1364"><a href="#cb176-1364" aria-hidden="true" tabindex="-1"></a>    stop <span class="op">&gt;=</span> len <span class="op">?</span> len <span class="op">:</span></span>
<span id="cb176-1365"><a href="#cb176-1365" aria-hidden="true" tabindex="-1"></a>    stop <span class="op">&lt;</span> <span class="dv">0</span> <span class="op">?</span> stop <span class="op">+</span> len <span class="op">:</span></span>
<span id="cb176-1366"><a href="#cb176-1366" aria-hidden="true" tabindex="-1"></a>    stop<span class="op">,</span> <span class="op">-</span><span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb176-1367"><a href="#cb176-1367" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (</span>
<span id="cb176-1368"><a href="#cb176-1368" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> i <span class="op">=</span> start<span class="op">,</span> counter <span class="op">=</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb176-1369"><a href="#cb176-1369" aria-hidden="true" tabindex="-1"></a>    stepSum <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">?</span> i <span class="op">&lt;</span> stop <span class="op">:</span> i <span class="op">&gt;</span> stop<span class="op">;</span></span>
<span id="cb176-1370"><a href="#cb176-1370" aria-hidden="true" tabindex="-1"></a>    i <span class="op">+=</span> steps[counter]</span>
<span id="cb176-1371"><a href="#cb176-1371" aria-hidden="true" tabindex="-1"></a>  ) {</span>
<span id="cb176-1372"><a href="#cb176-1372" aria-hidden="true" tabindex="-1"></a>    result<span class="op">.</span><span class="fu">push</span>(self[i])<span class="op">;</span></span>
<span id="cb176-1373"><a href="#cb176-1373" aria-hidden="true" tabindex="-1"></a>    counter <span class="op">=</span> (counter <span class="op">+</span> <span class="dv">1</span>) <span class="op">%</span> stepCount<span class="op">;</span></span>
<span id="cb176-1374"><a href="#cb176-1374" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb176-1375"><a href="#cb176-1375" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb176-1376"><a href="#cb176-1376" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-1377"><a href="#cb176-1377" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">spread</span>(self<span class="op">,</span> startOrStop<span class="op">,</span> span<span class="op">,</span> splitsAndSpaces<span class="op">,</span> <span class="op">...</span>args) {</span>
<span id="cb176-1378"><a href="#cb176-1378" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> len <span class="op">=</span> self<span class="op">.</span><span class="at">length</span><span class="op">,</span> result <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb176-1379"><a href="#cb176-1379" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (span <span class="op">===</span> <span class="dv">0</span> <span class="op">||</span> len <span class="op">===</span> <span class="dv">0</span>) { <span class="cf">return</span> result }<span class="op">;</span></span>
<span id="cb176-1380"><a href="#cb176-1380" aria-hidden="true" tabindex="-1"></a>  splitsAndSpaces <span class="op">=</span> (<span class="op">!</span>splitsAndSpaces <span class="op">||</span> splitsAndSpaces<span class="op">.</span><span class="at">length</span> <span class="op">===</span> <span class="dv">0</span> <span class="op">?</span> [<span class="dv">1</span>] <span class="op">:</span></span>
<span id="cb176-1381"><a href="#cb176-1381" aria-hidden="true" tabindex="-1"></a>    <span class="kw">typeof</span> splitsAndSpaces <span class="op">===</span> <span class="st">"number"</span> <span class="op">?</span> [splitsAndSpaces] <span class="op">:</span></span>
<span id="cb176-1382"><a href="#cb176-1382" aria-hidden="true" tabindex="-1"></a>    <span class="kw">typeof</span> splitsAndSpaces <span class="op">===</span> <span class="st">"string"</span> <span class="op">?</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>(splitsAndSpaces<span class="op">,</span> <span class="bu">Number</span>) <span class="op">:</span></span>
<span id="cb176-1383"><a href="#cb176-1383" aria-hidden="true" tabindex="-1"></a>    splitsAndSpaces)<span class="op">.</span><span class="fu">concat</span>(args<span class="op">.</span><span class="fu">map</span>(i <span class="kw">=&gt;</span> i <span class="op">==</span> <span class="kw">null</span> <span class="op">?</span> <span class="dv">1</span> <span class="op">:</span> i))<span class="op">;</span></span>
<span id="cb176-1384"><a href="#cb176-1384" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> splitCount <span class="op">=</span> splitsAndSpaces<span class="op">.</span><span class="at">length</span><span class="op">,</span></span>
<span id="cb176-1385"><a href="#cb176-1385" aria-hidden="true" tabindex="-1"></a>    splitSpaceSum <span class="op">=</span> splitsAndSpaces<span class="op">.</span><span class="fu">reduce</span>((a<span class="op">,</span> b) <span class="kw">=&gt;</span> a <span class="op">+</span> b<span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb176-1386"><a href="#cb176-1386" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (splitSpaceSum <span class="op">&lt;=</span> <span class="dv">0</span>) { <span class="cf">return</span> result }<span class="op">;</span></span>
<span id="cb176-1387"><a href="#cb176-1387" aria-hidden="true" tabindex="-1"></a>  startOrStop <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(</span>
<span id="cb176-1388"><a href="#cb176-1388" aria-hidden="true" tabindex="-1"></a>    startOrStop <span class="op">==</span> <span class="kw">null</span> <span class="op">&amp;&amp;</span> span <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">||</span> startOrStop <span class="op">==</span> <span class="kw">null</span> <span class="op">&amp;&amp;</span> span <span class="op">==</span> <span class="kw">null</span> <span class="op">?</span> <span class="dv">0</span> <span class="op">:</span></span>
<span id="cb176-1389"><a href="#cb176-1389" aria-hidden="true" tabindex="-1"></a>    startOrStop <span class="op">==</span> <span class="kw">null</span> <span class="op">||</span> startOrStop <span class="op">&gt;</span> len <span class="op">&amp;&amp;</span> span <span class="op">&lt;</span> <span class="dv">0</span> <span class="op">?</span> len <span class="op">:</span></span>
<span id="cb176-1390"><a href="#cb176-1390" aria-hidden="true" tabindex="-1"></a>    startOrStop <span class="op">&lt;</span> <span class="dv">0</span> <span class="op">?</span> startOrStop <span class="op">+</span> len <span class="op">:</span></span>
<span id="cb176-1391"><a href="#cb176-1391" aria-hidden="true" tabindex="-1"></a>    startOrStop<span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb176-1392"><a href="#cb176-1392" aria-hidden="true" tabindex="-1"></a>  span <span class="op">=</span> span <span class="op">==</span> <span class="kw">null</span> <span class="op">||</span> startOrStop <span class="op">+</span> span <span class="op">&gt;</span> len <span class="op">?</span> len <span class="op">-</span> startOrStop <span class="op">:</span></span>
<span id="cb176-1393"><a href="#cb176-1393" aria-hidden="true" tabindex="-1"></a>    startOrStop <span class="op">+</span> span <span class="op">&lt;</span> <span class="dv">0</span> <span class="op">?</span> <span class="op">-</span>startOrStop<span class="op">:</span> span<span class="op">;</span></span>
<span id="cb176-1394"><a href="#cb176-1394" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> start <span class="op">=</span> span <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">?</span> startOrStop <span class="op">:</span> startOrStop <span class="op">+</span> span<span class="op">,</span></span>
<span id="cb176-1395"><a href="#cb176-1395" aria-hidden="true" tabindex="-1"></a>    stop <span class="op">=</span> span <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">?</span> startOrStop <span class="op">+</span> span <span class="op">:</span> startOrStop<span class="op">;</span></span>
<span id="cb176-1396"><a href="#cb176-1396" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> start<span class="op">,</span> c <span class="op">=</span> <span class="op">-</span><span class="dv">1</span><span class="op">,</span> arr <span class="op">=</span> []<span class="op">;</span> i <span class="op">&lt;</span> stop<span class="op">;</span> i <span class="op">+=</span> splitsAndSpaces[c]) {</span>
<span id="cb176-1397"><a href="#cb176-1397" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> ((c <span class="op">=</span> (c <span class="op">+</span> <span class="dv">1</span>) <span class="op">%</span> splitCount) <span class="op">%</span> <span class="dv">2</span> <span class="op">===</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> i <span class="op">+</span> splitsAndSpaces[c] <span class="op">&lt;=</span> stop) {</span>
<span id="cb176-1398"><a href="#cb176-1398" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> ((arr <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>({<span class="dt">length</span><span class="op">:</span> splitsAndSpaces[c]}<span class="op">,</span> (_<span class="op">,</span> j) <span class="kw">=&gt;</span> j <span class="op">+</span> i)<span class="op">.</span><span class="fu">map</span>(</span>
<span id="cb176-1399"><a href="#cb176-1399" aria-hidden="true" tabindex="-1"></a>        index <span class="kw">=&gt;</span> self[index])<span class="op">.</span><span class="fu">filter</span>(item <span class="kw">=&gt;</span> item <span class="op">!==</span> <span class="kw">undefined</span>)</span>
<span id="cb176-1400"><a href="#cb176-1400" aria-hidden="true" tabindex="-1"></a>          )<span class="op">.</span><span class="at">length</span> <span class="op">==</span> splitsAndSpaces[c]) { result<span class="op">.</span><span class="fu">push</span>(arr) }</span>
<span id="cb176-1401"><a href="#cb176-1401" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb176-1402"><a href="#cb176-1402" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb176-1403"><a href="#cb176-1403" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb176-1404"><a href="#cb176-1404" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-1405"><a href="#cb176-1405" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb176-1406"><a href="#cb176-1406" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1407"><a href="#cb176-1407" aria-hidden="true" tabindex="-1"></a><span class="fu">##### Variables {.appendix}</span></span>
<span id="cb176-1408"><a href="#cb176-1408" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1411"><a href="#cb176-1411" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb176-1412"><a href="#cb176-1412" aria-hidden="true" tabindex="-1"></a><span class="co">//| output: all</span></span>
<span id="cb176-1413"><a href="#cb176-1413" aria-hidden="true" tabindex="-1"></a>nested <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>({<span class="dt">length</span><span class="op">:</span> intervals<span class="op">.</span><span class="at">length</span>}<span class="op">,</span> (_<span class="op">,</span> i) <span class="kw">=&gt;</span> ([</span>
<span id="cb176-1414"><a href="#cb176-1414" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb176-1415"><a href="#cb176-1415" aria-hidden="true" tabindex="-1"></a>  <span class="dt">label</span><span class="op">:</span> <span class="vs">`</span><span class="sc">${</span>i<span class="sc">}</span><span class="vs"> or </span><span class="sc">${</span>i<span class="op">+</span><span class="dv">5</span><span class="sc">}</span><span class="vs">`</span><span class="op">,</span></span>
<span id="cb176-1416"><a href="#cb176-1416" aria-hidden="true" tabindex="-1"></a>  <span class="dt">duration</span><span class="op">:</span> intervals[i][<span class="dv">1</span>] <span class="op">!==</span> intervals[i][<span class="dv">0</span>] <span class="op">?</span> intervals[i][<span class="dv">0</span>] <span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb176-1417"><a href="#cb176-1417" aria-hidden="true" tabindex="-1"></a>  <span class="dt">group</span><span class="op">:</span> <span class="st">"Rest"</span></span>
<span id="cb176-1418"><a href="#cb176-1418" aria-hidden="true" tabindex="-1"></a>}<span class="op">,</span></span>
<span id="cb176-1419"><a href="#cb176-1419" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb176-1420"><a href="#cb176-1420" aria-hidden="true" tabindex="-1"></a>  <span class="dt">label</span><span class="op">:</span> <span class="vs">`</span><span class="sc">${</span>i<span class="sc">}</span><span class="vs"> or </span><span class="sc">${</span>i<span class="op">+</span><span class="dv">5</span><span class="sc">}</span><span class="vs">`</span><span class="op">,</span></span>
<span id="cb176-1421"><a href="#cb176-1421" aria-hidden="true" tabindex="-1"></a>  <span class="dt">duration</span><span class="op">:</span> intervals[i][<span class="dv">1</span>]<span class="op">-</span>intervals[i][<span class="dv">0</span>]<span class="op">,</span></span>
<span id="cb176-1422"><a href="#cb176-1422" aria-hidden="true" tabindex="-1"></a>  <span class="dt">group</span><span class="op">:</span> <span class="st">"Work"</span></span>
<span id="cb176-1423"><a href="#cb176-1423" aria-hidden="true" tabindex="-1"></a>}<span class="op">,</span></span>
<span id="cb176-1424"><a href="#cb176-1424" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb176-1425"><a href="#cb176-1425" aria-hidden="true" tabindex="-1"></a>  <span class="dt">label</span><span class="op">:</span> <span class="vs">`</span><span class="sc">${</span>i<span class="sc">}</span><span class="vs"> or </span><span class="sc">${</span>i<span class="op">+</span><span class="dv">5</span><span class="sc">}</span><span class="vs">`</span><span class="op">,</span></span>
<span id="cb176-1426"><a href="#cb176-1426" aria-hidden="true" tabindex="-1"></a>  <span class="dt">duration</span><span class="op">:</span> intervals[i][<span class="dv">1</span>] <span class="op">!==</span> intervals[i][<span class="dv">0</span>] <span class="op">?</span> <span class="dv">1</span><span class="op">-</span>intervals[i][<span class="dv">1</span>] <span class="op">:</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb176-1427"><a href="#cb176-1427" aria-hidden="true" tabindex="-1"></a>  <span class="dt">group</span><span class="op">:</span> <span class="st">"Rest"</span></span>
<span id="cb176-1428"><a href="#cb176-1428" aria-hidden="true" tabindex="-1"></a>  }]))</span>
<span id="cb176-1429"><a href="#cb176-1429" aria-hidden="true" tabindex="-1"></a>durations <span class="op">=</span> []<span class="op">.</span><span class="fu">concat</span>(<span class="op">...</span>nested)</span>
<span id="cb176-1430"><a href="#cb176-1430" aria-hidden="true" tabindex="-1"></a>theme_Flat <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb176-1431"><a href="#cb176-1431" aria-hidden="true" tabindex="-1"></a><span class="vs">/* Options */</span></span>
<span id="cb176-1432"><a href="#cb176-1432" aria-hidden="true" tabindex="-1"></a><span class="vs">:scope {</span></span>
<span id="cb176-1433"><a href="#cb176-1433" aria-hidden="true" tabindex="-1"></a><span class="vs">  color: #3b99fc;</span></span>
<span id="cb176-1434"><a href="#cb176-1434" aria-hidden="true" tabindex="-1"></a><span class="vs">  width: 240px;</span></span>
<span id="cb176-1435"><a href="#cb176-1435" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb176-1436"><a href="#cb176-1436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1437"><a href="#cb176-1437" aria-hidden="true" tabindex="-1"></a><span class="vs">:scope {</span></span>
<span id="cb176-1438"><a href="#cb176-1438" aria-hidden="true" tabindex="-1"></a><span class="vs">  position: relative;</span></span>
<span id="cb176-1439"><a href="#cb176-1439" aria-hidden="true" tabindex="-1"></a><span class="vs">  display: inline-block;</span></span>
<span id="cb176-1440"><a href="#cb176-1440" aria-hidden="true" tabindex="-1"></a><span class="vs">  --thumb-size: 15px;</span></span>
<span id="cb176-1441"><a href="#cb176-1441" aria-hidden="true" tabindex="-1"></a><span class="vs">  --thumb-radius: calc(var(--thumb-size) / 2);</span></span>
<span id="cb176-1442"><a href="#cb176-1442" aria-hidden="true" tabindex="-1"></a><span class="vs">  padding: var(--thumb-radius) 0;</span></span>
<span id="cb176-1443"><a href="#cb176-1443" aria-hidden="true" tabindex="-1"></a><span class="vs">  margin: 2px;</span></span>
<span id="cb176-1444"><a href="#cb176-1444" aria-hidden="true" tabindex="-1"></a><span class="vs">  vertical-align: middle;</span></span>
<span id="cb176-1445"><a href="#cb176-1445" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb176-1446"><a href="#cb176-1446" aria-hidden="true" tabindex="-1"></a><span class="vs">:scope .range-track {</span></span>
<span id="cb176-1447"><a href="#cb176-1447" aria-hidden="true" tabindex="-1"></a><span class="vs">  box-sizing: border-box;</span></span>
<span id="cb176-1448"><a href="#cb176-1448" aria-hidden="true" tabindex="-1"></a><span class="vs">  position: relative;</span></span>
<span id="cb176-1449"><a href="#cb176-1449" aria-hidden="true" tabindex="-1"></a><span class="vs">  height: 7px;</span></span>
<span id="cb176-1450"><a href="#cb176-1450" aria-hidden="true" tabindex="-1"></a><span class="vs">  background-color: hsl(0, 0%, 80%);</span></span>
<span id="cb176-1451"><a href="#cb176-1451" aria-hidden="true" tabindex="-1"></a><span class="vs">  overflow: visible;</span></span>
<span id="cb176-1452"><a href="#cb176-1452" aria-hidden="true" tabindex="-1"></a><span class="vs">  border-radius: 4px;</span></span>
<span id="cb176-1453"><a href="#cb176-1453" aria-hidden="true" tabindex="-1"></a><span class="vs">  padding: 0 var(--thumb-radius);</span></span>
<span id="cb176-1454"><a href="#cb176-1454" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb176-1455"><a href="#cb176-1455" aria-hidden="true" tabindex="-1"></a><span class="vs">:scope .range-track-zone {</span></span>
<span id="cb176-1456"><a href="#cb176-1456" aria-hidden="true" tabindex="-1"></a><span class="vs">  box-sizing: border-box;</span></span>
<span id="cb176-1457"><a href="#cb176-1457" aria-hidden="true" tabindex="-1"></a><span class="vs">  position: relative;</span></span>
<span id="cb176-1458"><a href="#cb176-1458" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb176-1459"><a href="#cb176-1459" aria-hidden="true" tabindex="-1"></a><span class="vs">:scope .range-select {</span></span>
<span id="cb176-1460"><a href="#cb176-1460" aria-hidden="true" tabindex="-1"></a><span class="vs">  box-sizing: border-box;</span></span>
<span id="cb176-1461"><a href="#cb176-1461" aria-hidden="true" tabindex="-1"></a><span class="vs">  position: relative;</span></span>
<span id="cb176-1462"><a href="#cb176-1462" aria-hidden="true" tabindex="-1"></a><span class="vs">  left: var(--range-min);</span></span>
<span id="cb176-1463"><a href="#cb176-1463" aria-hidden="true" tabindex="-1"></a><span class="vs">  width: calc(var(--range-max) - var(--range-min));</span></span>
<span id="cb176-1464"><a href="#cb176-1464" aria-hidden="true" tabindex="-1"></a><span class="vs">  cursor: ew-resize;</span></span>
<span id="cb176-1465"><a href="#cb176-1465" aria-hidden="true" tabindex="-1"></a><span class="vs">  background: currentColor;</span></span>
<span id="cb176-1466"><a href="#cb176-1466" aria-hidden="true" tabindex="-1"></a><span class="vs">  height: 7px;</span></span>
<span id="cb176-1467"><a href="#cb176-1467" aria-hidden="true" tabindex="-1"></a><span class="vs">  border: inherit;</span></span>
<span id="cb176-1468"><a href="#cb176-1468" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb176-1469"><a href="#cb176-1469" aria-hidden="true" tabindex="-1"></a><span class="vs">/* Expands the hotspot area. */</span></span>
<span id="cb176-1470"><a href="#cb176-1470" aria-hidden="true" tabindex="-1"></a><span class="vs">:scope .range-select:before {</span></span>
<span id="cb176-1471"><a href="#cb176-1471" aria-hidden="true" tabindex="-1"></a><span class="vs">  content: "";</span></span>
<span id="cb176-1472"><a href="#cb176-1472" aria-hidden="true" tabindex="-1"></a><span class="vs">  position: absolute;</span></span>
<span id="cb176-1473"><a href="#cb176-1473" aria-hidden="true" tabindex="-1"></a><span class="vs">  width: 100%;</span></span>
<span id="cb176-1474"><a href="#cb176-1474" aria-hidden="true" tabindex="-1"></a><span class="vs">  height: var(--thumb-size);</span></span>
<span id="cb176-1475"><a href="#cb176-1475" aria-hidden="true" tabindex="-1"></a><span class="vs">  left: 0;</span></span>
<span id="cb176-1476"><a href="#cb176-1476" aria-hidden="true" tabindex="-1"></a><span class="vs">  top: calc(2px - var(--thumb-radius));</span></span>
<span id="cb176-1477"><a href="#cb176-1477" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb176-1478"><a href="#cb176-1478" aria-hidden="true" tabindex="-1"></a><span class="vs">:scope .range-select:focus,</span></span>
<span id="cb176-1479"><a href="#cb176-1479" aria-hidden="true" tabindex="-1"></a><span class="vs">:scope .thumb:focus {</span></span>
<span id="cb176-1480"><a href="#cb176-1480" aria-hidden="true" tabindex="-1"></a><span class="vs">  outline: none;</span></span>
<span id="cb176-1481"><a href="#cb176-1481" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb176-1482"><a href="#cb176-1482" aria-hidden="true" tabindex="-1"></a><span class="vs">:scope .thumb {</span></span>
<span id="cb176-1483"><a href="#cb176-1483" aria-hidden="true" tabindex="-1"></a><span class="vs">  box-sizing: border-box;</span></span>
<span id="cb176-1484"><a href="#cb176-1484" aria-hidden="true" tabindex="-1"></a><span class="vs">  position: absolute;</span></span>
<span id="cb176-1485"><a href="#cb176-1485" aria-hidden="true" tabindex="-1"></a><span class="vs">  width: var(--thumb-size);</span></span>
<span id="cb176-1486"><a href="#cb176-1486" aria-hidden="true" tabindex="-1"></a><span class="vs">  height: var(--thumb-size);</span></span>
<span id="cb176-1487"><a href="#cb176-1487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1488"><a href="#cb176-1488" aria-hidden="true" tabindex="-1"></a><span class="vs">  background: #fcfcfc;</span></span>
<span id="cb176-1489"><a href="#cb176-1489" aria-hidden="true" tabindex="-1"></a><span class="vs">  top: -4px;</span></span>
<span id="cb176-1490"><a href="#cb176-1490" aria-hidden="true" tabindex="-1"></a><span class="vs">  border-radius: 100%;</span></span>
<span id="cb176-1491"><a href="#cb176-1491" aria-hidden="true" tabindex="-1"></a><span class="vs">  border: 1px solid hsl(0,0%,55%);</span></span>
<span id="cb176-1492"><a href="#cb176-1492" aria-hidden="true" tabindex="-1"></a><span class="vs">  cursor: default;</span></span>
<span id="cb176-1493"><a href="#cb176-1493" aria-hidden="true" tabindex="-1"></a><span class="vs">  margin: 0;</span></span>
<span id="cb176-1494"><a href="#cb176-1494" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb176-1495"><a href="#cb176-1495" aria-hidden="true" tabindex="-1"></a><span class="vs">:scope .thumb:active {</span></span>
<span id="cb176-1496"><a href="#cb176-1496" aria-hidden="true" tabindex="-1"></a><span class="vs">  box-shadow: inset 0 var(--thumb-size) #0002;</span></span>
<span id="cb176-1497"><a href="#cb176-1497" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb176-1498"><a href="#cb176-1498" aria-hidden="true" tabindex="-1"></a><span class="vs">:scope .thumb-min {</span></span>
<span id="cb176-1499"><a href="#cb176-1499" aria-hidden="true" tabindex="-1"></a><span class="vs">  left: calc(-1px - var(--thumb-radius));</span></span>
<span id="cb176-1500"><a href="#cb176-1500" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb176-1501"><a href="#cb176-1501" aria-hidden="true" tabindex="-1"></a><span class="vs">:scope .thumb-max {</span></span>
<span id="cb176-1502"><a href="#cb176-1502" aria-hidden="true" tabindex="-1"></a><span class="vs">  right: calc(-1px - var(--thumb-radius));</span></span>
<span id="cb176-1503"><a href="#cb176-1503" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb176-1504"><a href="#cb176-1504" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span></span>
<span id="cb176-1505"><a href="#cb176-1505" aria-hidden="true" tabindex="-1"></a>schedules <span class="op">=</span> [</span>
<span id="cb176-1506"><a href="#cb176-1506" aria-hidden="true" tabindex="-1"></a>  [[<span class="op">.</span><span class="dv">2</span><span class="op">,</span> <span class="op">.</span><span class="dv">8</span>]<span class="op">,</span> [<span class="op">.</span><span class="dv">2</span><span class="op">,</span> <span class="op">.</span><span class="dv">8</span>]<span class="op">,</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span>]<span class="op">,</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span>]<span class="op">,</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span>]]<span class="op">,</span></span>
<span id="cb176-1507"><a href="#cb176-1507" aria-hidden="true" tabindex="-1"></a>  [[<span class="op">.</span><span class="dv">3</span><span class="op">,</span> <span class="op">.</span><span class="dv">7</span>]<span class="op">,</span> [<span class="op">.</span><span class="dv">3</span><span class="op">,</span> <span class="op">.</span><span class="dv">7</span>]<span class="op">,</span> [<span class="op">.</span><span class="dv">3</span><span class="op">,</span> <span class="op">.</span><span class="dv">7</span>]<span class="op">,</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span>]<span class="op">,</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span>]]<span class="op">,</span></span>
<span id="cb176-1508"><a href="#cb176-1508" aria-hidden="true" tabindex="-1"></a>  [[<span class="op">.</span><span class="dv">35</span><span class="op">,</span> <span class="op">.</span><span class="dv">65</span>]<span class="op">,</span> [<span class="op">.</span><span class="dv">35</span><span class="op">,</span> <span class="op">.</span><span class="dv">65</span>]<span class="op">,</span> [<span class="op">.</span><span class="dv">35</span><span class="op">,</span> <span class="op">.</span><span class="dv">65</span>]<span class="op">,</span> [<span class="op">.</span><span class="dv">35</span><span class="op">,</span> <span class="op">.</span><span class="dv">65</span>]<span class="op">,</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span>]]<span class="op">,</span></span>
<span id="cb176-1509"><a href="#cb176-1509" aria-hidden="true" tabindex="-1"></a>  [[<span class="op">.</span><span class="dv">38</span><span class="op">,</span> <span class="op">.</span><span class="dv">62</span>]<span class="op">,</span> [<span class="op">.</span><span class="dv">38</span><span class="op">,</span> <span class="op">.</span><span class="dv">62</span>]<span class="op">,</span> [<span class="op">.</span><span class="dv">38</span><span class="op">,</span> <span class="op">.</span><span class="dv">62</span>]<span class="op">,</span> [<span class="op">.</span><span class="dv">38</span><span class="op">,</span> <span class="op">.</span><span class="dv">62</span>]<span class="op">,</span> [<span class="op">.</span><span class="dv">38</span><span class="op">,</span> <span class="op">.</span><span class="dv">62</span>]]<span class="op">,</span></span>
<span id="cb176-1510"><a href="#cb176-1510" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb176-1511"><a href="#cb176-1511" aria-hidden="true" tabindex="-1"></a>dates <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>({<span class="dt">length</span><span class="op">:</span> <span class="dv">366</span>}<span class="op">,</span> (_<span class="op">,</span> i) <span class="kw">=&gt;</span> i<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">3</span><span class="op">,</span> <span class="st">"0"</span>))</span>
<span id="cb176-1512"><a href="#cb176-1512" aria-hidden="true" tabindex="-1"></a>sliceArray <span class="op">=</span> <span class="fu">slice</span>(dates<span class="op">,</span> <span class="op">...</span>sliceString<span class="op">.</span><span class="fu">split</span>(<span class="st">":"</span>)<span class="op">.</span><span class="fu">map</span>(i <span class="kw">=&gt;</span> i <span class="op">===</span> <span class="st">""</span> <span class="op">?</span> <span class="kw">null</span> <span class="op">:</span> <span class="bu">Number</span>(i)))</span>
<span id="cb176-1513"><a href="#cb176-1513" aria-hidden="true" tabindex="-1"></a>spreadArray <span class="op">=</span> []<span class="op">.</span><span class="fu">concat</span>(<span class="op">...</span><span class="fu">spread</span>(dates<span class="op">,</span> <span class="op">...</span><span class="fu">decodeSpread</span>(spreadString)))</span>
<span id="cb176-1514"><a href="#cb176-1514" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb176-1515"><a href="#cb176-1515" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1516"><a href="#cb176-1516" aria-hidden="true" tabindex="-1"></a><span class="fu">##### Set values {.appendix}</span></span>
<span id="cb176-1517"><a href="#cb176-1517" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1520"><a href="#cb176-1520" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb176-1521"><a href="#cb176-1521" aria-hidden="true" tabindex="-1"></a><span class="co">//| output: false</span></span>
<span id="cb176-1522"><a href="#cb176-1522" aria-hidden="true" tabindex="-1"></a><span class="kw">set</span>(viewof intervals<span class="op">,</span> schedules[schedule<span class="op">-</span><span class="dv">2</span>])</span>
<span id="cb176-1523"><a href="#cb176-1523" aria-hidden="true" tabindex="-1"></a><span class="kw">set</span>(viewof spreadString<span class="op">,</span> <span class="fu">setSpreadDotd</span>(spreadDotd))</span>
<span id="cb176-1524"><a href="#cb176-1524" aria-hidden="true" tabindex="-1"></a><span class="kw">set</span>(viewof sliceString<span class="op">,</span> <span class="fu">setSliceDotd</span>(sliceDotd))</span>
<span id="cb176-1525"><a href="#cb176-1525" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb176-1526"><a href="#cb176-1526" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (invertDotd <span class="op">?</span> <span class="op">!</span>sliceOrSpread <span class="op">:</span> sliceOrSpread) {</span>
<span id="cb176-1527"><a href="#cb176-1527" aria-hidden="true" tabindex="-1"></a>    <span class="kw">set</span>(viewof sliceDotd<span class="op">,</span> <span class="fu">invert</span>(togglePlot))</span>
<span id="cb176-1528"><a href="#cb176-1528" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb176-1529"><a href="#cb176-1529" aria-hidden="true" tabindex="-1"></a>    <span class="kw">set</span>(viewof spreadDotd<span class="op">,</span> <span class="fu">invert</span>(togglePlot))</span>
<span id="cb176-1530"><a href="#cb176-1530" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb176-1531"><a href="#cb176-1531" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb176-1532"><a href="#cb176-1532" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1533"><a href="#cb176-1533" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb176-1534"><a href="#cb176-1534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1535"><a href="#cb176-1535" aria-hidden="true" tabindex="-1"></a><span class="fu"># Basic concepts {#sec-basics}</span></span>
<span id="cb176-1536"><a href="#cb176-1536" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1537"><a href="#cb176-1537" aria-hidden="true" tabindex="-1"></a><span class="fu">## Fractions analogy {#sec-frac}</span></span>
<span id="cb176-1538"><a href="#cb176-1538" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1539"><a href="#cb176-1539" aria-hidden="true" tabindex="-1"></a>In the simplest terms, <span class="in">`Decalendar`</span> counts fractions of a year, while <span class="in">`Declock`</span> counts fractions of a day. The denominator for <span class="in">`Decalendar`</span> is the number of days in the year, and the <span class="in">`Declock`</span> denominator is $10^x$, where $x$ is the number of digits in the numerator. In both systems, only the numerator, not the denominator, is provided. In the context of <span class="in">`Decalendar`</span>, the numerator is the days that have passed in the year, while in the context of <span class="in">`Declock`</span>, the numerator is the parts of the day that have passed in the day.</span>
<span id="cb176-1540"><a href="#cb176-1540" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1541"><a href="#cb176-1541" aria-hidden="true" tabindex="-1"></a>To avoid any confusion between the two, we can say "Day 5" to mean the date when 5 days have passed this year or <span class="in">`Day`</span> <span class="in">`0`</span> to mean the first day-of-the-year (<span class="in">`doty`</span>). This is like the use of the term "day zero" in other contexts, such as epidemiology. The analogous term for times is <span class="in">`Dot`</span>. The word <span class="in">`Dot`</span> conveys that at its core <span class="in">`Declock`</span> is a system built on <span class="co">[</span><span class="ot">fractional days</span><span class="co">](https://en.wikipedia.org/wiki/Decimal_time#Fractional_days)</span> expressed as decimal numbers. The 5 in <span class="in">`Dot`</span> <span class="in">`5`</span> can be thought of as a number after a decimal (0.5) or a numerator (‚Åµ/‚ÇÅ‚ÇÄ), either way it means noon, the time when half the day has passed.</span>
<span id="cb176-1542"><a href="#cb176-1542" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1543"><a href="#cb176-1543" aria-hidden="true" tabindex="-1"></a><span class="fu">## Implied tolerance and duration {#sec-imp}</span></span>
<span id="cb176-1544"><a href="#cb176-1544" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1545"><a href="#cb176-1545" aria-hidden="true" tabindex="-1"></a>The analogy to decimals or fractions is important, because it explains why adding a zero at the end of a time does not change the time, only the implied tolerance of time points or the implied duration of time intervals. If <span class="in">`Dot`</span> <span class="in">`5`</span> is a time point, it has an implied tolerance of 5% of the day ($.5¬±.05$), because any time after <span class="in">`Dot`</span> <span class="in">`45`</span> and before <span class="in">`Dot`</span> <span class="in">`55`</span> ($[.45, .55)$) would round to <span class="in">`Dot`</span> <span class="in">`5`</span>. On the other hand, if <span class="in">`Dot`</span> <span class="in">`5`</span> is the start time for a time interval, that interval is implied to start at <span class="in">`Dot`</span> <span class="in">`5`</span> and end before <span class="in">`Dot`</span> <span class="in">`6`</span> ($[.5, .6)$) and thus have a duration of 10% of the day (<span class="in">`Dot`</span> <span class="in">`6`</span>-<span class="in">`Dot`</span> <span class="in">`5`</span>). Every additional digit we add decreases the implied tolerance and the implied duration 10-fold.</span>
<span id="cb176-1546"><a href="#cb176-1546" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1547"><a href="#cb176-1547" aria-hidden="true" tabindex="-1"></a>If we really want to insist on punctuality, we could include up to 5 digits in a time. Specifying times with more than 5 digits is possible, and may be useful for scientific or technical purposes, but it is analogous to providing <span class="co">[</span><span class="ot">extremely long GPS coordinates</span><span class="co">](https://xkcd.com/2170/)</span>; at some point the level of precision stops having relevance to daily life. If we want to strive for the highest level of precision possible, we can add the word "sharp" or the <span class="in">`#`</span> symbol to the time. Saying "5 Sharp" or writing <span class="in">`5#`</span> means as close as possible to noon. Times that include <span class="in">`#`</span> cannot have an implied duration. We can only add <span class="in">`#`</span> to a time, so there is no need say "Dot 5 Sharp" or write <span class="in">`.5#`</span>.</span>
<span id="cb176-1548"><a href="#cb176-1548" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1549"><a href="#cb176-1549" aria-hidden="true" tabindex="-1"></a><span class="fu">## Context clues {#sec-context}</span></span>
<span id="cb176-1550"><a href="#cb176-1550" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1551"><a href="#cb176-1551" aria-hidden="true" tabindex="-1"></a>Not saying "Day" or "Dot" in general is acceptable, because it is convenient and often the numbers make perfect sense in context. If someone says "let's have lunch at 5", it is clear that they are referring to noon (<span class="in">`Dot`</span> <span class="in">`5`</span>) and not the sixth <span class="in">`doty`</span> (<span class="in">`Day`</span> <span class="in">`5`</span>). Also, the number itself may provide a clue. Numbers greater than 365 could still be a <span class="in">`doty`</span>, but it would represent a day in an upcoming year, not the current year. The meaning of such dates depends on whether the current year is a common year (n=365) or a leap year (n=366). Saying "500" could mean <span class="in">`Day`</span> <span class="in">`134`</span> (if n=366) or <span class="in">`Day`</span> <span class="in">`135`</span> (if n=365) of the subsequent year, but it would most likely mean noon (<span class="in">`Dot`</span> <span class="in">`500`</span>).</span>
<span id="cb176-1552"><a href="#cb176-1552" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1553"><a href="#cb176-1553" aria-hidden="true" tabindex="-1"></a><span class="fu">## `Stamps` {#sec-stamp}</span></span>
<span id="cb176-1554"><a href="#cb176-1554" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1555"><a href="#cb176-1555" aria-hidden="true" tabindex="-1"></a>If a <span class="in">`Decalender`</span> date and a <span class="in">`Declock`</span> time are combined, they form a time <span class="in">`stamp`</span>. The date always goes before the time in any <span class="in">`stamp`</span>. When said together, the numbers "0" and "5" mean the first <span class="in">`doty`</span> (<span class="in">`Day`</span> <span class="in">`0`</span>) at noon (<span class="in">`Dot`</span> <span class="in">`5`</span>). In written form, this would be <span class="in">`000.5`</span>. This format is called <span class="in">`.y`</span>, which is read the same way as <span class="in">`doty`</span>, but emphasizes that the <span class="in">`.`</span> is used in a floating point decimal <span class="in">`doty`</span>. In other words, <span class="in">`doty`</span> can be used instead of "day of the year" in a sentence, whereas <span class="in">`.y`</span> indicates a <span class="in">`stamp`</span>, such as <span class="in">`000.5`</span>. Ideally, a <span class="in">`stamp`</span> will include all of the information needed to identify a singular point in time, and thus should include a year and time zone.</span>
<span id="cb176-1556"><a href="#cb176-1556" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1557"><a href="#cb176-1557" aria-hidden="true" tabindex="-1"></a><span class="fu">## Specific dates and times {#sec-specific}</span></span>
<span id="cb176-1558"><a href="#cb176-1558" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1559"><a href="#cb176-1559" aria-hidden="true" tabindex="-1"></a>The <span class="in">`stamp`</span> in @sec-stamp assumes that the year and time zone are known. A date without a year is like a time without a time zone, both depend on the context. Most likely, we are talking about the current year and the local time zone, but it may be unclear. Including a year allows us to pinpoint a specific day, instead of a day that could happen any year. Similarly, a time with a time zone occurs once every day, rather than once in every time zone per day. The <span class="in">`Day`</span> <span class="in">`306`</span> of 1969, would be written <span class="in">`1969+306`</span> and said "Year 1969 Day 306" or simply "1969 306", while midnight in <span class="in">`Zone`</span> <span class="in">`0`</span> would be written <span class="in">`.000+0`</span> and said "Dot 0 Zone 0", "0 Zone 0", or "0 0". Combined together, this date and time form the <span class="in">`stamp`</span> <span class="in">`1969+306.000+0`</span>.</span>
<span id="cb176-1560"><a href="#cb176-1560" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1561"><a href="#cb176-1561" aria-hidden="true" tabindex="-1"></a><span class="fu">## Negative numbers {#sec-neg}</span></span>
<span id="cb176-1562"><a href="#cb176-1562" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1563"><a href="#cb176-1563" aria-hidden="true" tabindex="-1"></a>Every component of <span class="in">`Decalender`</span> dates and <span class="in">`Declock`</span> times can be negative. A negative year is before 1 BCE (Before Common Era) and a negative time zone is West of <span class="in">`Zone`</span> <span class="in">`0`</span>. The year is usually provided without a sign, because most people rarely discuss years before 1 BCE, but numeric time zone offset must have a sign. Negative <span class="in">`doties`</span> work like <span class="co">[</span><span class="ot">zero-based indexes</span><span class="co">](https://en.wikipedia.org/wiki/Zero-based_numbering)</span> in <span class="co">[</span><span class="ot">computer programming</span><span class="co">](https://en.wikipedia.org/wiki/Zero-based_numbering#Computer_programming)</span> in that they label the days of the year from $-N$ to $-1$, where $N$ is the number of the days in the current year. The first <span class="in">`doty`</span> is indexed by both $0$ and $-N$, while the last <span class="in">`doty`</span> is indexed by both $-1$ and $N$.</span>
<span id="cb176-1564"><a href="#cb176-1564" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1565"><a href="#cb176-1565" aria-hidden="true" tabindex="-1"></a>In general, negative numbers show the number of parts that are left in the whole. A negative <span class="in">`doty`</span> shows how many days remain in the year and a negative time <span class="co">[</span><span class="ot">counts down</span><span class="co">](https://en.wikipedia.org/wiki/Countdown)</span> to the end of the day. To extend the fractions analogy in @sec-frac to negative numbers, the negative number added to the whole gives us the numerator of the positive fraction ($pos = N + neg$). Positive and negative numbers arrive at the same answer from opposite directions.</span>
<span id="cb176-1566"><a href="#cb176-1566" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1567"><a href="#cb176-1567" aria-hidden="true" tabindex="-1"></a>In certain contexts, the choice of using a negative number over a positive number may mean that we want to emphasize how much time is left instead of how much has passed. Even though <span class="in">`Dot`</span> <span class="in">`-1`</span> and <span class="in">`Dot`</span> <span class="in">`9`</span> are synonymous <span class="in">`Declock`</span> times, the former could highlight that there is only 1 tenth (‚Öí or .1) of the day remaining before midnight. <span class="in">`Dot`</span> <span class="in">`5`</span> and <span class="in">`Dot`</span> <span class="in">`-5`</span> both mean noon, like saying that a glass is half-empty or half-full.</span>
<span id="cb176-1568"><a href="#cb176-1568" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1569"><a href="#cb176-1569" aria-hidden="true" tabindex="-1"></a>The negative equivalent of <span class="in">`1969+306`</span>, the <span class="in">`deco`</span> date in @tbl-2x2, is <span class="in">`1970-059`</span>. This negative <span class="in">`deco`</span> date literally subtracts 59 days from the beginning of year 1970 to arrive at <span class="in">`Day`</span> <span class="in">`306`</span> of 1969. The year in negative <span class="in">`deco`</span> dates is always 1 greater than the year in the equivalent positive <span class="in">`deco`</span> date. Both <span class="in">`1969+306`</span> and <span class="in">`1970-059`</span> translate to January 1, 1970 in the Gregorian calendar. <span class="in">`Decalendar`</span> years are shifted by two months in relation to the Gregorian calendar years because <span class="in">`Decalendar`</span> years start on March 1.</span>
<span id="cb176-1570"><a href="#cb176-1570" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1571"><a href="#cb176-1571" aria-hidden="true" tabindex="-1"></a>This shift causes the Gregorian calendar year to be 1 greater than the year in the positive <span class="in">`deco`</span> dates during January and February and 1 less than the year in negative <span class="in">`deco`</span> dates during every other month. For example, the <span class="in">`Deco`</span> dates <span class="in">`1969+000`</span> and <span class="in">`1970-365`</span> are March 1, 1969 in the Gregorian calendar. Immediately after midnight on this date, the negative <span class="in">`doty`</span> will change from -365 to -364, while the positive <span class="in">`doty`</span> will remain at 0 At noon, the positive <span class="in">`deco`</span> date will be <span class="in">`1969+306.500`</span> and the negative <span class="in">`deco`</span> date will be <span class="in">`1970-058.500`</span>.</span>
<span id="cb176-1572"><a href="#cb176-1572" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1573"><a href="#cb176-1573" aria-hidden="true" tabindex="-1"></a><span class="fu">#### @tbl-2x2</span></span>
<span id="cb176-1574"><a href="#cb176-1574" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1575"><a href="#cb176-1575" aria-hidden="true" tabindex="-1"></a>::: {.callout-note collapse="false" title="Click to toggle table expansion" icon="false"}</span>
<span id="cb176-1576"><a href="#cb176-1576" aria-hidden="true" tabindex="-1"></a>|      | date     | timestamp      |</span>
<span id="cb176-1577"><a href="#cb176-1577" aria-hidden="true" tabindex="-1"></a>|------|----------|----------------|</span>
<span id="cb176-1578"><a href="#cb176-1578" aria-hidden="true" tabindex="-1"></a>| doty | 306      | 306.000+0      |</span>
<span id="cb176-1579"><a href="#cb176-1579" aria-hidden="true" tabindex="-1"></a>| deco | 1969+306 | 1969+306.000+0 |</span>
<span id="cb176-1580"><a href="#cb176-1580" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1581"><a href="#cb176-1581" aria-hidden="true" tabindex="-1"></a>: Comparison of <span class="in">`doty`</span> and <span class="in">`deco`</span> dates and timestamps {#tbl-2x2}</span>
<span id="cb176-1582"><a href="#cb176-1582" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-1583"><a href="#cb176-1583" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1584"><a href="#cb176-1584" aria-hidden="true" tabindex="-1"></a><span class="fu">## Units {#sec-unit}</span></span>
<span id="cb176-1585"><a href="#cb176-1585" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1586"><a href="#cb176-1586" aria-hidden="true" tabindex="-1"></a><span class="in">`Declock`</span> times often have three digits because this is the best level of precision for displaying time on clocks and watches. While 3 digits are often best, <span class="in">`Declock`</span> times can have any number of digits, depending on the desired precision level. <span class="in">`Declock`</span> provides names for extremely precise time units, but the most relevant units are within a few orders of magnitude from a day, which is the base unit of both <span class="in">`Declock`</span> and <span class="in">`Decalendar`</span>. Listing the units of each, as in @tbl-unit, highlights the relationship between the two:</span>
<span id="cb176-1587"><a href="#cb176-1587" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1588"><a href="#cb176-1588" aria-hidden="true" tabindex="-1"></a><span class="fu">#### @tbl-unit</span></span>
<span id="cb176-1589"><a href="#cb176-1589" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1590"><a href="#cb176-1590" aria-hidden="true" tabindex="-1"></a>::: {.callout-note collapse="true" title="Click to toggle table expansion" icon="false"}</span>
<span id="cb176-1591"><a href="#cb176-1591" aria-hidden="true" tabindex="-1"></a>| Quantity           | Name     | Symbol   | Formal Name         |</span>
<span id="cb176-1592"><a href="#cb176-1592" aria-hidden="true" tabindex="-1"></a>|--------------------|----------|----------|---------------------|</span>
<span id="cb176-1593"><a href="#cb176-1593" aria-hidden="true" tabindex="-1"></a>| $100$              | <span class="in">`hekt`</span>   | <span class="in">`œÅ`</span>      | <span class="in">`hectoday`</span>          |</span>
<span id="cb176-1594"><a href="#cb176-1594" aria-hidden="true" tabindex="-1"></a>| $91$               | <span class="in">`delt`</span>   | <span class="in">`Œ¥`</span>      | <span class="in">`deltakeraiayear`</span>   |</span>
<span id="cb176-1595"><a href="#cb176-1595" aria-hidden="true" tabindex="-1"></a>| $90$               | <span class="in">`qop`</span>    | <span class="in">`œü`</span>      | <span class="in">`qoppaday`</span>          |</span>
<span id="cb176-1596"><a href="#cb176-1596" aria-hidden="true" tabindex="-1"></a>| $80$               | <span class="in">`pi`</span>     | <span class="in">`œÄ`</span>      | <span class="in">`piday`</span>             |</span>
<span id="cb176-1597"><a href="#cb176-1597" aria-hidden="true" tabindex="-1"></a>| $73$               | <span class="in">`ep`</span>     | <span class="in">`Œµ`</span>      | <span class="in">`epsilonkeraiayear`</span> |</span>
<span id="cb176-1598"><a href="#cb176-1598" aria-hidden="true" tabindex="-1"></a>| $70$               | <span class="in">`om`</span>     | <span class="in">`Œø`</span>      | <span class="in">`omicronday`</span>        |</span>
<span id="cb176-1599"><a href="#cb176-1599" aria-hidden="true" tabindex="-1"></a>| $61$               | <span class="in">`wau`</span>    | <span class="in">`œõ`</span>      | <span class="in">`waukeraiayear`</span>     |</span>
<span id="cb176-1600"><a href="#cb176-1600" aria-hidden="true" tabindex="-1"></a>| $60$               | <span class="in">`xi`</span>     | <span class="in">`Œæ`</span>      | <span class="in">`xiday`</span>             |</span>
<span id="cb176-1601"><a href="#cb176-1601" aria-hidden="true" tabindex="-1"></a>| $50$               | <span class="in">`nu`</span>     | <span class="in">`ŒΩ`</span>      | <span class="in">`nuday`</span>             |</span>
<span id="cb176-1602"><a href="#cb176-1602" aria-hidden="true" tabindex="-1"></a>| $40$               | <span class="in">`mu`</span>     | <span class="in">`Œú`</span>      | <span class="in">`muday`</span>             |</span>
<span id="cb176-1603"><a href="#cb176-1603" aria-hidden="true" tabindex="-1"></a>| $30$               | <span class="in">`lam`</span>    | <span class="in">`Œª`</span>      | <span class="in">`lamdaday`</span>          |</span>
<span id="cb176-1604"><a href="#cb176-1604" aria-hidden="true" tabindex="-1"></a>| $20$               | <span class="in">`kap`</span>    | <span class="in">`Œ∫`</span>      | <span class="in">`kappaday`</span>          |</span>
<span id="cb176-1605"><a href="#cb176-1605" aria-hidden="true" tabindex="-1"></a>| $10$               | <span class="in">`dek`</span>    | <span class="in">`Œπ`</span>  Êó¨  | <span class="in">`decaday`</span>           |</span>
<span id="cb176-1606"><a href="#cb176-1606" aria-hidden="true" tabindex="-1"></a>| $1$                | <span class="in">`day`</span>    | <span class="in">`d`</span>, Êó•  | <span class="in">`day`</span>               |</span>
<span id="cb176-1607"><a href="#cb176-1607" aria-hidden="true" tabindex="-1"></a>| $10^{-1}$          | <span class="in">`dime`</span>   | <span class="in">`‚Öí`</span>      | <span class="in">`deciday`</span>           |</span>
<span id="cb176-1608"><a href="#cb176-1608" aria-hidden="true" tabindex="-1"></a>| $10^{-2}$          | <span class="in">`cent`</span>   | <span class="in">`¬¢`</span>, <span class="in">`%`</span> | <span class="in">`centiday`</span>          |</span>
<span id="cb176-1609"><a href="#cb176-1609" aria-hidden="true" tabindex="-1"></a>| $10^{-3}$          | <span class="in">`mil`</span>    | <span class="in">`m`</span>, <span class="in">`‚Ä∞`</span> | <span class="in">`milliday`</span>          |</span>
<span id="cb176-1610"><a href="#cb176-1610" aria-hidden="true" tabindex="-1"></a>| $2 \times 10^{-4}$ | <span class="in">`period`</span> | <span class="in">`.`</span>      | <span class="in">`didecimilliday`</span>    |</span>
<span id="cb176-1611"><a href="#cb176-1611" aria-hidden="true" tabindex="-1"></a>| $10^{-4}$          | <span class="in">`phrase`</span> | <span class="in">`‚ó†`</span>, <span class="in">`‚Ä±`</span> | <span class="in">`decimilliday`</span>      |</span>
<span id="cb176-1612"><a href="#cb176-1612" aria-hidden="true" tabindex="-1"></a>| $2 \times 10^{-5}$ | <span class="in">`bar`</span>    | <span class="in">`|`</span>      | <span class="in">`dicentimilliday`</span>   |</span>
<span id="cb176-1613"><a href="#cb176-1613" aria-hidden="true" tabindex="-1"></a>| $10^{-5}$          | <span class="in">`beat`</span>   | <span class="in">`‚ô´`</span>      | <span class="in">`centimilliday`</span>     |</span>
<span id="cb176-1614"><a href="#cb176-1614" aria-hidden="true" tabindex="-1"></a>| $10^{-6}$          | <span class="in">`mic`</span>    | <span class="in">`Œº`</span>      | <span class="in">`microday`</span>          |</span>
<span id="cb176-1615"><a href="#cb176-1615" aria-hidden="true" tabindex="-1"></a>| $10^{-7}$          | <span class="in">`liph`</span>   | <span class="in">`mÃë`</span>      | <span class="in">`decimicroday`</span>      |</span>
<span id="cb176-1616"><a href="#cb176-1616" aria-hidden="true" tabindex="-1"></a>| $10^{-8}$          | <span class="in">`lib`</span>    | <span class="in">`mÃà`</span>      | <span class="in">`centimicroday`</span>     |</span>
<span id="cb176-1617"><a href="#cb176-1617" aria-hidden="true" tabindex="-1"></a>| $10^{-9}$          | <span class="in">`nan`</span>    | <span class="in">`n`</span>      | <span class="in">`nanoday`</span>           |</span>
<span id="cb176-1618"><a href="#cb176-1618" aria-hidden="true" tabindex="-1"></a>| $10^{-10}$         | <span class="in">`roph`</span>   | <span class="in">`ŒºÃë`</span>      | <span class="in">`decinanoday`</span>       |</span>
<span id="cb176-1619"><a href="#cb176-1619" aria-hidden="true" tabindex="-1"></a>| $10^{-11}$         | <span class="in">`rob`</span>    | <span class="in">`¬µÃà`</span>      | <span class="in">`centinanoday`</span>      |</span>
<span id="cb176-1620"><a href="#cb176-1620" aria-hidden="true" tabindex="-1"></a>| $10^{-12}$         | <span class="in">`pic`</span>    | <span class="in">`p`</span>      | <span class="in">`picoday`</span>           |</span>
<span id="cb176-1621"><a href="#cb176-1621" aria-hidden="true" tabindex="-1"></a>| $10^{-13}$         | <span class="in">`noph`</span>   | <span class="in">`nÃë`</span>      | <span class="in">`decipicoday`</span>       |</span>
<span id="cb176-1622"><a href="#cb176-1622" aria-hidden="true" tabindex="-1"></a>| $10^{-14}$         | <span class="in">`nob`</span>    | <span class="in">`nÃà`</span>      | <span class="in">`centipicoday`</span>      |</span>
<span id="cb176-1623"><a href="#cb176-1623" aria-hidden="true" tabindex="-1"></a>| $10^{-15}$         | <span class="in">`femt`</span>   | <span class="in">`f`</span>      | <span class="in">`femtoday`</span>          |</span>
<span id="cb176-1624"><a href="#cb176-1624" aria-hidden="true" tabindex="-1"></a>| $10^{-16}$         | <span class="in">`coph`</span>   | <span class="in">`pÃë`</span>      | <span class="in">`decifemtoday`</span>      |</span>
<span id="cb176-1625"><a href="#cb176-1625" aria-hidden="true" tabindex="-1"></a>| $10^{-17}$         | <span class="in">`cob`</span>    | <span class="in">`pÃà`</span>      | <span class="in">`centifemtoday`</span>     |</span>
<span id="cb176-1626"><a href="#cb176-1626" aria-hidden="true" tabindex="-1"></a>| $10^{-18}$         | <span class="in">`att`</span>    | <span class="in">`a`</span>      | <span class="in">`attoday`</span>           |</span>
<span id="cb176-1627"><a href="#cb176-1627" aria-hidden="true" tabindex="-1"></a>| $10^{-19}$         | <span class="in">`foph`</span>   | <span class="in">`fÃë`</span>      | <span class="in">`deciattoday`</span>       |</span>
<span id="cb176-1628"><a href="#cb176-1628" aria-hidden="true" tabindex="-1"></a>| $10^{-20}$         | <span class="in">`fob`</span>    | <span class="in">`fÃà`</span>      | <span class="in">`centiattoday`</span>      |</span>
<span id="cb176-1629"><a href="#cb176-1629" aria-hidden="true" tabindex="-1"></a>| $10^{-21}$         | <span class="in">`zept`</span>   | <span class="in">`z`</span>      | <span class="in">`zeptoday`</span>          |</span>
<span id="cb176-1630"><a href="#cb176-1630" aria-hidden="true" tabindex="-1"></a>| $10^{-22}$         | <span class="in">`toph`</span>   | <span class="in">`aÃë`</span>      | <span class="in">`decizeptoday`</span>      |</span>
<span id="cb176-1631"><a href="#cb176-1631" aria-hidden="true" tabindex="-1"></a>| $10^{-23}$         | <span class="in">`tob`</span>    | <span class="in">`aÃà`</span>      | <span class="in">`centizeptoday`</span>     |</span>
<span id="cb176-1632"><a href="#cb176-1632" aria-hidden="true" tabindex="-1"></a>| $10^{-24}$         | <span class="in">`yokt`</span>   | <span class="in">`y`</span>      | <span class="in">`yoctoday`</span>          |</span>
<span id="cb176-1633"><a href="#cb176-1633" aria-hidden="true" tabindex="-1"></a>| $10^{-25}$         | <span class="in">`zoph`</span>   | <span class="in">`zÃë`</span>      | <span class="in">`deciyoctoday`</span>      |</span>
<span id="cb176-1634"><a href="#cb176-1634" aria-hidden="true" tabindex="-1"></a>| $10^{-26}$         | <span class="in">`zob`</span>    | <span class="in">`zÃà`</span>      | <span class="in">`centiyoctoday`</span>     |</span>
<span id="cb176-1635"><a href="#cb176-1635" aria-hidden="true" tabindex="-1"></a>| $10^{-27}$         | <span class="in">`ront`</span>   | <span class="in">`r`</span>      | <span class="in">`rontoday`</span>          |</span>
<span id="cb176-1636"><a href="#cb176-1636" aria-hidden="true" tabindex="-1"></a>| $10^{-28}$         | <span class="in">`yoph`</span>   | <span class="in">`yÃë`</span>      | <span class="in">`decirontoday`</span>      |</span>
<span id="cb176-1637"><a href="#cb176-1637" aria-hidden="true" tabindex="-1"></a>| $10^{-29}$         | <span class="in">`yob`</span>    | <span class="in">`yÃà`</span>      | <span class="in">`centirontoday`</span>     |</span>
<span id="cb176-1638"><a href="#cb176-1638" aria-hidden="true" tabindex="-1"></a>| $10^{-30}$         | <span class="in">`quek`</span>   | <span class="in">`q`</span>      | <span class="in">`quectoday`</span>         |</span>
<span id="cb176-1639"><a href="#cb176-1639" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1640"><a href="#cb176-1640" aria-hidden="true" tabindex="-1"></a>: The units of <span class="in">`Decalendar`</span> and <span class="in">`Declock`</span> {#tbl-unit}</span>
<span id="cb176-1641"><a href="#cb176-1641" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-1642"><a href="#cb176-1642" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1643"><a href="#cb176-1643" aria-hidden="true" tabindex="-1"></a>In @tbl-unit, the units with positive exponents are used for <span class="in">`Decalendar`</span>, while the ones with negative exponents are used for <span class="in">`Declock`</span>. <span class="in">`Cents`</span> (<span class="in">`¬¢`</span>) can serve as a useful point of comparison to understand the scale of some of the units in @tbl-unit above, because each <span class="in">`cent`</span> is 1 percent of the day, which is about a quarter hour (1% = 14.4 minutes). In comparison to <span class="in">`cents`</span>, <span class="in">`mils`</span> are ten times smaller (.1% = 1.4 minutes), <span class="in">`dimes`</span> (<span class="in">`‚Öí`</span>) are ten times larger (10% = 144 minutes), and <span class="in">`deks`</span> (<span class="in">`Œπ`</span>) are 1000 times larger (1000% = 14400 minutes). To be clear, 1 <span class="in">`dek`</span> contains 10 whole days while the other units are fractions of days.</span>
<span id="cb176-1644"><a href="#cb176-1644" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1645"><a href="#cb176-1645" aria-hidden="true" tabindex="-1"></a><span class="in">`Declock`</span> units smaller than <span class="in">`mils`</span> are not easy to think of as percents of a day. For <span class="in">`phrases`</span> (<span class="in">`‚ó†`</span>) and <span class="in">`beats`</span> (<span class="in">`‚ô´`</span>), music serves as a much more useful analogy. In fact, <span class="in">`phrases`</span> and <span class="in">`beats`</span> are musical terms. The duration of a musical beat depends on the tempo, but a <span class="in">`Declock`</span> <span class="in">`beat`</span> is always precisely 0.864 seconds long. This translates to a tempo of 69.4ÃÖ (69‚Å¥/‚Çâ or 625/9) beats per minute, which is coincidentally also within the normal range of a resting heart rate. <span class="in">`Declock`</span> <span class="in">`beats`</span> are organized into groups of 2 called <span class="in">`bars`</span> or <span class="in">`measures`</span>, groups of 10 called <span class="in">`phrases`</span>, and groups of 20 called <span class="in">`periods`</span>. A real example of music that follows this exact pattern is Haydn's <span class="co">[</span><span class="ot">Feldpartita</span><span class="co">]</span>(https://en.wikipedia.org/wiki/Period_(music)).</span>
<span id="cb176-1646"><a href="#cb176-1646" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1647"><a href="#cb176-1647" aria-hidden="true" tabindex="-1"></a><span class="in">`Declock`</span> units smaller than <span class="in">`beats`</span> are too small for typical daily use. For example, a <span class="in">`mic`</span> (<span class="in">`microday`</span>, <span class="in">`Œº`</span>) is faster than a blink of an eye. Each frame in a video playing at 60 frames per second will be shown for about 1.93 <span class="in">`liphs`</span> (<span class="in">`milliphrases`</span>, <span class="in">`mÃë`</span>). A <span class="in">`lib`</span> (<span class="in">`millibeat`</span>, <span class="in">`mÃà`</span>) is not enough time for a neuron in a human brain to fire and return to rest. Sound can travel from a person's ear to their other ear in about 7 <span class="in">`nans`</span> (<span class="in">`nanodays`</span>). Noticing that a sound reaches one ear before the other can help humans to localize the source of the sound, but a <span class="in">`roph`</span> (<span class="in">`microphrase`</span>, <span class="in">`ŒºÃë`</span>) difference might be too fast to notice. In a <span class="in">`rob`</span> (<span class="in">`microbeat`</span>, <span class="in">`¬µÃà`</span>), a USB 3.0 cable transferring 5 gigabytes per second can send 4.32 kilobytes, the equivalent of a text file with 4320 characters.</span>
<span id="cb176-1648"><a href="#cb176-1648" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1649"><a href="#cb176-1649" aria-hidden="true" tabindex="-1"></a><span class="fu"># Time zones {#sec-zone}</span></span>
<span id="cb176-1650"><a href="#cb176-1650" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1651"><a href="#cb176-1651" aria-hidden="true" tabindex="-1"></a>Of the units discussed above, <span class="in">`dimes`</span> are notable, because they are the units of <span class="in">`Declock`</span> time zones. The times in <span class="in">`Zone`</span> <span class="in">`1`</span> are one <span class="in">`dime`</span> earlier than <span class="in">`Zone`</span> <span class="in">`0`</span> and two <span class="in">`dimes`</span> earlier than <span class="in">`Zone`</span> <span class="in">`-1`</span>. Time zones are important, because different time zones could have very different times and even different dates. Mexico City is in <span class="in">`Zone`</span> <span class="in">`-3`</span> and Tokyo is in <span class="in">`Zone`</span> <span class="in">`4`</span>, meaning for the majority of the day (<span class="in">`Dot`</span> <span class="in">`7`</span> to be exact) Tokyo is one day ahead of Mexico City. If it is noon on the last day of the year 1999 in Mexico City, it will be <span class="in">`Dot`</span> <span class="in">`200`</span> on the first day of the year 2000 in Tokyo. This date and time in Mexico City can be written <span class="in">`2000+000.200+4`</span> or <span class="in">`2001-364.800+4`</span>, while the equivalent date and time for Tokyo is <span class="in">`1999+365.500-3`</span> or <span class="in">`2000-000.500-3`</span>. If we removed the time zone from the end, we would not know that all of these <span class="in">`stamps`</span> describe the same moment in time.</span>
<span id="cb176-1652"><a href="#cb176-1652" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1653"><a href="#cb176-1653" aria-hidden="true" tabindex="-1"></a><span class="in">`Declock`</span> groups together the 26 <span class="co">[</span><span class="ot">Coordinated Universal Time (UTC) offsets</span><span class="co">](https://en.wikipedia.org/wiki/List_of_UTC_offsets)</span> (-12:00 to +14:00) into 11 time zones (<span class="in">`Zone`</span> <span class="in">`-5`</span> to <span class="in">`Zone`</span> <span class="in">`6`</span>) by converting hours into <span class="in">`dimes`</span> ($dimes = hours \div 2.4$) and rounding to the nearest whole number ($dimes = \lfloor hours \div 2.4 \rceil$). This time zone system is simple and facilitates conversion, but locations on the edges of the main time zones may experience a significant difference between <span class="in">`Dot`</span> <span class="in">`5`</span> and <span class="co">[</span><span class="ot">solar noon</span><span class="co">](https://en.wikipedia.org/wiki/Noon#Solar_noon)</span>, the point when the sun reaches its highest position in the sky.</span>
<span id="cb176-1654"><a href="#cb176-1654" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1655"><a href="#cb176-1655" aria-hidden="true" tabindex="-1"></a>If we decide to prioritize the amount of sunlight at <span class="in">`Dot`</span> <span class="in">`5`</span> over simplicity and ease of conversion, we could convert degrees of longitude into <span class="in">`cents`</span> or <span class="in">`mils`</span>, instead of converting hours into <span class="in">`dimes`</span>. For example, we could say that Mexico City is in <span class="in">`Zone`</span> <span class="in">`-275`</span> instead of <span class="in">`Zone`</span> <span class="in">`-3`</span>, because the longitude of Mexico City is 99 degrees West, which translates to an offset of -275 <span class="in">`mils`</span> ($mils = degrees \div .36$). Essentially, we could create as many additional <span class="in">`Declock`</span> time zones are desired simply by adding digits to the end of each time zone. Adding one digit yields 110 double-digit <span class="in">`cent`</span> time zones, adding two digits creates 1100 triple-digit <span class="in">`mil`</span> time zones, and so on.</span>
<span id="cb176-1656"><a href="#cb176-1656" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1657"><a href="#cb176-1657" aria-hidden="true" tabindex="-1"></a><span class="fu"># Related systems {#sec-related}</span></span>
<span id="cb176-1658"><a href="#cb176-1658" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1659"><a href="#cb176-1659" aria-hidden="true" tabindex="-1"></a><span class="fu">## French Republican calendar {#sec-frc}</span></span>
<span id="cb176-1660"><a href="#cb176-1660" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1661"><a href="#cb176-1661" aria-hidden="true" tabindex="-1"></a><span class="fu">### French Republican calendar *d√©cades* {#sec-frcd}</span></span>
<span id="cb176-1662"><a href="#cb176-1662" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1663"><a href="#cb176-1663" aria-hidden="true" tabindex="-1"></a>The <span class="co">[</span><span class="ot">French Republican calendar</span><span class="co">](https://en.wikipedia.org/wiki/French_Republican_calendar)</span> and <span class="in">`Decalendar`</span> both organize days in groups of 10. A group of 10 days in the French Republican calendar is called a *d√©cade*, while a group of 10 days in `Decalendar` is called a `dek`. The names of the days in a `dek` are derived from their [zero-based](https://en.wikipedia.org/wiki/Zero-based_numbering) cardinal numbers (zero, one, two...), whereas the days of the *d√©cade* are named after their ordinal numbers (first, second, third...). In both cases, the names are based on Roman and Greek <span class="co">[</span><span class="ot">numeral prefixes</span><span class="co">](https://en.wikipedia.org/wiki/Numeral_prefix#Table_of_number_prefixes_in_English)</span>. @tbl-dotd provides the cardinal numbers, one-letter codes, names, and types of the days of the <span class="in">`dek`</span> as well as the names of their French Republican calendar equivalents.</span>
<span id="cb176-1664"><a href="#cb176-1664" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1665"><a href="#cb176-1665" aria-hidden="true" tabindex="-1"></a><span class="fu">#### @tbl-dotd</span></span>
<span id="cb176-1666"><a href="#cb176-1666" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1667"><a href="#cb176-1667" aria-hidden="true" tabindex="-1"></a>::: {.callout-note collapse="true" title="Click to toggle table expansion" icon="false"}</span>
<span id="cb176-1668"><a href="#cb176-1668" aria-hidden="true" tabindex="-1"></a>| <span class="sc">\#</span>  | Code | Name   | Type | French     |</span>
<span id="cb176-1669"><a href="#cb176-1669" aria-hidden="true" tabindex="-1"></a>|-----|------|--------|------|------------|</span>
<span id="cb176-1670"><a href="#cb176-1670" aria-hidden="true" tabindex="-1"></a>| 0   | N    | Nulday | work | *primidi*  |</span>
<span id="cb176-1671"><a href="#cb176-1671" aria-hidden="true" tabindex="-1"></a>| 1   | U    | Unoday | work | *duodi*    |</span>
<span id="cb176-1672"><a href="#cb176-1672" aria-hidden="true" tabindex="-1"></a>| 2   | D    | Duoday | work | *tridi*    |</span>
<span id="cb176-1673"><a href="#cb176-1673" aria-hidden="true" tabindex="-1"></a>| 3   | T    | Triday | rest | *quartidi* |</span>
<span id="cb176-1674"><a href="#cb176-1674" aria-hidden="true" tabindex="-1"></a>| 4   | Q    | Quaday | rest | *quintidi* |</span>
<span id="cb176-1675"><a href="#cb176-1675" aria-hidden="true" tabindex="-1"></a>| 5   | P    | Penday | work | *sextidi*  |</span>
<span id="cb176-1676"><a href="#cb176-1676" aria-hidden="true" tabindex="-1"></a>| 6   | H    | Hexday | work | *septidi*  |</span>
<span id="cb176-1677"><a href="#cb176-1677" aria-hidden="true" tabindex="-1"></a>| 7   | S    | Sepday | work | *octidi*   |</span>
<span id="cb176-1678"><a href="#cb176-1678" aria-hidden="true" tabindex="-1"></a>| 8   | O    | Octday | rest | *nonidi*   |</span>
<span id="cb176-1679"><a href="#cb176-1679" aria-hidden="true" tabindex="-1"></a>| 9   | E    | Ennday | rest | *d√©cadi*   |</span>
<span id="cb176-1680"><a href="#cb176-1680" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1681"><a href="#cb176-1681" aria-hidden="true" tabindex="-1"></a>: The days of the <span class="in">`dek`</span> and their French Republican calendar equivalents {#tbl-dotd}</span>
<span id="cb176-1682"><a href="#cb176-1682" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-1683"><a href="#cb176-1683" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1684"><a href="#cb176-1684" aria-hidden="true" tabindex="-1"></a><span class="fu">### French Republican calendar time {#sec-frct}</span></span>
<span id="cb176-1685"><a href="#cb176-1685" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1686"><a href="#cb176-1686" aria-hidden="true" tabindex="-1"></a>The French Republican calendar and <span class="in">`Declock`</span> both break the day down into decimal portions. In <span class="in">`Declock`</span>, a <span class="in">`dime`</span> is a tenth (‚Öí) of a day, a <span class="in">`cent`</span> is a hundredth (10‚Åª¬≤) of a day, a <span class="in">`mil`</span> is a thousandth (10‚Åª¬≥) of a day, and a <span class="in">`beat`</span> is a hundred thousandth (10‚Åª‚Åµ) of a day, whereas the French Republican calendar calls these units decimal hours, decimal minutes, *d√©cimes*, and decimal seconds, respectively. @tbl-dime shows the start times of each <span class="in">`dime`</span> (‚Öí) in a day and its equivalent in 24-hour and 12-hour standard time.</span>
<span id="cb176-1687"><a href="#cb176-1687" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1688"><a href="#cb176-1688" aria-hidden="true" tabindex="-1"></a><span class="fu">#### @tbl-dime</span></span>
<span id="cb176-1689"><a href="#cb176-1689" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1690"><a href="#cb176-1690" aria-hidden="true" tabindex="-1"></a>::: {.callout-note collapse="true" title="Click to toggle table expansion" icon="false"}</span>
<span id="cb176-1691"><a href="#cb176-1691" aria-hidden="true" tabindex="-1"></a>| ‚Öí   | 24-hour | 12-hour |</span>
<span id="cb176-1692"><a href="#cb176-1692" aria-hidden="true" tabindex="-1"></a>|-----|---------|---------|</span>
<span id="cb176-1693"><a href="#cb176-1693" aria-hidden="true" tabindex="-1"></a>| 0   | 00:00   | 12:00AM |</span>
<span id="cb176-1694"><a href="#cb176-1694" aria-hidden="true" tabindex="-1"></a>| 1   | 02:24   | 2:24AM  |</span>
<span id="cb176-1695"><a href="#cb176-1695" aria-hidden="true" tabindex="-1"></a>| 2   | 04:48   | 4:48AM  |</span>
<span id="cb176-1696"><a href="#cb176-1696" aria-hidden="true" tabindex="-1"></a>| 3   | 07:12   | 7:12AM  |</span>
<span id="cb176-1697"><a href="#cb176-1697" aria-hidden="true" tabindex="-1"></a>| 4   | 09:36   | 9:36AM  |</span>
<span id="cb176-1698"><a href="#cb176-1698" aria-hidden="true" tabindex="-1"></a>| 5   | 12:00   | 12:00PM |</span>
<span id="cb176-1699"><a href="#cb176-1699" aria-hidden="true" tabindex="-1"></a>| 6   | 14:24   | 2:24PM  |</span>
<span id="cb176-1700"><a href="#cb176-1700" aria-hidden="true" tabindex="-1"></a>| 7   | 16:48   | 4:48PM  |</span>
<span id="cb176-1701"><a href="#cb176-1701" aria-hidden="true" tabindex="-1"></a>| 8   | 19:12   | 7:12PM  |</span>
<span id="cb176-1702"><a href="#cb176-1702" aria-hidden="true" tabindex="-1"></a>| 9   | 21:36   | 9:36PM  |</span>
<span id="cb176-1703"><a href="#cb176-1703" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1704"><a href="#cb176-1704" aria-hidden="true" tabindex="-1"></a>: The <span class="in">`dimes`</span> in a day and their standard time equivalents {#tbl-dime}</span>
<span id="cb176-1705"><a href="#cb176-1705" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-1706"><a href="#cb176-1706" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1707"><a href="#cb176-1707" aria-hidden="true" tabindex="-1"></a><span class="fu">## Swatch Internet Time {#sec-sit}</span></span>
<span id="cb176-1708"><a href="#cb176-1708" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1709"><a href="#cb176-1709" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">Swatch Internet Time</span><span class="co">](https://en.wikipedia.org/wiki/Swatch_Internet_Time)</span> uses the term ".beats" to describe a thousandth of day (10‚Åª¬≥). In <span class="in">`Declock`</span>, a <span class="in">`beat`</span> is a hundred thousandth of a day (10‚Åª‚Åµ), because this is the approximate duration of a heartbeat or a beat of music. Another difference is that Swatch Internet Time has only 1 time zone, <span class="co">[</span><span class="ot">UTC+1</span><span class="co">](https://en.wikipedia.org/wiki/List_of_UTC_offsets#UTC+01:00,_A)</span>, limiting its utility outside of Central Europe or West Africa. Swatch Internet Time is 41.6ÃÖ <span class="in">`mils`</span> ahead of UTC and the <span class="in">`Declock`</span> <span class="in">`Zone`</span> <span class="in">`0`</span> time zone.<span class="in">`Declock`</span> has 11 main single-digit time zones, but can support as many time zones as needed by adding additional digits. More information on <span class="in">`Declock`</span> time zones can be found in @sec-zone.</span>
<span id="cb176-1710"><a href="#cb176-1710" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1711"><a href="#cb176-1711" aria-hidden="true" tabindex="-1"></a><span class="fu">## Gregorian calendar {#sec-greg}</span></span>
<span id="cb176-1712"><a href="#cb176-1712" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1713"><a href="#cb176-1713" aria-hidden="true" tabindex="-1"></a><span class="fu">### Coordinate analogy {#sec-coor}</span></span>
<span id="cb176-1714"><a href="#cb176-1714" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1715"><a href="#cb176-1715" aria-hidden="true" tabindex="-1"></a>In the Gregorian calendar, dates are like a set of coordinates, where the month and the day-of-the-month (<span class="in">`dotm`</span>) are like longitude and latitude in the <span class="co">[</span><span class="ot">geographic coordinate system</span><span class="co">](https://en.wikipedia.org/wiki/Geographic_coordinate_system)</span> or x and y in the <span class="co">[</span><span class="ot">Cartesian coordinate system</span><span class="co">](https://en.wikipedia.org/wiki/Cartesian_coordinate_system)</span>. The <span class="in">`Decalendar`</span> ordinal (<span class="in">`deco`</span>) date format provides two coordinates in one number: the day-of-the-year (<span class="in">`doty`</span>). @tbl-greg2doty shows the <span class="in">`doty`</span> number equivalents of all Gregorian calendar dates.</span>
<span id="cb176-1716"><a href="#cb176-1716" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1717"><a href="#cb176-1717" aria-hidden="true" tabindex="-1"></a>To locate a specific date in @tbl-greg2doty, first find the month among the columns (think of the month as an x-axis value) and then move down through the rows to the <span class="in">`dotm`</span> (which is like a y-axis value). To convert a <span class="in">`doty`</span> number to a Gregorian calendar date, we first find the <span class="in">`dek`</span> number (the first two digits of the <span class="in">`doty`</span>) among the rows in @tbl-doty2greg and then move to the right to the <span class="in">`dotd`</span> (the last digit of the <span class="in">`doty`</span>). The dates in @tbl-doty2greg are shown in <span class="in">`mm-dd`</span> format.</span>
<span id="cb176-1718"><a href="#cb176-1718" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1719"><a href="#cb176-1719" aria-hidden="true" tabindex="-1"></a><span class="fu">#### @tbl-greg2doty</span></span>
<span id="cb176-1720"><a href="#cb176-1720" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1721"><a href="#cb176-1721" aria-hidden="true" tabindex="-1"></a>::: {.callout-note collapse="true" title="Click to toggle table expansion" icon="false"}</span>
<span id="cb176-1722"><a href="#cb176-1722" aria-hidden="true" tabindex="-1"></a>| Day | Mar | Apr | May | Jun | Jul | Aug | Sep | Oct | Nov | Dec | Jan | Feb |</span>
<span id="cb176-1723"><a href="#cb176-1723" aria-hidden="true" tabindex="-1"></a>|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|</span>
<span id="cb176-1724"><a href="#cb176-1724" aria-hidden="true" tabindex="-1"></a>| 1   | 0   | 31  | 61  | 92  | 122 | 153 | 184 | 214 | 245 | 275 | 306 | 337 |</span>
<span id="cb176-1725"><a href="#cb176-1725" aria-hidden="true" tabindex="-1"></a>| 2   | 1   | 32  | 62  | 93  | 123 | 154 | 185 | 215 | 246 | 276 | 307 | 338 |</span>
<span id="cb176-1726"><a href="#cb176-1726" aria-hidden="true" tabindex="-1"></a>| 3   | 2   | 33  | 63  | 94  | 124 | 155 | 186 | 216 | 247 | 277 | 308 | 339 |</span>
<span id="cb176-1727"><a href="#cb176-1727" aria-hidden="true" tabindex="-1"></a>| 4   | 3   | 34  | 64  | 95  | 125 | 156 | 187 | 217 | 248 | 278 | 309 | 340 |</span>
<span id="cb176-1728"><a href="#cb176-1728" aria-hidden="true" tabindex="-1"></a>| 5   | 4   | 35  | 65  | 96  | 126 | 157 | 188 | 218 | 249 | 279 | 310 | 341 |</span>
<span id="cb176-1729"><a href="#cb176-1729" aria-hidden="true" tabindex="-1"></a>| 6   | 5   | 36  | 66  | 97  | 127 | 158 | 189 | 219 | 250 | 280 | 311 | 342 |</span>
<span id="cb176-1730"><a href="#cb176-1730" aria-hidden="true" tabindex="-1"></a>| 7   | 6   | 37  | 67  | 98  | 128 | 159 | 190 | 220 | 251 | 281 | 312 | 343 |</span>
<span id="cb176-1731"><a href="#cb176-1731" aria-hidden="true" tabindex="-1"></a>| 8   | 7   | 38  | 68  | 99  | 129 | 160 | 191 | 221 | 252 | 282 | 313 | 344 |</span>
<span id="cb176-1732"><a href="#cb176-1732" aria-hidden="true" tabindex="-1"></a>| 9   | 8   | 39  | 69  | 100 | 130 | 161 | 192 | 222 | 253 | 283 | 314 | 345 |</span>
<span id="cb176-1733"><a href="#cb176-1733" aria-hidden="true" tabindex="-1"></a>| 10  | 9   | 40  | 70  | 101 | 131 | 162 | 193 | 223 | 254 | 284 | 315 | 346 |</span>
<span id="cb176-1734"><a href="#cb176-1734" aria-hidden="true" tabindex="-1"></a>| 11  | 10  | 41  | 71  | 102 | 132 | 163 | 194 | 224 | 255 | 285 | 316 | 347 |</span>
<span id="cb176-1735"><a href="#cb176-1735" aria-hidden="true" tabindex="-1"></a>| 12  | 11  | 42  | 72  | 103 | 133 | 164 | 195 | 225 | 256 | 286 | 317 | 348 |</span>
<span id="cb176-1736"><a href="#cb176-1736" aria-hidden="true" tabindex="-1"></a>| 13  | 12  | 43  | 73  | 104 | 134 | 165 | 196 | 226 | 257 | 287 | 318 | 349 |</span>
<span id="cb176-1737"><a href="#cb176-1737" aria-hidden="true" tabindex="-1"></a>| 14  | 13  | 44  | 74  | 105 | 135 | 166 | 197 | 227 | 258 | 288 | 319 | 350 |</span>
<span id="cb176-1738"><a href="#cb176-1738" aria-hidden="true" tabindex="-1"></a>| 15  | 14  | 45  | 75  | 106 | 136 | 167 | 198 | 228 | 259 | 289 | 320 | 351 |</span>
<span id="cb176-1739"><a href="#cb176-1739" aria-hidden="true" tabindex="-1"></a>| 16  | 15  | 46  | 76  | 107 | 137 | 168 | 199 | 229 | 260 | 290 | 321 | 352 |</span>
<span id="cb176-1740"><a href="#cb176-1740" aria-hidden="true" tabindex="-1"></a>| 17  | 16  | 47  | 77  | 108 | 138 | 169 | 200 | 230 | 261 | 291 | 322 | 353 |</span>
<span id="cb176-1741"><a href="#cb176-1741" aria-hidden="true" tabindex="-1"></a>| 18  | 17  | 48  | 78  | 109 | 139 | 170 | 201 | 231 | 262 | 292 | 323 | 354 |</span>
<span id="cb176-1742"><a href="#cb176-1742" aria-hidden="true" tabindex="-1"></a>| 19  | 18  | 49  | 79  | 110 | 140 | 171 | 202 | 232 | 263 | 293 | 324 | 355 |</span>
<span id="cb176-1743"><a href="#cb176-1743" aria-hidden="true" tabindex="-1"></a>| 20  | 19  | 50  | 80  | 111 | 141 | 172 | 203 | 233 | 264 | 294 | 325 | 356 |</span>
<span id="cb176-1744"><a href="#cb176-1744" aria-hidden="true" tabindex="-1"></a>| 21  | 20  | 51  | 81  | 112 | 142 | 173 | 204 | 234 | 265 | 295 | 326 | 357 |</span>
<span id="cb176-1745"><a href="#cb176-1745" aria-hidden="true" tabindex="-1"></a>| 22  | 21  | 52  | 82  | 113 | 143 | 174 | 205 | 235 | 266 | 296 | 327 | 358 |</span>
<span id="cb176-1746"><a href="#cb176-1746" aria-hidden="true" tabindex="-1"></a>| 23  | 22  | 53  | 83  | 114 | 144 | 175 | 206 | 236 | 267 | 297 | 328 | 359 |</span>
<span id="cb176-1747"><a href="#cb176-1747" aria-hidden="true" tabindex="-1"></a>| 24  | 23  | 54  | 84  | 115 | 145 | 176 | 207 | 237 | 268 | 298 | 329 | 360 |</span>
<span id="cb176-1748"><a href="#cb176-1748" aria-hidden="true" tabindex="-1"></a>| 25  | 24  | 55  | 85  | 116 | 146 | 177 | 208 | 238 | 269 | 299 | 330 | 361 |</span>
<span id="cb176-1749"><a href="#cb176-1749" aria-hidden="true" tabindex="-1"></a>| 26  | 25  | 56  | 86  | 117 | 147 | 178 | 209 | 239 | 270 | 300 | 331 | 362 |</span>
<span id="cb176-1750"><a href="#cb176-1750" aria-hidden="true" tabindex="-1"></a>| 27  | 26  | 57  | 87  | 118 | 148 | 179 | 210 | 240 | 271 | 301 | 332 | 363 |</span>
<span id="cb176-1751"><a href="#cb176-1751" aria-hidden="true" tabindex="-1"></a>| 28  | 27  | 58  | 88  | 119 | 149 | 180 | 211 | 241 | 272 | 302 | 333 | 364 |</span>
<span id="cb176-1752"><a href="#cb176-1752" aria-hidden="true" tabindex="-1"></a>| 29  | 28  | 59  | 89  | 120 | 150 | 181 | 212 | 242 | 273 | 303 | 334 | 365 |</span>
<span id="cb176-1753"><a href="#cb176-1753" aria-hidden="true" tabindex="-1"></a>| 30  | 29  | 60  | 90  | 121 | 151 | 182 | 213 | 243 | 274 | 304 | 335 |     |</span>
<span id="cb176-1754"><a href="#cb176-1754" aria-hidden="true" tabindex="-1"></a>| 31  | 30  |     | 91  |     | 152 | 183 |     | 244 |     | 305 | 336 |     |</span>
<span id="cb176-1755"><a href="#cb176-1755" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1756"><a href="#cb176-1756" aria-hidden="true" tabindex="-1"></a>: Gregorian calendar date to <span class="in">`doty`</span> conversion {#tbl-greg2doty}</span>
<span id="cb176-1757"><a href="#cb176-1757" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-1758"><a href="#cb176-1758" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1759"><a href="#cb176-1759" aria-hidden="true" tabindex="-1"></a><span class="fu">#### @tbl-doty2greg</span></span>
<span id="cb176-1760"><a href="#cb176-1760" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1761"><a href="#cb176-1761" aria-hidden="true" tabindex="-1"></a>::: {.callout-note collapse="true" title="Click to toggle table expansion" icon="false"}</span>
<span id="cb176-1762"><a href="#cb176-1762" aria-hidden="true" tabindex="-1"></a>| Dek | 0     | 1     | 2     | 3     | 4     | 5     | 6     | 7     | 8     | 9     |</span>
<span id="cb176-1763"><a href="#cb176-1763" aria-hidden="true" tabindex="-1"></a>|-----|-------|-------|-------|-------|-------|-------|-------|-------|-------|-------|</span>
<span id="cb176-1764"><a href="#cb176-1764" aria-hidden="true" tabindex="-1"></a>| 0   | 03-01 | 03-02 | 03-03 | 03-04 | 03-05 | 03-06 | 03-07 | 03-08 | 03-09 | 03-10 |</span>
<span id="cb176-1765"><a href="#cb176-1765" aria-hidden="true" tabindex="-1"></a>| 1   | 03-11 | 03-12 | 03-13 | 03-14 | 03-15 | 03-16 | 03-17 | 03-18 | 03-19 | 03-20 |</span>
<span id="cb176-1766"><a href="#cb176-1766" aria-hidden="true" tabindex="-1"></a>| 2   | 03-21 | 03-22 | 03-23 | 03-24 | 03-25 | 03-26 | 03-27 | 03-28 | 03-29 | 03-30 |</span>
<span id="cb176-1767"><a href="#cb176-1767" aria-hidden="true" tabindex="-1"></a>| 3   | 03-31 | 04-01 | 04-02 | 04-03 | 04-04 | 04-05 | 04-06 | 04-07 | 04-08 | 04-09 |</span>
<span id="cb176-1768"><a href="#cb176-1768" aria-hidden="true" tabindex="-1"></a>| 4   | 04-10 | 04-11 | 04-12 | 04-13 | 04-14 | 04-15 | 04-16 | 04-17 | 04-18 | 04-19 |</span>
<span id="cb176-1769"><a href="#cb176-1769" aria-hidden="true" tabindex="-1"></a>| 5   | 04-20 | 04-21 | 04-22 | 04-23 | 04-24 | 04-25 | 04-26 | 04-27 | 04-28 | 04-29 |</span>
<span id="cb176-1770"><a href="#cb176-1770" aria-hidden="true" tabindex="-1"></a>| 6   | 04-30 | 05-01 | 05-02 | 05-03 | 05-04 | 05-05 | 05-06 | 05-07 | 05-08 | 05-09 |</span>
<span id="cb176-1771"><a href="#cb176-1771" aria-hidden="true" tabindex="-1"></a>| 7   | 05-10 | 05-11 | 05-12 | 05-13 | 05-14 | 05-15 | 05-16 | 05-17 | 05-18 | 05-19 |</span>
<span id="cb176-1772"><a href="#cb176-1772" aria-hidden="true" tabindex="-1"></a>| 8   | 05-20 | 05-21 | 05-22 | 05-23 | 05-24 | 05-25 | 05-26 | 05-27 | 05-28 | 05-29 |</span>
<span id="cb176-1773"><a href="#cb176-1773" aria-hidden="true" tabindex="-1"></a>| 9   | 05-30 | 05-31 | 06-01 | 06-02 | 06-03 | 06-04 | 06-05 | 06-06 | 06-07 | 06-08 |</span>
<span id="cb176-1774"><a href="#cb176-1774" aria-hidden="true" tabindex="-1"></a>| 10  | 06-09 | 06-10 | 06-11 | 06-12 | 06-13 | 06-14 | 06-15 | 06-16 | 06-17 | 06-18 |</span>
<span id="cb176-1775"><a href="#cb176-1775" aria-hidden="true" tabindex="-1"></a>| 11  | 06-19 | 06-20 | 06-21 | 06-22 | 06-23 | 06-24 | 06-25 | 06-26 | 06-27 | 06-28 |</span>
<span id="cb176-1776"><a href="#cb176-1776" aria-hidden="true" tabindex="-1"></a>| 12  | 06-29 | 06-30 | 07-01 | 07-02 | 07-03 | 07-04 | 07-05 | 07-06 | 07-07 | 07-08 |</span>
<span id="cb176-1777"><a href="#cb176-1777" aria-hidden="true" tabindex="-1"></a>| 13  | 07-09 | 07-10 | 07-11 | 07-12 | 07-13 | 07-14 | 07-15 | 07-16 | 07-17 | 07-18 |</span>
<span id="cb176-1778"><a href="#cb176-1778" aria-hidden="true" tabindex="-1"></a>| 14  | 07-19 | 07-20 | 07-21 | 07-22 | 07-23 | 07-24 | 07-25 | 07-26 | 07-27 | 07-28 |</span>
<span id="cb176-1779"><a href="#cb176-1779" aria-hidden="true" tabindex="-1"></a>| 15  | 07-29 | 07-30 | 07-31 | 08-01 | 08-02 | 08-03 | 08-04 | 08-05 | 08-06 | 08-07 |</span>
<span id="cb176-1780"><a href="#cb176-1780" aria-hidden="true" tabindex="-1"></a>| 16  | 08-08 | 08-09 | 08-10 | 08-11 | 08-12 | 08-13 | 08-14 | 08-15 | 08-16 | 08-17 |</span>
<span id="cb176-1781"><a href="#cb176-1781" aria-hidden="true" tabindex="-1"></a>| 17  | 08-18 | 08-19 | 08-20 | 08-21 | 08-22 | 08-23 | 08-24 | 08-25 | 08-26 | 08-27 |</span>
<span id="cb176-1782"><a href="#cb176-1782" aria-hidden="true" tabindex="-1"></a>| 18  | 08-28 | 08-29 | 08-30 | 08-31 | 09-01 | 09-02 | 09-03 | 09-04 | 09-05 | 09-06 |</span>
<span id="cb176-1783"><a href="#cb176-1783" aria-hidden="true" tabindex="-1"></a>| 19  | 09-07 | 09-08 | 09-09 | 09-10 | 09-11 | 09-12 | 09-13 | 09-14 | 09-15 | 09-16 |</span>
<span id="cb176-1784"><a href="#cb176-1784" aria-hidden="true" tabindex="-1"></a>| 20  | 09-17 | 09-18 | 09-19 | 09-20 | 09-21 | 09-22 | 09-23 | 09-24 | 09-25 | 09-26 |</span>
<span id="cb176-1785"><a href="#cb176-1785" aria-hidden="true" tabindex="-1"></a>| 21  | 09-27 | 09-28 | 09-29 | 09-30 | 10-01 | 10-02 | 10-03 | 10-04 | 10-05 | 10-06 |</span>
<span id="cb176-1786"><a href="#cb176-1786" aria-hidden="true" tabindex="-1"></a>| 22  | 10-07 | 10-08 | 10-09 | 10-10 | 10-11 | 10-12 | 10-13 | 10-14 | 10-15 | 10-16 |</span>
<span id="cb176-1787"><a href="#cb176-1787" aria-hidden="true" tabindex="-1"></a>| 23  | 10-17 | 10-18 | 10-19 | 10-20 | 10-21 | 10-22 | 10-23 | 10-24 | 10-25 | 10-26 |</span>
<span id="cb176-1788"><a href="#cb176-1788" aria-hidden="true" tabindex="-1"></a>| 24  | 10-27 | 10-28 | 10-29 | 10-30 | 10-31 | 11-01 | 11-02 | 11-03 | 11-04 | 11-05 |</span>
<span id="cb176-1789"><a href="#cb176-1789" aria-hidden="true" tabindex="-1"></a>| 25  | 11-06 | 11-07 | 11-08 | 11-09 | 11-10 | 11-11 | 11-12 | 11-13 | 11-14 | 11-15 |</span>
<span id="cb176-1790"><a href="#cb176-1790" aria-hidden="true" tabindex="-1"></a>| 26  | 11-16 | 11-17 | 11-18 | 11-19 | 11-20 | 11-21 | 11-22 | 11-23 | 11-24 | 11-25 |</span>
<span id="cb176-1791"><a href="#cb176-1791" aria-hidden="true" tabindex="-1"></a>| 27  | 11-26 | 11-27 | 11-28 | 11-29 | 11-30 | 12-01 | 12-02 | 12-03 | 12-04 | 12-05 |</span>
<span id="cb176-1792"><a href="#cb176-1792" aria-hidden="true" tabindex="-1"></a>| 28  | 12-06 | 12-07 | 12-08 | 12-09 | 12-10 | 12-11 | 12-12 | 12-13 | 12-14 | 12-15 |</span>
<span id="cb176-1793"><a href="#cb176-1793" aria-hidden="true" tabindex="-1"></a>| 29  | 12-16 | 12-17 | 12-18 | 12-19 | 12-20 | 12-21 | 12-22 | 12-23 | 12-24 | 12-25 |</span>
<span id="cb176-1794"><a href="#cb176-1794" aria-hidden="true" tabindex="-1"></a>| 30  | 12-26 | 12-27 | 12-28 | 12-29 | 12-30 | 12-31 | 01-01 | 01-02 | 01-03 | 01-04 |</span>
<span id="cb176-1795"><a href="#cb176-1795" aria-hidden="true" tabindex="-1"></a>| 31  | 01-05 | 01-06 | 01-07 | 01-08 | 01-09 | 01-10 | 01-11 | 01-12 | 01-13 | 01-14 |</span>
<span id="cb176-1796"><a href="#cb176-1796" aria-hidden="true" tabindex="-1"></a>| 32  | 01-15 | 01-16 | 01-17 | 01-18 | 01-19 | 01-20 | 01-21 | 01-22 | 01-23 | 01-24 |</span>
<span id="cb176-1797"><a href="#cb176-1797" aria-hidden="true" tabindex="-1"></a>| 33  | 01-25 | 01-26 | 01-27 | 01-28 | 01-29 | 01-30 | 01-31 | 02-01 | 02-02 | 02-03 |</span>
<span id="cb176-1798"><a href="#cb176-1798" aria-hidden="true" tabindex="-1"></a>| 34  | 02-04 | 02-05 | 02-06 | 02-07 | 02-08 | 02-09 | 02-10 | 02-11 | 02-12 | 02-13 |</span>
<span id="cb176-1799"><a href="#cb176-1799" aria-hidden="true" tabindex="-1"></a>| 35  | 02-14 | 02-15 | 02-16 | 02-17 | 02-18 | 02-19 | 02-20 | 02-21 | 02-22 | 02-23 |</span>
<span id="cb176-1800"><a href="#cb176-1800" aria-hidden="true" tabindex="-1"></a>| 36  | 02-24 | 02-25 | 02-26 | 02-27 | 02-28 | 02-29 |       |       |       |       |</span>
<span id="cb176-1801"><a href="#cb176-1801" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1802"><a href="#cb176-1802" aria-hidden="true" tabindex="-1"></a>: <span class="in">`Doty`</span> number to Gregorian calendar date conversion {#tbl-doty2greg}</span>
<span id="cb176-1803"><a href="#cb176-1803" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-1804"><a href="#cb176-1804" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1805"><a href="#cb176-1805" aria-hidden="true" tabindex="-1"></a><span class="fu">### Gregorian calendar date conversion {#sec-conv}</span></span>
<span id="cb176-1806"><a href="#cb176-1806" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1807"><a href="#cb176-1807" aria-hidden="true" tabindex="-1"></a>In addition to using a conversion table like @tbl-greg2doty, we can convert between Gregorian calendar dates and <span class="in">`Decalendar`</span> <span class="in">`doty`</span> dates programmatically. The code in @exm-coor is derived from the <span class="co">[</span><span class="ot">`days_from_civil`</span><span class="co">](http://howardhinnant.github.io/date_algorithms.html#days_from_civil)</span> and <span class="co">[</span><span class="ot">`civil_from_days`</span><span class="co">](http://howardhinnant.github.io/date_algorithms.html#civil_from_days)</span> algorithms described by <span class="co">[</span><span class="ot">Howard Hinnant</span><span class="co">](https://howardhinnant.github.io/)</span> in <span class="co">[</span><span class="ot">*chrono-Compatible Low-Level Date Algorithms*</span><span class="co">](http://howardhinnant.github.io/date_algorithms.html)</span> <span class="co">[</span><span class="ot">-@hinnant2014</span><span class="co">]</span>. The output of the <span class="in">`greg2doty`</span> function is a <span class="in">`doty`</span>, while its inverse function, <span class="in">`doty2greg`</span>, returns an array containing a month and a <span class="in">`dotm`</span> number.</span>
<span id="cb176-1808"><a href="#cb176-1808" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1809"><a href="#cb176-1809" aria-hidden="true" tabindex="-1"></a>::: {#exm-coor}</span>
<span id="cb176-1810"><a href="#cb176-1810" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-1811"><a href="#cb176-1811" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1812"><a href="#cb176-1812" aria-hidden="true" tabindex="-1"></a>::: {.panel-tabset group="language"}</span>
<span id="cb176-1813"><a href="#cb176-1813" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1814"><a href="#cb176-1814" aria-hidden="true" tabindex="-1"></a><span class="fu">#### JavaScript</span></span>
<span id="cb176-1815"><a href="#cb176-1815" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1816"><a href="#cb176-1816" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `greg2doty`</span></span>
<span id="cb176-1817"><a href="#cb176-1817" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1818"><a href="#cb176-1818" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_javascript.ipynb#greg2doty echo=true &gt;}}</span>
<span id="cb176-1819"><a href="#cb176-1819" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1820"><a href="#cb176-1820" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `doty2greg`</span></span>
<span id="cb176-1821"><a href="#cb176-1821" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1822"><a href="#cb176-1822" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_javascript.ipynb#doty2greg echo=true &gt;}}</span>
<span id="cb176-1823"><a href="#cb176-1823" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1824"><a href="#cb176-1824" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Julia</span></span>
<span id="cb176-1825"><a href="#cb176-1825" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1826"><a href="#cb176-1826" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `greg2doty`</span></span>
<span id="cb176-1827"><a href="#cb176-1827" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1828"><a href="#cb176-1828" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_julia.ipynb#greg2doty echo=true &gt;}}</span>
<span id="cb176-1829"><a href="#cb176-1829" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1830"><a href="#cb176-1830" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `doty2greg`</span></span>
<span id="cb176-1831"><a href="#cb176-1831" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1832"><a href="#cb176-1832" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_julia.ipynb#doty2greg echo=true &gt;}}</span>
<span id="cb176-1833"><a href="#cb176-1833" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1834"><a href="#cb176-1834" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Python</span></span>
<span id="cb176-1835"><a href="#cb176-1835" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1836"><a href="#cb176-1836" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `greg2doty`</span></span>
<span id="cb176-1837"><a href="#cb176-1837" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1838"><a href="#cb176-1838" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_python.ipynb#greg2doty echo=true &gt;}}</span>
<span id="cb176-1839"><a href="#cb176-1839" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1840"><a href="#cb176-1840" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `doty2greg`</span></span>
<span id="cb176-1841"><a href="#cb176-1841" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1842"><a href="#cb176-1842" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_python.ipynb#doty2greg echo=true &gt;}}</span>
<span id="cb176-1843"><a href="#cb176-1843" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1844"><a href="#cb176-1844" aria-hidden="true" tabindex="-1"></a><span class="fu">#### R</span></span>
<span id="cb176-1845"><a href="#cb176-1845" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1846"><a href="#cb176-1846" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `greg2doty`</span></span>
<span id="cb176-1847"><a href="#cb176-1847" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1848"><a href="#cb176-1848" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_r.ipynb#greg2doty echo=true &gt;}}</span>
<span id="cb176-1849"><a href="#cb176-1849" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1850"><a href="#cb176-1850" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `doty2greg`</span></span>
<span id="cb176-1851"><a href="#cb176-1851" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1852"><a href="#cb176-1852" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_r.ipynb#doty2greg echo=true &gt;}}</span>
<span id="cb176-1853"><a href="#cb176-1853" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1854"><a href="#cb176-1854" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-1855"><a href="#cb176-1855" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1856"><a href="#cb176-1856" aria-hidden="true" tabindex="-1"></a><span class="fu">### Gregorian calendar months and years {#sec-gregm}</span></span>
<span id="cb176-1857"><a href="#cb176-1857" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1858"><a href="#cb176-1858" aria-hidden="true" tabindex="-1"></a><span class="in">`Decalendar`</span> only uses months for converting to and from Gregorian calendar dates. Nevertheless, discussing months can help to explain how <span class="in">`Decalendar`</span> works. The <span class="in">`Decalendar`</span> year ends with January and February, as shown in @tbl-gregm. During these two months, the <span class="in">`Decalendar`</span> year is 1 less than the Gregorian calendar year. To obtain a <span class="in">`Decalendar`</span> year (<span class="in">`dy`</span>) from a Gregorian calendar year (<span class="in">`gy`</span>) and month number (<span class="in">`gm`</span>), we subtract 1 from <span class="in">`gy`</span> if <span class="in">`gm`</span> is less than 3 ($dy = gy - <span class="co">[</span><span class="ot">gm &lt; 3</span><span class="co">]</span>$). To obtain a Gregorian calendar year (<span class="in">`gy`</span>) from a <span class="in">`Decalendar`</span> year (<span class="in">`dy`</span>) and <span class="in">`doty`</span>, we add 1 to <span class="in">`dy`</span> if <span class="in">`doty`</span> is greater than 305 ($gy = dy + <span class="co">[</span><span class="ot">dm &gt; 305</span><span class="co">]</span>$). Code to convert between <span class="in">`Decalendar`</span> and Gregorian calendar years is provided in @exm-gregm.</span>
<span id="cb176-1859"><a href="#cb176-1859" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1860"><a href="#cb176-1860" aria-hidden="true" tabindex="-1"></a><span class="fu">#### @tbl-gregm</span></span>
<span id="cb176-1861"><a href="#cb176-1861" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1862"><a href="#cb176-1862" aria-hidden="true" tabindex="-1"></a>::: {.callout-note collapse="true" title="Click to toggle table expansion" icon="false"}</span>
<span id="cb176-1863"><a href="#cb176-1863" aria-hidden="true" tabindex="-1"></a>| dm  | gm  | Month     |</span>
<span id="cb176-1864"><a href="#cb176-1864" aria-hidden="true" tabindex="-1"></a>|-----|-----|-----------|</span>
<span id="cb176-1865"><a href="#cb176-1865" aria-hidden="true" tabindex="-1"></a>| 0   | 3   | March     |</span>
<span id="cb176-1866"><a href="#cb176-1866" aria-hidden="true" tabindex="-1"></a>| 1   | 4   | April     |</span>
<span id="cb176-1867"><a href="#cb176-1867" aria-hidden="true" tabindex="-1"></a>| 2   | 5   | May       |</span>
<span id="cb176-1868"><a href="#cb176-1868" aria-hidden="true" tabindex="-1"></a>| 3   | 6   | June      |</span>
<span id="cb176-1869"><a href="#cb176-1869" aria-hidden="true" tabindex="-1"></a>| 4   | 7   | July      |</span>
<span id="cb176-1870"><a href="#cb176-1870" aria-hidden="true" tabindex="-1"></a>| 5   | 8   | August    |</span>
<span id="cb176-1871"><a href="#cb176-1871" aria-hidden="true" tabindex="-1"></a>| 6   | 9   | September |</span>
<span id="cb176-1872"><a href="#cb176-1872" aria-hidden="true" tabindex="-1"></a>| 7   | 10  | October   |</span>
<span id="cb176-1873"><a href="#cb176-1873" aria-hidden="true" tabindex="-1"></a>| 8   | 11  | November  |</span>
<span id="cb176-1874"><a href="#cb176-1874" aria-hidden="true" tabindex="-1"></a>| 9   | 12  | December  |</span>
<span id="cb176-1875"><a href="#cb176-1875" aria-hidden="true" tabindex="-1"></a>| 10  | 1   | January   |</span>
<span id="cb176-1876"><a href="#cb176-1876" aria-hidden="true" tabindex="-1"></a>| 11  | 2   | February  |</span>
<span id="cb176-1877"><a href="#cb176-1877" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1878"><a href="#cb176-1878" aria-hidden="true" tabindex="-1"></a>: The numeric values of months in <span class="in">`Decalendar`</span> and the Gregorian calendar {#tbl-gregm}</span>
<span id="cb176-1879"><a href="#cb176-1879" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-1880"><a href="#cb176-1880" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1881"><a href="#cb176-1881" aria-hidden="true" tabindex="-1"></a>::: {#exm-gregm}</span>
<span id="cb176-1882"><a href="#cb176-1882" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-1883"><a href="#cb176-1883" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1884"><a href="#cb176-1884" aria-hidden="true" tabindex="-1"></a>::: {.panel-tabset group="language"}</span>
<span id="cb176-1885"><a href="#cb176-1885" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1886"><a href="#cb176-1886" aria-hidden="true" tabindex="-1"></a><span class="fu">#### JavaScript</span></span>
<span id="cb176-1887"><a href="#cb176-1887" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1888"><a href="#cb176-1888" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `greg2year`</span></span>
<span id="cb176-1889"><a href="#cb176-1889" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1890"><a href="#cb176-1890" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_javascript.ipynb#greg2year echo=true &gt;}}</span>
<span id="cb176-1891"><a href="#cb176-1891" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1892"><a href="#cb176-1892" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `doty2year`</span></span>
<span id="cb176-1893"><a href="#cb176-1893" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1894"><a href="#cb176-1894" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_javascript.ipynb#doty2year echo=true &gt;}}</span>
<span id="cb176-1895"><a href="#cb176-1895" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1896"><a href="#cb176-1896" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Julia</span></span>
<span id="cb176-1897"><a href="#cb176-1897" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1898"><a href="#cb176-1898" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `greg2year`</span></span>
<span id="cb176-1899"><a href="#cb176-1899" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1900"><a href="#cb176-1900" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_julia.ipynb#greg2year echo=true &gt;}}</span>
<span id="cb176-1901"><a href="#cb176-1901" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1902"><a href="#cb176-1902" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `doty2year`</span></span>
<span id="cb176-1903"><a href="#cb176-1903" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1904"><a href="#cb176-1904" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_julia.ipynb#doty2year echo=true &gt;}}</span>
<span id="cb176-1905"><a href="#cb176-1905" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1906"><a href="#cb176-1906" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Python</span></span>
<span id="cb176-1907"><a href="#cb176-1907" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1908"><a href="#cb176-1908" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `greg2year`</span></span>
<span id="cb176-1909"><a href="#cb176-1909" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1910"><a href="#cb176-1910" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_python.ipynb#greg2year echo=true &gt;}}</span>
<span id="cb176-1911"><a href="#cb176-1911" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1912"><a href="#cb176-1912" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `doty2year`</span></span>
<span id="cb176-1913"><a href="#cb176-1913" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1914"><a href="#cb176-1914" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_python.ipynb#doty2year echo=true &gt;}}</span>
<span id="cb176-1915"><a href="#cb176-1915" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1916"><a href="#cb176-1916" aria-hidden="true" tabindex="-1"></a><span class="fu">#### R</span></span>
<span id="cb176-1917"><a href="#cb176-1917" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1918"><a href="#cb176-1918" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `greg2year`</span></span>
<span id="cb176-1919"><a href="#cb176-1919" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1920"><a href="#cb176-1920" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_r.ipynb#greg2year echo=true &gt;}}</span>
<span id="cb176-1921"><a href="#cb176-1921" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1922"><a href="#cb176-1922" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `doty2year`</span></span>
<span id="cb176-1923"><a href="#cb176-1923" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1924"><a href="#cb176-1924" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_r.ipynb#doty2year echo=true &gt;}}</span>
<span id="cb176-1925"><a href="#cb176-1925" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1926"><a href="#cb176-1926" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-1927"><a href="#cb176-1927" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1928"><a href="#cb176-1928" aria-hidden="true" tabindex="-1"></a><span class="fu">### Leap years {#sec-gregl}</span></span>
<span id="cb176-1929"><a href="#cb176-1929" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1930"><a href="#cb176-1930" aria-hidden="true" tabindex="-1"></a>A leap year has 366 days in both <span class="in">`Decalendar`</span> and the Gregorian calendar. <span class="in">`Day`</span> <span class="in">`365`</span> is Leap Day in <span class="in">`Decalendar`</span> and is synonymous with February 29, the Gregorian calendar leap day. <span class="in">`Decalendar`</span> positions Leap Day, <span class="in">`Day`</span> <span class="in">`365`</span>, at the end of the year, which requires an adjustment of the Gregorian calendar definition of a leap year. To check if a <span class="in">`Decalendar`</span> year is a leap, we must first add 1 to the year before plugging it into @eq-gregl or the <span class="co">[</span><span class="ot">`year2bool`</span><span class="co">](http://howardhinnant.github.io/date_algorithms.html#is_leap)</span> function in <span class="co">[</span><span class="ot">@exm-gregl; @hinnant2014</span><span class="co">]</span>.</span>
<span id="cb176-1931"><a href="#cb176-1931" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1932"><a href="#cb176-1932" aria-hidden="true" tabindex="-1"></a>Interestingly, years from negative <span class="in">`deco`</span> dates do not need any adjustment. The first day of <span class="in">`Year`</span> <span class="in">`1999`</span> is <span class="in">`1999+000`</span> or <span class="in">`2000-366`</span>, while the last day is <span class="in">`1999+365`</span> or <span class="in">`2000-001`</span>. <span class="in">`Year`</span> <span class="in">`1999`</span> is a leap year from the perspective of the positive <span class="in">`deco`</span> dates, <span class="in">`1999+000`</span> and <span class="in">`1999+365`</span>, because it goes from <span class="in">`Day`</span> <span class="in">`0`</span> to <span class="in">`Day`</span> <span class="in">`365`</span>. In the context of the negative <span class="in">`deco`</span> dates,<span class="in">`2000-366`</span> and <span class="in">`2000-001`</span>, <span class="in">`Year`</span> <span class="in">`2000`</span> is a leap year because it goes from <span class="in">`Day`</span> <span class="in">`-366`</span> to <span class="in">`Day`</span> <span class="in">`-1`</span>.</span>
<span id="cb176-1933"><a href="#cb176-1933" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1934"><a href="#cb176-1934" aria-hidden="true" tabindex="-1"></a>$$y \mod 4 = 0 \land year \mod 100 \neq 0 \lor year \mod 400 = 0$$ {#eq-gregl}</span>
<span id="cb176-1935"><a href="#cb176-1935" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1936"><a href="#cb176-1936" aria-hidden="true" tabindex="-1"></a>::: {#exm-gregl}</span>
<span id="cb176-1937"><a href="#cb176-1937" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-1938"><a href="#cb176-1938" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1939"><a href="#cb176-1939" aria-hidden="true" tabindex="-1"></a>::: {.panel-tabset group="language"}</span>
<span id="cb176-1940"><a href="#cb176-1940" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1941"><a href="#cb176-1941" aria-hidden="true" tabindex="-1"></a><span class="fu">#### JavaScript</span></span>
<span id="cb176-1942"><a href="#cb176-1942" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1943"><a href="#cb176-1943" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `leap`</span></span>
<span id="cb176-1944"><a href="#cb176-1944" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1945"><a href="#cb176-1945" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_javascript.ipynb#leap echo=true &gt;}}</span>
<span id="cb176-1946"><a href="#cb176-1946" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1947"><a href="#cb176-1947" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Julia</span></span>
<span id="cb176-1948"><a href="#cb176-1948" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1949"><a href="#cb176-1949" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `leap`</span></span>
<span id="cb176-1950"><a href="#cb176-1950" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1951"><a href="#cb176-1951" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_julia.ipynb#leap echo=true &gt;}}</span>
<span id="cb176-1952"><a href="#cb176-1952" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1953"><a href="#cb176-1953" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Python</span></span>
<span id="cb176-1954"><a href="#cb176-1954" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1955"><a href="#cb176-1955" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `leap`</span></span>
<span id="cb176-1956"><a href="#cb176-1956" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1957"><a href="#cb176-1957" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_python.ipynb#leap echo=true &gt;}}</span>
<span id="cb176-1958"><a href="#cb176-1958" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1959"><a href="#cb176-1959" aria-hidden="true" tabindex="-1"></a><span class="fu">#### R</span></span>
<span id="cb176-1960"><a href="#cb176-1960" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1961"><a href="#cb176-1961" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `leap`</span></span>
<span id="cb176-1962"><a href="#cb176-1962" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1963"><a href="#cb176-1963" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_r.ipynb#leap echo=true &gt;}}</span>
<span id="cb176-1964"><a href="#cb176-1964" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1965"><a href="#cb176-1965" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-1966"><a href="#cb176-1966" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1967"><a href="#cb176-1967" aria-hidden="true" tabindex="-1"></a><span class="fu">## ISO 8601 {#sec-iso}</span></span>
<span id="cb176-1968"><a href="#cb176-1968" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1969"><a href="#cb176-1969" aria-hidden="true" tabindex="-1"></a><span class="fu">### Years {#sec-isoy}</span></span>
<span id="cb176-1970"><a href="#cb176-1970" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1971"><a href="#cb176-1971" aria-hidden="true" tabindex="-1"></a>Both <span class="in">`Decalendar`</span> and <span class="co">[</span><span class="ot">ISO 8601</span><span class="co">](https://en.wikipedia.org/wiki/ISO_8601)</span> dates show <span class="co">[</span><span class="ot">years</span><span class="co">](https://en.wikipedia.org/wiki/ISO_8601#Years)</span> as 4-digit numbers. Unlike ISO 8601, <span class="in">`Decalendar`</span> does not require years to be included in dates. As shown in @tbl-2x2, <span class="in">`Decalendar`</span> <span class="in">`deco`</span> dates include years while <span class="in">`doty`</span> dates do not. Year 0 in both <span class="in">`Decalendar`</span> and ISO 8601 is 1 BCE (Before Common Era) in the Gregorian calendar. The first day of Year 0 in <span class="in">`Decalendar`</span>, <span class="in">`0000+000`</span>, is called the <span class="in">`Decalendar`</span> epoch and translates to March 1, 1 BCE in the Gregorian calendar. The first day of Year 0 according to ISO 8601 is <span class="in">`-0001+306`</span> in <span class="in">`Decalendar`</span> and January 1, 1 BCE in the Gregorian calendar.</span>
<span id="cb176-1972"><a href="#cb176-1972" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1973"><a href="#cb176-1973" aria-hidden="true" tabindex="-1"></a><span class="fu">### Ordinal dates {#sec-isoo}</span></span>
<span id="cb176-1974"><a href="#cb176-1974" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1975"><a href="#cb176-1975" aria-hidden="true" tabindex="-1"></a><span class="in">`Deco`</span> dates (<span class="in">`year+day`</span>) are very similar to <span class="co">[</span><span class="ot">ISO 8601 ordinal (`isoo`) dates</span><span class="co">](https://en.wikipedia.org/wiki/ISO_8601#Ordinal_dates)</span> (<span class="in">`year-day`</span>). Like <span class="in">`Decalendar`</span> <span class="in">`doties`</span>, <span class="in">`isoo`</span> dates count the number of days since the start of the year. Unlike ordinal dates, <span class="in">`doties`</span> are <span class="co">[</span><span class="ot">zero-based</span><span class="co">](https://en.wikipedia.org/wiki/Zero-based_numbering)</span> and do not differ across common and leap years. The <span class="in">`deco`</span> date can be easily obtained from the <span class="in">`isoo`</span> date using the calculations shown in @eq-isoo1, @eq-isoo2, and @exm-isoo. These calculation shift the <span class="in">`isoo`</span> date by 60 or 61 days to account for the 2-month difference between <span class="in">`Decalendar`</span> and the Gregorian calendar.</span>
<span id="cb176-1976"><a href="#cb176-1976" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1977"><a href="#cb176-1977" aria-hidden="true" tabindex="-1"></a>In @exm-isoo, the <span class="in">`isoo2doty`</span> and <span class="in">`doty2isoo`</span> functions convert between ISO 8601 ordinal day numbers and <span class="in">`doties`</span>. We use the <span class="in">`year2bool`</span> function from @exm-gregl in @exm-isoo to correct for the fact that Leap Day shifts ISO 8601 ordinal day numbers by 1 day in leap years. To be clear, we only have to take Leap Day into account when dealing with <span class="in">`isoo`</span> dates. <span class="in">`Decalendar`</span> <span class="in">`doties`</span> are the same in common and leap years, because Leap Day is at the end of the <span class="in">`Decalendar`</span> year.</span>
<span id="cb176-1978"><a href="#cb176-1978" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1979"><a href="#cb176-1979" aria-hidden="true" tabindex="-1"></a>$$(isoordinal + 305 - year2bool(year)) \mod 365$$ {#eq-isoo1}</span>
<span id="cb176-1980"><a href="#cb176-1980" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1981"><a href="#cb176-1981" aria-hidden="true" tabindex="-1"></a>$$(doty + 60 + year2bool(year + 1)) \mod 365$$ {#eq-isoo2}</span>
<span id="cb176-1982"><a href="#cb176-1982" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1983"><a href="#cb176-1983" aria-hidden="true" tabindex="-1"></a>::: {#exm-isoo}</span>
<span id="cb176-1984"><a href="#cb176-1984" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-1985"><a href="#cb176-1985" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1986"><a href="#cb176-1986" aria-hidden="true" tabindex="-1"></a>::: {.panel-tabset group="language"}</span>
<span id="cb176-1987"><a href="#cb176-1987" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1988"><a href="#cb176-1988" aria-hidden="true" tabindex="-1"></a><span class="fu">#### JavaScript</span></span>
<span id="cb176-1989"><a href="#cb176-1989" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1990"><a href="#cb176-1990" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `isoo2doty`</span></span>
<span id="cb176-1991"><a href="#cb176-1991" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1992"><a href="#cb176-1992" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_javascript.ipynb#isoo2doty echo=true &gt;}}</span>
<span id="cb176-1993"><a href="#cb176-1993" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1994"><a href="#cb176-1994" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `isoo2deco`</span></span>
<span id="cb176-1995"><a href="#cb176-1995" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1996"><a href="#cb176-1996" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_javascript.ipynb#isoo2deco echo=true &gt;}}</span>
<span id="cb176-1997"><a href="#cb176-1997" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-1998"><a href="#cb176-1998" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `doty2isoo`</span></span>
<span id="cb176-1999"><a href="#cb176-1999" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2000"><a href="#cb176-2000" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_javascript.ipynb#doty2isoo echo=true &gt;}}</span>
<span id="cb176-2001"><a href="#cb176-2001" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2002"><a href="#cb176-2002" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Julia</span></span>
<span id="cb176-2003"><a href="#cb176-2003" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2004"><a href="#cb176-2004" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `isoo2year`</span></span>
<span id="cb176-2005"><a href="#cb176-2005" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2006"><a href="#cb176-2006" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_julia.ipynb#isoo2doty echo=true &gt;}}</span>
<span id="cb176-2007"><a href="#cb176-2007" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2008"><a href="#cb176-2008" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `isoo2doty`</span></span>
<span id="cb176-2009"><a href="#cb176-2009" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2010"><a href="#cb176-2010" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_julia.ipynb#isoo2doty echo=true &gt;}}</span>
<span id="cb176-2011"><a href="#cb176-2011" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2012"><a href="#cb176-2012" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `doty2isoo`</span></span>
<span id="cb176-2013"><a href="#cb176-2013" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2014"><a href="#cb176-2014" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_julia.ipynb#doty2isoo echo=true &gt;}}</span>
<span id="cb176-2015"><a href="#cb176-2015" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2016"><a href="#cb176-2016" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Python</span></span>
<span id="cb176-2017"><a href="#cb176-2017" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2018"><a href="#cb176-2018" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `isoo2year`</span></span>
<span id="cb176-2019"><a href="#cb176-2019" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2020"><a href="#cb176-2020" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_python.ipynb#isoo2year echo=true &gt;}}</span>
<span id="cb176-2021"><a href="#cb176-2021" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2022"><a href="#cb176-2022" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `isoo2doty`</span></span>
<span id="cb176-2023"><a href="#cb176-2023" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2024"><a href="#cb176-2024" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_python.ipynb#isoo2doty echo=true &gt;}}</span>
<span id="cb176-2025"><a href="#cb176-2025" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2026"><a href="#cb176-2026" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `doty2isoo`</span></span>
<span id="cb176-2027"><a href="#cb176-2027" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2028"><a href="#cb176-2028" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_python.ipynb#doty2isoo echo=true &gt;}}</span>
<span id="cb176-2029"><a href="#cb176-2029" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2030"><a href="#cb176-2030" aria-hidden="true" tabindex="-1"></a><span class="fu">#### R</span></span>
<span id="cb176-2031"><a href="#cb176-2031" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2032"><a href="#cb176-2032" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `isoo2year`</span></span>
<span id="cb176-2033"><a href="#cb176-2033" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2034"><a href="#cb176-2034" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_r.ipynb#isoo2year echo=true &gt;}}</span>
<span id="cb176-2035"><a href="#cb176-2035" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2036"><a href="#cb176-2036" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `isoo2doty`</span></span>
<span id="cb176-2037"><a href="#cb176-2037" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2038"><a href="#cb176-2038" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_r.ipynb#isoo2doty echo=true &gt;}}</span>
<span id="cb176-2039"><a href="#cb176-2039" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2040"><a href="#cb176-2040" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `doty2isoo`</span></span>
<span id="cb176-2041"><a href="#cb176-2041" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2042"><a href="#cb176-2042" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_r.ipynb#doty2isoo echo=true &gt;}}</span>
<span id="cb176-2043"><a href="#cb176-2043" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2044"><a href="#cb176-2044" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-2045"><a href="#cb176-2045" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2046"><a href="#cb176-2046" aria-hidden="true" tabindex="-1"></a><span class="fu">### Calendar dates {#sec-isoc}</span></span>
<span id="cb176-2047"><a href="#cb176-2047" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2048"><a href="#cb176-2048" aria-hidden="true" tabindex="-1"></a>ISO 8601 <span class="co">[</span><span class="ot">calendar dates (`isoc`)</span><span class="co">](https://en.wikipedia.org/wiki/ISO_8601#Calendar_dates)</span> consist of a four-digit year, a two-digit month, and a two-digit <span class="in">`dotm`</span> separated by hyphens (<span class="in">`year-mm-dd`</span>). This format is the current widely accepted standard for displaying Gregorian calendar dates. We can combine code from @exm-coor and @exm-gregm to convert between <span class="in">`deco`</span> dates and <span class="in">`isoc`</span> dates, as shown in @exm-isoc. The code in @exm-isoc formats the output of the <span class="in">`greg2year`</span> and <span class="in">`greg2doty`</span> functions into <span class="in">`deco`</span> dates and the output of the <span class="in">`doty2year`</span> and <span class="in">`doty2greg`</span> functions into <span class="in">`isoc`</span> dates.</span>
<span id="cb176-2049"><a href="#cb176-2049" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2050"><a href="#cb176-2050" aria-hidden="true" tabindex="-1"></a>As mentioned in @sec-coor, <span class="in">`Decalendar`</span> uses <span class="in">`doties`</span> as dates instead of month and day-of-the-month (<span class="in">`dotm`</span>) numbers, but if required, Gregorian calendar dates can be provided in the <span class="in">`Decalendar`</span> calendar (<span class="in">`decc`</span>, pronounced "deck-see") format (<span class="in">`year+m+dd`</span>), which is very similar to the <span class="in">`isoc`</span> date format. The <span class="in">`decc`</span> format is described in @sec-dotm. Examples of the <span class="in">`decc`</span> format are provided in @sec-dotex. To be clear, the <span class="in">`decc`</span> format is only used to display Gregorian calendar dates and otherwise does not play any role in <span class="in">`Decalendar`</span>.</span>
<span id="cb176-2051"><a href="#cb176-2051" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2052"><a href="#cb176-2052" aria-hidden="true" tabindex="-1"></a>::: {#exm-isoc}</span>
<span id="cb176-2053"><a href="#cb176-2053" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-2054"><a href="#cb176-2054" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2055"><a href="#cb176-2055" aria-hidden="true" tabindex="-1"></a>::: {.panel-tabset group="language"}</span>
<span id="cb176-2056"><a href="#cb176-2056" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2057"><a href="#cb176-2057" aria-hidden="true" tabindex="-1"></a><span class="fu">#### JavaScript</span></span>
<span id="cb176-2058"><a href="#cb176-2058" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2059"><a href="#cb176-2059" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `greg2deco`</span></span>
<span id="cb176-2060"><a href="#cb176-2060" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2061"><a href="#cb176-2061" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_javascript.ipynb#greg2deco echo=true &gt;}}</span>
<span id="cb176-2062"><a href="#cb176-2062" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2063"><a href="#cb176-2063" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `doty2isoc`</span></span>
<span id="cb176-2064"><a href="#cb176-2064" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2065"><a href="#cb176-2065" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_javascript.ipynb#doty2isoc echo=true &gt;}}</span>
<span id="cb176-2066"><a href="#cb176-2066" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2067"><a href="#cb176-2067" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `greg2isoc`</span></span>
<span id="cb176-2068"><a href="#cb176-2068" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2069"><a href="#cb176-2069" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_javascript.ipynb#greg2isoc echo=true &gt;}}</span>
<span id="cb176-2070"><a href="#cb176-2070" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2071"><a href="#cb176-2071" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Julia</span></span>
<span id="cb176-2072"><a href="#cb176-2072" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2073"><a href="#cb176-2073" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `deco` date</span></span>
<span id="cb176-2074"><a href="#cb176-2074" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2075"><a href="#cb176-2075" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_julia.ipynb#decdate echo=true &gt;}}</span>
<span id="cb176-2076"><a href="#cb176-2076" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2077"><a href="#cb176-2077" aria-hidden="true" tabindex="-1"></a><span class="fu">##### ISO 8601 date</span></span>
<span id="cb176-2078"><a href="#cb176-2078" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2079"><a href="#cb176-2079" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_julia.ipynb#isodate echo=true &gt;}}</span>
<span id="cb176-2080"><a href="#cb176-2080" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2081"><a href="#cb176-2081" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Python</span></span>
<span id="cb176-2082"><a href="#cb176-2082" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2083"><a href="#cb176-2083" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `deco` date</span></span>
<span id="cb176-2084"><a href="#cb176-2084" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2085"><a href="#cb176-2085" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_python.ipynb#decdate echo=true &gt;}}</span>
<span id="cb176-2086"><a href="#cb176-2086" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2087"><a href="#cb176-2087" aria-hidden="true" tabindex="-1"></a><span class="fu">##### ISO 8601 date</span></span>
<span id="cb176-2088"><a href="#cb176-2088" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2089"><a href="#cb176-2089" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_python.ipynb#isodate echo=true &gt;}}</span>
<span id="cb176-2090"><a href="#cb176-2090" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2091"><a href="#cb176-2091" aria-hidden="true" tabindex="-1"></a><span class="fu">#### R</span></span>
<span id="cb176-2092"><a href="#cb176-2092" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2093"><a href="#cb176-2093" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `deco` date</span></span>
<span id="cb176-2094"><a href="#cb176-2094" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2095"><a href="#cb176-2095" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_r.ipynb#decdate echo=true &gt;}}</span>
<span id="cb176-2096"><a href="#cb176-2096" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2097"><a href="#cb176-2097" aria-hidden="true" tabindex="-1"></a><span class="fu">##### ISO 8601 date</span></span>
<span id="cb176-2098"><a href="#cb176-2098" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2099"><a href="#cb176-2099" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_r.ipynb#isodate echo=true &gt;}}</span>
<span id="cb176-2100"><a href="#cb176-2100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2101"><a href="#cb176-2101" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-2102"><a href="#cb176-2102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2103"><a href="#cb176-2103" aria-hidden="true" tabindex="-1"></a><span class="fu">### Time zones {#sec-isoz}</span></span>
<span id="cb176-2104"><a href="#cb176-2104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2105"><a href="#cb176-2105" aria-hidden="true" tabindex="-1"></a><span class="in">`Isoc`</span> dates can be combined with the <span class="co">[</span><span class="ot">ISO 8601 time (`isot`) format</span><span class="co">](https://en.wikipedia.org/wiki/ISO_8601#Times)</span> (<span class="in">`hh:mm:ss`</span>) to form <span class="in">`isoc`</span> timestamps. Likewise, <span class="in">`deco`</span> dates can be combined with <span class="in">`Declock`</span> times to form <span class="in">`deco`</span> timestamps. Both <span class="in">`deco`</span> (<span class="in">`year+day.clockZ`</span>) and <span class="in">`isoc`</span> (<span class="in">`year-mm-ddThh:mm:ssZ`</span>) timestamps can end in a <span class="in">`Z`</span>. This <span class="in">`Z`</span> is a <span class="co">[</span><span class="ot">military time zone code</span><span class="co">](https://en.wikipedia.org/wiki/Military_time_zone#Description)</span> that represents the <span class="co">[</span><span class="ot">UTC+00:00</span><span class="co">](https://en.wikipedia.org/wiki/UTC+00:00)</span> time zone, which is the basis of <span class="co">[</span><span class="ot">Coordinated Universal Time (UTC)</span><span class="co">](https://en.wikipedia.org/wiki/Coordinated_Universal_Time)</span>.</span>
<span id="cb176-2106"><a href="#cb176-2106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2107"><a href="#cb176-2107" aria-hidden="true" tabindex="-1"></a><span class="in">`Deco`</span> timestamps that are synchronized with UTC can either end in <span class="in">`Z`</span> (<span class="in">`year+day.clockZ`</span>) or <span class="in">`+0`</span> (<span class="in">`year+day.clock+0`</span>). Noon UTC can be written <span class="in">`.5Z`</span> or <span class="in">`.5+0`</span> in <span class="in">`Declock`</span> and 12:00:00Z, 120000Z, 12:00:00+00, or 120000+00 as per ISO 8601. The code in @exm-isoz converts between UTC offsets and military time zone codes. @sec-zone provides more information on <span class="in">`Declock`</span> time zones.</span>
<span id="cb176-2108"><a href="#cb176-2108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2109"><a href="#cb176-2109" aria-hidden="true" tabindex="-1"></a>::: {#exm-isoz}</span>
<span id="cb176-2110"><a href="#cb176-2110" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-2111"><a href="#cb176-2111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2112"><a href="#cb176-2112" aria-hidden="true" tabindex="-1"></a>::: {.panel-tabset group="language"}</span>
<span id="cb176-2113"><a href="#cb176-2113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2114"><a href="#cb176-2114" aria-hidden="true" tabindex="-1"></a><span class="fu">#### JavaScript</span></span>
<span id="cb176-2115"><a href="#cb176-2115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2116"><a href="#cb176-2116" aria-hidden="true" tabindex="-1"></a><span class="fu">##### hour2zone</span></span>
<span id="cb176-2117"><a href="#cb176-2117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2118"><a href="#cb176-2118" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_javascript.ipynb#hour2zone echo=true &gt;}}</span>
<span id="cb176-2119"><a href="#cb176-2119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2120"><a href="#cb176-2120" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `zone2hour`</span></span>
<span id="cb176-2121"><a href="#cb176-2121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2122"><a href="#cb176-2122" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_javascript.ipynb#zone2hour echo=true &gt;}}</span>
<span id="cb176-2123"><a href="#cb176-2123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2124"><a href="#cb176-2124" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Julia</span></span>
<span id="cb176-2125"><a href="#cb176-2125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2126"><a href="#cb176-2126" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `hour2zone`</span></span>
<span id="cb176-2127"><a href="#cb176-2127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2128"><a href="#cb176-2128" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_julia.ipynb#hour2zone echo=true &gt;}}</span>
<span id="cb176-2129"><a href="#cb176-2129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2130"><a href="#cb176-2130" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `zone2hour`</span></span>
<span id="cb176-2131"><a href="#cb176-2131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2132"><a href="#cb176-2132" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_julia.ipynb#zone2hour echo=true &gt;}}</span>
<span id="cb176-2133"><a href="#cb176-2133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2134"><a href="#cb176-2134" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Python</span></span>
<span id="cb176-2135"><a href="#cb176-2135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2136"><a href="#cb176-2136" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `hour2zone`</span></span>
<span id="cb176-2137"><a href="#cb176-2137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2138"><a href="#cb176-2138" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_python.ipynb#hour2zone echo=true &gt;}}</span>
<span id="cb176-2139"><a href="#cb176-2139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2140"><a href="#cb176-2140" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `zone2hour`</span></span>
<span id="cb176-2141"><a href="#cb176-2141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2142"><a href="#cb176-2142" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_python.ipynb#zone2hour echo=true &gt;}}</span>
<span id="cb176-2143"><a href="#cb176-2143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2144"><a href="#cb176-2144" aria-hidden="true" tabindex="-1"></a><span class="fu">#### R</span></span>
<span id="cb176-2145"><a href="#cb176-2145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2146"><a href="#cb176-2146" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `hour2zone`</span></span>
<span id="cb176-2147"><a href="#cb176-2147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2148"><a href="#cb176-2148" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_r.ipynb#hour2zone echo=true &gt;}}</span>
<span id="cb176-2149"><a href="#cb176-2149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2150"><a href="#cb176-2150" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `zone2hour`</span></span>
<span id="cb176-2151"><a href="#cb176-2151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2152"><a href="#cb176-2152" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_r.ipynb#zone2hour echo=true &gt;}}</span>
<span id="cb176-2153"><a href="#cb176-2153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2154"><a href="#cb176-2154" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-2155"><a href="#cb176-2155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2156"><a href="#cb176-2156" aria-hidden="true" tabindex="-1"></a><span class="fu">### Times {#sec-isot}</span></span>
<span id="cb176-2157"><a href="#cb176-2157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2158"><a href="#cb176-2158" aria-hidden="true" tabindex="-1"></a>The formula for conversion of standard time to <span class="in">`Declock`</span> time is shown in @eq-declock. The value of <span class="in">`x`</span> in @eq-declock. can be modified to obtain different units, which are displayed in @tbl-isot. To convert <span class="in">`Declock`</span> time into standard time, we first convert into hours using @eq-hour and the appropriate <span class="in">`x`</span> value from @tbl-isot. Then, we convert hours into minutes with @eq-minute and minutes into seconds with @eq-second The <span class="in">`hmso2doty`</span> and <span class="in">`doty2hmso`</span> functions in @exm-isot uses these formulas to convert between standard time and <span class="in">`Declock`</span> time.</span>
<span id="cb176-2159"><a href="#cb176-2159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2160"><a href="#cb176-2160" aria-hidden="true" tabindex="-1"></a>$$declock = \frac{hour}{24} + \frac{minute}{1440} + \frac{second}{86400} \cdot 10^x$$ {#eq-declock}</span>
<span id="cb176-2161"><a href="#cb176-2161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2162"><a href="#cb176-2162" aria-hidden="true" tabindex="-1"></a>$$hour = declock \cdot 24 \cdot 10^x$$ {#eq-hour}</span>
<span id="cb176-2163"><a href="#cb176-2163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2164"><a href="#cb176-2164" aria-hidden="true" tabindex="-1"></a>$$minute = \frac{hour - \lfloor hour \rfloor}{60}$$ {#eq-minute}</span>
<span id="cb176-2165"><a href="#cb176-2165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2166"><a href="#cb176-2166" aria-hidden="true" tabindex="-1"></a>$$second = \frac{minute - \lfloor minute \rfloor}{60}$$ {#eq-second}</span>
<span id="cb176-2167"><a href="#cb176-2167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2168"><a href="#cb176-2168" aria-hidden="true" tabindex="-1"></a><span class="fu">#### @tbl-isot</span></span>
<span id="cb176-2169"><a href="#cb176-2169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2170"><a href="#cb176-2170" aria-hidden="true" tabindex="-1"></a>::: {.callout-note collapse="true" title="Click to toggle table expansion" icon="false"}</span>
<span id="cb176-2171"><a href="#cb176-2171" aria-hidden="true" tabindex="-1"></a>| x   | units   |</span>
<span id="cb176-2172"><a href="#cb176-2172" aria-hidden="true" tabindex="-1"></a>|-----|---------|</span>
<span id="cb176-2173"><a href="#cb176-2173" aria-hidden="true" tabindex="-1"></a>| -1  | deks    |</span>
<span id="cb176-2174"><a href="#cb176-2174" aria-hidden="true" tabindex="-1"></a>| 0   | days    |</span>
<span id="cb176-2175"><a href="#cb176-2175" aria-hidden="true" tabindex="-1"></a>| 1   | dimes   |</span>
<span id="cb176-2176"><a href="#cb176-2176" aria-hidden="true" tabindex="-1"></a>| 2   | cents   |</span>
<span id="cb176-2177"><a href="#cb176-2177" aria-hidden="true" tabindex="-1"></a>| 3   | mils    |</span>
<span id="cb176-2178"><a href="#cb176-2178" aria-hidden="true" tabindex="-1"></a>| 4   | phrases |</span>
<span id="cb176-2179"><a href="#cb176-2179" aria-hidden="true" tabindex="-1"></a>| 5   | beats   |</span>
<span id="cb176-2180"><a href="#cb176-2180" aria-hidden="true" tabindex="-1"></a>| 6   | mics    |</span>
<span id="cb176-2181"><a href="#cb176-2181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2182"><a href="#cb176-2182" aria-hidden="true" tabindex="-1"></a>: The powers of ten of units based on days {#tbl-isot}</span>
<span id="cb176-2183"><a href="#cb176-2183" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-2184"><a href="#cb176-2184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2185"><a href="#cb176-2185" aria-hidden="true" tabindex="-1"></a>::: {#exm-isot}</span>
<span id="cb176-2186"><a href="#cb176-2186" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-2187"><a href="#cb176-2187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2188"><a href="#cb176-2188" aria-hidden="true" tabindex="-1"></a>::: {.panel-tabset group="language"}</span>
<span id="cb176-2189"><a href="#cb176-2189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2190"><a href="#cb176-2190" aria-hidden="true" tabindex="-1"></a><span class="fu">#### JavaScript</span></span>
<span id="cb176-2191"><a href="#cb176-2191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2192"><a href="#cb176-2192" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `hmso2doty`</span></span>
<span id="cb176-2193"><a href="#cb176-2193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2194"><a href="#cb176-2194" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_javascript.ipynb#hmso2doty echo=true &gt;}}</span>
<span id="cb176-2195"><a href="#cb176-2195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2196"><a href="#cb176-2196" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `hmso2isot`</span></span>
<span id="cb176-2197"><a href="#cb176-2197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2198"><a href="#cb176-2198" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_javascript.ipynb#hmso2isot echo=true &gt;}}</span>
<span id="cb176-2199"><a href="#cb176-2199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2200"><a href="#cb176-2200" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Julia</span></span>
<span id="cb176-2201"><a href="#cb176-2201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2202"><a href="#cb176-2202" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `time`</span></span>
<span id="cb176-2203"><a href="#cb176-2203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2204"><a href="#cb176-2204" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `hmso2doty`</span></span>
<span id="cb176-2205"><a href="#cb176-2205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2206"><a href="#cb176-2206" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_julia.ipynb#hmso2doty echo=true &gt;}}</span>
<span id="cb176-2207"><a href="#cb176-2207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2208"><a href="#cb176-2208" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `doty2hmso`</span></span>
<span id="cb176-2209"><a href="#cb176-2209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2210"><a href="#cb176-2210" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_julia.ipynb#doty2hmso echo=true &gt;}}</span>
<span id="cb176-2211"><a href="#cb176-2211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2212"><a href="#cb176-2212" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Python</span></span>
<span id="cb176-2213"><a href="#cb176-2213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2214"><a href="#cb176-2214" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `hmso2doty`</span></span>
<span id="cb176-2215"><a href="#cb176-2215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2216"><a href="#cb176-2216" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_python.ipynb#hmso2doty echo=true &gt;}}</span>
<span id="cb176-2217"><a href="#cb176-2217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2218"><a href="#cb176-2218" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `doty2hmso`</span></span>
<span id="cb176-2219"><a href="#cb176-2219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2220"><a href="#cb176-2220" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_python.ipynb#doty2hmso echo=true &gt;}}</span>
<span id="cb176-2221"><a href="#cb176-2221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2222"><a href="#cb176-2222" aria-hidden="true" tabindex="-1"></a><span class="fu">#### R</span></span>
<span id="cb176-2223"><a href="#cb176-2223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2224"><a href="#cb176-2224" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `hmso2doty`</span></span>
<span id="cb176-2225"><a href="#cb176-2225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2226"><a href="#cb176-2226" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_r.ipynb#hmso2doty echo=true &gt;}}</span>
<span id="cb176-2227"><a href="#cb176-2227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2228"><a href="#cb176-2228" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `doty2hmso`</span></span>
<span id="cb176-2229"><a href="#cb176-2229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2230"><a href="#cb176-2230" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_r.ipynb#doty2hmso echo=true &gt;}}</span>
<span id="cb176-2231"><a href="#cb176-2231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2232"><a href="#cb176-2232" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-2233"><a href="#cb176-2233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2234"><a href="#cb176-2234" aria-hidden="true" tabindex="-1"></a><span class="fu">### Timestamps {#sec-isos}</span></span>
<span id="cb176-2235"><a href="#cb176-2235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2236"><a href="#cb176-2236" aria-hidden="true" tabindex="-1"></a><span class="in">`Decalendar`</span> seeks to make months and weeks obsolete. Similarly, <span class="in">`Declock`</span> aims to deprecate hours, minutes, and seconds in favor of <span class="co">[</span><span class="ot">fractional days</span><span class="co">](https://en.wikipedia.org/wiki/Decimal_time#Fractional_days)</span> (<span class="in">`.day`</span>). <span class="in">`Deco`</span> timestamps, which combine <span class="in">`Decalendar`</span> dates and <span class="in">`Declock`</span> times, are more concise and easier to read than ISO 8601 timestamps. An <span class="in">`isoc`</span> timestamp that includes seconds is 20 characters long (<span class="in">`year-mm-ddThh:mm:ssZ`</span>), while a <span class="in">`deco`</span> timestamp with slightly greater precision is only 15 characters long (<span class="in">`year+day.clockZ`</span>). ISO 8601 timestamps can omit delimiters except for the <span class="in">`T`</span> which separates the date and the time (<span class="in">`yearmmddThhmmssZ`</span>). Without delimiters, <span class="in">`isoc`</span> timestamps become even more difficult to read and still cannot match the brevity of <span class="in">`Decalendar`</span> timestamps.</span>
<span id="cb176-2237"><a href="#cb176-2237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2238"><a href="#cb176-2238" aria-hidden="true" tabindex="-1"></a>Coincidentally, an ISO 8601 ordinal (<span class="in">`isoo`</span>) timestamp (<span class="in">`year-dayThh:mm:ssZ`</span>) without delimiters (<span class="in">`yeardayThhmmssZ`</span>) is the same length as a <span class="in">`deco`</span> timestamp (<span class="in">`year+day.clockZ`</span>). <span class="in">`Deco`</span> timestamps cannot exist without delimiters, because removing the plus sign (<span class="in">`+`</span>) from a <span class="in">`deco`</span> timestamp turns it into a <span class="in">`doty`</span> number (<span class="in">`ddddddd.clock`</span>). If we removed the <span class="in">`+`</span> from the <span class="in">`deco`</span> timestamp <span class="in">`1969+306.00000`</span>, we would obtain the <span class="in">`doty`</span> number <span class="in">`1969306.00000`</span> would represent midnight 1969306 days from the beginning of the current year. The rules for <span class="in">`deco`</span> timestamp interpretation are summarized by the code in the <span class="in">`deco2doty`</span> function in @exm-unixp.</span>
<span id="cb176-2239"><a href="#cb176-2239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2240"><a href="#cb176-2240" aria-hidden="true" tabindex="-1"></a>To create a <span class="in">`deco`</span> timestamp, we can use the <span class="in">`doty2deco`</span> or the <span class="in">`greg2deco`</span> functions as shown in @exm-isos. Similarly, @exm-isos also shows how to create an <span class="in">`isoc`</span> timestamp with the <span class="in">`doty2isoc`</span> and <span class="in">`doty2isoc`</span> functions. All of these timestamp creation functions assume that the provided times are in the UTC+00:00 time zone or <span class="in">`Zone`</span> <span class="in">`0`</span> and need to be adjusted to the provided time zone by adding the appropriate time zone offset to the timestamp. @sec-unixb and @sec-unixp further discuss timestamps and provide functions for building, parsing, and converting timestamps.</span>
<span id="cb176-2241"><a href="#cb176-2241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2242"><a href="#cb176-2242" aria-hidden="true" tabindex="-1"></a>::: {#exm-isos}</span>
<span id="cb176-2243"><a href="#cb176-2243" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-2244"><a href="#cb176-2244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2245"><a href="#cb176-2245" aria-hidden="true" tabindex="-1"></a>::: {.panel-tabset group="language"}</span>
<span id="cb176-2246"><a href="#cb176-2246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2247"><a href="#cb176-2247" aria-hidden="true" tabindex="-1"></a><span class="fu">#### JavaScript</span></span>
<span id="cb176-2248"><a href="#cb176-2248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2249"><a href="#cb176-2249" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `doty2deco`</span></span>
<span id="cb176-2250"><a href="#cb176-2250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2251"><a href="#cb176-2251" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_javascript.ipynb#doty2deco echo=true &gt;}}</span>
<span id="cb176-2252"><a href="#cb176-2252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2253"><a href="#cb176-2253" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `hmso2doty`</span></span>
<span id="cb176-2254"><a href="#cb176-2254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2255"><a href="#cb176-2255" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_javascript.ipynb#hmso2doty echo=true &gt;}}</span>
<span id="cb176-2256"><a href="#cb176-2256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2257"><a href="#cb176-2257" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `hmso2deco`</span></span>
<span id="cb176-2258"><a href="#cb176-2258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2259"><a href="#cb176-2259" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_javascript.ipynb#hmso2deco echo=true &gt;}}</span>
<span id="cb176-2260"><a href="#cb176-2260" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2261"><a href="#cb176-2261" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `doty2hmso`</span></span>
<span id="cb176-2262"><a href="#cb176-2262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2263"><a href="#cb176-2263" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_javascript.ipynb#doty2hmso echo=true &gt;}}</span>
<span id="cb176-2264"><a href="#cb176-2264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2265"><a href="#cb176-2265" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_javascript.ipynb#doty2isoc echo=true &gt;}}</span>
<span id="cb176-2266"><a href="#cb176-2266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2267"><a href="#cb176-2267" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Julia</span></span>
<span id="cb176-2268"><a href="#cb176-2268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2269"><a href="#cb176-2269" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `time`</span></span>
<span id="cb176-2270"><a href="#cb176-2270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2271"><a href="#cb176-2271" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `hmso2doty`</span></span>
<span id="cb176-2272"><a href="#cb176-2272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2273"><a href="#cb176-2273" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_julia.ipynb#hmso2doty echo=true &gt;}}</span>
<span id="cb176-2274"><a href="#cb176-2274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2275"><a href="#cb176-2275" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `doty2hmso`</span></span>
<span id="cb176-2276"><a href="#cb176-2276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2277"><a href="#cb176-2277" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_julia.ipynb#doty2hmso echo=true &gt;}}</span>
<span id="cb176-2278"><a href="#cb176-2278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2279"><a href="#cb176-2279" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Python</span></span>
<span id="cb176-2280"><a href="#cb176-2280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2281"><a href="#cb176-2281" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `hmso2doty`</span></span>
<span id="cb176-2282"><a href="#cb176-2282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2283"><a href="#cb176-2283" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_python.ipynb#hmso2doty echo=true &gt;}}</span>
<span id="cb176-2284"><a href="#cb176-2284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2285"><a href="#cb176-2285" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `doty2hmso`</span></span>
<span id="cb176-2286"><a href="#cb176-2286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2287"><a href="#cb176-2287" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_python.ipynb#doty2hmso echo=true &gt;}}</span>
<span id="cb176-2288"><a href="#cb176-2288" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2289"><a href="#cb176-2289" aria-hidden="true" tabindex="-1"></a><span class="fu">#### R</span></span>
<span id="cb176-2290"><a href="#cb176-2290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2291"><a href="#cb176-2291" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `hmso2doty`</span></span>
<span id="cb176-2292"><a href="#cb176-2292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2293"><a href="#cb176-2293" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_r.ipynb#hmso2doty echo=true &gt;}}</span>
<span id="cb176-2294"><a href="#cb176-2294" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2295"><a href="#cb176-2295" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `doty2hmso`</span></span>
<span id="cb176-2296"><a href="#cb176-2296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2297"><a href="#cb176-2297" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_r.ipynb#doty2hmso echo=true &gt;}}</span>
<span id="cb176-2298"><a href="#cb176-2298" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2299"><a href="#cb176-2299" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-2300"><a href="#cb176-2300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2301"><a href="#cb176-2301" aria-hidden="true" tabindex="-1"></a><span class="fu">### Time intervals {#sec-isoi}</span></span>
<span id="cb176-2302"><a href="#cb176-2302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2303"><a href="#cb176-2303" aria-hidden="true" tabindex="-1"></a>ISO 8601 specifies three methods of unequivocally representing <span class="co">[</span><span class="ot">time intervals</span><span class="co">](https://en.wikipedia.org/wiki/ISO_8601#Time_intervals)</span>, <span class="in">`start/stop`</span>, <span class="in">`start/span`</span>, and <span class="in">`span/stop`</span>. The <span class="in">`Decalendar`</span> equivalents of these three time interval representations are <span class="in">`start:stop`</span>, <span class="in">`start&gt;span`</span>, and <span class="in">`stop&lt;span`</span>. Notably, the <span class="in">`start/stop`</span> syntax is used in Google Calendar "Add to Calendar" links (<span class="in">`https://calendar.google.com/calendar/render?action=TEMPLATE&amp;dates=start/stop`</span>). Clicking on an "Add to Calendar" link opens an web browser interface for adding an event to an online calendar. The <span class="in">`greg2link`</span> and <span class="in">`doty2link`</span> functions in @exm-isoi create such links for Google, Outlook, Office 365, and Yahoo online calendars.</span>
<span id="cb176-2304"><a href="#cb176-2304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2305"><a href="#cb176-2305" aria-hidden="true" tabindex="-1"></a>::: {#exm-isoi}</span>
<span id="cb176-2306"><a href="#cb176-2306" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-2307"><a href="#cb176-2307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2308"><a href="#cb176-2308" aria-hidden="true" tabindex="-1"></a><span class="fu">### Repeating time intervals {#sec-isor}</span></span>
<span id="cb176-2309"><a href="#cb176-2309" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2310"><a href="#cb176-2310" aria-hidden="true" tabindex="-1"></a>ISO 8601 time intervals can be made to repeat with the <span class="in">`Rn/`</span> prefix (<span class="in">`Rn/start/stop`</span>, <span class="in">`Rn/start/span`</span>, <span class="in">`Rn/span/stop`</span>), where <span class="in">`n`</span> is the number of repetitions. Such <span class="co">[</span><span class="ot">repeating time intervals</span><span class="co">](https://en.wikipedia.org/wiki/ISO_8601#Repeating_intervals)</span> are always consecutive and never overlap. The first three 6-hour intervals of 1970 could be written <span class="in">`R3/1970-01-01T00:00:00Z/T06`</span> as per ISO 8601. This time interval in <span class="in">`Decalendar`</span> could be written <span class="in">`1969+306&gt;.75&gt;.25&gt;0`</span>. Unlike ISO 8601, <span class="in">`Decalendar`</span> allows for the creation of non-consecutive and overlapping recurring intervals. If we wanted to include 3-hour breaks in between the three 6-hour intervals, we could write <span class="in">`1969+306&gt;1&gt;.25&gt;.125`</span>. Similarly, the three 6-hour intervals could be made to overlap by 3 hours by writing <span class="in">`1969+306&gt;.5&gt;.25&lt;.125`</span>.</span>
<span id="cb176-2311"><a href="#cb176-2311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2312"><a href="#cb176-2312" aria-hidden="true" tabindex="-1"></a>The <span class="in">`Decalendar`</span> time interval representations above are called <span class="in">`spreads`</span> and were inspired by the concept of <span class="co">[</span><span class="ot">array slicing</span><span class="co">](https://en.wikipedia.org/wiki/Array_slicing)</span> from computer programming. <span class="in">`Decalendar`</span> allows for the use of both <span class="in">`slices`</span> (<span class="in">`start:stop:step`</span>) and <span class="in">`spreads`</span> (<span class="in">`start&gt;span&gt;split&gt;space`</span>) to create time intervals. <span class="co">[</span><span class="ot">Slicing of dates and times</span><span class="co">](https://pandas.pydata.org/pandas-docs/version/1.1/user_guide/timeseries.html#indexing)</span> is fully implemented in the <span class="co">[</span><span class="ot">Pandas Python library</span><span class="co">](https://pandas.pydata.org/)</span>. The pandas code shown in @exm-isor uses slicing to obtain the start times of the last three 6-hour intervals in Gregorian calendar year 1970, which is <span class="in">`1970+305&gt;.75&gt;.25&gt;0`</span> in <span class="in">`Decalendar`</span> and <span class="in">`R3/1970-12-31T06:00:00Z/T06`</span> as per ISO 8601.</span>
<span id="cb176-2313"><a href="#cb176-2313" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2314"><a href="#cb176-2314" aria-hidden="true" tabindex="-1"></a>::: {#exm-isor}</span>
<span id="cb176-2315"><a href="#cb176-2315" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-2316"><a href="#cb176-2316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2317"><a href="#cb176-2317" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_python.ipynb#intervals echo=true &gt;}}</span>
<span id="cb176-2318"><a href="#cb176-2318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2319"><a href="#cb176-2319" aria-hidden="true" tabindex="-1"></a><span class="fu">## Julian dates {#sec-jd}</span></span>
<span id="cb176-2320"><a href="#cb176-2320" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2321"><a href="#cb176-2321" aria-hidden="true" tabindex="-1"></a>A <span class="co">[</span><span class="ot">Julian date</span><span class="co">]</span>(https://en.wikipedia.org/wiki/Julian_day#:~:text=The%20Julian%20date%20(JD)%20of%20any%20instant%20is%20the%20Julian%20day%20number%20plus%20the%20fraction%20of%20a%20day%20since%20the%20preceding%20noon%20in%20Universal%20Time.) is the number of <span class="co">[</span><span class="ot">fractional days</span><span class="co">](https://en.wikipedia.org/wiki/Decimal_time#Fractional_days)</span> since <span class="in">`-4713+268.5`</span>, which is noon on November 24, 4714 BC in the Gregorian calendar and January 1, 4713 BC in the Julian calendar. The analogous date format in <span class="in">`Decalendar`</span> is the day-of-the-<span class="co">[</span><span class="ot">era</span><span class="co">](https://en.wikipedia.org/wiki/Calendar_era)</span> (<span class="in">`dote`</span>). Both Julian dates and days-of-the-era (<span class="in">`dotes`</span>) count days from a starting point called an <span class="co">[</span><span class="ot">epoch</span><span class="co">](https://en.wikipedia.org/wiki/Epoch)</span>. The <span class="in">`Decalendar`</span> epoch is <span class="in">`0000+000.0`</span>, which is midnight on March 1, 1 BC in the Gregorian calendar. To convert a Julian date into a <span class="in">`dote`</span>, we simply subtract 1721120.5 days ($dote = julian - 1721120.5$).</span>
<span id="cb176-2322"><a href="#cb176-2322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2323"><a href="#cb176-2323" aria-hidden="true" tabindex="-1"></a>Like Julian dates, <span class="in">`dotes`</span> are very useful for date and time calculations. @eq-dote shows how a year and a <span class="in">`doty`</span> can be turned into a <span class="in">`dote`</span>. The conversion of a <span class="in">`dote`</span> into a year and <span class="in">`doty`</span> requires calculations adapted from the <span class="co">[</span><span class="ot">"civil_from_days" algorithm</span><span class="co">](http://howardhinnant.github.io/date_algorithms.html#civil_from_days)</span> from <span class="co">[</span><span class="ot">@hinnant2014</span><span class="co">]</span>. Briefly, the <span class="in">`dote`</span> is used to obtain the <span class="co">[</span><span class="ot">solar cycle</span><span class="co">]</span>(https://en.wikipedia.org/wiki/Solar_cycle_(calendar)#:~:text=400%2Dyear%20cycle%20of%20the%20Gregorian%20calendar%20with%20respect%20to%20the%20week.) in @eq-cycl, which is then plugged into @eq-dotc and @eq-yotc to calculate the <span class="in">`day-of-the-cycle`</span> in (<span class="in">`dotc`</span>) and the <span class="in">`year-of-the-cycle`</span> (<span class="in">`yotc`</span>) in @eq-yotc. @eq-year takes the <span class="in">`yotc`</span> and the solar cycle and yields the year, while @eq-doty generates the <span class="in">`doty`</span> from the <span class="in">`yotc`</span> and the <span class="in">`dotc`</span>.</span>
<span id="cb176-2324"><a href="#cb176-2324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2325"><a href="#cb176-2325" aria-hidden="true" tabindex="-1"></a>$$dote = doty + (365 \cdot year + \lfloor \frac{year}{4} \rfloor - \lfloor \frac{year}{100} \rfloor + \lfloor \frac{year}{400} \rfloor)$$ {#eq-dote}</span>
<span id="cb176-2326"><a href="#cb176-2326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2327"><a href="#cb176-2327" aria-hidden="true" tabindex="-1"></a>$$cycle = \lfloor \frac{\begin{cases}dote&amp;{\text{if } dote \geq 0;}<span class="sc">\\</span>dote-146096&amp;{\text{otherwise.}}\end{cases}}{146097} \rfloor$$ {#eq-cycl}</span>
<span id="cb176-2328"><a href="#cb176-2328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2329"><a href="#cb176-2329" aria-hidden="true" tabindex="-1"></a>$$dotc = days - cycle \cdot 146097$$ {#eq-dotc}</span>
<span id="cb176-2330"><a href="#cb176-2330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2331"><a href="#cb176-2331" aria-hidden="true" tabindex="-1"></a>$$yotc = \lfloor \frac{dotc - \lfloor \frac{dotc}{1460} \rfloor + \lfloor \frac{dotc}{36524} \rfloor - \lfloor \frac{dotc}{146096} \rfloor}{365} \rfloor$$ {#eq-yotc}</span>
<span id="cb176-2332"><a href="#cb176-2332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2333"><a href="#cb176-2333" aria-hidden="true" tabindex="-1"></a>$$year = yotc + cycle * 400$$ {#eq-year}</span>
<span id="cb176-2334"><a href="#cb176-2334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2335"><a href="#cb176-2335" aria-hidden="true" tabindex="-1"></a>$$doty = \lfloor dotc - (365 \cdot yotc + \lfloor \frac{yotc}{4} \rfloor - \lfloor \frac{yotc}{100} \rfloor + \lfloor \frac{yotc}{400} \rfloor) \rfloor$$ {#eq-doty}</span>
<span id="cb176-2336"><a href="#cb176-2336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2337"><a href="#cb176-2337" aria-hidden="true" tabindex="-1"></a>The conversion between <span class="in">`doty`</span> and <span class="in">`dote`</span> is the most important calculation in <span class="in">`Decalendar`</span> because it defines the behavior of positive and negative <span class="in">`deco`</span> dates and stamps. The arithmetic</span>
<span id="cb176-2338"><a href="#cb176-2338" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2339"><a href="#cb176-2339" aria-hidden="true" tabindex="-1"></a>::: {#exm-jd}</span>
<span id="cb176-2340"><a href="#cb176-2340" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-2341"><a href="#cb176-2341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2342"><a href="#cb176-2342" aria-hidden="true" tabindex="-1"></a>::: {.panel-tabset group="language"}</span>
<span id="cb176-2343"><a href="#cb176-2343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2344"><a href="#cb176-2344" aria-hidden="true" tabindex="-1"></a><span class="fu">#### JavaScript</span></span>
<span id="cb176-2345"><a href="#cb176-2345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2346"><a href="#cb176-2346" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `doty2dote`</span></span>
<span id="cb176-2347"><a href="#cb176-2347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2348"><a href="#cb176-2348" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_javascript.ipynb#doty2dote echo=true &gt;}}</span>
<span id="cb176-2349"><a href="#cb176-2349" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2350"><a href="#cb176-2350" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Julia</span></span>
<span id="cb176-2351"><a href="#cb176-2351" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2352"><a href="#cb176-2352" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `unix`</span></span>
<span id="cb176-2353"><a href="#cb176-2353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2354"><a href="#cb176-2354" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `doty2dote`</span></span>
<span id="cb176-2355"><a href="#cb176-2355" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2356"><a href="#cb176-2356" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_julia.ipynb#doty2dote echo=true &gt;}}</span>
<span id="cb176-2357"><a href="#cb176-2357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2358"><a href="#cb176-2358" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Python</span></span>
<span id="cb176-2359"><a href="#cb176-2359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2360"><a href="#cb176-2360" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `doty2dote`</span></span>
<span id="cb176-2361"><a href="#cb176-2361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2362"><a href="#cb176-2362" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_python.ipynb#doty2dote echo=true &gt;}}</span>
<span id="cb176-2363"><a href="#cb176-2363" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2364"><a href="#cb176-2364" aria-hidden="true" tabindex="-1"></a><span class="fu">#### R</span></span>
<span id="cb176-2365"><a href="#cb176-2365" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2366"><a href="#cb176-2366" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `doty2dote`</span></span>
<span id="cb176-2367"><a href="#cb176-2367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2368"><a href="#cb176-2368" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_r.ipynb#doty2dote echo=true &gt;}}</span>
<span id="cb176-2369"><a href="#cb176-2369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2370"><a href="#cb176-2370" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-2371"><a href="#cb176-2371" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2372"><a href="#cb176-2372" aria-hidden="true" tabindex="-1"></a><span class="fu">## UNIX time {#sec-unix}</span></span>
<span id="cb176-2373"><a href="#cb176-2373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2374"><a href="#cb176-2374" aria-hidden="true" tabindex="-1"></a><span class="fu">### Julian time conversion to UNIX time {#sec-unixj}</span></span>
<span id="cb176-2375"><a href="#cb176-2375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2376"><a href="#cb176-2376" aria-hidden="true" tabindex="-1"></a>Building on the conversion of Julian dates into <span class="in">`dotes`</span> and <span class="in">`doties`</span>, it may be easiest to obtain the official definition of <span class="in">`deco`</span> dates and <span class="in">`Declock`</span> times is based on UNIX time. UNIX time is the number of seconds since the UNIX Epoch, which is <span class="in">`1969+306.0`</span> in <span class="in">`Decalendar`</span> or midnight in the <span class="co">[</span><span class="ot">UTC+0</span><span class="co">](https://en.wikipedia.org/wiki/List_of_UTC_offsets#UTC%C2%B100:00,_Z)</span> time zone on January 1, 1970 in the Gregorian calendar. A day is exactly 86,400 seconds (100,000 <span class="in">`beats`</span>) long in UNIX time, Julian dates, <span class="in">`deco`</span> dates, and <span class="in">`Declock`</span> times. To obtain UNIX time from a Julian Date, we subtract 2440587.5 from the Julian Date and multiply by 86400 as shown in @eq-unixj.</span>
<span id="cb176-2377"><a href="#cb176-2377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2378"><a href="#cb176-2378" aria-hidden="true" tabindex="-1"></a>$$unix = (JD ‚àí 2440587.5) \cdot 86400$$ {#eq-unixj}</span>
<span id="cb176-2379"><a href="#cb176-2379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2380"><a href="#cb176-2380" aria-hidden="true" tabindex="-1"></a><span class="fu">### UNIX time conversion to `deco` date {#sec-unixd}</span></span>
<span id="cb176-2381"><a href="#cb176-2381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2382"><a href="#cb176-2382" aria-hidden="true" tabindex="-1"></a>To calculate <span class="in">`deco`</span> dates directly from UNIX time, we can use a calculation adapted the 2014 article entitled <span class="co">[</span><span class="ot">"chrono-Compatible Low-Level Date Algorithms"</span><span class="co">](http://howardhinnant.github.io/date_algorithms.html#civil_from_days)</span> by <span class="co">[</span><span class="ot">Howard Hinnant</span><span class="co">](https://howardhinnant.github.io/)</span> <span class="co">[</span><span class="ot">-@hinnant2014</span><span class="co">]</span>. Briefly, the seconds (or milliseconds) in UNIX time are first converted to <span class="in">`days`</span> ($days = seconds \div 86400$). Then, the <span class="in">`days`</span> are used to obtain the <span class="in">`era`</span> (@eq-cycl), <span class="in">`day-of-the-era`</span> (@eq-dote), <span class="in">`year`</span> (@eq-year), and <span class="in">`doty`</span> (@eq-doty).</span>
<span id="cb176-2383"><a href="#cb176-2383" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2384"><a href="#cb176-2384" aria-hidden="true" tabindex="-1"></a><span class="fu">### UNIX time conversion to `Decalendar` timestamp {#sec-unixt}</span></span>
<span id="cb176-2385"><a href="#cb176-2385" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2386"><a href="#cb176-2386" aria-hidden="true" tabindex="-1"></a>To obtain fractional days, we have to sum up all of the days in previous years and subtract this sum from <span class="in">`days`</span> to obtain the current <span class="in">`Decalendar`</span> ordinal (<span class="in">`deco`</span>) timestamp as shown in @eq-unixt. The code in @exm-unixt converts UNIX time into a <span class="in">`deco`</span> timestamp in the <span class="in">`Zone`</span> <span class="in">`0`</span> time zone by passing the current UNIX timestamp to the <span class="in">`unix2doty`</span> function. If we call this function without arguments (<span class="in">`unix2doty()`</span>) the result will be the year and <span class="in">`doty`</span> of the UNIX Epoch: 1969 and 306. To see @exm-unixt in action, visit this <span class="co">[</span><span class="ot">CodePen</span><span class="co">](https://codepen.io/maptv/pen/oNJZeea)</span> which displays the current <span class="in">`deco`</span> (<span class="in">`year+day.clock`</span>) and <span class="in">`isoc`</span> (<span class="in">`year-mm-ddThh:mm:ss`</span>) timestamps.</span>
<span id="cb176-2387"><a href="#cb176-2387" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2388"><a href="#cb176-2388" aria-hidden="true" tabindex="-1"></a>$$time = year \cdot 365 + \sum_{n=1}^{year} \left[ \begin{array}{c}</span>
<span id="cb176-2389"><a href="#cb176-2389" aria-hidden="true" tabindex="-1"></a>y \mod 4 = 0 <span class="sc">\\</span></span>
<span id="cb176-2390"><a href="#cb176-2390" aria-hidden="true" tabindex="-1"></a>\land y \mod 100 \neq 0 <span class="sc">\\</span></span>
<span id="cb176-2391"><a href="#cb176-2391" aria-hidden="true" tabindex="-1"></a>\lor y \mod 400 = 0 \end{array} \right]$$ {#eq-unixt}</span>
<span id="cb176-2392"><a href="#cb176-2392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2393"><a href="#cb176-2393" aria-hidden="true" tabindex="-1"></a>::: {#exm-unixt}</span>
<span id="cb176-2394"><a href="#cb176-2394" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb176-2395"><a href="#cb176-2395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2396"><a href="#cb176-2396" aria-hidden="true" tabindex="-1"></a>::: {.panel-tabset group="language"}</span>
<span id="cb176-2397"><a href="#cb176-2397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2398"><a href="#cb176-2398" aria-hidden="true" tabindex="-1"></a><span class="fu">#### JavaScript</span></span>
<span id="cb176-2399"><a href="#cb176-2399" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2400"><a href="#cb176-2400" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `unix2doty`</span></span>
<span id="cb176-2401"><a href="#cb176-2401" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2402"><a href="#cb176-2402" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_javascript.ipynb#unix2doty echo=true &gt;}}</span>
<span id="cb176-2403"><a href="#cb176-2403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2404"><a href="#cb176-2404" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Julia</span></span>
<span id="cb176-2405"><a href="#cb176-2405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2406"><a href="#cb176-2406" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `unix`</span></span>
<span id="cb176-2407"><a href="#cb176-2407" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2408"><a href="#cb176-2408" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `unix2doty`</span></span>
<span id="cb176-2409"><a href="#cb176-2409" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2410"><a href="#cb176-2410" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_julia.ipynb#unix2doty echo=true &gt;}}</span>
<span id="cb176-2411"><a href="#cb176-2411" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2412"><a href="#cb176-2412" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Python</span></span>
<span id="cb176-2413"><a href="#cb176-2413" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2414"><a href="#cb176-2414" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `unix2doty`</span></span>
<span id="cb176-2415"><a href="#cb176-2415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2416"><a href="#cb176-2416" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_python.ipynb#unix2doty echo=true &gt;}}</span>
<span id="cb176-2417"><a href="#cb176-2417" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2418"><a href="#cb176-2418" aria-hidden="true" tabindex="-1"></a><span class="fu">#### R</span></span>
<span id="cb176-2419"><a href="#cb176-2419" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2420"><a href="#cb176-2420" aria-hidden="true" tabindex="-1"></a><span class="fu">##### `unix2doty`</span></span>
<span id="cb176-2421"><a href="#cb176-2421" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2422"><a href="#cb176-2422" aria-hidden="true" tabindex="-1"></a>{{&lt; embed dec_r.ipynb#unix2doty echo=true &gt;}}</span>
<span id="cb176-2423"><a href="#cb176-2423" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2424"><a href="#cb176-2424" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Lua</span></span>
<span id="cb176-2425"><a href="#cb176-2425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2426"><a href="#cb176-2426" aria-hidden="true" tabindex="-1"></a><span class="in">``` lua</span></span>
<span id="cb176-2427"><a href="#cb176-2427" aria-hidden="true" tabindex="-1"></a><span class="in">function unix2doty(ms)</span></span>
<span id="cb176-2428"><a href="#cb176-2428" aria-hidden="true" tabindex="-1"></a><span class="in">    local days = ms / 86400000 + 719468</span></span>
<span id="cb176-2429"><a href="#cb176-2429" aria-hidden="true" tabindex="-1"></a><span class="in">    local era = (days &gt;= 0 and days or days - 146096) // 146097</span></span>
<span id="cb176-2430"><a href="#cb176-2430" aria-hidden="true" tabindex="-1"></a><span class="in">    local dote = days - era * 146097</span></span>
<span id="cb176-2431"><a href="#cb176-2431" aria-hidden="true" tabindex="-1"></a><span class="in">    local year = math.floor((dote - dote / 1460 + dote / 36524 - dote / 146096) / 365) + era * 400</span></span>
<span id="cb176-2432"><a href="#cb176-2432" aria-hidden="true" tabindex="-1"></a><span class="in">    return math.floor(year), days - math.floor(year * 365 + year / 4 - year / 100 + year / 400)</span></span>
<span id="cb176-2433"><a href="#cb176-2433" aria-hidden="true" tabindex="-1"></a><span class="in">end</span></span>
<span id="cb176-2434"><a href="#cb176-2434" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2435"><a href="#cb176-2435" aria-hidden="true" tabindex="-1"></a><span class="in">print(unix2doty(0))</span></span>
<span id="cb176-2436"><a href="#cb176-2436" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb176-2437"><a href="#cb176-2437" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2438"><a href="#cb176-2438" aria-hidden="true" tabindex="-1"></a><span class="in">``` lua</span></span>
<span id="cb176-2439"><a href="#cb176-2439" aria-hidden="true" tabindex="-1"></a><span class="in">function unix2deco(ms)</span></span>
<span id="cb176-2440"><a href="#cb176-2440" aria-hidden="true" tabindex="-1"></a><span class="in">    year, doty = unix2doty(ms)</span></span>
<span id="cb176-2441"><a href="#cb176-2441" aria-hidden="true" tabindex="-1"></a><span class="in">    return string.format("%s+%s", math.floor(year), math.floor(doty))</span></span>
<span id="cb176-2442"><a href="#cb176-2442" aria-hidden="true" tabindex="-1"></a><span class="in">end</span></span>
<span id="cb176-2443"><a href="#cb176-2443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2444"><a href="#cb176-2444" aria-hidden="true" tabindex="-1"></a><span class="in">print(unix2deco(0))</span></span>
<span id="cb176-2445"><a href="#cb176-2445" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb176-2446"><a href="#cb176-2446" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2447"><a href="#cb176-2447" aria-hidden="true" tabindex="-1"></a><span class="fu">#### CopyQ</span></span>
<span id="cb176-2448"><a href="#cb176-2448" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2449"><a href="#cb176-2449" aria-hidden="true" tabindex="-1"></a><span class="in">``` javascript</span></span>
<span id="cb176-2450"><a href="#cb176-2450" aria-hidden="true" tabindex="-1"></a>copyq<span class="op">:</span></span>
<span id="cb176-2451"><a href="#cb176-2451" aria-hidden="true" tabindex="-1"></a>function <span class="fu">unix2doty</span><span class="op">(</span>ms <span class="op">=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb176-2452"><a href="#cb176-2452" aria-hidden="true" tabindex="-1"></a>    <span class="dt">const</span> days <span class="op">=</span> ms <span class="op">/</span> <span class="dv">86400000</span> <span class="op">+</span> <span class="dv">719468</span><span class="op">,</span></span>
<span id="cb176-2453"><a href="#cb176-2453" aria-hidden="true" tabindex="-1"></a>        dote <span class="op">=</span> days <span class="op">-</span> <span class="op">(</span>era <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span><span class="op">((</span>days <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">?</span> days <span class="op">:</span> days <span class="op">-</span> <span class="dv">146096</span><span class="op">)</span> <span class="op">/</span> <span class="dv">146097</span><span class="op">))</span> <span class="op">*</span> <span class="dv">146097</span><span class="op">,</span></span>
<span id="cb176-2454"><a href="#cb176-2454" aria-hidden="true" tabindex="-1"></a>        year <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span><span class="op">((</span>dote <span class="op">-</span> dote <span class="op">/</span> <span class="dv">1460</span> <span class="op">+</span> dote <span class="op">/</span> <span class="dv">36524</span> <span class="op">-</span> dote <span class="op">/</span> <span class="dv">146096</span><span class="op">)</span> <span class="op">/</span> <span class="dv">365</span><span class="op">)</span> <span class="op">+</span> era <span class="op">*</span> <span class="dv">400</span><span class="op">;</span></span>
<span id="cb176-2455"><a href="#cb176-2455" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">[</span>year<span class="op">,</span> days <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span><span class="op">(</span>year <span class="op">*</span> <span class="dv">365</span> <span class="op">+</span> year <span class="op">/</span> <span class="dv">4</span> <span class="op">-</span> year <span class="op">/</span> <span class="dv">100</span> <span class="op">+</span> year <span class="op">/</span> <span class="dv">400</span><span class="op">)];</span></span>
<span id="cb176-2456"><a href="#cb176-2456" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb176-2457"><a href="#cb176-2457" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2458"><a href="#cb176-2458" aria-hidden="true" tabindex="-1"></a><span class="dt">const</span> <span class="op">[</span>year<span class="op">,</span> doty<span class="op">]</span> <span class="op">=</span> <span class="fu">unix2doty</span><span class="op">(</span><span class="bu">Date</span><span class="op">.</span><span class="fu">now</span><span class="op">()),</span></span>
<span id="cb176-2459"><a href="#cb176-2459" aria-hidden="true" tabindex="-1"></a>    datetime <span class="op">=</span> `$<span class="op">{</span>year<span class="op">.</span><span class="fu">toString</span><span class="op">().</span><span class="fu">padStart</span><span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="st">"0"</span><span class="op">)}+</span>$<span class="op">{</span></span>
<span id="cb176-2460"><a href="#cb176-2460" aria-hidden="true" tabindex="-1"></a>    <span class="op">(</span>day <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span><span class="op">(</span>doty<span class="op">)).</span><span class="fu">toString</span><span class="op">().</span><span class="fu">padStart</span><span class="op">(</span><span class="dv">3</span><span class="op">,</span> <span class="st">"0"</span><span class="op">)}.</span>$<span class="op">{</span></span>
<span id="cb176-2461"><a href="#cb176-2461" aria-hidden="true" tabindex="-1"></a>    <span class="op">(</span><span class="bu">Math</span><span class="op">.</span><span class="fu">round</span><span class="op">((</span>doty <span class="op">-</span> day<span class="op">)</span> <span class="op">*</span> <span class="fl">1e5</span><span class="op">)).</span><span class="fu">toString</span><span class="op">().</span><span class="fu">padStart</span><span class="op">(</span><span class="dv">5</span><span class="op">,</span> <span class="st">"0"</span><span class="op">)}+</span><span class="dv">0</span>`<span class="op">;</span></span>
<span id="cb176-2462"><a href="#cb176-2462" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2463"><a href="#cb176-2463" aria-hidden="true" tabindex="-1"></a><span class="fu">copy</span><span class="op">(</span>datetime<span class="op">)</span></span>
<span id="cb176-2464"><a href="#cb176-2464" aria-hidden="true" tabindex="-1"></a><span class="fu">copySelection</span><span class="op">(</span>datetime<span class="op">)</span></span>
<span id="cb176-2465"><a href="#cb176-2465" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span><span class="op">()</span></span>
<span id="cb176-2466"><a href="#cb176-2466" aria-hidden="true" tabindex="-1"></a>```</span>
<span id="cb176-2467"><a href="#cb176-2467" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2468"><a href="#cb176-2468" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span></span>
<span id="cb176-2469"><a href="#cb176-2469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2470"><a href="#cb176-2470" aria-hidden="true" tabindex="-1"></a>### Building timestamps <span class="op">{</span>#sec<span class="op">-</span>unixb<span class="op">}</span></span>
<span id="cb176-2471"><a href="#cb176-2471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2472"><a href="#cb176-2472" aria-hidden="true" tabindex="-1"></a>The code in <span class="at">@exm</span><span class="op">-</span>unixt creates a `Decalendar` <span class="fu">ordinal</span> <span class="op">(</span>`deco`<span class="op">)</span> timestamp from UNIX time<span class="op">.</span> <span class="at">@exm</span><span class="op">-</span>unixb encapsulates <span class="kw">this</span> code in a function called `unix2deco`<span class="op">.</span> <span class="fu">The</span> `deco` timestamps converted from UNIX time are all in the `Zone` `<span class="dv">0</span>` time zone<span class="op">.</span> <span class="fu">To</span> <span class="cf">switch</span> to a different time zone<span class="op">,</span> we should pass the year and `doty` we obtain from the `unix2doty` function to the `doty2deco` function from <span class="at">@exm</span><span class="op">-</span>isot along with the desired time zone<span class="op">.</span></span>
<span id="cb176-2473"><a href="#cb176-2473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2474"><a href="#cb176-2474" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span> <span class="op">{</span>#exm<span class="op">-</span>unixb<span class="op">}</span></span>
<span id="cb176-2475"><a href="#cb176-2475" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span></span>
<span id="cb176-2476"><a href="#cb176-2476" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2477"><a href="#cb176-2477" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span> <span class="op">{.</span><span class="fu">panel</span><span class="op">-</span>tabset group<span class="op">=</span><span class="st">"language"</span><span class="op">}</span></span>
<span id="cb176-2478"><a href="#cb176-2478" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2479"><a href="#cb176-2479" aria-hidden="true" tabindex="-1"></a>#### JavaScript</span>
<span id="cb176-2480"><a href="#cb176-2480" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2481"><a href="#cb176-2481" aria-hidden="true" tabindex="-1"></a>##### `unix2deco`</span>
<span id="cb176-2482"><a href="#cb176-2482" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2483"><a href="#cb176-2483" aria-hidden="true" tabindex="-1"></a><span class="op">{{&lt;</span> embed dec_javascript<span class="op">.</span><span class="fu">ipynb</span>#unix2deco echo<span class="op">=</span><span class="kw">true</span> <span class="op">&gt;}}</span></span>
<span id="cb176-2484"><a href="#cb176-2484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2485"><a href="#cb176-2485" aria-hidden="true" tabindex="-1"></a>#### Julia</span>
<span id="cb176-2486"><a href="#cb176-2486" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2487"><a href="#cb176-2487" aria-hidden="true" tabindex="-1"></a>##### `unix`</span>
<span id="cb176-2488"><a href="#cb176-2488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2489"><a href="#cb176-2489" aria-hidden="true" tabindex="-1"></a>##### `unix2deco`</span>
<span id="cb176-2490"><a href="#cb176-2490" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2491"><a href="#cb176-2491" aria-hidden="true" tabindex="-1"></a><span class="op">{{&lt;</span> embed dec_julia<span class="op">.</span><span class="fu">ipynb</span>#unix2deco echo<span class="op">=</span><span class="kw">true</span> <span class="op">&gt;}}</span></span>
<span id="cb176-2492"><a href="#cb176-2492" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2493"><a href="#cb176-2493" aria-hidden="true" tabindex="-1"></a>#### Python</span>
<span id="cb176-2494"><a href="#cb176-2494" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2495"><a href="#cb176-2495" aria-hidden="true" tabindex="-1"></a>##### `unix2deco`</span>
<span id="cb176-2496"><a href="#cb176-2496" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2497"><a href="#cb176-2497" aria-hidden="true" tabindex="-1"></a><span class="op">{{&lt;</span> embed dec_python<span class="op">.</span><span class="fu">ipynb</span>#unix2deco echo<span class="op">=</span><span class="kw">true</span> <span class="op">&gt;}}</span></span>
<span id="cb176-2498"><a href="#cb176-2498" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2499"><a href="#cb176-2499" aria-hidden="true" tabindex="-1"></a>#### R</span>
<span id="cb176-2500"><a href="#cb176-2500" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2501"><a href="#cb176-2501" aria-hidden="true" tabindex="-1"></a>##### `unix2deco`</span>
<span id="cb176-2502"><a href="#cb176-2502" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2503"><a href="#cb176-2503" aria-hidden="true" tabindex="-1"></a><span class="op">{{&lt;</span> embed dec_r<span class="op">.</span><span class="fu">ipynb</span>#unix2deco echo<span class="op">=</span><span class="kw">true</span> <span class="op">&gt;}}</span></span>
<span id="cb176-2504"><a href="#cb176-2504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2505"><a href="#cb176-2505" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span></span>
<span id="cb176-2506"><a href="#cb176-2506" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2507"><a href="#cb176-2507" aria-hidden="true" tabindex="-1"></a>### Parsing timestamps <span class="op">{</span>#sec<span class="op">-</span>unixp<span class="op">}</span></span>
<span id="cb176-2508"><a href="#cb176-2508" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2509"><a href="#cb176-2509" aria-hidden="true" tabindex="-1"></a>To extract the components of a `Decalendar` timestamp<span class="op">,</span> we can use the `parse_dec` function in <span class="at">@exm</span><span class="op">-</span>isos<span class="op">.</span> <span class="fu">Parsing</span> timestamps is the first step before any later processes such as timestamp arithmetic or conversion between timestamp formats<span class="op">.</span> <span class="fu">The</span> `parse_dec` function returns a year<span class="op">,</span> a `doty`<span class="op">,</span> and a fractional day time zone offset<span class="op">.</span> <span class="fu">The</span> year and time zone offset can be omitted in the timestamp provided to `parse_dec`<span class="op">.</span> <span class="fu">If</span> not specified in the timestamp<span class="op">,</span> the year is the current year and the time zone offset is <span class="fl">0.</span></span>
<span id="cb176-2510"><a href="#cb176-2510" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2511"><a href="#cb176-2511" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span> <span class="op">{</span>#exm<span class="op">-</span>unixp<span class="op">}</span></span>
<span id="cb176-2512"><a href="#cb176-2512" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span></span>
<span id="cb176-2513"><a href="#cb176-2513" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2514"><a href="#cb176-2514" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span> <span class="op">{.</span><span class="fu">panel</span><span class="op">-</span>tabset group<span class="op">=</span><span class="st">"language"</span><span class="op">}</span></span>
<span id="cb176-2515"><a href="#cb176-2515" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2516"><a href="#cb176-2516" aria-hidden="true" tabindex="-1"></a>#### JavaScript</span>
<span id="cb176-2517"><a href="#cb176-2517" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2518"><a href="#cb176-2518" aria-hidden="true" tabindex="-1"></a>##### `parse_dec`</span>
<span id="cb176-2519"><a href="#cb176-2519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2520"><a href="#cb176-2520" aria-hidden="true" tabindex="-1"></a><span class="op">{{&lt;</span> embed dec_javascript<span class="op">.</span><span class="fu">ipynb</span>#parse_dec echo<span class="op">=</span><span class="kw">true</span> <span class="op">&gt;}}</span></span>
<span id="cb176-2521"><a href="#cb176-2521" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2522"><a href="#cb176-2522" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span></span>
<span id="cb176-2523"><a href="#cb176-2523" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2524"><a href="#cb176-2524" aria-hidden="true" tabindex="-1"></a># Dot formats <span class="op">{</span>#sec<span class="op">-</span>format<span class="op">}</span></span>
<span id="cb176-2525"><a href="#cb176-2525" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2526"><a href="#cb176-2526" aria-hidden="true" tabindex="-1"></a>The `stamps` shown above are in the decimal days of the <span class="fu">year</span> <span class="op">(</span>`<span class="op">.</span><span class="fu">y</span>`<span class="op">)</span> format<span class="op">,</span> which is the main `Decalendar` format<span class="op">.</span> <span class="fu">In</span> addition to the `<span class="op">.</span><span class="fu">y</span>` format<span class="op">,</span> there are <span class="dv">2</span> other supplemental `datetime` formats<span class="op">,</span> which are based on decimal days of the <span class="fu">month</span> <span class="op">(</span>`decc`<span class="op">),</span> and decimal days of the <span class="fu">week</span> <span class="op">(</span>`<span class="op">.</span><span class="fu">w</span>`<span class="op">).</span> <span class="at">@tbl</span><span class="op">-</span>format summarizes the three decimal day<span class="op">-</span>of<span class="op">-</span><span class="fu">the</span> <span class="op">(</span> `dot` or `<span class="op">.</span>`<span class="op">)</span> formats<span class="op">:</span></span>
<span id="cb176-2527"><a href="#cb176-2527" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2528"><a href="#cb176-2528" aria-hidden="true" tabindex="-1"></a>#### <span class="at">@tbl</span><span class="op">-</span>format</span>
<span id="cb176-2529"><a href="#cb176-2529" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2530"><a href="#cb176-2530" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span> <span class="op">{.</span><span class="fu">callout</span><span class="op">-</span>note collapse<span class="op">=</span><span class="st">"true"</span> title<span class="op">=</span><span class="st">"Click to toggle table expansion"</span> icon<span class="op">=</span><span class="st">"false"</span><span class="op">}</span></span>
<span id="cb176-2531"><a href="#cb176-2531" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Day of the <span class="op">|</span> `<span class="op">.</span>` <span class="op">|</span> General Form      <span class="op">|</span> Specific Example  <span class="op">|</span></span>
<span id="cb176-2532"><a href="#cb176-2532" aria-hidden="true" tabindex="-1"></a><span class="op">|------------|-----|-------------------|-------------------|</span></span>
<span id="cb176-2533"><a href="#cb176-2533" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Year       <span class="op">|</span> `y` <span class="op">|</span> `year¬±day<span class="op">.</span><span class="fu">day</span>¬±z`  <span class="op">|</span> `<span class="dv">1999</span><span class="op">+</span><span class="fl">365.500</span><span class="op">-</span><span class="dv">3</span>`  <span class="op">|</span></span>
<span id="cb176-2534"><a href="#cb176-2534" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Month      <span class="op">|</span> `m` <span class="op">|</span> `year¬±m¬±dd<span class="op">.</span><span class="fu">day</span>¬±z` <span class="op">|</span> `<span class="dv">1999</span><span class="op">+</span>B<span class="op">+</span><span class="fl">29.500</span><span class="op">-</span><span class="dv">3</span>` <span class="op">|</span></span>
<span id="cb176-2535"><a href="#cb176-2535" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Week       <span class="op">|</span> `w` <span class="op">|</span> `year¬±ww¬±d<span class="op">.</span><span class="fu">day</span>¬±z` <span class="op">|</span> `<span class="dv">1999</span><span class="op">+</span><span class="dv">52</span><span class="op">+</span><span class="fl">5.500</span><span class="op">-</span><span class="dv">3</span>` <span class="op">|</span></span>
<span id="cb176-2536"><a href="#cb176-2536" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2537"><a href="#cb176-2537" aria-hidden="true" tabindex="-1"></a><span class="op">:</span> The three dot formats <span class="op">{</span>#tbl<span class="op">-</span>format<span class="op">}</span></span>
<span id="cb176-2538"><a href="#cb176-2538" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span></span>
<span id="cb176-2539"><a href="#cb176-2539" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2540"><a href="#cb176-2540" aria-hidden="true" tabindex="-1"></a>In <span class="at">@tbl</span><span class="op">-</span>format <span class="op">,</span> `day` is the <span class="dv">3</span><span class="op">-</span>digit day of the <span class="fu">year</span> <span class="op">(</span>`doty`<span class="op">)</span> number<span class="op">,</span> `dd` is the <span class="dv">2</span><span class="op">-</span>digit day of the <span class="fu">month</span> <span class="op">(</span>`dotm`<span class="op">)</span> number<span class="op">,</span> `d` is the <span class="dv">1</span><span class="op">-</span>digit day of the <span class="fu">week</span> <span class="op">(</span>`dotw`<span class="op">)</span> number<span class="op">,</span> and `<span class="op">.</span><span class="fu">day</span>` is the time in `mils`<span class="op">.</span></span>
<span id="cb176-2541"><a href="#cb176-2541" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2542"><a href="#cb176-2542" aria-hidden="true" tabindex="-1"></a>## The `<span class="op">.</span><span class="fu">m</span>` format <span class="op">{</span>#sec<span class="op">-</span>dotm<span class="op">}</span></span>
<span id="cb176-2543"><a href="#cb176-2543" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2544"><a href="#cb176-2544" aria-hidden="true" tabindex="-1"></a>The `m` in the `<span class="op">.</span><span class="fu">m</span>` format is the <span class="dv">1</span><span class="op">-</span>digit month number and is the <span class="dt">double</span><span class="op">-</span>digit `dotm`<span class="op">.</span> <span class="fu">To</span> fit all of the months in a single digit<span class="op">,</span> `m` is in <span class="op">[</span>hexadecimal<span class="op">](</span>https<span class="op">:</span><span class="co">//en.wikipedia.org/wiki/Hexadecimal) form (Base16 encoded). This means that the first 10 months are represented by the numbers 0 through 9 ([zero-based numbering](https://en.wikipedia.org/wiki/Zero-based_numbering)) while the last two months of the year are represented by the letters "A" and "B" instead of numbers. The `.m` format is similar to the [ISO8601 calendar date](https://en.wikipedia.org/wiki/ISO_8601#Calendar_dates) format (year-mm-dd).</span></span>
<span id="cb176-2545"><a href="#cb176-2545" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2546"><a href="#cb176-2546" aria-hidden="true" tabindex="-1"></a>The <span class="op">[</span>ordinal numerals<span class="op">](</span>https<span class="op">:</span><span class="co">//en.wikipedia.org/wiki/Ordinal_numeral) of September, October, November, and December in `Decalendar` (Sep=7th, Oct=8th, Nov=9th, Dec=10th) match the [numeral prefixes](https://en.m.wikipedia.org/wiki/Numeral_prefix#Table_of_number_prefixes_in_English) in their names (Sep=7, Oct=8, Nov=9, Dec=10). The `m` value of a month is based on its cardinal number in `Decalendar`, which is 1 less than its ordinal number (Sep=6, Oct=7, Nov=8, Dec=9).</span></span>
<span id="cb176-2547"><a href="#cb176-2547" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2548"><a href="#cb176-2548" aria-hidden="true" tabindex="-1"></a>To convert a <span class="dt">double</span><span class="op">-</span>digit Gregorian calendar month <span class="fu">number</span> <span class="op">(</span>`mm`<span class="op">)</span> into a single<span class="op">-</span>digit `Decalendar` `m` value<span class="op">,</span> we subtract <span class="dv">3</span> <span class="cf">if</span> `mm` is greater than <span class="dv">2</span><span class="op">,</span> add <span class="dv">9</span> <span class="cf">if</span> not<span class="op">,</span> as shown in <span class="at">@eq</span><span class="op">-</span>dotm1<span class="op">,</span> and then encode into <span class="fu">hexadecimal</span> <span class="op">(</span>Base16<span class="op">).</span> <span class="fu">To</span> <span class="cf">do</span> the <span class="fu">inverse</span> <span class="op">(</span>convert `m` to `mm`<span class="op">),</span> we decode from hexadecimal<span class="op">,</span> add <span class="dv">3</span> to `m` values less than <span class="dv">10</span> and subtract <span class="dv">9</span> from other `m` values<span class="op">,</span> as shown in <span class="at">@eq</span><span class="op">-</span>dotm2<span class="op">.</span> <span class="fu">After</span> hexadecimal encoding<span class="op">,</span> January is represented by `A` and February is represented by `B` <span class="op">(</span>mnemonic<span class="op">:</span> `jAn`<span class="op">=</span>January<span class="op">,</span> `feB`<span class="op">=</span>February<span class="op">).</span></span>
<span id="cb176-2549"><a href="#cb176-2549" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2550"><a href="#cb176-2550" aria-hidden="true" tabindex="-1"></a>$$m <span class="op">=</span> \begin<span class="op">{</span>cases<span class="op">}</span>mm <span class="op">-</span> <span class="dv">3</span><span class="op">&amp;{</span>\text<span class="op">{</span><span class="cf">if</span> <span class="op">}</span> month <span class="op">&gt;</span> <span class="dv">2</span><span class="op">;}</span>\\mm <span class="op">+</span> <span class="dv">9</span><span class="op">&amp;{</span>\text<span class="op">{</span>otherwise<span class="op">.}}</span>\end<span class="op">{</span>cases<span class="op">}</span>$$ <span class="op">{</span>#eq<span class="op">-</span>dotm1<span class="op">}</span></span>
<span id="cb176-2551"><a href="#cb176-2551" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2552"><a href="#cb176-2552" aria-hidden="true" tabindex="-1"></a>$$m <span class="op">=</span> \begin<span class="op">{</span>cases<span class="op">}</span>month <span class="op">+</span> <span class="dv">3</span><span class="op">&amp;{</span>\text<span class="op">{</span><span class="cf">if</span> <span class="op">}</span> month <span class="op">&lt;</span> <span class="dv">10</span><span class="op">;}</span>\\month <span class="op">-</span> <span class="dv">9</span><span class="op">&amp;{</span>\text<span class="op">{</span>otherwise<span class="op">.}}</span>\end<span class="op">{</span>cases<span class="op">}</span>$$ <span class="op">{</span>#eq<span class="op">-</span>dotm2<span class="op">}</span></span>
<span id="cb176-2553"><a href="#cb176-2553" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2554"><a href="#cb176-2554" aria-hidden="true" tabindex="-1"></a>## The `decw` format <span class="op">{</span>#sec<span class="op">-</span>dotw<span class="op">}</span></span>
<span id="cb176-2555"><a href="#cb176-2555" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2556"><a href="#cb176-2556" aria-hidden="true" tabindex="-1"></a>The week number in the `decw` format<span class="op">,</span> `ww`<span class="op">,</span> ranges from <span class="dv">0</span> to <span class="dv">53</span> or <span class="op">-</span><span class="dv">54</span> to <span class="op">-</span><span class="fl">1.</span> Weeks in the `decw` format start from Sunday<span class="op">.</span> <span class="at">@tbl</span><span class="op">-</span>dotw shows the possible `dotw` values<span class="op">,</span> which range from <span class="dv">0</span> to <span class="dv">6</span> or <span class="op">-</span><span class="dv">7</span> to <span class="op">-</span><span class="fl">1.</span></span>
<span id="cb176-2557"><a href="#cb176-2557" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2558"><a href="#cb176-2558" aria-hidden="true" tabindex="-1"></a>#### <span class="at">@tbl</span><span class="op">-</span>dotw</span>
<span id="cb176-2559"><a href="#cb176-2559" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2560"><a href="#cb176-2560" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span> <span class="op">{.</span><span class="fu">callout</span><span class="op">-</span>note collapse<span class="op">=</span><span class="st">"true"</span> title<span class="op">=</span><span class="st">"Click to toggle table expansion"</span> icon<span class="op">=</span><span class="st">"false"</span><span class="op">}</span></span>
<span id="cb176-2561"><a href="#cb176-2561" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Day       <span class="op">|</span> Pos <span class="op">|</span> Neg <span class="op">|</span></span>
<span id="cb176-2562"><a href="#cb176-2562" aria-hidden="true" tabindex="-1"></a><span class="op">|-----------|-----|-----|</span></span>
<span id="cb176-2563"><a href="#cb176-2563" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Sunday    <span class="op">|</span> <span class="dv">0</span>   <span class="op">|</span> <span class="op">-</span><span class="dv">7</span>  <span class="op">|</span></span>
<span id="cb176-2564"><a href="#cb176-2564" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Monday    <span class="op">|</span> <span class="dv">1</span>   <span class="op">|</span> <span class="op">-</span><span class="dv">6</span>  <span class="op">|</span></span>
<span id="cb176-2565"><a href="#cb176-2565" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Tuesday   <span class="op">|</span> <span class="dv">2</span>   <span class="op">|</span> <span class="op">-</span><span class="dv">5</span>  <span class="op">|</span></span>
<span id="cb176-2566"><a href="#cb176-2566" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Wednesday <span class="op">|</span> <span class="dv">3</span>   <span class="op">|</span> <span class="op">-</span><span class="dv">4</span>  <span class="op">|</span></span>
<span id="cb176-2567"><a href="#cb176-2567" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Thursday  <span class="op">|</span> <span class="dv">4</span>   <span class="op">|</span> <span class="op">-</span><span class="dv">3</span>  <span class="op">|</span></span>
<span id="cb176-2568"><a href="#cb176-2568" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Friday    <span class="op">|</span> <span class="dv">5</span>   <span class="op">|</span> <span class="op">-</span><span class="dv">2</span>  <span class="op">|</span></span>
<span id="cb176-2569"><a href="#cb176-2569" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Saturday  <span class="op">|</span> <span class="dv">6</span>   <span class="op">|</span> <span class="op">-</span><span class="dv">1</span>  <span class="op">|</span></span>
<span id="cb176-2570"><a href="#cb176-2570" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2571"><a href="#cb176-2571" aria-hidden="true" tabindex="-1"></a><span class="op">:</span> The weeks in the `decw` format <span class="op">{</span>#tbl<span class="op">-</span>dotw<span class="op">}</span></span>
<span id="cb176-2572"><a href="#cb176-2572" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span></span>
<span id="cb176-2573"><a href="#cb176-2573" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2574"><a href="#cb176-2574" aria-hidden="true" tabindex="-1"></a>## Dot format examples <span class="op">{</span>#sec<span class="op">-</span>dotex<span class="op">}</span></span>
<span id="cb176-2575"><a href="#cb176-2575" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2576"><a href="#cb176-2576" aria-hidden="true" tabindex="-1"></a><span class="at">@tbl</span><span class="op">-</span>dotex builds on the example from <span class="at">@sec</span><span class="op">-</span>zone to compare all three `<span class="op">.</span>` formats<span class="op">.</span> <span class="fu">The</span> <span class="dv">3</span> `<span class="op">.</span>` formats differ only in their approach to the date<span class="op">,</span> not the time<span class="op">.</span> <span class="fu">Therefore</span><span class="op">,</span> the times below are all shown to <span class="dv">1</span><span class="op">-</span>digit `dime` <span class="fu">precision</span> <span class="op">(</span>same as time zones<span class="op">)</span> instead of the typical <span class="dv">3</span><span class="op">-</span>digit `mil` precision<span class="op">.</span> <span class="fu">In</span> Mexico City<span class="op">,</span> the time is `<span class="op">+</span><span class="dv">5</span><span class="op">-</span><span class="dv">3</span>` or `<span class="op">-</span><span class="dv">5</span><span class="op">-</span><span class="dv">3</span>`<span class="op">,</span> <span class="cf">while</span> the time in London is `<span class="op">+</span><span class="dv">8</span><span class="op">+</span><span class="dv">0</span>` or `<span class="op">-</span><span class="dv">2</span><span class="op">+</span><span class="dv">0</span>` and time in Tokyo is `<span class="op">+</span><span class="dv">2</span><span class="op">+</span><span class="dv">4</span>` or `<span class="op">-</span><span class="dv">8</span><span class="op">+</span><span class="dv">4</span>`<span class="op">.</span></span>
<span id="cb176-2577"><a href="#cb176-2577" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2578"><a href="#cb176-2578" aria-hidden="true" tabindex="-1"></a>#### <span class="at">@tbl</span><span class="op">-</span>dotex</span>
<span id="cb176-2579"><a href="#cb176-2579" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2580"><a href="#cb176-2580" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span> <span class="op">{.</span><span class="fu">callout</span><span class="op">-</span>note collapse<span class="op">=</span><span class="st">"true"</span> title<span class="op">=</span><span class="st">"Click to toggle table expansion"</span> icon<span class="op">=</span><span class="st">"false"</span><span class="op">}</span></span>
<span id="cb176-2581"><a href="#cb176-2581" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Day of the <span class="op">|</span> `<span class="op">.</span>` <span class="op">|</span> Mexico City     <span class="op">|</span> London          <span class="op">|</span> Tokyo           <span class="op">|</span></span>
<span id="cb176-2582"><a href="#cb176-2582" aria-hidden="true" tabindex="-1"></a><span class="op">|------------|-----|-----------------|-----------------|-----------------|</span></span>
<span id="cb176-2583"><a href="#cb176-2583" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Year       <span class="op">|</span> `y` <span class="op">|</span> `<span class="dv">1999</span><span class="op">+</span><span class="fl">365.5</span><span class="op">-</span><span class="dv">3</span>`  <span class="op">|</span> `<span class="dv">1999</span><span class="op">+</span><span class="fl">365.8</span><span class="op">+</span><span class="dv">0</span>`  <span class="op">|</span> `<span class="dv">2000</span><span class="op">+</span><span class="fl">000.2</span><span class="op">+</span><span class="dv">4</span>`  <span class="op">|</span></span>
<span id="cb176-2584"><a href="#cb176-2584" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Year       <span class="op">|</span> `y` <span class="op">|</span> `<span class="dv">2000</span><span class="op">-</span><span class="fl">001.5</span><span class="op">-</span><span class="dv">3</span>`  <span class="op">|</span> `<span class="dv">2000</span><span class="op">-</span><span class="fl">001.2</span><span class="op">+</span><span class="dv">0</span>`  <span class="op">|</span> `<span class="dv">2001</span><span class="op">-</span><span class="fl">365.8</span><span class="op">+</span><span class="dv">4</span>`  <span class="op">|</span></span>
<span id="cb176-2585"><a href="#cb176-2585" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Month      <span class="op">|</span> `m` <span class="op">|</span> `<span class="dv">1999</span><span class="op">+</span>B<span class="op">+</span><span class="fl">29.5</span><span class="op">-</span><span class="dv">3</span>` <span class="op">|</span> `<span class="dv">1999</span><span class="op">+</span>B<span class="op">+</span><span class="fl">29.8</span><span class="op">+</span><span class="dv">0</span>` <span class="op">|</span> `<span class="dv">2000</span><span class="op">+</span><span class="dv">0</span><span class="op">+</span><span class="fl">00.2</span><span class="op">+</span><span class="dv">4</span>` <span class="op">|</span></span>
<span id="cb176-2586"><a href="#cb176-2586" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Month      <span class="op">|</span> `m` <span class="op">|</span> `<span class="dv">2000</span><span class="op">-</span><span class="dv">1</span><span class="op">-</span><span class="fl">01.5</span><span class="op">-</span><span class="dv">3</span>` <span class="op">|</span> `<span class="dv">2000</span><span class="op">-</span><span class="dv">1</span><span class="op">-</span><span class="fl">01.2</span><span class="op">+</span><span class="dv">0</span>` <span class="op">|</span> `<span class="dv">2001</span><span class="op">-</span>C<span class="op">-</span><span class="fl">31.8</span><span class="op">+</span><span class="dv">4</span>` <span class="op">|</span></span>
<span id="cb176-2587"><a href="#cb176-2587" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Week       <span class="op">|</span> `w` <span class="op">|</span> `<span class="dv">1999</span><span class="op">+</span><span class="dv">52</span><span class="op">+</span><span class="fl">2.5</span><span class="op">-</span><span class="dv">3</span>` <span class="op">|</span> `<span class="dv">1999</span><span class="op">+</span><span class="dv">52</span><span class="op">+</span><span class="fl">2.8</span><span class="op">+</span><span class="dv">0</span>` <span class="op">|</span> `<span class="dv">2000</span><span class="op">+</span><span class="bn">00</span><span class="op">+</span><span class="fl">3.2</span><span class="op">+</span><span class="dv">4</span>` <span class="op">|</span></span>
<span id="cb176-2588"><a href="#cb176-2588" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Week       <span class="op">|</span> `w` <span class="op">|</span> `<span class="dv">2000</span><span class="op">-</span><span class="bn">01</span><span class="op">-</span><span class="fl">5.5</span><span class="op">-</span><span class="dv">3</span>` <span class="op">|</span> `<span class="dv">2000</span><span class="op">-</span><span class="bn">01</span><span class="op">-</span><span class="fl">5.2</span><span class="op">+</span><span class="dv">0</span>` <span class="op">|</span> `<span class="dv">2001</span><span class="op">-</span><span class="dv">53</span><span class="op">-</span><span class="fl">4.8</span><span class="op">+</span><span class="dv">4</span>` <span class="op">|</span></span>
<span id="cb176-2589"><a href="#cb176-2589" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2590"><a href="#cb176-2590" aria-hidden="true" tabindex="-1"></a><span class="op">:</span> The time in Mexico City<span class="op">,</span> London<span class="op">,</span> and Tokyo in all three dot formats <span class="op">{</span>#tbl<span class="op">-</span>dotex<span class="op">}</span></span>
<span id="cb176-2591"><a href="#cb176-2591" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span></span>
<span id="cb176-2592"><a href="#cb176-2592" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2593"><a href="#cb176-2593" aria-hidden="true" tabindex="-1"></a>In <span class="at">@tbl</span><span class="op">-</span>dotex<span class="op">,</span> the `<span class="op">.</span><span class="fu">m</span>` format tells us that the month in Tokyo is <span class="fu">January</span> <span class="op">(</span>`Month` `<span class="dv">0</span>`<span class="op">)</span> and the month in Mexico City and London is <span class="fu">December</span> <span class="op">(</span>`Month` `B`<span class="op">).</span> <span class="fu">We</span> could say the `<span class="op">.</span><span class="fu">m</span>` dates in Mexico City and London as <span class="st">"Year 1999 Month B Day 29"</span> or <span class="st">"Year 1999 Month -1 Day -1"</span> and the Tokyo date as <span class="st">"Year 2000 Month 0 Day 0"</span> or <span class="st">"Year 2000 Month -C Day -31"</span><span class="op">.</span></span>
<span id="cb176-2594"><a href="#cb176-2594" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2595"><a href="#cb176-2595" aria-hidden="true" tabindex="-1"></a><span class="fu">The</span> `decw` format always starts the year with `Week` `<span class="dv">0</span>`<span class="op">,</span> but the year can start on any day of the week<span class="op">.</span> <span class="at">@tbl</span><span class="op">-</span>dotex shows that the year <span class="dv">2000</span> starts on a <span class="fu">Saturday</span> <span class="op">(</span>`Week` `<span class="dv">0</span>` `Day` `<span class="dv">6</span>`<span class="op">).</span> <span class="fu">The</span> `decw` dates in Mexico City and London could be said <span class="st">"Year 1999 Week 52 Day 2"</span> or <span class="st">"Year 1999 Week -1 Day -5"</span><span class="op">,</span> <span class="cf">while</span> the date in Tokyo could be pronounced <span class="st">"Year 2000 Week 0 Day 3"</span> or <span class="st">"Year 2000 Week -52 Day -4"</span> in Tokyo<span class="op">.</span></span>
<span id="cb176-2596"><a href="#cb176-2596" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2597"><a href="#cb176-2597" aria-hidden="true" tabindex="-1"></a><span class="fu">In</span> contrast to the `<span class="op">.</span><span class="fu">m</span>` and the `decw` formats<span class="op">,</span> the dates in the `<span class="op">.</span><span class="fu">y</span>` format are one character shorter and a little easier to say<span class="op">.</span> <span class="fu">The</span> spoken form of the `<span class="op">.</span><span class="fu">y</span>` date in Mexico City and London is <span class="st">"Year 1999 Day 365"</span> or <span class="st">"Year 1999 Day -1"</span> and the spoken form of the Tokyo date is <span class="st">"Year 2000 Day 0"</span> or <span class="st">"Year 2000 Day -365"</span><span class="op">.</span></span>
<span id="cb176-2598"><a href="#cb176-2598" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2599"><a href="#cb176-2599" aria-hidden="true" tabindex="-1"></a>## `Deks` <span class="op">{</span>#sec<span class="op">-</span>dek<span class="op">}</span></span>
<span id="cb176-2600"><a href="#cb176-2600" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2601"><a href="#cb176-2601" aria-hidden="true" tabindex="-1"></a>Even though it provides formats <span class="cf">for</span> months and weeks<span class="op">,</span> `Decalendar` envisions a world in which these units are replaced by `deks`<span class="op">.</span> <span class="fu">In</span> terms of scale<span class="op">,</span> `deks` are somewhere between a week and a month<span class="op">,</span> precisely half a day less than a week and a <span class="fu">half</span> <span class="op">(</span><span class="fl">1.5</span> weeks <span class="op">-</span> <span class="fl">0.5</span> days<span class="op">)</span> and approximately a third of month<span class="op">.</span> `Deks` could provide the functionality of both weeks and months <span class="cf">if</span> we followed a `dekly` schedule instead of `weekly` and `monthly` schedules<span class="op">.</span> <span class="fu">The</span> transition to a `dekly` schedule would be a massive undertaking<span class="op">,</span> but could start with the creation of the digital infrastructure needed <span class="cf">for</span> the <span class="kw">new</span> system<span class="op">.</span> <span class="fu">Every</span> desktop and mobile application that uses dates could be adapted to optionally use `deks` instead of weeks and months<span class="op">.</span></span>
<span id="cb176-2602"><a href="#cb176-2602" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2603"><a href="#cb176-2603" aria-hidden="true" tabindex="-1"></a>### Days of the `dek` <span class="op">{</span>#sec<span class="op">-</span>dotd<span class="op">}</span></span>
<span id="cb176-2604"><a href="#cb176-2604" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2605"><a href="#cb176-2605" aria-hidden="true" tabindex="-1"></a>A major difficulty with the Gregorian calendar is that the date is disconnected from the day of the week<span class="op">.</span> <span class="fu">In</span> contrast<span class="op">,</span> the day of the `dek` <span class="op">(</span>`dotd`<span class="op">)</span> is simply the last digit of the day number in the `<span class="op">.</span><span class="fu">y</span>` format<span class="op">.</span> <span class="fu">For</span> example<span class="op">,</span> the first day of the <span class="fu">year</span> <span class="op">(</span>`Day` `<span class="dv">0</span>`<span class="op">)</span> is always a `Nulday`<span class="op">,</span> the last day of common <span class="fu">years</span> <span class="op">(</span>`Day` `<span class="dv">364</span>`<span class="op">)</span> is always an `Quaday`<span class="op">,</span> and the last day of leap <span class="fu">years</span> <span class="op">(</span>`Day` `<span class="dv">365</span>`<span class="op">)</span> is always a `Penday`<span class="op">.</span> <span class="fu">The</span> day number allows us to distinguish workdays from restdays<span class="op">.</span> `Decalendar` defines `Triday`<span class="op">,</span> `Quaday`<span class="op">,</span> `Octday`<span class="op">,</span> and `Ennday` as restdays<span class="op">,</span> which means that days with numbers that end in <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> or <span class="dv">9</span> are days off from work and school<span class="op">.</span> <span class="fu">Each</span> `dek` consists of <span class="dv">2</span> `pents` <span class="op">(</span>`pentadays`<span class="op">),</span> each `pent` has <span class="dv">3</span> workdays called the `trep` <span class="op">(</span>`trepalium`<span class="op">)</span> and <span class="dv">2</span> restdays called the `pentend`<span class="op">.</span> <span class="fu">In</span> total<span class="op">,</span> there are <span class="dv">219</span> workdays and <span class="dv">146</span> restdays in a `Decalendar` year<span class="op">,</span> not counting the only obligatory holiday<span class="op">,</span> Leap <span class="fu">Day</span> <span class="op">(</span>`Day` `<span class="dv">365</span>`<span class="op">).</span></span>
<span id="cb176-2606"><a href="#cb176-2606" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2607"><a href="#cb176-2607" aria-hidden="true" tabindex="-1"></a>### Workdays <span class="op">{</span>#sec<span class="op">-</span>work<span class="op">}</span></span>
<span id="cb176-2608"><a href="#cb176-2608" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2609"><a href="#cb176-2609" aria-hidden="true" tabindex="-1"></a>The Gregorian calendar has many more workdays<span class="op">,</span> <span class="dv">260</span> in common years and <span class="dv">261</span> in leap year<span class="op">.</span> <span class="fu">Despite</span> having many fewer workdays and many more restdays<span class="op">,</span> workers following `Decalendar` would actually spent slightly more time at work overall<span class="op">,</span> because the `Decalendar` workday goes from `Dot` `<span class="dv">3</span>` to `Dot` `<span class="dv">7</span>` and thus is <span class="dv">4</span> `dimes` <span class="op">(</span><span class="fl">9.6</span> hours<span class="op">)</span> <span class="dt">long</span><span class="op">,</span> <span class="fl">6.6</span>ÃÖ `cents` <span class="op">(</span><span class="dv">96</span> minutes<span class="op">)</span> longer than the typical <span class="dv">9</span><span class="op">-</span>to<span class="op">-</span><span class="dv">5</span> work <span class="fu">schedule</span> <span class="op">(</span>`Dot` `<span class="dv">375</span>` to `Dot` `<span class="dv">7083</span>ÃÖ`<span class="op">).</span> <span class="fu">In</span> other words<span class="op">,</span> <span class="kw">this</span> work schedule starts <span class="dv">75</span> `mils` <span class="op">(</span><span class="fl">1.8</span> hours<span class="op">)</span> earlier than <span class="dv">9</span>AM <span class="op">(</span>`Dot` `<span class="dv">375</span>`<span class="op">)</span> and ends <span class="fl">8.3</span>ÃÖ `mils` <span class="op">(</span><span class="dv">12</span> minutes<span class="op">)</span> earlier than <span class="dv">5</span>PM <span class="op">(</span>`Dot` `<span class="dv">7083</span>ÃÖ`<span class="op">).</span> <span class="fu">In</span> a typical <span class="dv">40</span><span class="op">-</span>hour workweek<span class="op">,</span> workers spend <span class="fl">23.80952381</span> `cents` per day at work on average<span class="op">,</span> which adds up to <span class="fl">8.6</span>ÃÖ `deks` <span class="op">(</span><span class="dv">260</span>\<span class="op">*</span><span class="dv">8</span><span class="op">/</span><span class="dv">240</span><span class="op">)</span> per common year and <span class="fl">8.7</span> `deks` <span class="op">(</span>$<span class="dv">261</span> \times <span class="dv">8</span> \div <span class="dv">240</span>$<span class="op">)</span> per leap year<span class="op">.</span> <span class="fu">In</span> contrast<span class="op">,</span> workers following `Decalendar` spend <span class="dv">24</span> `cents` per day at work on average<span class="op">,</span> which totals up to <span class="fl">87.6</span> `days` <span class="op">(</span>$<span class="dv">219</span> \times <span class="fl">.4</span>$<span class="op">)</span> spent at work every year<span class="op">.</span> <span class="fu">The</span> <span class="kw">default</span> approach of `Decalendar` is to compensate <span class="cf">for</span> having more restdays with longer workdays<span class="op">.</span></span>
<span id="cb176-2610"><a href="#cb176-2610" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2611"><a href="#cb176-2611" aria-hidden="true" tabindex="-1"></a>### Schedules <span class="op">{</span>#sec<span class="op">-</span>sched<span class="op">}</span></span>
<span id="cb176-2612"><a href="#cb176-2612" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2613"><a href="#cb176-2613" aria-hidden="true" tabindex="-1"></a>#### Pently schedules <span class="op">{</span>#sec<span class="op">-</span>pently<span class="op">}</span></span>
<span id="cb176-2614"><a href="#cb176-2614" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2615"><a href="#cb176-2615" aria-hidden="true" tabindex="-1"></a>If necessary<span class="op">,</span> the length of the workday and the number of workdays in the `dek` can be adjusted according to different schedules<span class="op">.</span> <span class="fu">As</span> mentioned above<span class="op">,</span> each half of the `dek` is called a `pent`<span class="op">.</span> <span class="fu">Each</span> `pent` can have its own `pently` schedule<span class="op">.</span> <span class="fu">The</span> expectation is that workers will work <span class="cf">for</span> <span class="dv">12</span> `dimes` per `pent`<span class="op">.</span> <span class="fu">It</span> is possible to split those <span class="dv">12</span> `dimes` over the course of <span class="dv">5</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> or <span class="dv">2</span> days in each `pent`<span class="op">.</span> <span class="at">@tbl</span><span class="op">-</span>pently displays how the number of workdays and restdays in a `pent` affects the start time<span class="op">,</span> end time<span class="op">,</span> and duration of the workday<span class="op">.</span> <span class="fu">The</span> different `pently` schedules are named after the number of workdays per `pent`<span class="op">.</span> <span class="fu">People</span> can <span class="cf">switch</span> between `pently` schedules every `pent` as needed<span class="op">,</span> but everyone should follow the `Schedule` `<span class="dv">3</span>` by <span class="kw">default</span><span class="op">.</span> `Schedule` `<span class="dv">3</span>` has <span class="dv">3</span> workdays and <span class="dv">2</span> restdays in each `pent`<span class="op">.</span> <span class="fu">Each</span> `Schedule` `<span class="dv">3</span>` workday starts at `Dot` `<span class="dv">3</span>`<span class="op">,</span> ends at `Dot` `<span class="dv">7</span>`<span class="op">,</span> and lasts <span class="dv">4</span> `dimes`<span class="op">.</span></span>
<span id="cb176-2616"><a href="#cb176-2616" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2617"><a href="#cb176-2617" aria-hidden="true" tabindex="-1"></a>#### <span class="at">@tbl</span><span class="op">-</span>pently</span>
<span id="cb176-2618"><a href="#cb176-2618" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2619"><a href="#cb176-2619" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span> <span class="op">{.</span><span class="fu">callout</span><span class="op">-</span>note collapse<span class="op">=</span><span class="st">"true"</span> title<span class="op">=</span><span class="st">"Click to toggle table expansion"</span> icon<span class="op">=</span><span class="st">"false"</span><span class="op">}</span></span>
<span id="cb176-2620"><a href="#cb176-2620" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Schedule <span class="op">|</span> Workdays <span class="op">|</span> Restdays <span class="op">|</span> Start <span class="op">|</span> End <span class="op">|</span> <span class="bu">Duration</span> <span class="op">|</span></span>
<span id="cb176-2621"><a href="#cb176-2621" aria-hidden="true" tabindex="-1"></a><span class="op">|----------|----------|----------|-------|-----|----------|</span></span>
<span id="cb176-2622"><a href="#cb176-2622" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="dv">2</span>        <span class="op">|</span> <span class="dv">2</span>        <span class="op">|</span> <span class="dv">3</span>        <span class="op">|</span> <span class="fl">.2</span>    <span class="op">|</span> <span class="fl">.8</span>  <span class="op">|</span> <span class="fl">.6</span>       <span class="op">|</span></span>
<span id="cb176-2623"><a href="#cb176-2623" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="dv">3</span>        <span class="op">|</span> <span class="dv">3</span>        <span class="op">|</span> <span class="dv">2</span>        <span class="op">|</span> <span class="fl">.3</span>    <span class="op">|</span> <span class="fl">.7</span>  <span class="op">|</span> <span class="fl">.4</span>       <span class="op">|</span></span>
<span id="cb176-2624"><a href="#cb176-2624" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="dv">4</span>        <span class="op">|</span> <span class="dv">4</span>        <span class="op">|</span> <span class="dv">1</span>        <span class="op">|</span> <span class="fl">.35</span>   <span class="op">|</span> <span class="fl">.65</span> <span class="op">|</span> <span class="fl">.3</span>       <span class="op">|</span></span>
<span id="cb176-2625"><a href="#cb176-2625" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="dv">5</span>        <span class="op">|</span> <span class="dv">5</span>        <span class="op">|</span> <span class="dv">0</span>        <span class="op">|</span> <span class="fl">.38</span>   <span class="op">|</span> <span class="fl">.62</span> <span class="op">|</span> <span class="fl">.24</span>      <span class="op">|</span></span>
<span id="cb176-2626"><a href="#cb176-2626" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2627"><a href="#cb176-2627" aria-hidden="true" tabindex="-1"></a><span class="op">:</span> The characteristics of the pently schedules <span class="op">{</span>#tbl<span class="op">-</span>pently<span class="op">}</span></span>
<span id="cb176-2628"><a href="#cb176-2628" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span></span>
<span id="cb176-2629"><a href="#cb176-2629" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2630"><a href="#cb176-2630" aria-hidden="true" tabindex="-1"></a>#### Daily schedules <span class="op">{</span>#sec<span class="op">-</span>daily<span class="op">}</span></span>
<span id="cb176-2631"><a href="#cb176-2631" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2632"><a href="#cb176-2632" aria-hidden="true" tabindex="-1"></a>`Decalendar` recommends waking up at `Dot` `<span class="dv">2</span>` and going to bed at `Dot` `<span class="dv">8</span>`<span class="op">.</span> <span class="fu">This</span> recommendation allots <span class="dv">4</span> `dimes` <span class="op">(</span><span class="fl">9.6</span> hours<span class="op">)</span> <span class="cf">for</span> falling asleep and sleeping<span class="op">.</span> <span class="fu">To</span> keep daily schedules symmetrical<span class="op">,</span> the time spent awake should be split evenly before and after work<span class="op">.</span> <span class="fu">People</span> following `Schedule` `<span class="dv">3</span>` would thus have <span class="dv">10</span> `cents` <span class="op">(</span><span class="fl">2.4</span> hours<span class="op">)</span> to prepare <span class="cf">for</span> work and another <span class="dv">10</span> `cents` to prepare <span class="cf">for</span> bed<span class="op">.</span> <span class="at">@tbl</span><span class="op">-</span>daily shows the recommended `Schedule` `<span class="dv">3</span>` daily schedule<span class="op">.</span> `Schedule` `<span class="dv">4</span>` and `Schedule` `<span class="dv">5</span>` allot even more time<span class="op">,</span> <span class="dv">15</span> `cents` <span class="op">(</span><span class="fl">3.6</span> hours<span class="op">)</span> and <span class="dv">18</span> `cents` <span class="op">(</span><span class="fl">4.32</span> hours<span class="op">),</span> respectively<span class="op">,</span> <span class="cf">for</span> before<span class="op">-</span>work and after<span class="op">-</span>work activities<span class="op">.</span> <span class="fu">The</span> recommended sleep schedule does not fit well with `Schedule` `<span class="dv">2</span>`<span class="op">,</span> but <span class="kw">this</span> incompatibility does not have to result in a sleep deficit<span class="op">.</span> <span class="fu">If</span> the `Schedule` `<span class="dv">2</span>` workdays are not consecutive<span class="op">,</span> people following `Schedule` `<span class="dv">2</span>` can <span class="cf">catch</span> up on sleep on their days off by going to bed early before and sleeping in after every workday<span class="op">.</span></span>
<span id="cb176-2633"><a href="#cb176-2633" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2634"><a href="#cb176-2634" aria-hidden="true" tabindex="-1"></a>#### <span class="at">@tbl</span><span class="op">-</span>daily</span>
<span id="cb176-2635"><a href="#cb176-2635" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2636"><a href="#cb176-2636" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span> <span class="op">{.</span><span class="fu">callout</span><span class="op">-</span>note collapse<span class="op">=</span><span class="st">"true"</span> title<span class="op">=</span><span class="st">"Click to toggle table expansion"</span> icon<span class="op">=</span><span class="st">"false"</span><span class="op">}</span></span>
<span id="cb176-2637"><a href="#cb176-2637" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Start <span class="op">|</span> End <span class="op">|</span> <span class="bu">Duration</span> <span class="op">|</span> Description                  <span class="op">|</span></span>
<span id="cb176-2638"><a href="#cb176-2638" aria-hidden="true" tabindex="-1"></a><span class="op">|-------|-----|----------|------------------------------|</span></span>
<span id="cb176-2639"><a href="#cb176-2639" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="fl">.2</span>    <span class="op">|</span> <span class="fl">.3</span>  <span class="op">|</span> <span class="fl">.1</span>       <span class="op">|</span> Wake up and prepare <span class="cf">for</span> work <span class="op">|</span></span>
<span id="cb176-2640"><a href="#cb176-2640" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="fl">.3</span>    <span class="op">|</span> <span class="fl">.7</span>  <span class="op">|</span> <span class="fl">.4</span>       <span class="op">|</span> Work                         <span class="op">|</span></span>
<span id="cb176-2641"><a href="#cb176-2641" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="fl">.7</span>    <span class="op">|</span> <span class="fl">.8</span>  <span class="op">|</span> <span class="fl">.1</span>       <span class="op">|</span> End work and prepare <span class="cf">for</span> bed <span class="op">|</span></span>
<span id="cb176-2642"><a href="#cb176-2642" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="fl">.8</span>    <span class="op">|</span> <span class="fl">.2</span>  <span class="op">|</span> <span class="fl">.4</span>       <span class="op">|</span> Go to bed and sleep          <span class="op">|</span></span>
<span id="cb176-2643"><a href="#cb176-2643" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2644"><a href="#cb176-2644" aria-hidden="true" tabindex="-1"></a><span class="op">:</span> The workday schedule <span class="op">{</span>#tbl<span class="op">-</span>daily<span class="op">}</span></span>
<span id="cb176-2645"><a href="#cb176-2645" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span></span>
<span id="cb176-2646"><a href="#cb176-2646" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2647"><a href="#cb176-2647" aria-hidden="true" tabindex="-1"></a>## Subyear units <span class="op">{</span>#sec<span class="op">-</span>subyear<span class="op">}</span></span>
<span id="cb176-2648"><a href="#cb176-2648" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2649"><a href="#cb176-2649" aria-hidden="true" tabindex="-1"></a>In addition to serving as a part of the Gregorian date coordinate system described above<span class="op">,</span> months can also indicate the current season or quarter<span class="op">.</span> `Deks` can also serve as indicator of subyear units like seasons<span class="op">.</span></span>
<span id="cb176-2650"><a href="#cb176-2650" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2651"><a href="#cb176-2651" aria-hidden="true" tabindex="-1"></a>### Seasons <span class="op">{</span>#sec<span class="op">-</span>season<span class="op">}</span></span>
<span id="cb176-2652"><a href="#cb176-2652" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2653"><a href="#cb176-2653" aria-hidden="true" tabindex="-1"></a>We can use <span class="at">@tbl</span><span class="op">-</span>greg2doty to convert any Gregorian calendar date to a positive `doty` number<span class="op">.</span> <span class="fu">This</span> is especially useful <span class="cf">for</span> variable dates that have to be converted every year<span class="op">.</span> <span class="fu">For</span> example<span class="op">,</span> the dates of the solstices<span class="op">,</span> the longest and shortest days of the year<span class="op">,</span> vary slightly every year<span class="op">.</span> <span class="fu">Instead</span> of calculating the exact `doty` number of the solstices ourselves we could translate from existing Gregorian calendar dates<span class="op">.</span> <span class="fu">Solstices</span> and <span class="fu">equinoxes</span> <span class="op">(</span>the points in between the solstices<span class="op">)</span> are the basis of the some holidays<span class="op">,</span> such as <span class="op">[</span>Nowruz<span class="op">](</span>https<span class="op">:</span><span class="co">//en.wikipedia.org/wiki/Nowruz).</span></span>
<span id="cb176-2654"><a href="#cb176-2654" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2655"><a href="#cb176-2655" aria-hidden="true" tabindex="-1"></a>The dates of the solstices and the equinoxes can be used as definitions of the seasons<span class="op">.</span> <span class="fu">Each</span> season has its opposite<span class="op">.</span> <span class="fu">The</span> opposite of <span class="bu">Spring</span> is Fall and the opposite of Summer is Winter<span class="op">.</span> <span class="fu">These</span> opposites are always occurring simultaneously<span class="op">,</span> one opposing season in the Northern hemisphere and the other in the Southern hemisphere<span class="op">.</span> <span class="at">@tbl</span><span class="op">-</span>soleq lists the opposing seasons in the North and South <span class="fu">columns</span> <span class="op">(</span>which correspond to the Northern and Southern hemispheres<span class="op">)</span> and the approximate dates of the solstices and the equinoxes that mark the start of each season<span class="op">.</span></span>
<span id="cb176-2656"><a href="#cb176-2656" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2657"><a href="#cb176-2657" aria-hidden="true" tabindex="-1"></a>#### <span class="at">@tbl</span><span class="op">-</span>soleq</span>
<span id="cb176-2658"><a href="#cb176-2658" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2659"><a href="#cb176-2659" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span> <span class="op">{.</span><span class="fu">callout</span><span class="op">-</span>note collapse<span class="op">=</span><span class="st">"true"</span> title<span class="op">=</span><span class="st">"Click to toggle table expansion"</span> icon<span class="op">=</span><span class="st">"false"</span><span class="op">}</span></span>
<span id="cb176-2660"><a href="#cb176-2660" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Code <span class="op">|</span> North  <span class="op">|</span> South  <span class="op">|</span> `doty` <span class="op">|</span> `dotm` <span class="op">|</span> <span class="bu">Date</span>         <span class="op">|</span> <span class="bu">Event</span>              <span class="op">|</span></span>
<span id="cb176-2661"><a href="#cb176-2661" aria-hidden="true" tabindex="-1"></a><span class="op">|------|--------|--------|--------|--------|--------------|--------------------|</span></span>
<span id="cb176-2662"><a href="#cb176-2662" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> S0   <span class="op">|</span> <span class="bu">Spring</span> <span class="op">|</span> Fall   <span class="op">|</span> <span class="dv">20</span>     <span class="op">|</span> <span class="dv">0</span><span class="op">+</span><span class="dv">20</span>   <span class="op">|</span> March <span class="dv">21</span>     <span class="op">|</span> Northward Equinox  <span class="op">|</span></span>
<span id="cb176-2663"><a href="#cb176-2663" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> S1   <span class="op">|</span> Summer <span class="op">|</span> Winter <span class="op">|</span> <span class="dv">110</span>    <span class="op">|</span> <span class="dv">3</span><span class="op">+</span><span class="dv">18</span>   <span class="op">|</span> June <span class="dv">19</span>      <span class="op">|</span> Northward Solstice <span class="op">|</span></span>
<span id="cb176-2664"><a href="#cb176-2664" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> S2   <span class="op">|</span> Fall   <span class="op">|</span> <span class="bu">Spring</span> <span class="op">|</span> <span class="dv">205</span>    <span class="op">|</span> <span class="dv">6</span><span class="op">+</span><span class="dv">21</span>   <span class="op">|</span> September <span class="dv">22</span> <span class="op">|</span> Southward Equinox  <span class="op">|</span></span>
<span id="cb176-2665"><a href="#cb176-2665" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> S3   <span class="op">|</span> Winter <span class="op">|</span> Summer <span class="op">|</span> <span class="dv">295</span>    <span class="op">|</span> <span class="dv">9</span><span class="op">+</span><span class="dv">20</span>   <span class="op">|</span> December <span class="dv">21</span>  <span class="op">|</span> Southward Solstice <span class="op">|</span></span>
<span id="cb176-2666"><a href="#cb176-2666" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2667"><a href="#cb176-2667" aria-hidden="true" tabindex="-1"></a><span class="op">:</span> Solstice and equinox Gregorian calendar and `doty` dates <span class="op">{</span>#tbl<span class="op">-</span>soleq<span class="op">}</span></span>
<span id="cb176-2668"><a href="#cb176-2668" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span></span>
<span id="cb176-2669"><a href="#cb176-2669" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2670"><a href="#cb176-2670" aria-hidden="true" tabindex="-1"></a>Using the information in <span class="at">@tbl</span><span class="op">-</span>soleq<span class="op">,</span> we can group the `deks` and `pents` in a year according to the seasons in which they occur<span class="op">.</span> <span class="fu">We</span> identify `deks` using the first <span class="dv">2</span> digits of the <span class="dv">3</span><span class="op">-</span>digit day number of any day in that `dek`<span class="op">.</span> <span class="fu">The</span> `pent` number is twice the `dek` number plus one <span class="cf">if</span> the `dotd` is greater than <span class="dv">4</span> <span class="op">(</span>$dek \cdot <span class="dv">2</span> <span class="op">+</span> dotd <span class="op">&gt;</span> <span class="dv">4</span>$<span class="op">).</span> <span class="fu">For</span> example<span class="op">,</span> `Day` `<span class="dv">19</span>` is the last day in `Dek` `<span class="dv">1</span>` and `Pent` `<span class="dv">3</span>`<span class="op">,</span> <span class="cf">while</span> `Day` `<span class="dv">111</span>` is the second day in `Dek` `<span class="dv">11</span>` and `Pent` `<span class="dv">22</span>`<span class="op">.</span></span>
<span id="cb176-2671"><a href="#cb176-2671" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2672"><a href="#cb176-2672" aria-hidden="true" tabindex="-1"></a><span class="fu">We</span> can round up the start of the first season and round down the start of the second season to obtain the division of `pents` by season as summarized in <span class="at">@tbl</span><span class="op">-</span>season It is important to note that the last season starts in `Pent` `<span class="dv">59</span>` of one year and ends with `Pent` `<span class="dv">3</span>` of the subsequent year<span class="op">.</span> <span class="fu">In</span> common years<span class="op">,</span> each season in <span class="at">@tbl</span><span class="op">-</span>season has <span class="dv">18</span> `pents` <span class="op">(</span><span class="dv">90</span> days<span class="op">),</span> except <span class="cf">for</span> the season in the second row<span class="op">,</span> which has <span class="dv">19</span> `pents` <span class="op">(</span><span class="dv">95</span> days<span class="op">).</span> <span class="fu">In</span> leap years<span class="op">,</span> the season in the last row of <span class="at">@tbl</span><span class="op">-</span>season has <span class="fl">18.2</span> <span class="fu">pents</span> <span class="op">(</span><span class="dv">91</span> days<span class="op">).</span></span>
<span id="cb176-2673"><a href="#cb176-2673" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2674"><a href="#cb176-2674" aria-hidden="true" tabindex="-1"></a>#### <span class="at">@tbl</span><span class="op">-</span>season</span>
<span id="cb176-2675"><a href="#cb176-2675" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2676"><a href="#cb176-2676" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span> <span class="op">{.</span><span class="fu">callout</span><span class="op">-</span>note collapse<span class="op">=</span><span class="st">"true"</span> title<span class="op">=</span><span class="st">"Click to toggle table expansion"</span> icon<span class="op">=</span><span class="st">"false"</span><span class="op">}</span></span>
<span id="cb176-2677"><a href="#cb176-2677" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Code <span class="op">|</span> North  <span class="op">|</span> South  <span class="op">|</span> First <span class="op">|</span> Last <span class="op">|</span> <span class="bu">Duration</span> <span class="op">|</span></span>
<span id="cb176-2678"><a href="#cb176-2678" aria-hidden="true" tabindex="-1"></a><span class="op">|------|--------|--------|-------|------|----------|</span></span>
<span id="cb176-2679"><a href="#cb176-2679" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> S0   <span class="op">|</span> <span class="bu">Spring</span> <span class="op">|</span> Fall   <span class="op">|</span> <span class="dv">4</span>     <span class="op">|</span> <span class="dv">21</span>   <span class="op">|</span> <span class="dv">18</span>       <span class="op">|</span></span>
<span id="cb176-2680"><a href="#cb176-2680" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> S1   <span class="op">|</span> Summer <span class="op">|</span> Winter <span class="op">|</span> <span class="dv">22</span>    <span class="op">|</span> <span class="dv">40</span>   <span class="op">|</span> <span class="dv">19</span>       <span class="op">|</span></span>
<span id="cb176-2681"><a href="#cb176-2681" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> S2   <span class="op">|</span> Fall   <span class="op">|</span> <span class="bu">Spring</span> <span class="op">|</span> <span class="dv">41</span>    <span class="op">|</span> <span class="dv">58</span>   <span class="op">|</span> <span class="dv">18</span>       <span class="op">|</span></span>
<span id="cb176-2682"><a href="#cb176-2682" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> S3   <span class="op">|</span> Winter <span class="op">|</span> Summer <span class="op">|</span> <span class="dv">59</span>    <span class="op">|</span> <span class="dv">3</span>    <span class="op">|</span> <span class="dv">18</span>       <span class="op">|</span></span>
<span id="cb176-2683"><a href="#cb176-2683" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2684"><a href="#cb176-2684" aria-hidden="true" tabindex="-1"></a><span class="op">:</span> The `pents` that begin and end each season <span class="op">{</span>#tbl<span class="op">-</span>season<span class="op">}</span></span>
<span id="cb176-2685"><a href="#cb176-2685" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span></span>
<span id="cb176-2686"><a href="#cb176-2686" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2687"><a href="#cb176-2687" aria-hidden="true" tabindex="-1"></a>### `Qops`<span class="op">,</span> `Delts`<span class="op">,</span> `Eps` and `Waus` <span class="op">{</span>#sec<span class="op">-</span>qdew<span class="op">}</span></span>
<span id="cb176-2688"><a href="#cb176-2688" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2689"><a href="#cb176-2689" aria-hidden="true" tabindex="-1"></a>#### `Qops` <span class="op">{</span>#sec<span class="op">-</span>q<span class="op">}</span></span>
<span id="cb176-2690"><a href="#cb176-2690" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2691"><a href="#cb176-2691" aria-hidden="true" tabindex="-1"></a>In contrast to the variable length of seasons<span class="op">,</span> other `Decalendar` units are constant length<span class="op">.</span> <span class="fu">Of</span> these constant length units<span class="op">,</span> `qops` <span class="op">(</span>`qoppas`<span class="op">,</span> `œü`<span class="op">)</span> are most like seasons<span class="op">.</span> `Qops` divide the year into four parts<span class="op">,</span> but unlike seasons<span class="op">,</span> `qops` <span class="cf">do</span> not include `Pent` `<span class="dv">72</span>`<span class="op">,</span> the last `pent` of the year<span class="op">.</span> `Pent` `<span class="dv">72</span>` is not included in the last `qop` so that each `qop` is <span class="dv">9</span> `deks` and <span class="dv">90</span> days <span class="dt">long</span><span class="op">.</span> <span class="fu">The</span> omission of `Dek` `<span class="dv">36</span>` also maintains the pattern of alternating even and odd numbers in each row<span class="op">.</span> <span class="fu">This</span> omission leaves out only <span class="dv">5</span> or <span class="dv">6</span> days per year<span class="op">,</span> because `Dek` `<span class="dv">36</span>` overlaps with `Dek` `<span class="dv">0</span>`<span class="op">.</span> <span class="at">@tbl</span><span class="op">-</span>q shows the division of `deks` by `qop`<span class="op">.</span></span>
<span id="cb176-2692"><a href="#cb176-2692" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2693"><a href="#cb176-2693" aria-hidden="true" tabindex="-1"></a>#### <span class="at">@tbl</span><span class="op">-</span>q</span>
<span id="cb176-2694"><a href="#cb176-2694" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2695"><a href="#cb176-2695" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span> <span class="op">{.</span><span class="fu">callout</span><span class="op">-</span>note collapse<span class="op">=</span><span class="st">"true"</span> title<span class="op">=</span><span class="st">"Click to toggle table expansion"</span> icon<span class="op">=</span><span class="st">"false"</span><span class="op">}</span></span>
<span id="cb176-2696"><a href="#cb176-2696" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Code <span class="op">|</span> First <span class="op">|</span> Last <span class="op">|</span></span>
<span id="cb176-2697"><a href="#cb176-2697" aria-hidden="true" tabindex="-1"></a><span class="op">|------|-------|------|</span></span>
<span id="cb176-2698"><a href="#cb176-2698" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Q0   <span class="op">|</span> <span class="dv">0</span>     <span class="op">|</span> <span class="dv">8</span>    <span class="op">|</span></span>
<span id="cb176-2699"><a href="#cb176-2699" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Q1   <span class="op">|</span> <span class="dv">9</span>     <span class="op">|</span> <span class="dv">17</span>   <span class="op">|</span></span>
<span id="cb176-2700"><a href="#cb176-2700" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Q2   <span class="op">|</span> <span class="dv">18</span>    <span class="op">|</span> <span class="dv">26</span>   <span class="op">|</span></span>
<span id="cb176-2701"><a href="#cb176-2701" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Q3   <span class="op">|</span> <span class="dv">27</span>    <span class="op">|</span> <span class="dv">35</span>   <span class="op">|</span></span>
<span id="cb176-2702"><a href="#cb176-2702" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2703"><a href="#cb176-2703" aria-hidden="true" tabindex="-1"></a><span class="op">:</span> The `deks` that begin and end each `qop` <span class="op">{</span>#tbl<span class="op">-</span>q<span class="op">}</span></span>
<span id="cb176-2704"><a href="#cb176-2704" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span></span>
<span id="cb176-2705"><a href="#cb176-2705" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2706"><a href="#cb176-2706" aria-hidden="true" tabindex="-1"></a>#### `Delts` <span class="op">{</span>#sec<span class="op">-</span>d<span class="op">}</span></span>
<span id="cb176-2707"><a href="#cb176-2707" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2708"><a href="#cb176-2708" aria-hidden="true" tabindex="-1"></a>In addition to `qops` shown above<span class="op">,</span> `Decalendar` describes <span class="dv">3</span> other similar units called `delts` <span class="op">(</span>`deltas`<span class="op">,</span> `Œ¥`<span class="op">),</span> `eps` <span class="op">(</span>`epsilons`<span class="op">,</span> `Œµ`<span class="op">),</span> and `waus` <span class="op">(</span>`œõ`<span class="op">).</span> <span class="fu">These</span> units <span class="cf">do</span> not leave out as many days in each year<span class="op">,</span> because they split the year by day<span class="op">,</span> rather than by `dek`<span class="op">.</span> `Delts`<span class="op">,</span> `eps`<span class="op">,</span> and `wau` split the year into <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> and <span class="dv">6</span> parts<span class="op">,</span> respectively<span class="op">.</span> `Delts` are <span class="dv">91</span> days <span class="dt">long</span> and leave out one day at the end of common years and two days at the end of leap years<span class="op">.</span> <span class="fu">Just</span> as above<span class="op">,</span> leaving out a small number of days at the end of the year preserves a pattern that can be useful <span class="cf">for</span> remembering the days on which `delts` start and end<span class="op">.</span> <span class="at">@tbl</span><span class="op">-</span>d list the numbers of the days that begin and end each `delt`<span class="op">.</span> <span class="fu">In</span> <span class="at">@tbl</span><span class="op">-</span>q<span class="op">,</span> not only <span class="cf">do</span> rows alternate between even and odd numbers<span class="op">,</span> but the `delt` number is the last digit of both the start and the end day of the `delt`<span class="op">.</span></span>
<span id="cb176-2709"><a href="#cb176-2709" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2710"><a href="#cb176-2710" aria-hidden="true" tabindex="-1"></a>#### <span class="at">@tbl</span><span class="op">-</span>d</span>
<span id="cb176-2711"><a href="#cb176-2711" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2712"><a href="#cb176-2712" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span> <span class="op">{.</span><span class="fu">callout</span><span class="op">-</span>note collapse<span class="op">=</span><span class="st">"true"</span> title<span class="op">=</span><span class="st">"Click to toggle table expansion"</span> icon<span class="op">=</span><span class="st">"false"</span><span class="op">}</span></span>
<span id="cb176-2713"><a href="#cb176-2713" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Code <span class="op">|</span> First <span class="op">|</span> Last <span class="op">|</span></span>
<span id="cb176-2714"><a href="#cb176-2714" aria-hidden="true" tabindex="-1"></a><span class="op">|------|-------|------|</span></span>
<span id="cb176-2715"><a href="#cb176-2715" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> D0   <span class="op">|</span> <span class="dv">0</span>     <span class="op">|</span> <span class="dv">90</span>   <span class="op">|</span></span>
<span id="cb176-2716"><a href="#cb176-2716" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> D1   <span class="op">|</span> <span class="dv">91</span>    <span class="op">|</span> <span class="dv">181</span>  <span class="op">|</span></span>
<span id="cb176-2717"><a href="#cb176-2717" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> D2   <span class="op">|</span> <span class="dv">182</span>   <span class="op">|</span> <span class="dv">272</span>  <span class="op">|</span></span>
<span id="cb176-2718"><a href="#cb176-2718" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> D3   <span class="op">|</span> <span class="dv">273</span>   <span class="op">|</span> <span class="dv">363</span>  <span class="op">|</span></span>
<span id="cb176-2719"><a href="#cb176-2719" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2720"><a href="#cb176-2720" aria-hidden="true" tabindex="-1"></a><span class="op">:</span> The days that begin and end each `delt` <span class="op">{</span>#tbl<span class="op">-</span>d<span class="op">}</span></span>
<span id="cb176-2721"><a href="#cb176-2721" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span></span>
<span id="cb176-2722"><a href="#cb176-2722" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2723"><a href="#cb176-2723" aria-hidden="true" tabindex="-1"></a>#### `Eps` <span class="op">{</span>#sec<span class="op">-</span>e<span class="op">}</span></span>
<span id="cb176-2724"><a href="#cb176-2724" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2725"><a href="#cb176-2725" aria-hidden="true" tabindex="-1"></a>Unlike `delts`<span class="op">,</span> `eps` are <span class="dv">73</span> days <span class="dt">long</span> and <span class="cf">do</span> not leave out any days from common years<span class="op">.</span> `Qops`<span class="op">,</span> `delts`<span class="op">,</span> and `eps` all leave out leap days in leap years<span class="op">.</span> <span class="at">@tbl</span><span class="op">-</span>e list the numbers of the days that begin and end each `ep`<span class="op">.</span></span>
<span id="cb176-2726"><a href="#cb176-2726" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2727"><a href="#cb176-2727" aria-hidden="true" tabindex="-1"></a>#### <span class="at">@tbl</span><span class="op">-</span>e</span>
<span id="cb176-2728"><a href="#cb176-2728" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2729"><a href="#cb176-2729" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span> <span class="op">{.</span><span class="fu">callout</span><span class="op">-</span>note collapse<span class="op">=</span><span class="st">"true"</span> title<span class="op">=</span><span class="st">"Click to toggle table expansion"</span> icon<span class="op">=</span><span class="st">"false"</span><span class="op">}</span></span>
<span id="cb176-2730"><a href="#cb176-2730" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Code <span class="op">|</span> First <span class="op">|</span> Last <span class="op">|</span></span>
<span id="cb176-2731"><a href="#cb176-2731" aria-hidden="true" tabindex="-1"></a><span class="op">|------|-------|------|</span></span>
<span id="cb176-2732"><a href="#cb176-2732" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> E0   <span class="op">|</span> <span class="dv">0</span>     <span class="op">|</span> <span class="dv">72</span>   <span class="op">|</span></span>
<span id="cb176-2733"><a href="#cb176-2733" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> E1   <span class="op">|</span> <span class="dv">73</span>    <span class="op">|</span> <span class="dv">145</span>  <span class="op">|</span></span>
<span id="cb176-2734"><a href="#cb176-2734" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> E2   <span class="op">|</span> <span class="dv">146</span>   <span class="op">|</span> <span class="dv">218</span>  <span class="op">|</span></span>
<span id="cb176-2735"><a href="#cb176-2735" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> E3   <span class="op">|</span> <span class="dv">219</span>   <span class="op">|</span> <span class="dv">291</span>  <span class="op">|</span></span>
<span id="cb176-2736"><a href="#cb176-2736" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> E4   <span class="op">|</span> <span class="dv">292</span>   <span class="op">|</span> <span class="dv">364</span>  <span class="op">|</span></span>
<span id="cb176-2737"><a href="#cb176-2737" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2738"><a href="#cb176-2738" aria-hidden="true" tabindex="-1"></a><span class="op">:</span> The days that begin and end each `ep` <span class="op">{</span>#tbl<span class="op">-</span>e<span class="op">}</span></span>
<span id="cb176-2739"><a href="#cb176-2739" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span></span>
<span id="cb176-2740"><a href="#cb176-2740" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2741"><a href="#cb176-2741" aria-hidden="true" tabindex="-1"></a>#### `Waus` <span class="op">{</span>#sec<span class="op">-</span>w<span class="op">}</span></span>
<span id="cb176-2742"><a href="#cb176-2742" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2743"><a href="#cb176-2743" aria-hidden="true" tabindex="-1"></a>The only unit that can include the leap year is a `wau` <span class="op">(</span>`œõ`<span class="op">),</span> which is <span class="dv">61</span> days <span class="dt">long</span> and follows a similar pattern as a `delt`<span class="op">,</span> except the last `wau` in common years is <span class="dv">1</span> day <span class="dt">short</span> than all the others<span class="op">.</span> <span class="at">@tbl</span><span class="op">-</span>w list the numbers of the days that begin and end each `wau`<span class="op">.</span> <span class="fu">As</span> with `delts`<span class="op">,</span> the `wau` number is the last digit of the numbers of its first and last day<span class="op">.</span></span>
<span id="cb176-2744"><a href="#cb176-2744" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2745"><a href="#cb176-2745" aria-hidden="true" tabindex="-1"></a>#### <span class="at">@tbl</span><span class="op">-</span>w</span>
<span id="cb176-2746"><a href="#cb176-2746" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2747"><a href="#cb176-2747" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span> <span class="op">{.</span><span class="fu">callout</span><span class="op">-</span>note collapse<span class="op">=</span><span class="st">"true"</span> title<span class="op">=</span><span class="st">"Click to toggle table expansion"</span> icon<span class="op">=</span><span class="st">"false"</span><span class="op">}</span></span>
<span id="cb176-2748"><a href="#cb176-2748" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Code <span class="op">|</span> First <span class="op">|</span> Last <span class="op">|</span></span>
<span id="cb176-2749"><a href="#cb176-2749" aria-hidden="true" tabindex="-1"></a><span class="op">|------|-------|------|</span></span>
<span id="cb176-2750"><a href="#cb176-2750" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> W0   <span class="op">|</span> <span class="dv">0</span>     <span class="op">|</span> <span class="dv">60</span>   <span class="op">|</span></span>
<span id="cb176-2751"><a href="#cb176-2751" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> W1   <span class="op">|</span> <span class="dv">61</span>    <span class="op">|</span> <span class="dv">121</span>  <span class="op">|</span></span>
<span id="cb176-2752"><a href="#cb176-2752" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> W2   <span class="op">|</span> <span class="dv">122</span>   <span class="op">|</span> <span class="dv">182</span>  <span class="op">|</span></span>
<span id="cb176-2753"><a href="#cb176-2753" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> W3   <span class="op">|</span> <span class="dv">183</span>   <span class="op">|</span> <span class="dv">243</span>  <span class="op">|</span></span>
<span id="cb176-2754"><a href="#cb176-2754" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> W4   <span class="op">|</span> <span class="dv">244</span>   <span class="op">|</span> <span class="dv">304</span>  <span class="op">|</span></span>
<span id="cb176-2755"><a href="#cb176-2755" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> W5   <span class="op">|</span> <span class="dv">305</span>   <span class="op">|</span> <span class="dv">365</span>  <span class="op">|</span></span>
<span id="cb176-2756"><a href="#cb176-2756" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2757"><a href="#cb176-2757" aria-hidden="true" tabindex="-1"></a><span class="op">:</span> The days that begin and end each `wau` <span class="op">{</span>#tbl<span class="op">-</span>w<span class="op">}</span></span>
<span id="cb176-2758"><a href="#cb176-2758" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span></span>
<span id="cb176-2759"><a href="#cb176-2759" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2760"><a href="#cb176-2760" aria-hidden="true" tabindex="-1"></a>All of the subyear unit codes can be preceded by a year and followed by a day number<span class="op">.</span> <span class="fu">The</span> midpoint of common years is noon on the first day of `Delt` `<span class="dv">2</span>`<span class="op">,</span> `D2<span class="op">+</span><span class="fl">00.5</span>` or `<span class="op">+</span><span class="fl">182.5</span>`<span class="op">,</span> and the midpoint of leap years is midnight of the first day of `Wau` `<span class="dv">3</span>`<span class="op">,</span> `W3<span class="op">+</span><span class="fl">00.0</span>` or `<span class="op">+</span><span class="fl">183.0</span>`<span class="op">.</span> <span class="fu">The</span> first day of <span class="bu">Spring</span> in northern hemisphere and Fall in the southern hemisphere in the year <span class="dv">2000</span> is `<span class="er">2000</span>S0<span class="op">+</span><span class="bn">00</span>` or `<span class="dv">2000</span><span class="op">+</span><span class="bn">020</span>`<span class="op">,</span> <span class="cf">while</span> the last day of <span class="kw">this</span> season is `<span class="er">2000</span>S0<span class="op">+</span><span class="dv">89</span>` or `<span class="dv">2000</span><span class="op">+</span><span class="dv">109</span>`<span class="op">.</span> <span class="fu">The</span> subyear units are essentially date intervals<span class="op">,</span> series of contiguous dates<span class="op">.</span> `Decalendar` includes very powerful approaches to describing series of dates<span class="op">,</span> times<span class="op">,</span> and `stamps`<span class="op">.</span></span>
<span id="cb176-2761"><a href="#cb176-2761" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2762"><a href="#cb176-2762" aria-hidden="true" tabindex="-1"></a># Series <span class="op">{</span>#sec<span class="op">-</span>series<span class="op">}</span></span>
<span id="cb176-2763"><a href="#cb176-2763" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2764"><a href="#cb176-2764" aria-hidden="true" tabindex="-1"></a>A single `doty` number<span class="op">,</span> such as `Day` `<span class="dv">0</span>`<span class="op">,</span> implies a duration on <span class="dv">1</span> day<span class="op">.</span> <span class="fu">We</span> can indicate a duration of multiple days by listing consecutive days in a `series`<span class="op">.</span> <span class="fu">A</span> `series` consists of dates<span class="op">,</span> times<span class="op">,</span> or `stamps` separated by <span class="fu">commas</span> <span class="op">(</span>`<span class="op">,</span>`<span class="op">).</span> <span class="fu">The</span> items in a `series` should all be of the same type<span class="op">.</span> <span class="fu">In</span> other words<span class="op">,</span> `series` should be homogeneous and not mix dates<span class="op">,</span> times<span class="op">,</span> and `stamps`<span class="op">.</span> <span class="fu">The</span> first <span class="dv">3</span> days of the year in the form of a `series` would be written `<span class="dv">0</span><span class="op">,</span><span class="dv">1</span><span class="op">,</span><span class="dv">2</span>`<span class="op">,</span> <span class="cf">while</span> the last three days would be `<span class="op">-</span><span class="dv">3</span><span class="op">,-</span><span class="dv">2</span><span class="op">,-</span><span class="dv">1</span>`<span class="op">.</span> <span class="fu">The</span> first half a day<span class="op">,</span> from midnight to noon<span class="op">,</span> could be written `<span class="dv">0</span><span class="op">,</span><span class="fl">.1</span><span class="op">,</span><span class="fl">.2</span><span class="op">,</span><span class="fl">.3</span><span class="op">,</span><span class="fl">.4</span>`<span class="op">.</span></span>
<span id="cb176-2765"><a href="#cb176-2765" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2766"><a href="#cb176-2766" aria-hidden="true" tabindex="-1"></a>## Slices <span class="op">{</span>#sec<span class="op">-</span>slice<span class="op">}</span></span>
<span id="cb176-2767"><a href="#cb176-2767" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2768"><a href="#cb176-2768" aria-hidden="true" tabindex="-1"></a>Instead of listing every single day in a `series`<span class="op">,</span> we can <span class="st">"slice"</span> from `Day` `<span class="dv">0</span>` up to but not including `Day` `<span class="dv">3</span>` by writing `<span class="op">:</span><span class="dv">3</span>`<span class="op">.</span> `Simple` `slices` consist of a `start` and a `stop` separated by a <span class="fu">colon</span> <span class="op">(</span>`start<span class="op">:</span>stop`<span class="op">).</span> <span class="fu">When</span> the `start` is omitted<span class="op">,</span> `slices` begin at the first value<span class="op">,</span> which in the context of a year is `Day` `<span class="dv">0</span>` and in the context of a day is midnight<span class="op">.</span> <span class="fu">Therefore</span><span class="op">,</span> writing `<span class="op">:</span><span class="dv">3</span>` is the same as writing `<span class="dv">0</span><span class="op">:</span><span class="dv">3</span>`<span class="op">,</span> both represent the first <span class="dv">3</span> days of the year<span class="op">:</span> `<span class="dv">0</span><span class="op">,</span><span class="dv">1</span><span class="op">,</span><span class="dv">2</span>`<span class="op">.</span> <span class="fu">Using</span> <span class="kw">this</span> approach<span class="op">,</span> we can shorten the series `<span class="dv">0</span><span class="op">,</span><span class="fl">.1</span><span class="op">,</span><span class="fl">.2</span><span class="op">,</span><span class="fl">.3</span><span class="op">,</span><span class="fl">.4</span>` to `<span class="op">:</span><span class="fl">.5</span>`<span class="op">.</span> <span class="fu">If</span> we omit the `stop`<span class="op">,</span> instead of the `start`<span class="op">,</span> we would <span class="st">"slice"</span> up to and including the last value<span class="op">.</span></span>
<span id="cb176-2769"><a href="#cb176-2769" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2770"><a href="#cb176-2770" aria-hidden="true" tabindex="-1"></a><span class="fu">In</span> the context of `doty` dates<span class="op">,</span> omitting the `stop` value obtains all of the days in the year after the `start`<span class="op">,</span> because the <span class="kw">default</span> `stop` is the number of days in the <span class="fu">year</span> <span class="op">(</span>`n`<span class="op">).</span> <span class="fu">For</span> example<span class="op">,</span> the `slice` `<span class="dv">3</span><span class="op">:</span>` has a `start` of `Day` `<span class="dv">3</span>` and a `stop` of `n`<span class="op">,</span> and thus represents every day in the year except the first <span class="fl">3.</span> The number of items we obtain from a `slice` is called a `span`<span class="op">.</span> <span class="fu">To</span> calculate the `span`<span class="op">,</span> we subtract the `start` from the `stop` <span class="op">(</span>$stop<span class="op">-</span>start$<span class="op">).</span> <span class="fu">In</span> a common year<span class="op">,</span> the `span` of `<span class="bn">003</span><span class="op">:</span>` is $n<span class="op">-</span><span class="dv">3</span><span class="op">=</span><span class="dv">362</span>$<span class="op">,</span> <span class="cf">while</span> in a leap year it would be $n<span class="op">-</span><span class="dv">3</span><span class="op">=</span><span class="dv">363</span>$<span class="op">.</span> <span class="fu">If</span> both the `start` and the `stop` are omitted<span class="op">,</span> every day is <span class="fu">included</span> <span class="op">(</span>$span<span class="op">=</span>n<span class="op">-</span><span class="dv">0</span>$<span class="op">).</span> <span class="at">@tbl</span><span class="op">-</span><span class="dv">4</span>slice lists the seasons<span class="op">,</span> `qops`<span class="op">,</span> and `delts` in the form of `slices`<span class="op">.</span> <span class="fu">The</span> superscript plus <span class="fu">sign</span> <span class="op">(</span>‚Å∫<span class="op">)</span> in <span class="at">@tbl</span><span class="op">-</span><span class="dv">4</span>slice indicates a number that has to be incremented in leap years<span class="op">.</span></span>
<span id="cb176-2771"><a href="#cb176-2771" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2772"><a href="#cb176-2772" aria-hidden="true" tabindex="-1"></a>#### <span class="at">@tbl</span><span class="op">-</span><span class="dv">4</span>slice</span>
<span id="cb176-2773"><a href="#cb176-2773" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2774"><a href="#cb176-2774" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span> <span class="op">{.</span><span class="fu">callout</span><span class="op">-</span>note collapse<span class="op">=</span><span class="st">"true"</span> title<span class="op">=</span><span class="st">"Click to toggle table expansion"</span> icon<span class="op">=</span><span class="st">"false"</span><span class="op">}</span></span>
<span id="cb176-2775"><a href="#cb176-2775" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Index <span class="op">|</span> Season   <span class="op">|</span> Qop     <span class="op">|</span> Delt    <span class="op">|</span></span>
<span id="cb176-2776"><a href="#cb176-2776" aria-hidden="true" tabindex="-1"></a><span class="op">|-------|----------|---------|---------|</span></span>
<span id="cb176-2777"><a href="#cb176-2777" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="dv">0</span>     <span class="op">|</span> <span class="dv">20</span><span class="op">:</span><span class="dv">110</span>   <span class="op">|</span> <span class="op">:</span><span class="dv">90</span>     <span class="op">|</span> <span class="op">:</span><span class="dv">91</span>     <span class="op">|</span></span>
<span id="cb176-2778"><a href="#cb176-2778" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="dv">1</span>     <span class="op">|</span> <span class="dv">110</span><span class="op">:</span><span class="dv">205</span>  <span class="op">|</span> <span class="dv">90</span><span class="op">:</span><span class="dv">180</span>  <span class="op">|</span> <span class="dv">91</span><span class="op">:</span><span class="dv">182</span>  <span class="op">|</span></span>
<span id="cb176-2779"><a href="#cb176-2779" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="dv">2</span>     <span class="op">|</span> <span class="dv">205</span><span class="op">:</span><span class="dv">354</span>  <span class="op">|</span> <span class="dv">180</span><span class="op">:</span><span class="dv">270</span> <span class="op">|</span> <span class="dv">182</span><span class="op">:</span><span class="dv">273</span> <span class="op">|</span></span>
<span id="cb176-2780"><a href="#cb176-2780" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="dv">3</span>     <span class="op">|</span> <span class="dv">295</span><span class="op">:</span><span class="dv">385</span>‚Å∫ <span class="op">|</span> <span class="dv">270</span><span class="op">:</span><span class="dv">360</span> <span class="op">|</span> <span class="dv">273</span><span class="op">:</span><span class="dv">364</span> <span class="op">|</span></span>
<span id="cb176-2781"><a href="#cb176-2781" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2782"><a href="#cb176-2782" aria-hidden="true" tabindex="-1"></a><span class="op">:</span> The slices that represent the <span class="dv">4</span><span class="op">-</span>part subyear units <span class="op">{</span>#tbl<span class="op">-</span><span class="dv">4</span>slice<span class="op">}</span></span>
<span id="cb176-2783"><a href="#cb176-2783" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span></span>
<span id="cb176-2784"><a href="#cb176-2784" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2785"><a href="#cb176-2785" aria-hidden="true" tabindex="-1"></a>## Steps <span class="op">{</span>#sec<span class="op">-</span>step<span class="op">}</span></span>
<span id="cb176-2786"><a href="#cb176-2786" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2787"><a href="#cb176-2787" aria-hidden="true" tabindex="-1"></a>The `simple` `slices` <span class="op">(</span>`start<span class="op">:</span>stop`<span class="op">)</span> described above are a type of time `segment`<span class="op">,</span> an unbroken time interval<span class="op">.</span> <span class="fu">To</span> <span class="cf">break</span> up a `simple` `slice` into a non<span class="op">-</span>consecutive `series`<span class="op">,</span> we can add a `step` value and create a `stepped` `slice` <span class="op">(</span>`start<span class="op">:</span>stop<span class="op">:</span>step`<span class="op">).</span> `stepped` `slices` move in `step`<span class="op">-</span>sized <span class="st">"steps"</span> starting from `start`<span class="op">,</span> skipping over $step<span class="op">-</span><span class="dv">1</span>$ items with each <span class="st">"step"</span><span class="op">,</span> keeping only items that are <span class="st">"stepped"</span> on<span class="op">.</span></span>
<span id="cb176-2788"><a href="#cb176-2788" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2789"><a href="#cb176-2789" aria-hidden="true" tabindex="-1"></a><span class="fu">In</span> other words<span class="op">,</span> `stepped` `slices` keep items whose <span class="fu">index</span> <span class="op">(</span>zero<span class="op">-</span>based position<span class="op">)</span> in the `slice` is evenly divisible by `step`<span class="op">.</span> <span class="fu">A</span> `step` value of <span class="dv">1</span> keeps every item<span class="op">,</span> because every index is divisible by <span class="dv">1</span><span class="op">,</span> and a `step` of <span class="dv">2</span> keeps every other item<span class="op">,</span> those with even<span class="op">-</span>numbered indexes<span class="op">.</span> `Day` `<span class="dv">0</span>` and every other third day in the year <span class="fu">thereafter</span> <span class="op">(</span>`Day` `<span class="dv">3</span>`<span class="op">,</span> `Day` `<span class="dv">6</span>`<span class="op">,</span> etc<span class="op">.)</span> can be represented by the `slice` `<span class="op">::</span><span class="dv">3</span>`<span class="op">.</span></span>
<span id="cb176-2790"><a href="#cb176-2790" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2791"><a href="#cb176-2791" aria-hidden="true" tabindex="-1"></a><span class="fu">To</span> create a `series` of times on days throughout the year<span class="op">,</span> we can use a `slice` with a `series` of `steps`<span class="op">.</span> <span class="fu">The</span> `slice` `<span class="op">:</span><span class="dv">365</span><span class="op">:</span><span class="dv">1</span><span class="op">,</span><span class="dv">1</span><span class="op">,</span><span class="dv">3</span>` represents all of the `Decalendar` workdays in a year<span class="op">.</span> <span class="fu">It</span> is necessary to specify <span class="dv">365</span> as the `stop`<span class="op">,</span> so that Leap <span class="fu">Day</span> <span class="op">(</span>`Day` `<span class="dv">365</span>`<span class="op">)</span> is not included as a workday in leap years<span class="op">.</span> <span class="fu">Similarly</span><span class="op">,</span> `<span class="dv">3</span><span class="op">::</span><span class="dv">1</span><span class="op">,</span><span class="dv">4</span>` is a `seq` that represents all of the regular restdays<span class="op">,</span> not including the Leap Day holiday<span class="op">.</span></span>
<span id="cb176-2792"><a href="#cb176-2792" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2793"><a href="#cb176-2793" aria-hidden="true" tabindex="-1"></a>`stepped` `slices` cannot be included in `series`<span class="op">,</span> because both use <span class="fu">commas</span> <span class="op">(</span>`<span class="op">,</span>`<span class="op">)</span> and it would not possible to differentiate a `series` of `steps` from subsequent items in the `series`<span class="op">.</span> <span class="fu">The</span> simple rule is that `slices` with more than <span class="dv">1</span> <span class="fu">colon</span> <span class="op">(</span>`<span class="op">:</span>`<span class="op">)</span> cannot be part of a series<span class="op">.</span> <span class="fu">For</span> example<span class="op">,</span> `<span class="op">:</span><span class="dv">365</span><span class="op">:</span><span class="dv">1</span><span class="op">,</span><span class="dv">1</span><span class="op">,</span><span class="dv">3</span>` is a `stepped` `slice` with a `series` of <span class="dv">3</span> `steps` rather than a series consisting of a `slice` and two numbers<span class="op">.</span></span>
<span id="cb176-2794"><a href="#cb176-2794" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2795"><a href="#cb176-2795" aria-hidden="true" tabindex="-1"></a>## Spreads <span class="op">{</span>#sec<span class="op">-</span>spread<span class="op">}</span></span>
<span id="cb176-2796"><a href="#cb176-2796" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2797"><a href="#cb176-2797" aria-hidden="true" tabindex="-1"></a>To create `series` of consecutive items with breaks in between<span class="op">,</span> it may be better to use a `spread` than a `slice`<span class="op">.</span> `Simple` `spreads` consist of either a `start` and a `span` <span class="op">(</span>`start<span class="op">&gt;</span>span`<span class="op">)</span> separated by a greater<span class="op">-</span>than <span class="fu">sign</span> <span class="op">(</span>`<span class="op">&gt;</span>`<span class="op">)</span> or a `stop` and a `span` <span class="op">(</span>`stop<span class="op">&lt;</span>span`<span class="op">)</span> separated by a less<span class="op">-</span><span class="fu">than</span> <span class="op">(</span>`<span class="op">&lt;</span>`<span class="op">)</span> sign<span class="op">.</span> <span class="fu">The</span> <span class="kw">default</span> `start` and `stop` values are the same <span class="cf">for</span> both `slices` and `spreads`<span class="op">.</span> <span class="fu">We</span> can `spread` forward from the <span class="kw">default</span> `start` to capture the first `span` days in a year<span class="op">.</span> <span class="fu">For</span> example<span class="op">,</span> the first <span class="dv">3</span> days in a year can be represented by the `spread` `<span class="op">&gt;</span><span class="dv">3</span>`<span class="op">,</span> which is synonymous with the `slice` `<span class="op">:</span><span class="dv">3</span>`<span class="op">.</span> <span class="fu">In</span> <span class="kw">this</span> example<span class="op">,</span> the `start` is <span class="dv">0</span><span class="op">,</span> <span class="cf">while</span> the `stop` and the `span` are both <span class="fl">3.</span> In addition to <span class="kw">default</span> `start` and `stop` values<span class="op">,</span> `spreads` also have <span class="kw">default</span> `span` values<span class="op">.</span> <span class="fu">A</span> `spread` that only uses <span class="kw">default</span> <span class="fu">values</span> <span class="op">(</span>`<span class="op">&gt;</span>` or `<span class="op">&lt;</span>`<span class="op">)</span> will include every day in the <span class="fu">year</span> <span class="op">(</span>$span<span class="op">=</span>n$<span class="op">).</span> <span class="at">@tbl</span><span class="op">-</span><span class="dv">4</span>spread lists the seasons<span class="op">,</span> `qops`<span class="op">,</span> and `delts` in the form of `spreads`<span class="op">.</span></span>
<span id="cb176-2798"><a href="#cb176-2798" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2799"><a href="#cb176-2799" aria-hidden="true" tabindex="-1"></a>#### <span class="at">@tbl</span><span class="op">-</span><span class="dv">4</span>spread</span>
<span id="cb176-2800"><a href="#cb176-2800" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2801"><a href="#cb176-2801" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span> <span class="op">{.</span><span class="fu">callout</span><span class="op">-</span>note collapse<span class="op">=</span><span class="st">"true"</span> title<span class="op">=</span><span class="st">"Click to toggle table expansion"</span> icon<span class="op">=</span><span class="st">"false"</span><span class="op">}</span></span>
<span id="cb176-2802"><a href="#cb176-2802" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Index <span class="op">|</span> Season   <span class="op">|</span> Qop     <span class="op">|</span> Delt    <span class="op">|</span></span>
<span id="cb176-2803"><a href="#cb176-2803" aria-hidden="true" tabindex="-1"></a><span class="op">|-------|----------|---------|---------|</span></span>
<span id="cb176-2804"><a href="#cb176-2804" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="dv">0</span>     <span class="op">|</span> <span class="dv">20</span>\<span class="op">&gt;</span><span class="dv">90</span>   <span class="op">|</span> \<span class="op">&gt;</span><span class="dv">90</span>    <span class="op">|</span> \<span class="op">&gt;</span><span class="dv">91</span>    <span class="op">|</span></span>
<span id="cb176-2805"><a href="#cb176-2805" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="dv">1</span>     <span class="op">|</span> <span class="dv">110</span>\<span class="op">&gt;</span><span class="dv">95</span>  <span class="op">|</span> <span class="dv">90</span>\<span class="op">&gt;</span><span class="dv">90</span>  <span class="op">|</span> <span class="dv">91</span>\<span class="op">&gt;</span><span class="dv">91</span>  <span class="op">|</span></span>
<span id="cb176-2806"><a href="#cb176-2806" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="dv">2</span>     <span class="op">|</span> <span class="dv">205</span>\<span class="op">&gt;</span><span class="dv">90</span>  <span class="op">|</span> <span class="dv">180</span>\<span class="op">&gt;</span><span class="dv">90</span> <span class="op">|</span> <span class="dv">182</span>\<span class="op">&gt;</span><span class="dv">91</span> <span class="op">|</span></span>
<span id="cb176-2807"><a href="#cb176-2807" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="dv">3</span>     <span class="op">|</span> <span class="dv">295</span>\<span class="op">&gt;</span><span class="dv">90</span>‚Å∫ <span class="op">|</span> <span class="dv">270</span>\<span class="op">&gt;</span><span class="dv">90</span> <span class="op">|</span> <span class="dv">273</span>\<span class="op">&gt;</span><span class="dv">91</span> <span class="op">|</span></span>
<span id="cb176-2808"><a href="#cb176-2808" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2809"><a href="#cb176-2809" aria-hidden="true" tabindex="-1"></a><span class="op">:</span> The spreads that represent the <span class="dv">4</span><span class="op">-</span>part subyear units <span class="op">{</span>#tbl<span class="op">-</span><span class="dv">4</span>spread<span class="op">}</span></span>
<span id="cb176-2810"><a href="#cb176-2810" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span></span>
<span id="cb176-2811"><a href="#cb176-2811" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2812"><a href="#cb176-2812" aria-hidden="true" tabindex="-1"></a>If we <span class="st">"spread"</span> forward from a positive `start`<span class="op">,</span> the <span class="kw">default</span> `span` is $n<span class="op">-</span>start$<span class="op">.</span> <span class="fu">If</span> we spread backward from a positive `stop`<span class="op">,</span> the <span class="kw">default</span> `span` is `stop`<span class="op">.</span> <span class="fu">We</span> can `spread` backward from the <span class="kw">default</span> `stop` to capture the last `span` days in a year<span class="op">.</span> <span class="fu">For</span> example<span class="op">,</span> `<span class="op">&lt;</span><span class="dv">3</span>` represents the last <span class="dv">3</span> days of any year<span class="op">.</span> <span class="fu">We</span> could also use a negative `start` of `<span class="op">-</span><span class="dv">3</span>`<span class="op">,</span> the third to last day of any year<span class="op">,</span> to create the `slice` `<span class="op">-</span><span class="dv">3</span><span class="op">:</span>` and the `spread` `<span class="op">-</span><span class="dv">3</span><span class="op">&gt;</span>`<span class="op">,</span> both of which are synonymous with `<span class="op">&lt;</span><span class="dv">3</span>`<span class="op">.</span> <span class="fu">One</span> advantage of `spreads` over `slices` is the ability to access days from the end of a year without negative numbers<span class="op">.</span> <span class="fu">A</span> `span` value of zero does not <span class="cf">return</span> any items<span class="op">.</span> <span class="fu">Negative</span> `span` values reverse the direction of the first sign<span class="op">,</span> turning `start` into `stop` and vice versa<span class="op">.</span></span>
<span id="cb176-2813"><a href="#cb176-2813" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2814"><a href="#cb176-2814" aria-hidden="true" tabindex="-1"></a>## Splits <span class="op">{</span>#sec<span class="op">-</span>split<span class="op">}</span></span>
<span id="cb176-2815"><a href="#cb176-2815" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2816"><a href="#cb176-2816" aria-hidden="true" tabindex="-1"></a>As with `stepped` `slices`<span class="op">,</span> we can create non<span class="op">-</span>consecutive `series` by <span class="st">"splitting"</span> a `simple` `spread` <span class="op">(</span>`start<span class="op">&gt;</span>span` or `stop<span class="op">&lt;</span>span`<span class="op">)</span> into `split` `spread` <span class="op">(</span>e<span class="op">.</span><span class="fu">g</span><span class="op">.</span> `start<span class="op">&gt;</span>span<span class="op">&gt;</span>split`<span class="op">)</span> with a `split` value that works like the opposite of a `step`<span class="op">.</span> <span class="fu">While</span> `steps` keep items that are <span class="st">"stepped"</span> on<span class="op">,</span> `splits` exclude items that are used to create the boundaries of the `splits`<span class="op">.</span> <span class="fu">The</span> <span class="kw">default</span> `split` value is `span`<span class="op">,</span> meaning that the entire `span` is included in one `split`<span class="op">.</span></span>
<span id="cb176-2817"><a href="#cb176-2817" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2818"><a href="#cb176-2818" aria-hidden="true" tabindex="-1"></a><span class="fu">A</span> `split` `spread` with a `split` value of <span class="dv">1</span> <span class="op">(</span>`start<span class="op">&gt;</span>span<span class="op">&gt;</span><span class="dv">1</span>`<span class="op">)</span> is the same as a `stepped` `slice` with a `step` value of <span class="dv">2</span> <span class="op">(</span>`start<span class="op">:</span>stop<span class="op">:</span><span class="dv">2</span>`<span class="op">).</span> `Split` values greater than <span class="dv">1</span> but less than `span` will yield a `series` of `segments`<span class="op">.</span> <span class="fu">If</span> `split` is <span class="fu">zero</span> <span class="op">(</span>`start<span class="op">&gt;</span>span<span class="op">&gt;</span><span class="dv">0</span>`<span class="op">),</span> the `split` `spread` will not <span class="cf">return</span> any items<span class="op">.</span> <span class="fu">A</span> negative `split` value reverses the direction of the second greater<span class="op">-</span>than <span class="fu">sign</span> <span class="op">(</span>`start<span class="op">&gt;</span>span<span class="op">&gt;-</span><span class="dv">2</span>` and `start<span class="op">&gt;</span>span<span class="op">&lt;</span><span class="dv">2</span>` are synonymous<span class="op">).</span> <span class="fu">This</span> can be useful when providing a series of `split` values<span class="op">.</span> <span class="fu">Negative</span> `split` values reverse the direction of a `split` and a `split` value of zero skips a `split`<span class="op">.</span> <span class="fu">Just</span> like `stepped` `slices`<span class="op">,</span> `split` `spreads` cannot be included in a `series`<span class="op">,</span> because every `split` can have a `series` of values<span class="op">.</span></span>
<span id="cb176-2819"><a href="#cb176-2819" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2820"><a href="#cb176-2820" aria-hidden="true" tabindex="-1"></a><span class="fu">The</span> direction of the second sign in `split` `spreads` determines whether we begin creating splits from the `start` <span class="op">(</span>`<span class="op">&gt;</span>`<span class="op">)</span> or the `stop` <span class="op">(</span>`<span class="op">&lt;</span>`<span class="op">)</span> of the `span`<span class="op">.</span> <span class="fu">If</span> the first two <span class="fu">values</span> <span class="op">(</span>`start` and `span` or `stop` and `span`<span class="op">)</span> are blank<span class="op">,</span> the direction of the first sign does not matter and the first two signs can be combined into a <span class="st">"much greater-than sign"</span> <span class="op">(</span>`‚â´`<span class="op">),</span> a <span class="st">"much less-than sign"</span> <span class="op">(</span>`‚â™`<span class="op">),</span> a <span class="fu">diamond</span> <span class="op">(</span>`‚ô¢`<span class="op">),</span> or simply an `x`<span class="op">.</span> <span class="fu">The</span> split spreads `‚â´<span class="dv">4</span>` and `‚ô¢<span class="dv">4</span>` are synonymous<span class="op">;</span> both skip every <span class="dv">5</span>th day to create groups of <span class="dv">4</span> days throughout the year starting with the first <span class="dv">4</span> days of the year `<span class="op">&gt;</span><span class="dv">4</span>`<span class="op">.</span> <span class="fu">Notably</span><span class="op">,</span> `‚â´<span class="dv">4</span>` and `‚ô¢<span class="dv">4</span>` will always end with a `segment` containing the last <span class="dv">4</span> days of common years<span class="op">,</span> `<span class="dv">360</span><span class="op">:</span><span class="dv">364</span>`<span class="op">,</span> `<span class="dv">360</span><span class="op">&gt;</span><span class="dv">4</span>`<span class="op">,</span> or `<span class="dv">364</span><span class="op">&lt;</span><span class="dv">4</span>`<span class="op">,</span> even in leap years<span class="op">,</span> because partial `splits` are not allowed<span class="op">.</span></span>
<span id="cb176-2821"><a href="#cb176-2821" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2822"><a href="#cb176-2822" aria-hidden="true" tabindex="-1"></a>## Spaces <span class="op">{</span>#sec<span class="op">-</span>space<span class="op">}</span></span>
<span id="cb176-2823"><a href="#cb176-2823" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2824"><a href="#cb176-2824" aria-hidden="true" tabindex="-1"></a>The patterns described above require that `splits` are separated by the <span class="kw">default</span> `space` value of <span class="fl">1.</span> We can specify a different `space` value in the form `start<span class="op">&gt;</span>span<span class="op">&gt;</span>split<span class="op">&gt;</span>space`<span class="op">.</span> <span class="fu">The</span> `split` `spreads` `‚â´<span class="dv">3</span><span class="op">&gt;</span><span class="dv">2</span>` and `‚ô¢<span class="dv">3</span><span class="op">&gt;</span><span class="dv">2</span>` create <span class="dv">3</span><span class="op">-</span>day `splits` separated by <span class="dv">2</span><span class="op">-</span>day `spaces`<span class="op">.</span> <span class="fu">This</span> is the pattern of workdays in the `Decalendar` system<span class="op">.</span> <span class="fu">The</span> first `segment` of `‚â´<span class="dv">3</span><span class="op">&gt;</span><span class="dv">2</span>` and `‚ô¢<span class="dv">3</span><span class="op">&gt;</span><span class="dv">2</span>` can be written as `<span class="op">:</span><span class="dv">3</span>`<span class="op">,</span> `<span class="op">&gt;</span><span class="dv">3</span>`<span class="op">,</span> or `<span class="dv">3</span><span class="op">&lt;</span>`<span class="op">,</span> <span class="cf">while</span> the last `segment` is `<span class="dv">360</span><span class="op">:</span><span class="dv">363</span>`<span class="op">,</span> `<span class="dv">360</span><span class="op">&gt;</span><span class="dv">3</span>`<span class="op">,</span> or `<span class="dv">363</span><span class="op">&lt;</span><span class="dv">3</span>`<span class="op">.</span> <span class="fu">The</span> workdays in the first `dek` of `‚â´<span class="dv">3</span><span class="op">&gt;</span><span class="dv">2</span>` and `‚ô¢<span class="dv">3</span><span class="op">&gt;</span><span class="dv">2</span>` can be written as the following `series` of `segments`<span class="op">:</span> `<span class="op">:</span><span class="dv">4</span><span class="op">,</span><span class="dv">5</span><span class="op">:</span><span class="dv">8</span>`<span class="op">,</span> `<span class="op">&gt;</span><span class="dv">3</span><span class="op">,</span><span class="dv">5</span><span class="op">&gt;</span><span class="dv">3</span>`<span class="op">,</span> or `<span class="dv">3</span><span class="op">&lt;,</span><span class="dv">8</span><span class="op">&lt;</span><span class="dv">3</span>`<span class="op">.</span> <span class="fu">Unlike</span> `stepped` `slices` and `split` `spreads`<span class="op">,</span> `simple` `slices` and `simple` `spreads` can be used in `series`<span class="op">.</span></span>
<span id="cb176-2825"><a href="#cb176-2825" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2826"><a href="#cb176-2826" aria-hidden="true" tabindex="-1"></a><span class="fu">A</span> `space` value of <span class="dv">0</span> may also be useful<span class="op">.</span> <span class="fu">For</span> example<span class="op">,</span> `delts`<span class="op">,</span> `qops`<span class="op">,</span> `eps`<span class="op">,</span> and `waus` can be summarized as `split` `spreads` as shown in <span class="at">@tbl</span><span class="op">-</span>constant<span class="op">.</span> <span class="fu">When</span> `space` is zero<span class="op">,</span> the direction of the third sign does not matter<span class="op">.</span> <span class="fu">The</span> `split` `spreads` `‚â´<span class="dv">61</span><span class="op">&gt;</span><span class="dv">0</span>`<span class="op">,</span> `‚ô¢<span class="dv">61</span><span class="op">&gt;</span><span class="dv">0</span>`<span class="op">,</span> `‚â´<span class="dv">61</span><span class="op">&lt;</span><span class="dv">0</span>`<span class="op">,</span> and `‚ô¢<span class="dv">61</span><span class="op">&lt;</span><span class="dv">0</span>` all represents the `waus` in a year<span class="op">.</span> `Waus` divide leap years evenly and `eps` divide common years evenly<span class="op">.</span> <span class="fu">Therefore</span><span class="op">,</span> `x61<span class="op">&gt;</span><span class="dv">0</span>` and `x61<span class="op">&lt;</span><span class="dv">0</span>` can represent all of the `waus` in leap years<span class="op">,</span> just like `x73<span class="op">&gt;</span><span class="dv">0</span>` and `x73<span class="op">&lt;</span><span class="dv">0</span>` can represent all of the `eps` in common years<span class="op">.</span> <span class="fu">The</span> seasons can be described by a `spread` with a `series` of `splits` and a `space` of <span class="dv">0</span><span class="op">:</span> `¬ª<span class="dv">90</span><span class="op">,</span><span class="dv">95</span><span class="op">,</span><span class="dv">90</span><span class="op">,</span><span class="dv">90</span>‚Å∫<span class="op">&gt;</span><span class="dv">0</span>`<span class="op">.</span></span>
<span id="cb176-2827"><a href="#cb176-2827" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2828"><a href="#cb176-2828" aria-hidden="true" tabindex="-1"></a>#### <span class="at">@tbl</span><span class="op">-</span>constant</span>
<span id="cb176-2829"><a href="#cb176-2829" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2830"><a href="#cb176-2830" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span> <span class="op">{.</span><span class="fu">callout</span><span class="op">-</span>note collapse<span class="op">=</span><span class="st">"true"</span> title<span class="op">=</span><span class="st">"Click to toggle table expansion"</span> icon<span class="op">=</span><span class="st">"false"</span><span class="op">}</span></span>
<span id="cb176-2831"><a href="#cb176-2831" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Unit <span class="op">|</span> Spread  <span class="op">|</span></span>
<span id="cb176-2832"><a href="#cb176-2832" aria-hidden="true" tabindex="-1"></a><span class="op">|------|---------|</span></span>
<span id="cb176-2833"><a href="#cb176-2833" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Delt <span class="op">|</span> `‚â´<span class="dv">91</span><span class="op">&gt;</span><span class="dv">0</span>` <span class="op">|</span></span>
<span id="cb176-2834"><a href="#cb176-2834" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Qop  <span class="op">|</span> `‚â´<span class="dv">90</span><span class="op">&gt;</span><span class="dv">0</span>` <span class="op">|</span></span>
<span id="cb176-2835"><a href="#cb176-2835" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Ep   <span class="op">|</span> `‚â´<span class="dv">73</span><span class="op">&gt;</span><span class="dv">0</span>` <span class="op">|</span></span>
<span id="cb176-2836"><a href="#cb176-2836" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Wau  <span class="op">|</span> `‚â´<span class="dv">61</span><span class="op">&gt;</span><span class="dv">0</span>` <span class="op">|</span></span>
<span id="cb176-2837"><a href="#cb176-2837" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2838"><a href="#cb176-2838" aria-hidden="true" tabindex="-1"></a><span class="op">:</span> The spreads that represent the constant length subyear units <span class="op">{</span>#tbl<span class="op">-</span>constant<span class="op">}</span></span>
<span id="cb176-2839"><a href="#cb176-2839" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span></span>
<span id="cb176-2840"><a href="#cb176-2840" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2841"><a href="#cb176-2841" aria-hidden="true" tabindex="-1"></a>If `space` is greater than zero and the second and third sign are pointing in opposite directions<span class="op">,</span> the resulting time `segments` will overlap<span class="op">.</span> <span class="fu">The</span> `split` `spreads` `<span class="op">&gt;</span><span class="dv">1</span><span class="op">&gt;</span><span class="fl">.4</span><span class="op">&lt;</span><span class="fl">.2</span>` and `<span class="op">&lt;</span><span class="dv">1</span><span class="op">&lt;</span><span class="fl">.4</span><span class="op">&gt;</span><span class="fl">.2</span>` both result in the same <span class="dv">4</span> overlapping time `segments`<span class="op">:</span> `<span class="op">:</span><span class="fl">.4</span>`<span class="op">,</span> `<span class="fl">.2</span><span class="op">:</span><span class="fl">.6</span>`<span class="op">,</span> `<span class="fl">.4</span><span class="op">:</span><span class="fl">.8</span>`<span class="op">,</span> `<span class="fl">.6</span><span class="op">:</span><span class="dv">1</span>`<span class="op">.</span> <span class="fu">Negative</span> values can be used in a `series` of `spaces` to temporarily reverse the direction and intersperse overlapping and non<span class="op">-</span>overlapping `segments`<span class="op">.</span> <span class="fu">The</span> `split` `spread` `<span class="op">&gt;</span><span class="dv">1</span><span class="op">&gt;</span><span class="fl">.4</span><span class="op">&lt;</span><span class="fl">.2</span><span class="op">,-</span><span class="fl">.1</span>` yields two `segments` that overlap and one `segment` that does not overlap<span class="op">:</span> `<span class="op">:</span><span class="fl">.4</span>`<span class="op">,</span> `<span class="fl">.2</span><span class="op">:</span><span class="fl">.6</span>`<span class="op">,</span> `<span class="fl">.6</span><span class="op">:</span><span class="dv">1</span>`<span class="op">.</span></span>
<span id="cb176-2842"><a href="#cb176-2842" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2843"><a href="#cb176-2843" aria-hidden="true" tabindex="-1"></a><span class="fu">Overlapping</span> segments could be used to plan work shifts that require a hand<span class="op">-</span>off between teams<span class="op">.</span> <span class="fu">The</span> segments created by `<span class="op">&gt;</span><span class="dv">1</span><span class="op">&gt;</span><span class="fl">.4</span><span class="op">&lt;</span><span class="fl">.2</span>` are shifted by two `dimes` in relation to each other and overlap by <span class="dv">2</span> `dimes`<span class="op">.</span> <span class="fu">If</span> these segments are in `Zone` `<span class="dv">0</span>` time<span class="op">,</span> they represent the normal <span class="fu">workday</span> <span class="op">(</span>`<span class="fl">.3</span><span class="op">:</span><span class="fl">.7</span>`<span class="op">)</span> <span class="cf">for</span> `Zone` `<span class="dv">3</span>` <span class="op">(</span>`<span class="op">:</span><span class="fl">.4</span>`<span class="op">),</span> `Zone` `<span class="dv">1</span>`<span class="op">(</span>`<span class="fl">.2</span><span class="op">:</span><span class="fl">.6</span>`<span class="op">),</span> `Zone` `<span class="op">-</span><span class="dv">1</span>`<span class="op">(</span>`<span class="fl">.4</span><span class="op">:</span><span class="fl">.8</span>`<span class="op">),</span> and `Zone` `<span class="op">-</span><span class="dv">3</span>`<span class="op">(</span>`<span class="fl">.6</span><span class="op">:</span><span class="dv">1</span>`<span class="op">).</span> <span class="fu">Each</span> of these <span class="dv">4</span> segments could represent a team working during the normal workday in their respective time zone<span class="op">.</span> <span class="fu">All</span> but the last team would have two dimes of overlap with the subsequent team<span class="op">.</span></span>
<span id="cb176-2844"><a href="#cb176-2844" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2845"><a href="#cb176-2845" aria-hidden="true" tabindex="-1"></a>## Sequential spreads and slices <span class="op">{</span>#sec<span class="op">-</span>seq<span class="op">}</span></span>
<span id="cb176-2846"><a href="#cb176-2846" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2847"><a href="#cb176-2847" aria-hidden="true" tabindex="-1"></a>`split` `spreads` can be combined with other `spreads` into `sequences` called `seq` `spreads` <span class="op">(</span>`sequential` `spreads`<span class="op">).</span> <span class="fu">The</span> intuition behind `seq` `spreads` and is that each item in the <span class="fu">first</span> <span class="op">(</span>outer<span class="op">)</span> `spread` serves as a starting point <span class="cf">for</span> the <span class="fu">second</span> <span class="op">(</span>inner<span class="op">)</span> `spread`<span class="op">.</span> <span class="fu">The</span> main use of `seq` `spreads` is to first <span class="st">"spread"</span> across days and then <span class="st">"spread"</span> across times in those days<span class="op">.</span> <span class="fu">We</span> can combine `‚â´<span class="dv">3</span><span class="op">&gt;</span><span class="dv">2</span>`<span class="op">,</span> a `split` `spread` that represents the `Decalendar` workdays<span class="op">,</span> with `<span class="fl">.3</span><span class="op">&gt;</span><span class="fl">.4</span>`<span class="op">,</span> a `simple` `spread` that provides the `start` and `span` of the `Decalendar` workday<span class="op">,</span> to obtain `‚â´<span class="dv">3</span><span class="op">&gt;</span><span class="dv">2</span><span class="op">&gt;</span><span class="fl">.3</span><span class="op">&gt;</span><span class="fl">.4</span>`<span class="op">,</span> a `seq` `spread` that represents the time spent at work in a `Decalendar` year<span class="op">.</span></span>
<span id="cb176-2848"><a href="#cb176-2848" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2849"><a href="#cb176-2849" aria-hidden="true" tabindex="-1"></a><span class="fu">In</span> <span class="kw">this</span> `seq` `spread`<span class="op">,</span> the `split` is the number of <span class="fu">workdays</span> <span class="op">(</span>`<span class="dv">3</span>`<span class="op">),</span> the space is the number of <span class="fu">restdays</span> <span class="op">(</span>`<span class="dv">2</span>`<span class="op">),</span> the second<span class="op">-</span>to<span class="op">-</span>last number is the `start` of the <span class="fu">workday</span> <span class="op">(</span>`<span class="fl">.3</span>`<span class="op">)</span> and the last number is the workday `span` <span class="op">(</span>`<span class="fl">.4</span>`<span class="op">).</span> <span class="fu">The</span> `spread` `‚â´<span class="dv">3</span><span class="op">&gt;</span><span class="dv">2</span><span class="op">&gt;</span><span class="fl">.3</span><span class="op">&gt;</span><span class="fl">.4</span>` first starts at midnight of each workday<span class="op">,</span> then moves forward <span class="dv">3</span> `dimes` to the <span class="kw">new</span> `start` of `Dot` `<span class="dv">3</span>`<span class="op">,</span> and then <span class="st">"spreads"</span> forward by a `span` of <span class="dv">4</span> `dimes` to the <span class="kw">new</span> `stop` of `Dot` `<span class="dv">7</span>`<span class="op">.</span> <span class="fu">We</span> could replace the start of the workday in `‚â´<span class="dv">3</span><span class="op">&gt;</span><span class="dv">2</span><span class="op">&gt;</span><span class="fl">.3</span><span class="op">&gt;</span><span class="fl">.4</span>` with the end of workday <span class="cf">if</span> we reverse the last sign<span class="op">:</span> `‚â´<span class="dv">3</span><span class="op">&gt;</span><span class="dv">2</span><span class="op">&gt;</span><span class="fl">.7</span><span class="op">&lt;</span><span class="fl">.4</span>`<span class="op">,</span> because `<span class="fl">.3</span><span class="op">&gt;</span><span class="fl">.4</span>` and `<span class="fl">.7</span><span class="op">&lt;</span><span class="fl">.4</span>` are synonymous<span class="op">.</span></span>
<span id="cb176-2850"><a href="#cb176-2850" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2851"><a href="#cb176-2851" aria-hidden="true" tabindex="-1"></a><span class="fu">We</span> combine the two `spreads` with `<span class="op">&gt;</span>` because we want to move forward from the beginning of each workday<span class="op">,</span> instead of backward to the previous day<span class="op">.</span> <span class="fu">If</span> we combined `‚â´<span class="dv">3</span><span class="op">&gt;</span><span class="dv">2</span>` and `<span class="fl">.3</span><span class="op">&gt;</span><span class="fl">.4</span>` with `<span class="op">&lt;</span>`<span class="op">,</span> the resulting `spread` `‚â´<span class="dv">3</span><span class="op">&gt;</span><span class="dv">2</span><span class="op">&lt;</span><span class="fl">.3</span><span class="op">&gt;</span><span class="fl">.4</span>` would move backward from midnight of each workday to `Dot` `<span class="dv">7</span>` of each previous day and then <span class="st">"spread"</span> forward to `Dot` `<span class="dv">1</span>` of each workday<span class="op">.</span> <span class="fu">We</span> may want to use such a mixed direction `seq` `spreads` when dealing with time zones<span class="op">.</span> <span class="fu">If</span> we lived in `Zone` `<span class="op">-</span><span class="dv">3</span>` and wanted to know how the workdays in `Zone` `<span class="dv">4</span>` translated into our time zone<span class="op">,</span> we could take the `spread` `‚â´<span class="dv">3</span><span class="op">&gt;</span><span class="dv">2</span><span class="op">&gt;</span><span class="fl">.3</span><span class="op">&gt;</span><span class="fl">.4</span>` and move its `start` to <span class="dv">7</span> `dimes` earlier<span class="op">:</span> `‚â´<span class="dv">3</span><span class="op">&gt;</span><span class="dv">2</span><span class="op">&lt;</span><span class="fl">.4</span><span class="op">&gt;</span><span class="fl">.4</span>`<span class="op">.</span> `seq` `spreads` enable such time zone conversions without the use of negative numbers<span class="op">.</span></span>
<span id="cb176-2852"><a href="#cb176-2852" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2853"><a href="#cb176-2853" aria-hidden="true" tabindex="-1"></a><span class="fu">The</span> `seq` `slice` equivalent of `‚â´<span class="dv">3</span><span class="op">&gt;</span><span class="dv">2</span><span class="op">&gt;</span><span class="fl">.3</span><span class="op">&gt;</span><span class="fl">.4</span>` is `<span class="op">:</span><span class="dv">365</span><span class="op">:</span><span class="dv">1</span><span class="op">,</span><span class="dv">1</span><span class="op">,</span><span class="dv">3</span><span class="op">:</span><span class="fl">.3</span><span class="op">:</span><span class="fl">.7</span>`<span class="op">.</span> `seq` `spreads` will always be a more succinct way <span class="cf">for</span> creating <span class="dt">long</span> consecutive sequences with breaks than `slices`<span class="op">.</span> <span class="fu">For</span> example<span class="op">,</span> to include a lunch <span class="cf">break</span> in the middle of work<span class="op">,</span> we could simply add a `split` and a `space` to the `seq` `spread` above<span class="op">:</span> `‚â´<span class="dv">3</span><span class="op">&gt;</span><span class="dv">2</span><span class="op">&gt;</span><span class="fl">.3</span><span class="op">&gt;</span><span class="fl">.4</span><span class="op">&gt;</span><span class="fl">.18</span><span class="op">&gt;</span><span class="fl">.04</span>`<span class="op">.</span> <span class="fu">To</span> <span class="cf">do</span> the same with a `seq` `slice`<span class="op">,</span> we have to create <span class="dv">17</span> steps of <span class="fl">0.01</span> and a step of <span class="fl">.04</span><span class="op">:</span> `<span class="op">:</span><span class="dv">365</span><span class="op">:</span><span class="dv">1</span><span class="op">,</span><span class="dv">1</span><span class="op">,</span><span class="dv">3</span><span class="op">:</span><span class="fl">.3</span><span class="op">:</span><span class="fl">.7</span><span class="op">:</span><span class="dv">17</span><span class="op">*</span><span class="dv">1</span><span class="op">%,</span><span class="dv">4</span><span class="op">%</span>`<span class="op">.</span> <span class="fu">Here</span><span class="op">,</span> we are using the replication <span class="fu">operator</span> <span class="op">(</span>`<span class="op">*</span>`<span class="op">)</span> to avoid writing <span class="fl">0.01</span> <span class="dv">17</span> times and the percent <span class="fu">operator</span> <span class="op">(</span>`<span class="op">%</span>`<span class="op">)</span> to save a few characters<span class="op">,</span> but even so the `seq` `slice` is not as concise as the `seq` `spread`<span class="op">.</span> <span class="at">@tbl</span><span class="op">-</span>workday shows each part of <span class="kw">this</span> schedule in the form of `simple` `slices` and `simple` `spreads`<span class="op">.</span></span>
<span id="cb176-2854"><a href="#cb176-2854" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2855"><a href="#cb176-2855" aria-hidden="true" tabindex="-1"></a>#### <span class="at">@tbl</span><span class="op">-</span>workday</span>
<span id="cb176-2856"><a href="#cb176-2856" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2857"><a href="#cb176-2857" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span> <span class="op">{.</span><span class="fu">callout</span><span class="op">-</span>note collapse<span class="op">=</span><span class="st">"true"</span> title<span class="op">=</span><span class="st">"Click to toggle table expansion"</span> icon<span class="op">=</span><span class="st">"false"</span><span class="op">}</span></span>
<span id="cb176-2858"><a href="#cb176-2858" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> slice   <span class="op">|</span> spread   <span class="op">|</span> spread   <span class="op">|</span> label <span class="op">|</span></span>
<span id="cb176-2859"><a href="#cb176-2859" aria-hidden="true" tabindex="-1"></a><span class="op">|---------|----------|----------|-------|</span></span>
<span id="cb176-2860"><a href="#cb176-2860" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="fl">.30</span><span class="op">:</span><span class="fl">.48</span> <span class="op">|</span> <span class="fl">.30</span>\<span class="op">&gt;</span><span class="fl">.18</span> <span class="op">|</span> <span class="fl">.48</span>\<span class="op">&lt;</span><span class="fl">.18</span> <span class="op">|</span> work0 <span class="op">|</span></span>
<span id="cb176-2861"><a href="#cb176-2861" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="fl">.48</span><span class="op">:</span><span class="fl">.52</span> <span class="op">|</span> <span class="fl">.48</span>\<span class="op">&gt;</span><span class="fl">.04</span> <span class="op">|</span> <span class="fl">.52</span>\<span class="op">&lt;</span><span class="fl">.04</span> <span class="op">|</span> lunch <span class="op">|</span></span>
<span id="cb176-2862"><a href="#cb176-2862" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="fl">.52</span><span class="op">:</span><span class="fl">.70</span> <span class="op">|</span> <span class="fl">.52</span>\<span class="op">&gt;</span><span class="fl">.18</span> <span class="op">|</span> <span class="fl">.70</span>\<span class="op">&lt;</span><span class="fl">.18</span> <span class="op">|</span> work1 <span class="op">|</span></span>
<span id="cb176-2863"><a href="#cb176-2863" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2864"><a href="#cb176-2864" aria-hidden="true" tabindex="-1"></a><span class="op">:</span> A workday schedule with a lunch <span class="cf">break</span> <span class="op">{</span>#tbl<span class="op">-</span>workday<span class="op">}</span></span>
<span id="cb176-2865"><a href="#cb176-2865" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span></span>
<span id="cb176-2866"><a href="#cb176-2866" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2867"><a href="#cb176-2867" aria-hidden="true" tabindex="-1"></a>## Pomodoro <span class="op">{</span>#sec<span class="op">-</span>pom<span class="op">}</span></span>
<span id="cb176-2868"><a href="#cb176-2868" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2869"><a href="#cb176-2869" aria-hidden="true" tabindex="-1"></a>Another real<span class="op">-</span>life application of `spreads` can be to intersperse breaks in between periods of work as in the <span class="op">[</span>Pomodoro technique<span class="op">](</span>https<span class="op">:</span><span class="co">//en.wikipedia.org/wiki/Pomodoro_Technique). The times spent working and resting can vary, but a reasonable translation of the original Pomodoro into the `Declock` units would be to have each `pomodoro` consist of 17 `mils` of work and 3 `mils` of rest, with a 17 `mil` break after every 4 `pomodoros`. To repeat 16 `pomodoros` throughout the `Decalendar` workday, we could use the following `seq` `spread`: `.3&gt;.7&gt;.08&gt;.02‚ãô.017&gt;.003`. Here, we use the "very much greater-then sign" (`‚ãô`) instead of a combination of a "much greater-than sign" (`‚â´`) and a greater-than sign (`&gt;`). The `pomodoro` pattern is difficult to capture with a `slice` because we have to use `*` for the steps of the inner and the outer `slice`: `.3:.7:8*.01,.02:::17*.001,.003`.</span></span>
<span id="cb176-2870"><a href="#cb176-2870" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2871"><a href="#cb176-2871" aria-hidden="true" tabindex="-1"></a>### Replication operator <span class="op">{</span>#sec<span class="op">-</span>rep<span class="op">}</span></span>
<span id="cb176-2872"><a href="#cb176-2872" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2873"><a href="#cb176-2873" aria-hidden="true" tabindex="-1"></a>The replication <span class="fu">operator</span> <span class="op">(</span>`<span class="op">*</span>`<span class="op">)</span> is very useful <span class="cf">for</span> replacing repetitive values<span class="op">.</span> <span class="fu">For</span> example<span class="op">,</span> to divide any year into six parts we could use the `spread` `‚â´<span class="dv">5</span><span class="op">*</span><span class="dv">61</span><span class="op">,</span><span class="dv">60</span>‚Å∫<span class="op">&gt;</span><span class="dv">0</span>` to create <span class="dv">5</span> <span class="st">"splits"</span> that are all <span class="dv">61</span> days <span class="dt">long</span> and one last <span class="st">"split"</span> that is `<span class="dv">60</span>‚Å∫` <span class="fu">days</span> <span class="op">(</span><span class="dv">60</span> days in a common year or <span class="dv">61</span> days in a leap year<span class="op">)</span> <span class="dt">long</span><span class="op">.</span> <span class="fu">The</span> `<span class="op">*</span>` helps us avoid the repetitiveness of writing `‚â´<span class="dv">61</span><span class="op">,</span><span class="dv">61</span><span class="op">,</span><span class="dv">61</span><span class="op">,</span><span class="dv">61</span><span class="op">,</span><span class="dv">61</span><span class="op">,</span><span class="dv">60</span>‚Å∫<span class="op">&gt;</span><span class="dv">0</span>`<span class="op">.</span> <span class="fu">In</span> addition to being used in the `split` and `space` of a `split` `spread` or the `step` of a `stepped` `slice`<span class="op">,</span> the `<span class="op">*</span>` can also be used in the `span` of a `split` `spread` or the `stop` of a `stepped` `slice` to indicate has many cycles of `splits` or `steps` we want to complete<span class="op">.</span> <span class="fu">For</span> example<span class="op">,</span> `<span class="op">&gt;</span><span class="dv">4</span><span class="op">*&gt;</span><span class="dv">5</span><span class="op">*</span><span class="dv">61</span><span class="op">,</span><span class="dv">60</span>‚Å∫<span class="op">&gt;</span><span class="dv">0</span>` indicates that we want <span class="dv">4</span> <span class="fu">years</span> <span class="op">(</span>the current year and the <span class="dv">3</span> subsequent years<span class="op">)</span> <span class="st">"split"</span> into <span class="dv">6</span> parts <span class="cf">for</span> a total of <span class="dv">24</span> parts<span class="op">.</span> <span class="fu">In</span> other words<span class="op">,</span> `<span class="dv">4</span><span class="op">*</span>` means that we want to stop cycling after completing four yearly cycles<span class="op">.</span> <span class="fu">We</span> can read `<span class="dv">4</span><span class="op">*</span>` out loud as <span class="st">"four times"</span> because it means we intend to go through the yearly cycle <span class="st">"four times"</span><span class="op">.</span></span>
<span id="cb176-2874"><a href="#cb176-2874" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2875"><a href="#cb176-2875" aria-hidden="true" tabindex="-1"></a>### Percent<span class="op">,</span> permil<span class="op">,</span> and permyr operators <span class="op">{</span>#sec<span class="op">-</span>per<span class="op">}</span></span>
<span id="cb176-2876"><a href="#cb176-2876" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2877"><a href="#cb176-2877" aria-hidden="true" tabindex="-1"></a>We can make the `seq` `spread` above even shorter by using the `per` operators<span class="op">:</span> `<span class="op">%</span>`<span class="op">,</span> `‚Ä∞`<span class="op">,</span> and `‚Ä±`<span class="op">.</span> <span class="fu">Most</span> of the values in `<span class="fl">.3</span><span class="op">&gt;</span><span class="dv">2</span><span class="op">*&gt;</span><span class="fl">.08</span><span class="op">&gt;</span><span class="fl">.02</span>‚ãô<span class="fl">.017</span><span class="op">&gt;</span><span class="fl">.003</span>` are either <span class="fu">percents</span> <span class="op">(</span><span class="fl">.01</span> or ¬π<span class="op">/</span>‚ÇÅ‚ÇÄ‚ÇÄ<span class="op">)</span> or <span class="fu">permils</span> <span class="op">(</span><span class="fl">.001</span> or ¬π<span class="op">/</span>‚ÇÅ‚ÇÄ‚ÇÄ‚ÇÄ<span class="op">)</span> of a day<span class="op">,</span> we can therefore rewrite <span class="kw">this</span> `seq` `spread` as `<span class="fl">.3</span><span class="op">&gt;</span><span class="dv">2</span><span class="op">*&gt;</span><span class="dv">8</span><span class="op">%&gt;</span><span class="dv">2</span><span class="op">%</span>‚ãô<span class="dv">17</span>‚Ä∞<span class="op">&gt;</span><span class="dv">3</span>‚Ä∞`<span class="op">.</span> <span class="fu">It</span> may be difficult to write the <span class="fu">permil</span> <span class="op">(</span>`‚Ä∞`<span class="op">)</span> <span class="fu">operator</span> <span class="op">(</span>hex<span class="op">:</span> `<span class="dv">2030</span>`<span class="op">,</span> html<span class="op">:</span> `<span class="op">&amp;</span>permil<span class="op">;</span>`<span class="op">,</span> vim<span class="op">:</span> `<span class="op">%</span><span class="dv">0</span>`<span class="op">,</span> compose<span class="op">:</span> `<span class="op">%</span>o`<span class="op">),</span> because it does not appear on a typical keyboard<span class="op">,</span> so it is also possible to write `<span class="fl">.3</span><span class="op">&gt;</span><span class="dv">2</span><span class="op">*&gt;</span><span class="dv">8</span><span class="op">%&gt;</span><span class="dv">2</span><span class="op">%</span>‚ãô<span class="dv">17</span>‚Ä∞<span class="op">&gt;</span><span class="dv">3</span>‚Ä∞` as `<span class="fl">.3</span><span class="op">&gt;</span><span class="dv">2</span><span class="op">*&gt;</span><span class="dv">8</span><span class="op">%&gt;</span><span class="dv">2</span><span class="op">%</span>‚ãô<span class="er">17</span>m<span class="op">&gt;</span><span class="dv">3</span>m`<span class="op">,</span> with the letter `m`<span class="op">,</span> which stands <span class="cf">for</span> `mil`<span class="op">,</span> replacing `‚Ä∞`<span class="op">.</span> <span class="fu">In</span> addition to the <span class="fu">percent</span> <span class="op">(</span>`<span class="op">%</span>`<span class="op">)</span> and <span class="fu">permil</span> <span class="op">(</span>`‚Ä∞`<span class="op">)</span> operators<span class="op">,</span> there is also the <span class="fu">permyr</span> <span class="op">(</span>`‚Ä±`<span class="op">)</span> operator<span class="op">,</span> which is <span class="dt">short</span> <span class="cf">for</span> permyriad and represents `Declock` `phrases` <span class="op">(</span><span class="dv">10</span>‚Åª‚Å¥<span class="op">).</span></span>
<span id="cb176-2878"><a href="#cb176-2878" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2879"><a href="#cb176-2879" aria-hidden="true" tabindex="-1"></a>### Pently schedules as seq spreads<span class="op">,</span> splices<span class="op">,</span> and sleds <span class="op">{</span>#sec<span class="op">-</span><span class="dv">3</span>s<span class="op">}</span></span>
<span id="cb176-2880"><a href="#cb176-2880" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2881"><a href="#cb176-2881" aria-hidden="true" tabindex="-1"></a>We can use `seq` `spreads` to describe the <span class="op">[</span>`pently`schedules<span class="op">](</span>#sched<span class="op">).</span> `Schedule` `<span class="dv">5</span>` is particularly interesting because it includes all of the days of the year<span class="op">.</span> `Spreads` that include every item can be written as `<span class="op">&gt;</span>` or `<span class="op">&lt;</span>`<span class="op">,</span> but `seq` `spreads` must have at least <span class="dv">5</span> values<span class="op">.</span> <span class="fu">The</span> `Schedule` `<span class="dv">5</span>` `seq` `spread` `‚â´‚â´<span class="fl">.38</span><span class="op">&gt;</span><span class="fl">.24</span>` has <span class="dv">4</span> blank values<span class="op">,</span> which represent the <span class="kw">default</span> `start`<span class="op">,</span> `span`<span class="op">,</span> `split`<span class="op">,</span> and `space`<span class="op">.</span> <span class="fu">Similarly</span><span class="op">,</span> the `Schedule` `<span class="dv">4</span>` `seq` `spread` `‚â´<span class="dv">4</span>‚â´<span class="fl">.35</span><span class="op">&gt;</span><span class="fl">.3</span>` has <span class="dv">3</span> blank values<span class="op">,</span> which represent the <span class="kw">default</span> `start`<span class="op">,</span> `span`<span class="op">,</span> and `space`<span class="op">.</span> <span class="fu">The</span> `Schedule` `<span class="dv">2</span>` and `Schedule` `<span class="dv">3</span>` `seq` `spreads`<span class="op">,</span> `‚â´<span class="dv">2</span><span class="op">&gt;</span><span class="dv">3</span><span class="op">&gt;</span><span class="fl">.2</span><span class="op">&gt;</span><span class="fl">.6</span>` and `‚â´<span class="dv">3</span><span class="op">&gt;</span><span class="dv">2</span><span class="op">&gt;</span><span class="fl">.3</span><span class="op">&gt;</span><span class="fl">.4</span>`<span class="op">,</span> respectively<span class="op">,</span> only have <span class="dv">2</span> blank values<span class="op">,</span> the `start` and the `span`<span class="op">.</span> <span class="fu">As</span> an alternative to `seq` `spreads` and `seq` `slices`<span class="op">,</span> we can use `slice`<span class="op">-</span>`spread` hybrids called `sleds` or `spread`<span class="op">-</span>`slice` hybrids called `splices`<span class="op">.</span> `Sleds` put the `slice` elements <span class="fu">first</span> <span class="op">(</span>`start<span class="op">:</span>stop<span class="op">:</span>step<span class="op">:</span>start<span class="op">&gt;</span>span<span class="op">&gt;</span>split<span class="op">&gt;</span>space`<span class="op">),</span> <span class="cf">while</span> `splices` start with the `spread` <span class="fu">elements</span> <span class="op">(</span>`start<span class="op">&gt;</span>span<span class="op">&gt;</span>split<span class="op">&gt;</span>space<span class="op">&gt;</span>start<span class="op">:</span>stop<span class="op">:</span>step`<span class="op">).</span> <span class="fu">The</span> `pently` schedules are easiest to write as `seq` `spreads` and `splices`<span class="op">,</span> as shown in <span class="at">@tbl</span><span class="op">-</span>sched<span class="op">.</span></span>
<span id="cb176-2882"><a href="#cb176-2882" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2883"><a href="#cb176-2883" aria-hidden="true" tabindex="-1"></a>#### <span class="at">@tbl</span><span class="op">-</span>sched</span>
<span id="cb176-2884"><a href="#cb176-2884" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2885"><a href="#cb176-2885" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span> <span class="op">{.</span><span class="fu">callout</span><span class="op">-</span>note collapse<span class="op">=</span><span class="st">"true"</span> title<span class="op">=</span><span class="st">"Click to toggle table expansion"</span> icon<span class="op">=</span><span class="st">"false"</span><span class="op">}</span></span>
<span id="cb176-2886"><a href="#cb176-2886" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Schedule <span class="op">|</span> seq spread    <span class="op">|</span> splice       <span class="op">|</span> sled                <span class="op">|</span> seq slice           <span class="op">|</span></span>
<span id="cb176-2887"><a href="#cb176-2887" aria-hidden="true" tabindex="-1"></a><span class="op">|----------|---------------|--------------|---------------------|---------------------|</span></span>
<span id="cb176-2888"><a href="#cb176-2888" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="dv">2</span>        <span class="op">|</span> ‚â´<span class="dv">2</span>\<span class="op">&gt;</span><span class="dv">3</span>\<span class="op">&gt;</span><span class="fl">.2</span>\<span class="op">&gt;</span><span class="fl">.6</span> <span class="op">|</span> ‚â´<span class="dv">2</span>\<span class="op">&gt;</span><span class="dv">3</span>\<span class="op">&gt;</span><span class="fl">.2</span><span class="op">:</span><span class="fl">.8</span> <span class="op">|</span> <span class="op">:</span><span class="dv">365</span><span class="op">:</span><span class="dv">1</span><span class="op">,</span><span class="dv">4</span><span class="op">:</span><span class="fl">.2</span>\<span class="op">&gt;</span><span class="fl">.6</span>     <span class="op">|</span> <span class="op">:</span><span class="dv">365</span><span class="op">:</span><span class="dv">1</span><span class="op">,</span><span class="dv">4</span><span class="op">:</span><span class="fl">.2</span><span class="op">:</span><span class="fl">.8</span>      <span class="op">|</span></span>
<span id="cb176-2889"><a href="#cb176-2889" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="dv">3</span>        <span class="op">|</span> ‚â´<span class="dv">3</span>\<span class="op">&gt;</span><span class="dv">2</span>\<span class="op">&gt;</span><span class="fl">.3</span>\<span class="op">&gt;</span><span class="fl">.4</span> <span class="op">|</span> ‚â´<span class="dv">3</span>\<span class="op">&gt;</span><span class="dv">2</span>\<span class="op">&gt;</span><span class="fl">.3</span><span class="op">:</span><span class="fl">.7</span> <span class="op">|</span> <span class="op">:</span><span class="dv">365</span><span class="op">:</span><span class="dv">1</span><span class="op">,</span><span class="dv">1</span><span class="op">,</span><span class="dv">3</span><span class="op">:</span><span class="fl">.3</span>\<span class="op">&gt;</span><span class="fl">.4</span>   <span class="op">|</span> <span class="op">:</span><span class="dv">365</span><span class="op">:</span><span class="dv">1</span><span class="op">,</span><span class="dv">1</span><span class="op">,</span><span class="dv">3</span><span class="op">:</span><span class="fl">.3</span><span class="op">:</span><span class="fl">.7</span>    <span class="op">|</span></span>
<span id="cb176-2890"><a href="#cb176-2890" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="dv">4</span>        <span class="op">|</span> ‚â´<span class="dv">4</span>‚â´<span class="fl">.35</span>\<span class="op">&gt;</span><span class="fl">.3</span>    <span class="op">|</span> ‚â´<span class="dv">4</span>‚â´<span class="fl">.35</span><span class="op">:</span><span class="fl">.65</span>   <span class="op">|</span> <span class="op">:</span><span class="dv">365</span><span class="op">:</span><span class="dv">3</span>\<span class="op">*</span><span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">:</span><span class="fl">.35</span>\<span class="op">&gt;</span><span class="fl">.3</span> <span class="op">|</span> <span class="op">:</span><span class="dv">365</span><span class="op">:</span><span class="dv">3</span>\<span class="op">*</span><span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">:</span><span class="fl">.35</span><span class="op">:</span><span class="fl">.65</span> <span class="op">|</span></span>
<span id="cb176-2891"><a href="#cb176-2891" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="dv">5</span>        <span class="op">|</span> ‚â´‚â´<span class="fl">.38</span>\<span class="op">&gt;</span><span class="fl">.24</span>    <span class="op">|</span> ‚â´‚â´<span class="fl">.38</span><span class="op">:</span><span class="fl">.62</span>    <span class="op">|</span> <span class="op">:</span><span class="dv">365</span><span class="op">::</span><span class="fl">.38</span>\<span class="op">&gt;</span><span class="fl">.24</span>      <span class="op">|</span> <span class="op">:</span><span class="dv">365</span><span class="op">::</span><span class="fl">.38</span><span class="op">:</span><span class="fl">.62</span>       <span class="op">|</span></span>
<span id="cb176-2892"><a href="#cb176-2892" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2893"><a href="#cb176-2893" aria-hidden="true" tabindex="-1"></a><span class="op">:</span> The seq spreads<span class="op">,</span> splices<span class="op">,</span> and sleds that represent the <span class="dv">4</span> pently schedules <span class="op">{</span>#tbl<span class="op">-</span>sched<span class="op">}</span></span>
<span id="cb176-2894"><a href="#cb176-2894" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span></span>
<span id="cb176-2895"><a href="#cb176-2895" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2896"><a href="#cb176-2896" aria-hidden="true" tabindex="-1"></a>## Yearly transition <span class="op">{</span>#sec<span class="op">-</span>trans<span class="op">}</span></span>
<span id="cb176-2897"><a href="#cb176-2897" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2898"><a href="#cb176-2898" aria-hidden="true" tabindex="-1"></a>### Common years <span class="op">{</span>#sec<span class="op">-</span>transc<span class="op">}</span></span>
<span id="cb176-2899"><a href="#cb176-2899" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2900"><a href="#cb176-2900" aria-hidden="true" tabindex="-1"></a>The `pently` schedules are important <span class="cf">for</span> the transition between years<span class="op">.</span> <span class="fu">In</span> common years<span class="op">,</span> the last `dek` of the <span class="fu">year</span> <span class="op">(</span>`Dek` `<span class="dv">36</span>`<span class="op">)</span> contains the last `pent` of the current <span class="fu">year</span> <span class="op">(</span>`Pent` `<span class="dv">72</span>`<span class="op">),</span> and the first `pent` of the subsequent <span class="fu">year</span> <span class="op">(</span>`Pent` `<span class="dv">0</span>`<span class="op">).</span> <span class="fu">If</span> these two `pents` follow the <span class="kw">default</span> `pently` schedule<span class="op">,</span> `Schedule` `<span class="dv">3</span>`<span class="op">,</span> the natural rhythm of <span class="dv">3</span> workdays followed by <span class="dv">2</span> rest days continues undisrupted<span class="op">.</span> <span class="at">@tbl</span><span class="op">-</span>common shows the positive and negative `doties`<span class="op">,</span> names<span class="op">,</span> and <span class="fu">types</span> <span class="op">(</span>work or rest<span class="op">)</span> of the days in `Dek` `<span class="dv">36</span>` in common years<span class="op">.</span> <span class="fu">Notably</span><span class="op">,</span> <span class="cf">while</span> the positive `doties` <span class="cf">continue</span> counting past the end of the year<span class="op">,</span> the negative `doties` of the current year turn into the positive `doties` of the subsequent year<span class="op">.</span> <span class="fu">The</span> negative `doties` in `Dek` `<span class="dv">36</span>` can thus serve as the bridge from the one year to the next<span class="op">.</span></span>
<span id="cb176-2901"><a href="#cb176-2901" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2902"><a href="#cb176-2902" aria-hidden="true" tabindex="-1"></a>#### <span class="at">@tbl</span><span class="op">-</span>common</span>
<span id="cb176-2903"><a href="#cb176-2903" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2904"><a href="#cb176-2904" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span> <span class="op">{.</span><span class="fu">callout</span><span class="op">-</span>note collapse<span class="op">=</span><span class="st">"true"</span> title<span class="op">=</span><span class="st">"Click to toggle table expansion"</span> icon<span class="op">=</span><span class="st">"false"</span><span class="op">}</span></span>
<span id="cb176-2905"><a href="#cb176-2905" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Pos <span class="op">|</span> Neg <span class="op">|</span> <span class="bu">Name</span>   <span class="op">|</span> <span class="bu">Type</span> <span class="op">|</span></span>
<span id="cb176-2906"><a href="#cb176-2906" aria-hidden="true" tabindex="-1"></a><span class="op">|-----|-----|--------|------|</span></span>
<span id="cb176-2907"><a href="#cb176-2907" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="dv">360</span> <span class="op">|</span> <span class="op">-</span><span class="dv">5</span>  <span class="op">|</span> Nulday <span class="op">|</span> work <span class="op">|</span></span>
<span id="cb176-2908"><a href="#cb176-2908" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="dv">361</span> <span class="op">|</span> <span class="op">-</span><span class="dv">4</span>  <span class="op">|</span> Unoday <span class="op">|</span> work <span class="op">|</span></span>
<span id="cb176-2909"><a href="#cb176-2909" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="dv">362</span> <span class="op">|</span> <span class="op">-</span><span class="dv">3</span>  <span class="op">|</span> Duoday <span class="op">|</span> work <span class="op">|</span></span>
<span id="cb176-2910"><a href="#cb176-2910" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="dv">363</span> <span class="op">|</span> <span class="op">-</span><span class="dv">2</span>  <span class="op">|</span> Triday <span class="op">|</span> rest <span class="op">|</span></span>
<span id="cb176-2911"><a href="#cb176-2911" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="dv">364</span> <span class="op">|</span> <span class="op">-</span><span class="dv">1</span>  <span class="op">|</span> Quaday <span class="op">|</span> rest <span class="op">|</span></span>
<span id="cb176-2912"><a href="#cb176-2912" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="dv">365</span> <span class="op">|</span> <span class="dv">0</span>   <span class="op">|</span> Nulday <span class="op">|</span> work <span class="op">|</span></span>
<span id="cb176-2913"><a href="#cb176-2913" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="dv">366</span> <span class="op">|</span> <span class="dv">1</span>   <span class="op">|</span> Unoday <span class="op">|</span> work <span class="op">|</span></span>
<span id="cb176-2914"><a href="#cb176-2914" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="dv">367</span> <span class="op">|</span> <span class="dv">2</span>   <span class="op">|</span> Duoday <span class="op">|</span> work <span class="op">|</span></span>
<span id="cb176-2915"><a href="#cb176-2915" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="dv">368</span> <span class="op">|</span> <span class="dv">3</span>   <span class="op">|</span> Triday <span class="op">|</span> rest <span class="op">|</span></span>
<span id="cb176-2916"><a href="#cb176-2916" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="dv">369</span> <span class="op">|</span> <span class="dv">4</span>   <span class="op">|</span> Quaday <span class="op">|</span> rest <span class="op">|</span></span>
<span id="cb176-2917"><a href="#cb176-2917" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2918"><a href="#cb176-2918" aria-hidden="true" tabindex="-1"></a><span class="op">:</span> The days in Dek <span class="dv">36</span> in common years <span class="op">{</span>#tbl<span class="op">-</span>common<span class="op">}</span></span>
<span id="cb176-2919"><a href="#cb176-2919" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span></span>
<span id="cb176-2920"><a href="#cb176-2920" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2921"><a href="#cb176-2921" aria-hidden="true" tabindex="-1"></a>### Leap years <span class="op">{</span>#sec<span class="op">-</span>transl<span class="op">}</span></span>
<span id="cb176-2922"><a href="#cb176-2922" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2923"><a href="#cb176-2923" aria-hidden="true" tabindex="-1"></a>In leap years<span class="op">,</span> `Dek` `<span class="dv">36</span>` contains the last <span class="dv">6</span> days of the current year and the first <span class="dv">4</span> days of the subsequent year<span class="op">.</span> <span class="fu">Interestingly</span><span class="op">,</span> `Dek` `<span class="dv">36</span>` always contain <span class="dv">6</span> workdays and <span class="dv">4</span> restdays<span class="op">,</span> just like every other `dek`<span class="op">,</span> but in leaps years these days <span class="cf">do</span> not follow the typical order of `Schedule` `<span class="dv">3</span>`<span class="op">.</span> <span class="fu">Leap</span> years end in <span class="dv">3</span> restdays instead of <span class="dv">2</span><span class="op">,</span> because Leap <span class="fu">Day</span> <span class="op">(</span>`Day` `<span class="dv">365</span>`<span class="op">)</span> is always a holiday<span class="op">.</span> <span class="fu">Leap</span> day is always a `Penday` and always followed by a `Nulday`<span class="op">.</span> <span class="fu">After</span> Leap Day<span class="op">,</span> the normal rhythm of `Schedule` `<span class="dv">3</span>` resumes<span class="op">.</span> <span class="at">@tbl</span><span class="op">-</span>leap shows the positive and negative `doties` of the days in `Dek` `<span class="dv">36</span>` in leap years<span class="op">,</span> as well as their names and their <span class="fu">types</span> <span class="op">(</span>work or rest<span class="op">).</span></span>
<span id="cb176-2924"><a href="#cb176-2924" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2925"><a href="#cb176-2925" aria-hidden="true" tabindex="-1"></a>#### <span class="at">@tbl</span><span class="op">-</span>leap</span>
<span id="cb176-2926"><a href="#cb176-2926" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2927"><a href="#cb176-2927" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span> <span class="op">{.</span><span class="fu">callout</span><span class="op">-</span>note collapse<span class="op">=</span><span class="st">"true"</span> title<span class="op">=</span><span class="st">"Click to toggle table expansion"</span> icon<span class="op">=</span><span class="st">"false"</span><span class="op">}</span></span>
<span id="cb176-2928"><a href="#cb176-2928" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Pos <span class="op">|</span> Neg <span class="op">|</span> <span class="bu">Name</span>   <span class="op">|</span> <span class="bu">Type</span> <span class="op">|</span></span>
<span id="cb176-2929"><a href="#cb176-2929" aria-hidden="true" tabindex="-1"></a><span class="op">|-----|-----|--------|------|</span></span>
<span id="cb176-2930"><a href="#cb176-2930" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="dv">360</span> <span class="op">|</span> <span class="op">-</span><span class="dv">6</span>  <span class="op">|</span> Nulday <span class="op">|</span> work <span class="op">|</span></span>
<span id="cb176-2931"><a href="#cb176-2931" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="dv">361</span> <span class="op">|</span> <span class="op">-</span><span class="dv">5</span>  <span class="op">|</span> Unoday <span class="op">|</span> work <span class="op">|</span></span>
<span id="cb176-2932"><a href="#cb176-2932" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="dv">362</span> <span class="op">|</span> <span class="op">-</span><span class="dv">4</span>  <span class="op">|</span> Duoday <span class="op">|</span> work <span class="op">|</span></span>
<span id="cb176-2933"><a href="#cb176-2933" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="dv">363</span> <span class="op">|</span> <span class="op">-</span><span class="dv">3</span>  <span class="op">|</span> Triday <span class="op">|</span> rest <span class="op">|</span></span>
<span id="cb176-2934"><a href="#cb176-2934" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="dv">364</span> <span class="op">|</span> <span class="op">-</span><span class="dv">2</span>  <span class="op">|</span> Quaday <span class="op">|</span> rest <span class="op">|</span></span>
<span id="cb176-2935"><a href="#cb176-2935" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="dv">365</span> <span class="op">|</span> <span class="op">-</span><span class="dv">1</span>  <span class="op">|</span> Penday <span class="op">|</span> rest <span class="op">|</span></span>
<span id="cb176-2936"><a href="#cb176-2936" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="dv">366</span> <span class="op">|</span> <span class="dv">0</span>   <span class="op">|</span> Nulday <span class="op">|</span> work <span class="op">|</span></span>
<span id="cb176-2937"><a href="#cb176-2937" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="dv">367</span> <span class="op">|</span> <span class="dv">1</span>   <span class="op">|</span> Unoday <span class="op">|</span> work <span class="op">|</span></span>
<span id="cb176-2938"><a href="#cb176-2938" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="dv">368</span> <span class="op">|</span> <span class="dv">2</span>   <span class="op">|</span> Duoday <span class="op">|</span> work <span class="op">|</span></span>
<span id="cb176-2939"><a href="#cb176-2939" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="dv">369</span> <span class="op">|</span> <span class="dv">3</span>   <span class="op">|</span> Triday <span class="op">|</span> rest <span class="op">|</span></span>
<span id="cb176-2940"><a href="#cb176-2940" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2941"><a href="#cb176-2941" aria-hidden="true" tabindex="-1"></a><span class="op">:</span> The days in Dek <span class="dv">36</span> in leap years <span class="op">{</span>#tbl<span class="op">-</span>leap<span class="op">}</span></span>
<span id="cb176-2942"><a href="#cb176-2942" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span></span>
<span id="cb176-2943"><a href="#cb176-2943" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2944"><a href="#cb176-2944" aria-hidden="true" tabindex="-1"></a>## Holidays <span class="op">{</span>#sec<span class="op">-</span>holiday<span class="op">}</span></span>
<span id="cb176-2945"><a href="#cb176-2945" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2946"><a href="#cb176-2946" aria-hidden="true" tabindex="-1"></a>Leap Day is a important holiday because it occurs only once every four years except <span class="cf">for</span> years that start centuries not divisible by <span class="dv">400</span> and it results in the only time when there are <span class="dv">3</span> consecutive restdays in `Decalendar`<span class="op">.</span> <span class="fu">Another</span> `Decalendar` holiday that only occurs in leap years is Dyad Day<span class="op">.</span> <span class="fu">At</span> noon on Dyad Day<span class="op">,</span> the positive and negative `<span class="op">.</span><span class="fu">y</span>` format `stamps` are the <span class="fu">same</span> <span class="op">(</span>`<span class="op">+</span><span class="fl">183.5</span>` and `<span class="op">-</span><span class="fl">183.5</span>`<span class="op">),</span> meaning that <span class="fl">183.5</span> days have passed in the year and <span class="fl">183.5</span> days remain in the year<span class="op">.</span> <span class="fu">Unlike</span> Leap Day<span class="op">,</span> Dyad Day is naturally a day off<span class="op">.</span> <span class="fu">Many</span> Gregorian calendar holidays just so happen to also fall on the first day of a `pent` <span class="op">(</span>`Nulday` or `Quaday`<span class="op">).</span> <span class="at">@tbl</span><span class="op">-</span>holiday lists <span class="dv">8</span> such holidays and their `doty`<span class="op">,</span> `dotm`<span class="op">,</span> and Gregorian calendar dates<span class="op">.</span></span>
<span id="cb176-2947"><a href="#cb176-2947" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2948"><a href="#cb176-2948" aria-hidden="true" tabindex="-1"></a>#### <span class="at">@tbl</span><span class="op">-</span>holiday</span>
<span id="cb176-2949"><a href="#cb176-2949" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2950"><a href="#cb176-2950" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span> <span class="op">{.</span><span class="fu">callout</span><span class="op">-</span>note collapse<span class="op">=</span><span class="st">"true"</span> title<span class="op">=</span><span class="st">"Click to toggle table expansion"</span> icon<span class="op">=</span><span class="st">"false"</span><span class="op">}</span></span>
<span id="cb176-2951"><a href="#cb176-2951" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="bu">Name</span>             <span class="op">|</span> doty <span class="op">|</span> dotm <span class="op">|</span> date        <span class="op">|</span></span>
<span id="cb176-2952"><a href="#cb176-2952" aria-hidden="true" tabindex="-1"></a><span class="op">|------------------|------|------|-------------|</span></span>
<span id="cb176-2953"><a href="#cb176-2953" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Cinco de Mayo    <span class="op">|</span> <span class="dv">65</span>   <span class="op">|</span> <span class="dv">2</span><span class="op">+</span><span class="bn">04</span> <span class="op">|</span> May <span class="dv">5</span>       <span class="op">|</span></span>
<span id="cb176-2954"><a href="#cb176-2954" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Flag Day         <span class="op">|</span> <span class="dv">105</span>  <span class="op">|</span> <span class="dv">3</span><span class="op">+</span><span class="dv">13</span> <span class="op">|</span> June <span class="dv">14</span>     <span class="op">|</span></span>
<span id="cb176-2955"><a href="#cb176-2955" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Juneteenth Day   <span class="op">|</span> <span class="dv">110</span>  <span class="op">|</span> <span class="dv">3</span><span class="op">+</span><span class="dv">18</span> <span class="op">|</span> June <span class="dv">19</span>     <span class="op">|</span></span>
<span id="cb176-2956"><a href="#cb176-2956" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Independence Day <span class="op">|</span> <span class="dv">125</span>  <span class="op">|</span> <span class="dv">4</span><span class="op">+</span><span class="bn">03</span> <span class="op">|</span> July <span class="dv">4</span>      <span class="op">|</span></span>
<span id="cb176-2957"><a href="#cb176-2957" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> All Saints<span class="er">'</span> Day  <span class="op">|</span> <span class="dv">245</span>  <span class="op">|</span> <span class="dv">8</span><span class="op">+</span><span class="bn">00</span> <span class="op">|</span> November <span class="dv">1</span>  <span class="op">|</span></span>
<span id="cb176-2958"><a href="#cb176-2958" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Veterans<span class="er">'</span> Day    <span class="op">|</span> <span class="dv">255</span>  <span class="op">|</span> <span class="dv">8</span><span class="op">+</span><span class="dv">10</span> <span class="op">|</span> November <span class="dv">11</span> <span class="op">|</span></span>
<span id="cb176-2959"><a href="#cb176-2959" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Boxing Day       <span class="op">|</span> <span class="dv">300</span>  <span class="op">|</span> <span class="dv">9</span><span class="op">+</span><span class="dv">25</span> <span class="op">|</span> December <span class="dv">26</span> <span class="op">|</span></span>
<span id="cb176-2960"><a href="#cb176-2960" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> New Year<span class="er">'</span>s Eve   <span class="op">|</span> <span class="dv">305</span>  <span class="op">|</span> <span class="dv">9</span><span class="op">+</span><span class="dv">31</span> <span class="op">|</span> December <span class="dv">31</span> <span class="op">|</span></span>
<span id="cb176-2961"><a href="#cb176-2961" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2962"><a href="#cb176-2962" aria-hidden="true" tabindex="-1"></a><span class="op">:</span> Gregorian calendar holidays that happen to fall on `Decalendar` restdays <span class="op">{</span>#tbl<span class="op">-</span>holiday<span class="op">}</span></span>
<span id="cb176-2963"><a href="#cb176-2963" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span></span>
<span id="cb176-2964"><a href="#cb176-2964" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2965"><a href="#cb176-2965" aria-hidden="true" tabindex="-1"></a><span class="bu">Any</span> holiday with a <span class="fu">fixed</span> <span class="op">(</span>rather than floating<span class="op">)</span> date in the Gregorian calendar can easily be added to `Decalendar`<span class="op">.</span> <span class="fu">Holidays</span> with floating dates <span class="cf">do</span> not follow easily recognizable patterns<span class="op">.</span> `Decalendar` recommends redefining such dates to always be on the same `doty` every year<span class="op">.</span> <span class="fu">For</span> example<span class="op">,</span> November <span class="dv">25</span> <span class="op">(</span>`Day` `<span class="dv">269</span>`<span class="op">)</span> is a sensible fixed date <span class="cf">for</span> Thanksgiving<span class="op">,</span> because it is exactly <span class="dv">30</span> days before <span class="fu">Christmas</span> <span class="op">(</span>December <span class="dv">25</span><span class="op">,</span> `Day` `<span class="dv">299</span>`<span class="op">)</span> and falls on a `Decalendar` restday<span class="op">.</span> <span class="fu">When</span> assigning fixed dates to floating date holidays<span class="op">,</span> we should choose `Decalendar` restdays to avoid disrupting the normal rhythm of the `pently` schedules<span class="op">.</span> <span class="fu">Instead</span> of gaining days off because of holidays<span class="op">,</span> workers should gain additional time off from their employers<span class="op">.</span> <span class="fu">In</span> the United States<span class="op">,</span> the <span class="dv">11</span> federal <span class="fu">holidays</span> <span class="op">(</span><span class="dv">88</span> hours <span class="op">=</span> <span class="fl">3.6</span>ÃÖ dimes<span class="op">)</span> would translate to <span class="dv">9</span> `Schedule` `<span class="dv">3</span>` days <span class="fu">offs</span> <span class="op">(</span><span class="fl">3.6</span> dimes<span class="op">).</span></span>
<span id="cb176-2966"><a href="#cb176-2966" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2967"><a href="#cb176-2967" aria-hidden="true" tabindex="-1"></a># References</span>
<span id="cb176-2968"><a href="#cb176-2968" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2969"><a href="#cb176-2969" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span> <span class="op">{</span>#refs<span class="op">}</span></span>
<span id="cb176-2970"><a href="#cb176-2970" aria-hidden="true" tabindex="-1"></a><span class="op">:::</span></span>
<span id="cb176-2971"><a href="#cb176-2971" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-2972"><a href="#cb176-2972" aria-hidden="true" tabindex="-1"></a># Appendix <span class="op">{</span>#appendix<span class="op">}</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>